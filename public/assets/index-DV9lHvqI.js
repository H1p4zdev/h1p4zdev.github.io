var rx=t=>{throw TypeError(t)};var rg=(t,e,n)=>e.has(t)||rx("Cannot "+n);var L=(t,e,n)=>(rg(t,e,"read from private field"),n?n.call(t):e.get(t)),ge=(t,e,n)=>e.has(t)?rx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ie=(t,e,n,r)=>(rg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ne=(t,e,n)=>(rg(t,e,"access private method"),n);var dh=(t,e,n,r)=>({set _(s){ie(t,e,s,n)},get _(){return L(t,e,r)}});function lM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ib(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ob={exports:{}},$p={},ab={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),cM=Symbol.for("react.portal"),uM=Symbol.for("react.fragment"),dM=Symbol.for("react.strict_mode"),hM=Symbol.for("react.profiler"),fM=Symbol.for("react.provider"),pM=Symbol.for("react.context"),mM=Symbol.for("react.forward_ref"),gM=Symbol.for("react.suspense"),yM=Symbol.for("react.memo"),vM=Symbol.for("react.lazy"),sx=Symbol.iterator;function _M(t){return t===null||typeof t!="object"?null:(t=sx&&t[sx]||t["@@iterator"],typeof t=="function"?t:null)}var lb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cb=Object.assign,ub={};function ql(t,e,n){this.props=t,this.context=e,this.refs=ub,this.updater=n||lb}ql.prototype.isReactComponent={};ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function db(){}db.prototype=ql.prototype;function __(t,e,n){this.props=t,this.context=e,this.refs=ub,this.updater=n||lb}var w_=__.prototype=new db;w_.constructor=__;cb(w_,ql.prototype);w_.isPureReactComponent=!0;var ix=Array.isArray,hb=Object.prototype.hasOwnProperty,E_={current:null},fb={key:!0,ref:!0,__self:!0,__source:!0};function pb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hb.call(e,r)&&!fb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:wd,type:t,key:i,ref:o,props:s,_owner:E_.current}}function wM(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x_(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function EM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ox=/\/+/g;function sg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EM(""+t.key):e.toString(36)}function Hh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wd:case cM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sg(o,0):r,ix(s)?(n="",t!=null&&(n=t.replace(ox,"$&/")+"/"),Hh(s,e,n,"",function(c){return c})):s!=null&&(x_(s)&&(s=wM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ox,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ix(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sg(i,a);o+=Hh(i,e,n,l,s)}else if(l=_M(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sg(i,a++),o+=Hh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hh(t,e,n){if(t==null)return t;var r=[],s=0;return Hh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function xM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},qh={transition:null},TM={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:qh,ReactCurrentOwner:E_};function mb(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:hh,forEach:function(t,e,n){hh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hh(t,function(){e++}),e},toArray:function(t){return hh(t,function(e){return e})||[]},only:function(t){if(!x_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=ql;Ae.Fragment=uM;Ae.Profiler=hM;Ae.PureComponent=__;Ae.StrictMode=dM;Ae.Suspense=gM;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TM;Ae.act=mb;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=E_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hb.call(e,l)&&!fb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wd,type:t.type,key:s,ref:i,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:pM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fM,_context:t},t.Consumer=t};Ae.createElement=pb;Ae.createFactory=function(t){var e=pb.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:mM,render:t}};Ae.isValidElement=x_;Ae.lazy=function(t){return{$$typeof:vM,_payload:{_status:-1,_result:t},_init:xM}};Ae.memo=function(t,e){return{$$typeof:yM,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=qh.transition;qh.transition={};try{t()}finally{qh.transition=e}};Ae.unstable_act=mb;Ae.useCallback=function(t,e){return _n.current.useCallback(t,e)};Ae.useContext=function(t){return _n.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return _n.current.useEffect(t,e)};Ae.useId=function(){return _n.current.useId()};Ae.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return _n.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};Ae.useRef=function(t){return _n.current.useRef(t)};Ae.useState=function(t){return _n.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return _n.current.useTransition()};Ae.version="18.3.1";ab.exports=Ae;var A=ab.exports;const ke=ib(A),CM=lM({__proto__:null,default:ke},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM=A,SM=Symbol.for("react.element"),bM=Symbol.for("react.fragment"),kM=Object.prototype.hasOwnProperty,RM=IM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AM={key:!0,ref:!0,__self:!0,__source:!0};function gb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kM.call(e,r)&&!AM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:SM,type:t,key:i,ref:o,props:s,_owner:RM.current}}$p.Fragment=bM;$p.jsx=gb;$p.jsxs=gb;ob.exports=$p;var m=ob.exports,yb={exports:{}},Gn={},vb={exports:{}},_b={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var oe=z.length;z.push(Y);e:for(;0<oe;){var we=oe-1>>>1,Pe=z[we];if(0<s(Pe,Y))z[we]=Y,z[oe]=Pe,oe=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],oe=z.pop();if(oe!==Y){z[0]=oe;e:for(var we=0,Pe=z.length,Be=Pe>>>1;we<Be;){var qt=2*(we+1)-1,En=z[qt],On=qt+1,Gt=z[On];if(0>s(En,oe))On<Pe&&0>s(Gt,En)?(z[we]=Gt,z[On]=oe,we=On):(z[we]=En,z[qt]=oe,we=qt);else if(On<Pe&&0>s(Gt,oe))z[we]=Gt,z[On]=oe,we=On;else break e}}return Y}function s(z,Y){var oe=z.sortIndex-Y.sortIndex;return oe!==0?oe:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,g=!1,w=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=z)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function N(z){if(_=!1,C(z),!w)if(n(l)!==null)w=!0,ce(M);else{var Y=n(c);Y!==null&&me(N,Y.startTime-z)}}function M(z,Y){w=!1,_&&(_=!1,x(T),T=-1),g=!0;var oe=f;try{for(C(Y),h=n(l);h!==null&&(!(h.expirationTime>Y)||z&&!O());){var we=h.callback;if(typeof we=="function"){h.callback=null,f=h.priorityLevel;var Pe=we(h.expirationTime<=Y);Y=t.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===n(l)&&r(l),C(Y)}else r(l);h=n(l)}if(h!==null)var Be=!0;else{var qt=n(c);qt!==null&&me(N,qt.startTime-Y),Be=!1}return Be}finally{h=null,f=oe,g=!1}}var F=!1,S=null,T=-1,b=5,k=-1;function O(){return!(t.unstable_now()-k<b)}function P(){if(S!==null){var z=t.unstable_now();k=z;var Y=!0;try{Y=S(!0,z)}finally{Y?R():(F=!1,S=null)}}else F=!1}var R;if(typeof v=="function")R=function(){v(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ue=W.port2;W.port1.onmessage=P,R=function(){ue.postMessage(null)}}else R=function(){E(P,0)};function ce(z){S=z,F||(F=!0,R())}function me(z,Y){T=E(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,ce(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var oe=f;f=Y;try{return z()}finally{f=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var oe=f;f=z;try{return Y()}finally{f=oe}},t.unstable_scheduleCallback=function(z,Y,oe){var we=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?we+oe:we):oe=we,z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=oe+Pe,z={id:d++,callback:Y,priorityLevel:z,startTime:oe,expirationTime:Pe,sortIndex:-1},oe>we?(z.sortIndex=oe,e(c,z),n(l)===null&&z===n(c)&&(_?(x(T),T=-1):_=!0,me(N,oe-we))):(z.sortIndex=Pe,e(l,z),w||g||(w=!0,ce(M))),z},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(z){var Y=f;return function(){var oe=f;f=Y;try{return z.apply(this,arguments)}finally{f=oe}}}})(_b);vb.exports=_b;var PM=vb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM=A,Wn=PM;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wb=new Set,Su={};function la(t,e){wl(t,e),wl(t+"Capture",e)}function wl(t,e){for(Su[t]=e,t=0;t<e.length;t++)wb.add(e[t])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hy=Object.prototype.hasOwnProperty,OM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ax={},lx={};function DM(t){return hy.call(lx,t)?!0:hy.call(ax,t)?!1:OM.test(t)?lx[t]=!0:(ax[t]=!0,!1)}function MM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LM(t,e,n,r){if(e===null||typeof e>"u"||MM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wt[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var T_=/[\-:]([a-z])/g;function C_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(T_,C_);Wt[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(T_,C_);Wt[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(T_,C_);Wt[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function I_(t,e,n,r){var s=Wt.hasOwnProperty(e)?Wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LM(e,n,s,r)&&(n=null),r||s===null?DM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var js=NM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=Symbol.for("react.element"),Aa=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),S_=Symbol.for("react.strict_mode"),fy=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),xb=Symbol.for("react.context"),b_=Symbol.for("react.forward_ref"),py=Symbol.for("react.suspense"),my=Symbol.for("react.suspense_list"),k_=Symbol.for("react.memo"),ei=Symbol.for("react.lazy"),Tb=Symbol.for("react.offscreen"),cx=Symbol.iterator;function Tc(t){return t===null||typeof t!="object"?null:(t=cx&&t[cx]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,ig;function $c(t){if(ig===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ig=e&&e[1]||""}return`
`+ig+t}var og=!1;function ag(t,e){if(!t||og)return"";og=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{og=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$c(t):""}function FM(t){switch(t.tag){case 5:return $c(t.type);case 16:return $c("Lazy");case 13:return $c("Suspense");case 19:return $c("SuspenseList");case 0:case 2:case 15:return t=ag(t.type,!1),t;case 11:return t=ag(t.type.render,!1),t;case 1:return t=ag(t.type,!0),t;default:return""}}function gy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Aa:return"Portal";case fy:return"Profiler";case S_:return"StrictMode";case py:return"Suspense";case my:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xb:return(t.displayName||"Context")+".Consumer";case Eb:return(t._context.displayName||"Context")+".Provider";case b_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k_:return e=t.displayName||null,e!==null?e:gy(t.type)||"Memo";case ei:e=t._payload,t=t._init;try{return gy(t(e))}catch{}}return null}function VM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gy(e);case 8:return e===S_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jM(t){var e=Cb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ph(t){t._valueTracker||(t._valueTracker=jM(t))}function Ib(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yy(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sb(t,e){e=e.checked,e!=null&&I_(t,"checked",e,!1)}function vy(t,e){Sb(t,e);var n=Di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_y(t,e.type,n):e.hasOwnProperty("defaultValue")&&_y(t,e.type,Di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _y(t,e,n){(e!=="number"||_f(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zc=Array.isArray;function Ha(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Di(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(zc(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Di(n)}}function bb(t,e){var n=Di(e.value),r=Di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ey(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mh,Rb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mh=mh||document.createElement("div"),mh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UM=["Webkit","ms","Moz","O"];Object.keys(nu).forEach(function(t){UM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nu[e]=nu[t]})});function Ab(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nu.hasOwnProperty(t)&&nu[t]?(""+e).trim():e+"px"}function Pb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ab(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $M=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xy(t,e){if(e){if($M[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Ty(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cy=null;function R_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iy=null,qa=null,Ga=null;function px(t){if(t=Td(t)){if(typeof Iy!="function")throw Error(H(280));var e=t.stateNode;e&&(e=qp(e),Iy(t.stateNode,t.type,e))}}function Nb(t){qa?Ga?Ga.push(t):Ga=[t]:qa=t}function Ob(){if(qa){var t=qa,e=Ga;if(Ga=qa=null,px(t),e)for(t=0;t<e.length;t++)px(e[t])}}function Db(t,e){return t(e)}function Mb(){}var lg=!1;function Lb(t,e,n){if(lg)return t(e,n);lg=!0;try{return Db(t,e,n)}finally{lg=!1,(qa!==null||Ga!==null)&&(Mb(),Ob())}}function ku(t,e){var n=t.stateNode;if(n===null)return null;var r=qp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Sy=!1;if(bs)try{var Cc={};Object.defineProperty(Cc,"passive",{get:function(){Sy=!0}}),window.addEventListener("test",Cc,Cc),window.removeEventListener("test",Cc,Cc)}catch{Sy=!1}function zM(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ru=!1,wf=null,Ef=!1,by=null,BM={onError:function(t){ru=!0,wf=t}};function WM(t,e,n,r,s,i,o,a,l){ru=!1,wf=null,zM.apply(BM,arguments)}function HM(t,e,n,r,s,i,o,a,l){if(WM.apply(this,arguments),ru){if(ru){var c=wf;ru=!1,wf=null}else throw Error(H(198));Ef||(Ef=!0,by=c)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mx(t){if(ca(t)!==t)throw Error(H(188))}function qM(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return mx(s),t;if(i===r)return mx(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Vb(t){return t=qM(t),t!==null?jb(t):null}function jb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jb(t);if(e!==null)return e;t=t.sibling}return null}var Ub=Wn.unstable_scheduleCallback,gx=Wn.unstable_cancelCallback,GM=Wn.unstable_shouldYield,KM=Wn.unstable_requestPaint,yt=Wn.unstable_now,QM=Wn.unstable_getCurrentPriorityLevel,A_=Wn.unstable_ImmediatePriority,$b=Wn.unstable_UserBlockingPriority,xf=Wn.unstable_NormalPriority,YM=Wn.unstable_LowPriority,zb=Wn.unstable_IdlePriority,zp=null,Kr=null;function XM(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(zp,t,void 0,(t.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:eL,ZM=Math.log,JM=Math.LN2;function eL(t){return t>>>=0,t===0?32:31-(ZM(t)/JM|0)|0}var gh=64,yh=4194304;function Bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Bc(a):(i&=o,i!==0&&(r=Bc(i)))}else o=n&~s,o!==0?r=Bc(o):i!==0&&(r=Bc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cr(e),s=1<<n,r|=t[n],e&=~s;return r}function tL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=tL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ky(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bb(){var t=gh;return gh<<=1,!(gh&4194240)&&(gh=64),t}function cg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ed(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cr(e),t[e]=n}function rL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function P_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function Wb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hb,N_,qb,Gb,Kb,Ry=!1,vh=[],wi=null,Ei=null,xi=null,Ru=new Map,Au=new Map,ri=[],sL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yx(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Ic(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Td(e),e!==null&&N_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iL(t,e,n,r,s){switch(e){case"focusin":return wi=Ic(wi,t,e,n,r,s),!0;case"dragenter":return Ei=Ic(Ei,t,e,n,r,s),!0;case"mouseover":return xi=Ic(xi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ru.set(i,Ic(Ru.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Au.set(i,Ic(Au.get(i)||null,t,e,n,r,s)),!0}return!1}function Qb(t){var e=Io(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=Fb(n),e!==null){t.blockedOn=e,Kb(t.priority,function(){qb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ay(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cy=r,n.target.dispatchEvent(r),Cy=null}else return e=Td(n),e!==null&&N_(e),t.blockedOn=n,!1;e.shift()}return!0}function vx(t,e,n){Gh(t)&&n.delete(e)}function oL(){Ry=!1,wi!==null&&Gh(wi)&&(wi=null),Ei!==null&&Gh(Ei)&&(Ei=null),xi!==null&&Gh(xi)&&(xi=null),Ru.forEach(vx),Au.forEach(vx)}function Sc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ry||(Ry=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,oL)))}function Pu(t){function e(s){return Sc(s,t)}if(0<vh.length){Sc(vh[0],t);for(var n=1;n<vh.length;n++){var r=vh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Sc(wi,t),Ei!==null&&Sc(Ei,t),xi!==null&&Sc(xi,t),Ru.forEach(e),Au.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)Qb(n),n.blockedOn===null&&ri.shift()}var Ka=js.ReactCurrentBatchConfig,Cf=!0;function aL(t,e,n,r){var s=Ge,i=Ka.transition;Ka.transition=null;try{Ge=1,O_(t,e,n,r)}finally{Ge=s,Ka.transition=i}}function lL(t,e,n,r){var s=Ge,i=Ka.transition;Ka.transition=null;try{Ge=4,O_(t,e,n,r)}finally{Ge=s,Ka.transition=i}}function O_(t,e,n,r){if(Cf){var s=Ay(t,e,n,r);if(s===null)_g(t,e,r,If,n),yx(t,r);else if(iL(s,t,e,n,r))r.stopPropagation();else if(yx(t,r),e&4&&-1<sL.indexOf(t)){for(;s!==null;){var i=Td(s);if(i!==null&&Hb(i),i=Ay(t,e,n,r),i===null&&_g(t,e,r,If,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _g(t,e,r,null,n)}}var If=null;function Ay(t,e,n,r){if(If=null,t=R_(r),t=Io(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return If=t,null}function Yb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QM()){case A_:return 1;case $b:return 4;case xf:case YM:return 16;case zb:return 536870912;default:return 16}default:return 16}}var mi=null,D_=null,Kh=null;function Xb(){if(Kh)return Kh;var t,e=D_,n=e.length,r,s="value"in mi?mi.value:mi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kh=s.slice(t,1<r?1-r:void 0)}function Qh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _h(){return!0}function _x(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_h:_x,this.isPropagationStopped=_x,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_h)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_h)},persist:function(){},isPersistent:_h}),e}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},M_=Kn(Gl),xd=at({},Gl,{view:0,detail:0}),cL=Kn(xd),ug,dg,bc,Bp=at({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bc&&(bc&&t.type==="mousemove"?(ug=t.screenX-bc.screenX,dg=t.screenY-bc.screenY):dg=ug=0,bc=t),ug)},movementY:function(t){return"movementY"in t?t.movementY:dg}}),wx=Kn(Bp),uL=at({},Bp,{dataTransfer:0}),dL=Kn(uL),hL=at({},xd,{relatedTarget:0}),hg=Kn(hL),fL=at({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),pL=Kn(fL),mL=at({},Gl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gL=Kn(mL),yL=at({},Gl,{data:0}),Ex=Kn(yL),vL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wL[t])?!!e[t]:!1}function L_(){return EL}var xL=at({},xd,{key:function(t){if(t.key){var e=vL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_L[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L_,charCode:function(t){return t.type==="keypress"?Qh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TL=Kn(xL),CL=at({},Bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=Kn(CL),IL=at({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L_}),SL=Kn(IL),bL=at({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),kL=Kn(bL),RL=at({},Bp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AL=Kn(RL),PL=[9,13,27,32],F_=bs&&"CompositionEvent"in window,su=null;bs&&"documentMode"in document&&(su=document.documentMode);var NL=bs&&"TextEvent"in window&&!su,Zb=bs&&(!F_||su&&8<su&&11>=su),Tx=" ",Cx=!1;function Jb(t,e){switch(t){case"keyup":return PL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Na=!1;function OL(t,e){switch(t){case"compositionend":return e1(e);case"keypress":return e.which!==32?null:(Cx=!0,Tx);case"textInput":return t=e.data,t===Tx&&Cx?null:t;default:return null}}function DL(t,e){if(Na)return t==="compositionend"||!F_&&Jb(t,e)?(t=Xb(),Kh=D_=mi=null,Na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zb&&e.locale!=="ko"?null:e.data;default:return null}}var ML={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ix(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ML[t.type]:e==="textarea"}function t1(t,e,n,r){Nb(r),e=Sf(e,"onChange"),0<e.length&&(n=new M_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var iu=null,Nu=null;function LL(t){h1(t,0)}function Wp(t){var e=Ma(t);if(Ib(e))return t}function FL(t,e){if(t==="change")return e}var n1=!1;if(bs){var fg;if(bs){var pg="oninput"in document;if(!pg){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),pg=typeof Sx.oninput=="function"}fg=pg}else fg=!1;n1=fg&&(!document.documentMode||9<document.documentMode)}function bx(){iu&&(iu.detachEvent("onpropertychange",r1),Nu=iu=null)}function r1(t){if(t.propertyName==="value"&&Wp(Nu)){var e=[];t1(e,Nu,t,R_(t)),Lb(LL,e)}}function VL(t,e,n){t==="focusin"?(bx(),iu=e,Nu=n,iu.attachEvent("onpropertychange",r1)):t==="focusout"&&bx()}function jL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wp(Nu)}function UL(t,e){if(t==="click")return Wp(e)}function $L(t,e){if(t==="input"||t==="change")return Wp(e)}function zL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:zL;function Ou(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hy.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function kx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rx(t,e){var n=kx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kx(n)}}function s1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i1(){for(var t=window,e=_f();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_f(t.document)}return e}function V_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BL(t){var e=i1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s1(n.ownerDocument.documentElement,n)){if(r!==null&&V_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Rx(n,i);var o=Rx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WL=bs&&"documentMode"in document&&11>=document.documentMode,Oa=null,Py=null,ou=null,Ny=!1;function Ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ny||Oa==null||Oa!==_f(r)||(r=Oa,"selectionStart"in r&&V_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ou&&Ou(ou,r)||(ou=r,r=Sf(Py,"onSelect"),0<r.length&&(e=new M_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function wh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Da={animationend:wh("Animation","AnimationEnd"),animationiteration:wh("Animation","AnimationIteration"),animationstart:wh("Animation","AnimationStart"),transitionend:wh("Transition","TransitionEnd")},mg={},o1={};bs&&(o1=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Hp(t){if(mg[t])return mg[t];if(!Da[t])return t;var e=Da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o1)return mg[t]=e[n];return t}var a1=Hp("animationend"),l1=Hp("animationiteration"),c1=Hp("animationstart"),u1=Hp("transitionend"),d1=new Map,Px="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){d1.set(t,e),la(e,[t])}for(var gg=0;gg<Px.length;gg++){var yg=Px[gg],HL=yg.toLowerCase(),qL=yg[0].toUpperCase()+yg.slice(1);Yi(HL,"on"+qL)}Yi(a1,"onAnimationEnd");Yi(l1,"onAnimationIteration");Yi(c1,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(u1,"onTransitionEnd");wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wc));function Nx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HM(r,e,void 0,t),t.currentTarget=null}function h1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,c),i=l}}}if(Ef)throw t=by,Ef=!1,by=null,t}function et(t,e){var n=e[Fy];n===void 0&&(n=e[Fy]=new Set);var r=t+"__bubble";n.has(r)||(f1(e,t,2,!1),n.add(r))}function vg(t,e,n){var r=0;e&&(r|=4),f1(n,t,r,e)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Du(t){if(!t[Eh]){t[Eh]=!0,wb.forEach(function(n){n!=="selectionchange"&&(GL.has(n)||vg(n,!1,t),vg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eh]||(e[Eh]=!0,vg("selectionchange",!1,e))}}function f1(t,e,n,r){switch(Yb(e)){case 1:var s=aL;break;case 4:s=lL;break;default:s=O_}n=s.bind(null,e,n,t),s=void 0,!Sy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _g(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Io(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Lb(function(){var c=i,d=R_(n),h=[];e:{var f=d1.get(t);if(f!==void 0){var g=M_,w=t;switch(t){case"keypress":if(Qh(n)===0)break e;case"keydown":case"keyup":g=TL;break;case"focusin":w="focus",g=hg;break;case"focusout":w="blur",g=hg;break;case"beforeblur":case"afterblur":g=hg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=SL;break;case a1:case l1:case c1:g=pL;break;case u1:g=kL;break;case"scroll":g=cL;break;case"wheel":g=AL;break;case"copy":case"cut":case"paste":g=gL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xx}var _=(e&4)!==0,E=!_&&t==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var v=c,C;v!==null;){C=v;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,x!==null&&(N=ku(v,x),N!=null&&_.push(Mu(v,N,C)))),E)break;v=v.return}0<_.length&&(f=new g(f,w,null,n,d),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Cy&&(w=n.relatedTarget||n.fromElement)&&(Io(w)||w[ks]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?Io(w):null,w!==null&&(E=ca(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(_=wx,N="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=xx,N="onPointerLeave",x="onPointerEnter",v="pointer"),E=g==null?f:Ma(g),C=w==null?f:Ma(w),f=new _(N,v+"leave",g,n,d),f.target=E,f.relatedTarget=C,N=null,Io(d)===c&&(_=new _(x,v+"enter",w,n,d),_.target=C,_.relatedTarget=E,N=_),E=N,g&&w)t:{for(_=g,x=w,v=0,C=_;C;C=Ea(C))v++;for(C=0,N=x;N;N=Ea(N))C++;for(;0<v-C;)_=Ea(_),v--;for(;0<C-v;)x=Ea(x),C--;for(;v--;){if(_===x||x!==null&&_===x.alternate)break t;_=Ea(_),x=Ea(x)}_=null}else _=null;g!==null&&Ox(h,f,g,_,!1),w!==null&&E!==null&&Ox(h,E,w,_,!0)}}e:{if(f=c?Ma(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=FL;else if(Ix(f))if(n1)M=$L;else{M=jL;var F=VL}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=UL);if(M&&(M=M(t,c))){t1(h,M,n,d);break e}F&&F(t,f,c),t==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&_y(f,"number",f.value)}switch(F=c?Ma(c):window,t){case"focusin":(Ix(F)||F.contentEditable==="true")&&(Oa=F,Py=c,ou=null);break;case"focusout":ou=Py=Oa=null;break;case"mousedown":Ny=!0;break;case"contextmenu":case"mouseup":case"dragend":Ny=!1,Ax(h,n,d);break;case"selectionchange":if(WL)break;case"keydown":case"keyup":Ax(h,n,d)}var S;if(F_)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Na?Jb(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Zb&&n.locale!=="ko"&&(Na||T!=="onCompositionStart"?T==="onCompositionEnd"&&Na&&(S=Xb()):(mi=d,D_="value"in mi?mi.value:mi.textContent,Na=!0)),F=Sf(c,T),0<F.length&&(T=new Ex(T,t,null,n,d),h.push({event:T,listeners:F}),S?T.data=S:(S=e1(n),S!==null&&(T.data=S)))),(S=NL?OL(t,n):DL(t,n))&&(c=Sf(c,"onBeforeInput"),0<c.length&&(d=new Ex("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}h1(h,e)})}function Mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ku(t,n),i!=null&&r.unshift(Mu(t,i,s)),i=ku(t,e),i!=null&&r.push(Mu(t,i,s))),t=t.return}return r}function Ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ox(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ku(n,i),l!=null&&o.unshift(Mu(n,l,a))):s||(l=ku(n,i),l!=null&&o.push(Mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KL=/\r\n?/g,QL=/\u0000|\uFFFD/g;function Dx(t){return(typeof t=="string"?t:""+t).replace(KL,`
`).replace(QL,"")}function xh(t,e,n){if(e=Dx(e),Dx(t)!==e&&n)throw Error(H(425))}function bf(){}var Oy=null,Dy=null;function My(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ly=typeof setTimeout=="function"?setTimeout:void 0,YL=typeof clearTimeout=="function"?clearTimeout:void 0,Mx=typeof Promise=="function"?Promise:void 0,XL=typeof queueMicrotask=="function"?queueMicrotask:typeof Mx<"u"?function(t){return Mx.resolve(null).then(t).catch(ZL)}:Ly;function ZL(t){setTimeout(function(){throw t})}function wg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pu(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),$r="__reactFiber$"+Kl,Lu="__reactProps$"+Kl,ks="__reactContainer$"+Kl,Fy="__reactEvents$"+Kl,JL="__reactListeners$"+Kl,e2="__reactHandles$"+Kl;function Io(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lx(t);t!==null;){if(n=t[$r])return n;t=Lx(t)}return e}t=n,n=t.parentNode}return null}function Td(t){return t=t[$r]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function qp(t){return t[Lu]||null}var Vy=[],La=-1;function Xi(t){return{current:t}}function nt(t){0>La||(t.current=Vy[La],Vy[La]=null,La--)}function Xe(t,e){La++,Vy[La]=t.current,t.current=e}var Mi={},on=Xi(Mi),bn=Xi(!1),Ho=Mi;function El(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kn(t){return t=t.childContextTypes,t!=null}function kf(){nt(bn),nt(on)}function Fx(t,e,n){if(on.current!==Mi)throw Error(H(168));Xe(on,e),Xe(bn,n)}function p1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,VM(t)||"Unknown",s));return at({},n,r)}function Rf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,Ho=on.current,Xe(on,t),Xe(bn,bn.current),!0}function Vx(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=p1(t,e,Ho),r.__reactInternalMemoizedMergedChildContext=t,nt(bn),nt(on),Xe(on,t)):nt(bn),Xe(bn,n)}var gs=null,Gp=!1,Eg=!1;function m1(t){gs===null?gs=[t]:gs.push(t)}function t2(t){Gp=!0,m1(t)}function Zi(){if(!Eg&&gs!==null){Eg=!0;var t=0,e=Ge;try{var n=gs;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gs=null,Gp=!1}catch(s){throw gs!==null&&(gs=gs.slice(t+1)),Ub(A_,Zi),s}finally{Ge=e,Eg=!1}}return null}var Fa=[],Va=0,Af=null,Pf=0,Yn=[],Xn=0,qo=null,vs=1,_s="";function go(t,e){Fa[Va++]=Pf,Fa[Va++]=Af,Af=t,Pf=e}function g1(t,e,n){Yn[Xn++]=vs,Yn[Xn++]=_s,Yn[Xn++]=qo,qo=t;var r=vs;t=_s;var s=32-Cr(r)-1;r&=~(1<<s),n+=1;var i=32-Cr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,vs=1<<32-Cr(e)+s|n<<s|r,_s=i+t}else vs=1<<i|n<<s|r,_s=t}function j_(t){t.return!==null&&(go(t,1),g1(t,1,0))}function U_(t){for(;t===Af;)Af=Fa[--Va],Fa[Va]=null,Pf=Fa[--Va],Fa[Va]=null;for(;t===qo;)qo=Yn[--Xn],Yn[Xn]=null,_s=Yn[--Xn],Yn[Xn]=null,vs=Yn[--Xn],Yn[Xn]=null}var Un=null,jn=null,rt=!1,pr=null;function y1(t,e){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,jn=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qo!==null?{id:vs,overflow:_s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,jn=null,!0):!1;default:return!1}}function jy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uy(t){if(rt){var e=jn;if(e){var n=e;if(!jx(t,e)){if(jy(t))throw Error(H(418));e=Ti(n.nextSibling);var r=Un;e&&jx(t,e)?y1(r,n):(t.flags=t.flags&-4097|2,rt=!1,Un=t)}}else{if(jy(t))throw Error(H(418));t.flags=t.flags&-4097|2,rt=!1,Un=t}}}function Ux(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function Th(t){if(t!==Un)return!1;if(!rt)return Ux(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!My(t.type,t.memoizedProps)),e&&(e=jn)){if(jy(t))throw v1(),Error(H(418));for(;e;)y1(t,e),e=Ti(e.nextSibling)}if(Ux(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=Ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=Un?Ti(t.stateNode.nextSibling):null;return!0}function v1(){for(var t=jn;t;)t=Ti(t.nextSibling)}function xl(){jn=Un=null,rt=!1}function $_(t){pr===null?pr=[t]:pr.push(t)}var n2=js.ReactCurrentBatchConfig;function kc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Ch(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $x(t){var e=t._init;return e(t._payload)}function _1(t){function e(x,v){if(t){var C=x.deletions;C===null?(x.deletions=[v],x.flags|=16):C.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=bi(x,v),x.index=0,x.sibling=null,x}function i(x,v,C){return x.index=C,t?(C=x.alternate,C!==null?(C=C.index,C<v?(x.flags|=2,v):C):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,C,N){return v===null||v.tag!==6?(v=kg(C,x.mode,N),v.return=x,v):(v=s(v,C),v.return=x,v)}function l(x,v,C,N){var M=C.type;return M===Pa?d(x,v,C.props.children,N,C.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ei&&$x(M)===v.type)?(N=s(v,C.props),N.ref=kc(x,v,C),N.return=x,N):(N=nf(C.type,C.key,C.props,null,x.mode,N),N.ref=kc(x,v,C),N.return=x,N)}function c(x,v,C,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=Rg(C,x.mode,N),v.return=x,v):(v=s(v,C.children||[]),v.return=x,v)}function d(x,v,C,N,M){return v===null||v.tag!==7?(v=zo(C,x.mode,N,M),v.return=x,v):(v=s(v,C),v.return=x,v)}function h(x,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=kg(""+v,x.mode,C),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fh:return C=nf(v.type,v.key,v.props,null,x.mode,C),C.ref=kc(x,null,v),C.return=x,C;case Aa:return v=Rg(v,x.mode,C),v.return=x,v;case ei:var N=v._init;return h(x,N(v._payload),C)}if(zc(v)||Tc(v))return v=zo(v,x.mode,C,null),v.return=x,v;Ch(x,v)}return null}function f(x,v,C,N){var M=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:a(x,v,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case fh:return C.key===M?l(x,v,C,N):null;case Aa:return C.key===M?c(x,v,C,N):null;case ei:return M=C._init,f(x,v,M(C._payload),N)}if(zc(C)||Tc(C))return M!==null?null:d(x,v,C,N,null);Ch(x,C)}return null}function g(x,v,C,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(C)||null,a(v,x,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case fh:return x=x.get(N.key===null?C:N.key)||null,l(v,x,N,M);case Aa:return x=x.get(N.key===null?C:N.key)||null,c(v,x,N,M);case ei:var F=N._init;return g(x,v,C,F(N._payload),M)}if(zc(N)||Tc(N))return x=x.get(C)||null,d(v,x,N,M,null);Ch(v,N)}return null}function w(x,v,C,N){for(var M=null,F=null,S=v,T=v=0,b=null;S!==null&&T<C.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var k=f(x,S,C[T],N);if(k===null){S===null&&(S=b);break}t&&S&&k.alternate===null&&e(x,S),v=i(k,v,T),F===null?M=k:F.sibling=k,F=k,S=b}if(T===C.length)return n(x,S),rt&&go(x,T),M;if(S===null){for(;T<C.length;T++)S=h(x,C[T],N),S!==null&&(v=i(S,v,T),F===null?M=S:F.sibling=S,F=S);return rt&&go(x,T),M}for(S=r(x,S);T<C.length;T++)b=g(S,x,T,C[T],N),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),v=i(b,v,T),F===null?M=b:F.sibling=b,F=b);return t&&S.forEach(function(O){return e(x,O)}),rt&&go(x,T),M}function _(x,v,C,N){var M=Tc(C);if(typeof M!="function")throw Error(H(150));if(C=M.call(C),C==null)throw Error(H(151));for(var F=M=null,S=v,T=v=0,b=null,k=C.next();S!==null&&!k.done;T++,k=C.next()){S.index>T?(b=S,S=null):b=S.sibling;var O=f(x,S,k.value,N);if(O===null){S===null&&(S=b);break}t&&S&&O.alternate===null&&e(x,S),v=i(O,v,T),F===null?M=O:F.sibling=O,F=O,S=b}if(k.done)return n(x,S),rt&&go(x,T),M;if(S===null){for(;!k.done;T++,k=C.next())k=h(x,k.value,N),k!==null&&(v=i(k,v,T),F===null?M=k:F.sibling=k,F=k);return rt&&go(x,T),M}for(S=r(x,S);!k.done;T++,k=C.next())k=g(S,x,T,k.value,N),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),v=i(k,v,T),F===null?M=k:F.sibling=k,F=k);return t&&S.forEach(function(P){return e(x,P)}),rt&&go(x,T),M}function E(x,v,C,N){if(typeof C=="object"&&C!==null&&C.type===Pa&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case fh:e:{for(var M=C.key,F=v;F!==null;){if(F.key===M){if(M=C.type,M===Pa){if(F.tag===7){n(x,F.sibling),v=s(F,C.props.children),v.return=x,x=v;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ei&&$x(M)===F.type){n(x,F.sibling),v=s(F,C.props),v.ref=kc(x,F,C),v.return=x,x=v;break e}n(x,F);break}else e(x,F);F=F.sibling}C.type===Pa?(v=zo(C.props.children,x.mode,N,C.key),v.return=x,x=v):(N=nf(C.type,C.key,C.props,null,x.mode,N),N.ref=kc(x,v,C),N.return=x,x=N)}return o(x);case Aa:e:{for(F=C.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){n(x,v.sibling),v=s(v,C.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Rg(C,x.mode,N),v.return=x,x=v}return o(x);case ei:return F=C._init,E(x,v,F(C._payload),N)}if(zc(C))return w(x,v,C,N);if(Tc(C))return _(x,v,C,N);Ch(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,C),v.return=x,x=v):(n(x,v),v=kg(C,x.mode,N),v.return=x,x=v),o(x)):n(x,v)}return E}var Tl=_1(!0),w1=_1(!1),Nf=Xi(null),Of=null,ja=null,z_=null;function B_(){z_=ja=Of=null}function W_(t){var e=Nf.current;nt(Nf),t._currentValue=e}function $y(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qa(t,e){Of=t,z_=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(z_!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(Of===null)throw Error(H(308));ja=t,Of.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var So=null;function H_(t){So===null?So=[t]:So.push(t)}function E1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,H_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rs(t,r)}function Rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ti=!1;function q_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rs(t,n)}return s=r.interleaved,s===null?(e.next=e,H_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rs(t,n)}function Yh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P_(t,n)}}function zx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Df(t,e,n,r){var s=t.updateQueue;ti=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(f=e,g=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=at({},h,f);break e;case 2:ti=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ko|=o,t.lanes=o,t.memoizedState=h}}function Bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Cd={},Qr=Xi(Cd),Fu=Xi(Cd),Vu=Xi(Cd);function bo(t){if(t===Cd)throw Error(H(174));return t}function G_(t,e){switch(Xe(Vu,e),Xe(Fu,t),Xe(Qr,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ey(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ey(e,t)}nt(Qr),Xe(Qr,e)}function Cl(){nt(Qr),nt(Fu),nt(Vu)}function T1(t){bo(Vu.current);var e=bo(Qr.current),n=Ey(e,t.type);e!==n&&(Xe(Fu,t),Xe(Qr,n))}function K_(t){Fu.current===t&&(nt(Qr),nt(Fu))}var st=Xi(0);function Mf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xg=[];function Q_(){for(var t=0;t<xg.length;t++)xg[t]._workInProgressVersionPrimary=null;xg.length=0}var Xh=js.ReactCurrentDispatcher,Tg=js.ReactCurrentBatchConfig,Go=0,it=null,Ct=null,Ot=null,Lf=!1,au=!1,ju=0,r2=0;function Yt(){throw Error(H(321))}function Y_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function X_(t,e,n,r,s,i){if(Go=i,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xh.current=t===null||t.memoizedState===null?a2:l2,t=n(r,s),au){i=0;do{if(au=!1,ju=0,25<=i)throw Error(H(301));i+=1,Ot=Ct=null,e.updateQueue=null,Xh.current=c2,t=n(r,s)}while(au)}if(Xh.current=Ff,e=Ct!==null&&Ct.next!==null,Go=0,Ot=Ct=it=null,Lf=!1,e)throw Error(H(300));return t}function Z_(){var t=ju!==0;return ju=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?it.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function tr(){if(Ct===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Ot===null?it.memoizedState:Ot.next;if(e!==null)Ot=e,Ct=t;else{if(t===null)throw Error(H(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ot===null?it.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Uu(t,e){return typeof e=="function"?e(t):e}function Cg(t){var e=tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Go&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,it.lanes|=d,Ko|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,kr(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,it.lanes|=i,Ko|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);kr(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function C1(){}function I1(t,e){var n=it,r=tr(),s=e(),i=!kr(r.memoizedState,s);if(i&&(r.memoizedState=s,Sn=!0),r=r.queue,J_(k1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,$u(9,b1.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(H(349));Go&30||S1(n,e,s)}return s}function S1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b1(t,e,n,r){e.value=n,e.getSnapshot=r,R1(e)&&A1(t)}function k1(t,e,n){return n(function(){R1(e)&&A1(t)})}function R1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function A1(t){var e=Rs(t,1);e!==null&&Ir(e,t,1,-1)}function Wx(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=o2.bind(null,it,t),[e.memoizedState,t]}function $u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P1(){return tr().memoizedState}function Zh(t,e,n,r){var s=Lr();it.flags|=t,s.memoizedState=$u(1|e,n,void 0,r===void 0?null:r)}function Kp(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(Ct!==null){var o=Ct.memoizedState;if(i=o.destroy,r!==null&&Y_(r,o.deps)){s.memoizedState=$u(e,n,i,r);return}}it.flags|=t,s.memoizedState=$u(1|e,n,i,r)}function Hx(t,e){return Zh(8390656,8,t,e)}function J_(t,e){return Kp(2048,8,t,e)}function N1(t,e){return Kp(4,2,t,e)}function O1(t,e){return Kp(4,4,t,e)}function D1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M1(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4,4,D1.bind(null,e,t),n)}function ew(){}function L1(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F1(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V1(t,e,n){return Go&21?(kr(n,e)||(n=Bb(),it.lanes|=n,Ko|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function s2(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Tg.transition;Tg.transition={};try{t(!1),e()}finally{Ge=n,Tg.transition=r}}function j1(){return tr().memoizedState}function i2(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U1(t))$1(e,n);else if(n=E1(t,e,n,r),n!==null){var s=vn();Ir(n,t,r,s),z1(n,e,r)}}function o2(t,e,n){var r=Si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U1(t))$1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,kr(a,o)){var l=e.interleaved;l===null?(s.next=s,H_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=E1(t,e,s,r),n!==null&&(s=vn(),Ir(n,t,r,s),z1(n,e,r))}}function U1(t){var e=t.alternate;return t===it||e!==null&&e===it}function $1(t,e){au=Lf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P_(t,n)}}var Ff={readContext:er,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},a2={readContext:er,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Hx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4194308,4,D1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zh(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=i2.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:Wx,useDebugValue:ew,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=Wx(!1),e=t[0];return t=s2.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,s=Lr();if(rt){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Dt===null)throw Error(H(349));Go&30||S1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hx(k1.bind(null,r,i,t),[t]),r.flags|=2048,$u(9,b1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Dt.identifierPrefix;if(rt){var n=_s,r=vs;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l2={readContext:er,useCallback:L1,useContext:er,useEffect:J_,useImperativeHandle:M1,useInsertionEffect:N1,useLayoutEffect:O1,useMemo:F1,useReducer:Cg,useRef:P1,useState:function(){return Cg(Uu)},useDebugValue:ew,useDeferredValue:function(t){var e=tr();return V1(e,Ct.memoizedState,t)},useTransition:function(){var t=Cg(Uu)[0],e=tr().memoizedState;return[t,e]},useMutableSource:C1,useSyncExternalStore:I1,useId:j1,unstable_isNewReconciler:!1},c2={readContext:er,useCallback:L1,useContext:er,useEffect:J_,useImperativeHandle:M1,useInsertionEffect:N1,useLayoutEffect:O1,useMemo:F1,useReducer:Ig,useRef:P1,useState:function(){return Ig(Uu)},useDebugValue:ew,useDeferredValue:function(t){var e=tr();return Ct===null?e.memoizedState=t:V1(e,Ct.memoizedState,t)},useTransition:function(){var t=Ig(Uu)[0],e=tr().memoizedState;return[t,e]},useMutableSource:C1,useSyncExternalStore:I1,useId:j1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qp={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),s=Si(t),i=Ts(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ci(t,i,s),e!==null&&(Ir(e,t,s,r),Yh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),s=Si(t),i=Ts(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ci(t,i,s),e!==null&&(Ir(e,t,s,r),Yh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=Si(t),s=Ts(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ci(t,s,r),e!==null&&(Ir(e,t,r,n),Yh(e,t,r))}};function qx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ou(n,r)||!Ou(s,i):!0}function B1(t,e,n){var r=!1,s=Mi,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=kn(e)?Ho:on.current,r=e.contextTypes,i=(r=r!=null)?El(t,s):Mi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qp.enqueueReplaceState(e,e.state,null)}function By(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},q_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=kn(e)?Ho:on.current,s.context=El(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qp.enqueueReplaceState(s,s.state,null),Df(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Il(t,e){try{var n="",r=e;do n+=FM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var u2=typeof WeakMap=="function"?WeakMap:Map;function W1(t,e,n){n=Ts(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jf||(jf=!0,ev=r),Wy(t,e)},n}function H1(t,e,n){n=Ts(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wy(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new u2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=C2.bind(null,t,e,n),e.then(t,t))}function Qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ts(-1,1),e.tag=2,Ci(n,e,1))),n.lanes|=1),t)}var d2=js.ReactCurrentOwner,Sn=!1;function fn(t,e,n,r){e.child=t===null?w1(e,null,n,r):Tl(e,t.child,n,r)}function Xx(t,e,n,r,s){n=n.render;var i=e.ref;return Qa(e,s),r=X_(t,e,n,r,i,s),n=Z_(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,As(t,e,s)):(rt&&n&&j_(e),e.flags|=1,fn(t,e,r,s),e.child)}function Zx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,q1(t,e,i,r,s)):(t=nf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ou,n(o,r)&&t.ref===e.ref)return As(t,e,s)}return e.flags|=1,t=bi(i,r),t.ref=e.ref,t.return=e,e.child=t}function q1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ou(i,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,As(t,e,s)}return Hy(t,e,n,r,s)}function G1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe($a,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe($a,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Xe($a,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Xe($a,Mn),Mn|=r;return fn(t,e,s,n),e.child}function K1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hy(t,e,n,r,s){var i=kn(n)?Ho:on.current;return i=El(e,i),Qa(e,s),n=X_(t,e,n,r,i,s),r=Z_(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,As(t,e,s)):(rt&&r&&j_(e),e.flags|=1,fn(t,e,n,s),e.child)}function Jx(t,e,n,r,s){if(kn(n)){var i=!0;Rf(e)}else i=!1;if(Qa(e,s),e.stateNode===null)Jh(t,e),B1(e,n,r),By(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=kn(n)?Ho:on.current,c=El(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Gx(e,o,r,c),ti=!1;var f=e.memoizedState;o.state=f,Df(e,r,o,s),l=e.memoizedState,a!==r||f!==l||bn.current||ti?(typeof d=="function"&&(zy(e,n,d,r),l=e.memoizedState),(a=ti||qx(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,x1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=kn(n)?Ho:on.current,l=El(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Gx(e,o,r,l),ti=!1,f=e.memoizedState,o.state=f,Df(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||bn.current||ti?(typeof g=="function"&&(zy(e,n,g,r),w=e.memoizedState),(c=ti||qx(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return qy(t,e,n,r,i,s)}function qy(t,e,n,r,s,i){K1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vx(e,n,!1),As(t,e,i);r=e.stateNode,d2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tl(e,t.child,null,i),e.child=Tl(e,null,a,i)):fn(t,e,a,i),e.memoizedState=r.state,s&&Vx(e,n,!0),e.child}function Q1(t){var e=t.stateNode;e.pendingContext?Fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fx(t,e.context,!1),G_(t,e.containerInfo)}function eT(t,e,n,r,s){return xl(),$_(s),e.flags|=256,fn(t,e,n,r),e.child}var Gy={dehydrated:null,treeContext:null,retryLane:0};function Ky(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y1(t,e,n){var r=e.pendingProps,s=st.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Xe(st,s&1),t===null)return Uy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zp(o,r,0,null),t=zo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ky(n),e.memoizedState=Gy,t):tw(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return h2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=bi(a,i):(i=zo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ky(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Gy,r}return i=t.child,t=i.sibling,r=bi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tw(t,e){return e=Zp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,n,r){return r!==null&&$_(r),Tl(e,t.child,null,n),t=tw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sg(Error(H(422))),Ih(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zp({mode:"visible",children:r.children},s,0,null),i=zo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Tl(e,t.child,null,o),e.child.memoizedState=Ky(o),e.memoizedState=Gy,i);if(!(e.mode&1))return Ih(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=Sg(i,r,void 0),Ih(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sn||a){if(r=Dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rs(t,s),Ir(r,t,s,-1))}return aw(),r=Sg(Error(H(421))),Ih(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=I2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jn=Ti(s.nextSibling),Un=e,rt=!0,pr=null,t!==null&&(Yn[Xn++]=vs,Yn[Xn++]=_s,Yn[Xn++]=qo,vs=t.id,_s=t.overflow,qo=e),e=tw(e,r.children),e.flags|=4096,e)}function tT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$y(t.return,e,n)}function bg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function X1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tT(t,n,e);else if(t.tag===19)tT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(st,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bg(e,!0,n,null,i);break;case"together":bg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ko|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function f2(t,e,n){switch(e.tag){case 3:Q1(e),xl();break;case 5:T1(e);break;case 1:kn(e.type)&&Rf(e);break;case 4:G_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Xe(Nf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?Y1(t,e,n):(Xe(st,st.current&1),t=As(t,e,n),t!==null?t.sibling:null);Xe(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return X1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,G1(t,e,n)}return As(t,e,n)}var Z1,Qy,J1,ek;Z1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qy=function(){};J1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bo(Qr.current);var i=null;switch(n){case"input":s=yy(t,s),r=yy(t,r),i=[];break;case"select":s=at({},s,{value:void 0}),r=at({},r,{value:void 0}),i=[];break;case"textarea":s=wy(t,s),r=wy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bf)}xy(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Su.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Su.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&et("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ek=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rc(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function p2(t,e,n){var r=e.pendingProps;switch(U_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return kn(e.type)&&kf(),Xt(e),null;case 3:return r=e.stateNode,Cl(),nt(bn),nt(on),Q_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Th(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pr!==null&&(rv(pr),pr=null))),Qy(t,e),Xt(e),null;case 5:K_(e);var s=bo(Vu.current);if(n=e.type,t!==null&&e.stateNode!=null)J1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Xt(e),null}if(t=bo(Qr.current),Th(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[Lu]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<Wc.length;s++)et(Wc[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":ux(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":hx(r,i),et("invalid",r)}xy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xh(r.textContent,a,t),s=["children",""+a]):Su.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(n){case"input":ph(r),dx(r,i,!0);break;case"textarea":ph(r),fx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[Lu]=r,Z1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ty(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wc.length;s++)et(Wc[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":ux(t,r),s=yy(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=at({},r,{value:void 0}),et("invalid",t);break;case"textarea":hx(t,r),s=wy(t,r),et("invalid",t);break;default:s=r}xy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Pb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bu(t,l):typeof l=="number"&&bu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Su.hasOwnProperty(i)?l!=null&&i==="onScroll"&&et("scroll",t):l!=null&&I_(t,i,l,o))}switch(n){case"input":ph(t),dx(t,r,!1);break;case"textarea":ph(t),fx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Di(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ha(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)ek(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=bo(Vu.current),bo(Qr.current),Th(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Xt(e),null;case 13:if(nt(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&jn!==null&&e.mode&1&&!(e.flags&128))v1(),xl(),e.flags|=98560,i=!1;else if(i=Th(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[$r]=e}else xl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),i=!1}else pr!==null&&(rv(pr),pr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?kt===0&&(kt=3):aw())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Cl(),Qy(t,e),t===null&&Du(e.stateNode.containerInfo),Xt(e),null;case 10:return W_(e.type._context),Xt(e),null;case 17:return kn(e.type)&&kf(),Xt(e),null;case 19:if(nt(st),i=e.memoizedState,i===null)return Xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Rc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mf(t),o!==null){for(e.flags|=128,Rc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(st,st.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>Sl&&(e.flags|=128,r=!0,Rc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return Xt(e),null}else 2*yt()-i.renderingStartTime>Sl&&n!==1073741824&&(e.flags|=128,r=!0,Rc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=st.current,Xe(st,r?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return ow(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function m2(t,e){switch(U_(e),e.tag){case 1:return kn(e.type)&&kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cl(),nt(bn),nt(on),Q_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K_(e),null;case 13:if(nt(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));xl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(st),null;case 4:return Cl(),null;case 10:return W_(e.type._context),null;case 22:case 23:return ow(),null;case 24:return null;default:return null}}var Sh=!1,tn=!1,g2=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Yy(t,e,n){try{n()}catch(r){ht(t,e,r)}}var nT=!1;function y2(t,e){if(Oy=Cf,t=i1(),V_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dy={focusedElem:t,selectionRange:n},Cf=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,E=w.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:ur(e.type,_),E);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(N){ht(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return w=nT,nT=!1,w}function lu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yy(e,n,i)}s=s.next}while(s!==r)}}function Yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tk(t){var e=t.alternate;e!==null&&(t.alternate=null,tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Lu],delete e[Fy],delete e[JL],delete e[e2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nk(t){return t.tag===5||t.tag===3||t.tag===4}function rT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bf));else if(r!==4&&(t=t.child,t!==null))for(Zy(t,e,n),t=t.sibling;t!==null;)Zy(t,e,n),t=t.sibling}function Jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jy(t,e,n),t=t.sibling;t!==null;)Jy(t,e,n),t=t.sibling}var Vt=null,fr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)rk(t,e,n),n=n.sibling}function rk(t,e,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(zp,n)}catch{}switch(n.tag){case 5:tn||Ua(n,e);case 6:var r=Vt,s=fr;Vt=null,Ks(t,e,n),Vt=r,fr=s,Vt!==null&&(fr?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(fr?(t=Vt,n=n.stateNode,t.nodeType===8?wg(t.parentNode,n):t.nodeType===1&&wg(t,n),Pu(t)):wg(Vt,n.stateNode));break;case 4:r=Vt,s=fr,Vt=n.stateNode.containerInfo,fr=!0,Ks(t,e,n),Vt=r,fr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yy(n,e,o),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!tn&&(Ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,Ks(t,e,n),tn=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function sT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new g2),e.forEach(function(r){var s=S2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vt=a.stateNode,fr=!1;break e;case 3:Vt=a.stateNode.containerInfo,fr=!0;break e;case 4:Vt=a.stateNode.containerInfo,fr=!0;break e}a=a.return}if(Vt===null)throw Error(H(160));rk(i,o,s),Vt=null,fr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ht(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sk(e,t),e=e.sibling}function sk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),Dr(t),r&4){try{lu(3,t,t.return),Yp(3,t)}catch(_){ht(t,t.return,_)}try{lu(5,t,t.return)}catch(_){ht(t,t.return,_)}}break;case 1:cr(e,t),Dr(t),r&512&&n!==null&&Ua(n,n.return);break;case 5:if(cr(e,t),Dr(t),r&512&&n!==null&&Ua(n,n.return),t.flags&32){var s=t.stateNode;try{bu(s,"")}catch(_){ht(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Sb(s,i),Ty(a,o);var c=Ty(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Pb(s,h):d==="dangerouslySetInnerHTML"?Rb(s,h):d==="children"?bu(s,h):I_(s,d,h,c)}switch(a){case"input":vy(s,i);break;case"textarea":bb(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ha(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ha(s,!!i.multiple,i.defaultValue,!0):Ha(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lu]=i}catch(_){ht(t,t.return,_)}}break;case 6:if(cr(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){ht(t,t.return,_)}}break;case 3:if(cr(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(_){ht(t,t.return,_)}break;case 4:cr(e,t),Dr(t);break;case 13:cr(e,t),Dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sw=yt())),r&4&&sT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(c=tn)||d,cr(e,t),tn=c):cr(e,t),Dr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(f=se,g=f.child,f.tag){case 0:case 11:case 14:case 15:lu(4,f,f.return);break;case 1:Ua(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){ht(r,n,_)}}break;case 5:Ua(f,f.return);break;case 22:if(f.memoizedState!==null){oT(h);continue}}g!==null?(g.return=f,se=g):oT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ab("display",o))}catch(_){ht(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){ht(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cr(e,t),Dr(t),r&4&&sT(t);break;case 21:break;default:cr(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nk(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bu(s,""),r.flags&=-33);var i=rT(t);Jy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rT(t);Zy(t,a,o);break;default:throw Error(H(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function v2(t,e,n){se=t,ik(t)}function ik(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Sh;var c=tn;if(Sh=o,(tn=l)&&!c)for(se=s;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?aT(s):l!==null?(l.return=o,se=l):aT(s);for(;i!==null;)se=i,ik(i),i=i.sibling;se=s,Sh=a,tn=c}iT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):iT(t)}}function iT(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||Yp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Pu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}tn||e.flags&512&&Xy(e)}catch(f){ht(e,e.return,f)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function oT(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function aT(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yp(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ht(e,s,l)}}var i=e.return;try{Xy(e)}catch(l){ht(e,i,l)}break;case 5:var o=e.return;try{Xy(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var _2=Math.ceil,Vf=js.ReactCurrentDispatcher,nw=js.ReactCurrentOwner,Jn=js.ReactCurrentBatchConfig,Ve=0,Dt=null,xt=null,Bt=0,Mn=0,$a=Xi(0),kt=0,zu=null,Ko=0,Xp=0,rw=0,cu=null,In=null,sw=0,Sl=1/0,ms=null,jf=!1,ev=null,Ii=null,bh=!1,gi=null,Uf=0,uu=0,tv=null,ef=-1,tf=0;function vn(){return Ve&6?yt():ef!==-1?ef:ef=yt()}function Si(t){return t.mode&1?Ve&2&&Bt!==0?Bt&-Bt:n2.transition!==null?(tf===0&&(tf=Bb()),tf):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:Yb(t.type)),t):1}function Ir(t,e,n,r){if(50<uu)throw uu=0,tv=null,Error(H(185));Ed(t,n,r),(!(Ve&2)||t!==Dt)&&(t===Dt&&(!(Ve&2)&&(Xp|=n),kt===4&&si(t,Bt)),Rn(t,r),n===1&&Ve===0&&!(e.mode&1)&&(Sl=yt()+500,Gp&&Zi()))}function Rn(t,e){var n=t.callbackNode;nL(t,e);var r=Tf(t,t===Dt?Bt:0);if(r===0)n!==null&&gx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gx(n),e===1)t.tag===0?t2(lT.bind(null,t)):m1(lT.bind(null,t)),XL(function(){!(Ve&6)&&Zi()}),n=null;else{switch(Wb(r)){case 1:n=A_;break;case 4:n=$b;break;case 16:n=xf;break;case 536870912:n=zb;break;default:n=xf}n=fk(n,ok.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ok(t,e){if(ef=-1,tf=0,Ve&6)throw Error(H(327));var n=t.callbackNode;if(Ya()&&t.callbackNode!==n)return null;var r=Tf(t,t===Dt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$f(t,r);else{e=r;var s=Ve;Ve|=2;var i=lk();(Dt!==t||Bt!==e)&&(ms=null,Sl=yt()+500,$o(t,e));do try{x2();break}catch(a){ak(t,a)}while(!0);B_(),Vf.current=i,Ve=s,xt!==null?e=0:(Dt=null,Bt=0,e=kt)}if(e!==0){if(e===2&&(s=ky(t),s!==0&&(r=s,e=nv(t,s))),e===1)throw n=zu,$o(t,0),si(t,r),Rn(t,yt()),n;if(e===6)si(t,r);else{if(s=t.current.alternate,!(r&30)&&!w2(s)&&(e=$f(t,r),e===2&&(i=ky(t),i!==0&&(r=i,e=nv(t,i))),e===1))throw n=zu,$o(t,0),si(t,r),Rn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:yo(t,In,ms);break;case 3:if(si(t,r),(r&130023424)===r&&(e=sw+500-yt(),10<e)){if(Tf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ly(yo.bind(null,t,In,ms),e);break}yo(t,In,ms);break;case 4:if(si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_2(r/1960))-r,10<r){t.timeoutHandle=Ly(yo.bind(null,t,In,ms),r);break}yo(t,In,ms);break;case 5:yo(t,In,ms);break;default:throw Error(H(329))}}}return Rn(t,yt()),t.callbackNode===n?ok.bind(null,t):null}function nv(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&($o(t,e).flags|=256),t=$f(t,e),t!==2&&(e=In,In=n,e!==null&&rv(e)),t}function rv(t){In===null?In=t:In.push.apply(In,t)}function w2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~rw,e&=~Xp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cr(e),r=1<<n;t[n]=-1,e&=~r}}function lT(t){if(Ve&6)throw Error(H(327));Ya();var e=Tf(t,0);if(!(e&1))return Rn(t,yt()),null;var n=$f(t,e);if(t.tag!==0&&n===2){var r=ky(t);r!==0&&(e=r,n=nv(t,r))}if(n===1)throw n=zu,$o(t,0),si(t,e),Rn(t,yt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,In,ms),Rn(t,yt()),null}function iw(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(Sl=yt()+500,Gp&&Zi())}}function Qo(t){gi!==null&&gi.tag===0&&!(Ve&6)&&Ya();var e=Ve;Ve|=1;var n=Jn.transition,r=Ge;try{if(Jn.transition=null,Ge=1,t)return t()}finally{Ge=r,Jn.transition=n,Ve=e,!(Ve&6)&&Zi()}}function ow(){Mn=$a.current,nt($a)}function $o(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YL(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(U_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kf();break;case 3:Cl(),nt(bn),nt(on),Q_();break;case 5:K_(r);break;case 4:Cl();break;case 13:nt(st);break;case 19:nt(st);break;case 10:W_(r.type._context);break;case 22:case 23:ow()}n=n.return}if(Dt=t,xt=t=bi(t.current,null),Bt=Mn=e,kt=0,zu=null,rw=Xp=Ko=0,In=cu=null,So!==null){for(e=0;e<So.length;e++)if(n=So[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}So=null}return t}function ak(t,e){do{var n=xt;try{if(B_(),Xh.current=Ff,Lf){for(var r=it.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lf=!1}if(Go=0,Ot=Ct=it=null,au=!1,ju=0,nw.current=null,n===null||n.return===null){kt=1,zu=e,xt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Qx(o);if(g!==null){g.flags&=-257,Yx(g,o,a,i,e),g.mode&1&&Kx(i,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){Kx(i,c,e),aw();break e}l=Error(H(426))}}else if(rt&&a.mode&1){var E=Qx(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Yx(E,o,a,i,e),$_(Il(l,a));break e}}i=l=Il(l,a),kt!==4&&(kt=2),cu===null?cu=[i]:cu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=W1(i,l,e);zx(i,x);break e;case 1:a=l;var v=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ii===null||!Ii.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=H1(i,a,e);zx(i,N);break e}}i=i.return}while(i!==null)}uk(n)}catch(M){e=M,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function lk(){var t=Vf.current;return Vf.current=Ff,t===null?Ff:t}function aw(){(kt===0||kt===3||kt===2)&&(kt=4),Dt===null||!(Ko&268435455)&&!(Xp&268435455)||si(Dt,Bt)}function $f(t,e){var n=Ve;Ve|=2;var r=lk();(Dt!==t||Bt!==e)&&(ms=null,$o(t,e));do try{E2();break}catch(s){ak(t,s)}while(!0);if(B_(),Ve=n,Vf.current=r,xt!==null)throw Error(H(261));return Dt=null,Bt=0,kt}function E2(){for(;xt!==null;)ck(xt)}function x2(){for(;xt!==null&&!GM();)ck(xt)}function ck(t){var e=hk(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?uk(t):xt=e,nw.current=null}function uk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m2(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,xt=null;return}}else if(n=p2(n,e,Mn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);kt===0&&(kt=5)}function yo(t,e,n){var r=Ge,s=Jn.transition;try{Jn.transition=null,Ge=1,T2(t,e,n,r)}finally{Jn.transition=s,Ge=r}return null}function T2(t,e,n,r){do Ya();while(gi!==null);if(Ve&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rL(t,i),t===Dt&&(xt=Dt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bh||(bh=!0,fk(xf,function(){return Ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=Ge;Ge=1;var a=Ve;Ve|=4,nw.current=null,y2(t,n),sk(n,t),BL(Dy),Cf=!!Oy,Dy=Oy=null,t.current=n,v2(n),KM(),Ve=a,Ge=o,Jn.transition=i}else t.current=n;if(bh&&(bh=!1,gi=t,Uf=s),i=t.pendingLanes,i===0&&(Ii=null),XM(n.stateNode),Rn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jf)throw jf=!1,t=ev,ev=null,t;return Uf&1&&t.tag!==0&&Ya(),i=t.pendingLanes,i&1?t===tv?uu++:(uu=0,tv=t):uu=0,Zi(),null}function Ya(){if(gi!==null){var t=Wb(Uf),e=Jn.transition,n=Ge;try{if(Jn.transition=null,Ge=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,Uf=0,Ve&6)throw Error(H(331));var s=Ve;for(Ve|=4,se=t.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:lu(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var f=d.sibling,g=d.return;if(tk(d),d===c){se=null;break}if(f!==null){f.return=g,se=f;break}se=g}}}var w=i.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lu(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,se=x;break e}se=i.return}}var v=t.current;for(se=v;se!==null;){o=se;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,se=C;else e:for(o=v;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yp(9,a)}}catch(M){ht(a,a.return,M)}if(a===o){se=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,se=N;break e}se=a.return}}if(Ve=s,Zi(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(zp,t)}catch{}r=!0}return r}finally{Ge=n,Jn.transition=e}}return!1}function cT(t,e,n){e=Il(n,e),e=W1(t,e,1),t=Ci(t,e,1),e=vn(),t!==null&&(Ed(t,1,e),Rn(t,e))}function ht(t,e,n){if(t.tag===3)cT(t,t,n);else for(;e!==null;){if(e.tag===3){cT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=Il(n,t),t=H1(e,t,1),e=Ci(e,t,1),t=vn(),e!==null&&(Ed(e,1,t),Rn(e,t));break}}e=e.return}}function C2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Bt&n)===n&&(kt===4||kt===3&&(Bt&130023424)===Bt&&500>yt()-sw?$o(t,0):rw|=n),Rn(t,e)}function dk(t,e){e===0&&(t.mode&1?(e=yh,yh<<=1,!(yh&130023424)&&(yh=4194304)):e=1);var n=vn();t=Rs(t,e),t!==null&&(Ed(t,e,n),Rn(t,n))}function I2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dk(t,n)}function S2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),dk(t,n)}var hk;hk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,f2(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,rt&&e.flags&1048576&&g1(e,Pf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jh(t,e),t=e.pendingProps;var s=El(e,on.current);Qa(e,n),s=X_(null,e,r,t,s,n);var i=Z_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(i=!0,Rf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,q_(e),s.updater=Qp,e.stateNode=s,s._reactInternals=e,By(e,r,t,n),e=qy(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&j_(e),fn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=k2(r),t=ur(r,t),s){case 0:e=Hy(null,e,r,t,n);break e;case 1:e=Jx(null,e,r,t,n);break e;case 11:e=Xx(null,e,r,t,n);break e;case 14:e=Zx(null,e,r,ur(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Hy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Jx(t,e,r,s,n);case 3:e:{if(Q1(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,x1(t,e),Df(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Il(Error(H(423)),e),e=eT(t,e,r,n,s);break e}else if(r!==s){s=Il(Error(H(424)),e),e=eT(t,e,r,n,s);break e}else for(jn=Ti(e.stateNode.containerInfo.firstChild),Un=e,rt=!0,pr=null,n=w1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===s){e=As(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return T1(e),t===null&&Uy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,My(r,s)?o=null:i!==null&&My(r,i)&&(e.flags|=32),K1(t,e),fn(t,e,o,n),e.child;case 6:return t===null&&Uy(e),null;case 13:return Y1(t,e,n);case 4:return G_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tl(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Xx(t,e,r,s,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Xe(Nf,r._currentValue),r._currentValue=o,i!==null)if(kr(i.value,o)){if(i.children===s.children&&!bn.current){e=As(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ts(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),$y(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$y(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qa(e,n),s=er(s),r=r(s),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),Zx(t,e,r,s,n);case 15:return q1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Jh(t,e),e.tag=1,kn(r)?(t=!0,Rf(e)):t=!1,Qa(e,n),B1(e,r,s),By(e,r,s,n),qy(null,e,r,!0,t,n);case 19:return X1(t,e,n);case 22:return G1(t,e,n)}throw Error(H(156,e.tag))};function fk(t,e){return Ub(t,e)}function b2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,r){return new b2(t,e,n,r)}function lw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k2(t){if(typeof t=="function")return lw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===b_)return 11;if(t===k_)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return zo(n.children,s,i,e);case S_:o=8,s|=8;break;case fy:return t=Zn(12,n,e,s|2),t.elementType=fy,t.lanes=i,t;case py:return t=Zn(13,n,e,s),t.elementType=py,t.lanes=i,t;case my:return t=Zn(19,n,e,s),t.elementType=my,t.lanes=i,t;case Tb:return Zp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eb:o=10;break e;case xb:o=9;break e;case b_:o=11;break e;case k_:o=14;break e;case ei:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Zn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zo(t,e,n,r){return t=Zn(7,t,r,e),t.lanes=n,t}function Zp(t,e,n,r){return t=Zn(22,t,r,e),t.elementType=Tb,t.lanes=n,t.stateNode={isHidden:!1},t}function kg(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function Rg(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cg(0),this.expirationTimes=cg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cw(t,e,n,r,s,i,o,a,l){return t=new R2(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q_(i),t}function A2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pk(t){if(!t)return Mi;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(kn(n))return p1(t,n,e)}return e}function mk(t,e,n,r,s,i,o,a,l){return t=cw(n,r,!0,t,s,i,o,a,l),t.context=pk(null),n=t.current,r=vn(),s=Si(n),i=Ts(r,s),i.callback=e??null,Ci(n,i,s),t.current.lanes=s,Ed(t,s,r),Rn(t,r),t}function Jp(t,e,n,r){var s=e.current,i=vn(),o=Si(s);return n=pk(n),e.context===null?e.context=n:e.pendingContext=n,e=Ts(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ci(s,e,o),t!==null&&(Ir(t,s,o,i),Yh(t,s,o)),o}function zf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uw(t,e){uT(t,e),(t=t.alternate)&&uT(t,e)}function P2(){return null}var gk=typeof reportError=="function"?reportError:function(t){console.error(t)};function dw(t){this._internalRoot=t}em.prototype.render=dw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Jp(t,e,null,null)};em.prototype.unmount=dw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qo(function(){Jp(null,t,null,null)}),e[ks]=null}};function em(t){this._internalRoot=t}em.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&Qb(t)}};function hw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dT(){}function N2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=zf(o);i.call(c)}}var o=mk(e,r,t,0,null,!1,!1,"",dT);return t._reactRootContainer=o,t[ks]=o.current,Du(t.nodeType===8?t.parentNode:t),Qo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=zf(l);a.call(c)}}var l=cw(t,0,!1,null,null,!1,!1,"",dT);return t._reactRootContainer=l,t[ks]=l.current,Du(t.nodeType===8?t.parentNode:t),Qo(function(){Jp(e,l,n,r)}),l}function nm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=zf(o);a.call(l)}}Jp(e,o,t,s)}else o=N2(n,e,t,s,r);return zf(o)}Hb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bc(e.pendingLanes);n!==0&&(P_(e,n|1),Rn(e,yt()),!(Ve&6)&&(Sl=yt()+500,Zi()))}break;case 13:Qo(function(){var r=Rs(t,1);if(r!==null){var s=vn();Ir(r,t,1,s)}}),uw(t,1)}};N_=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var n=vn();Ir(e,t,134217728,n)}uw(t,134217728)}};qb=function(t){if(t.tag===13){var e=Si(t),n=Rs(t,e);if(n!==null){var r=vn();Ir(n,t,e,r)}uw(t,e)}};Gb=function(){return Ge};Kb=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Iy=function(t,e,n){switch(e){case"input":if(vy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qp(r);if(!s)throw Error(H(90));Ib(r),vy(r,s)}}}break;case"textarea":bb(t,n);break;case"select":e=n.value,e!=null&&Ha(t,!!n.multiple,e,!1)}};Db=iw;Mb=Qo;var O2={usingClientEntryPoint:!1,Events:[Td,Ma,qp,Nb,Ob,iw]},Ac={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D2={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||P2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{zp=kh.inject(D2),Kr=kh}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O2;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hw(e))throw Error(H(200));return A2(t,e,null,n)};Gn.createRoot=function(t,e){if(!hw(t))throw Error(H(299));var n=!1,r="",s=gk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cw(t,1,!1,null,null,n,!1,r,s),t[ks]=e.current,Du(t.nodeType===8?t.parentNode:t),new dw(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Vb(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return Qo(t)};Gn.hydrate=function(t,e,n){if(!tm(e))throw Error(H(200));return nm(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!hw(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mk(e,null,t,1,n??null,s,!1,i,o),t[ks]=e.current,Du(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new em(e)};Gn.render=function(t,e,n){if(!tm(e))throw Error(H(200));return nm(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!tm(t))throw Error(H(40));return t._reactRootContainer?(Qo(function(){nm(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};Gn.unstable_batchedUpdates=iw;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tm(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return nm(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function yk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yk)}catch(t){console.error(t)}}yk(),yb.exports=Gn;var Id=yb.exports;const M2=ib(Id);var vk,hT=Id;vk=hT.createRoot,hT.hydrateRoot;function L2(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var _k={exports:{}},wk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=A;function F2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var V2=typeof Object.is=="function"?Object.is:F2,j2=bl.useState,U2=bl.useEffect,$2=bl.useLayoutEffect,z2=bl.useDebugValue;function B2(t,e){var n=e(),r=j2({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return $2(function(){s.value=n,s.getSnapshot=e,Ag(s)&&i({inst:s})},[t,n,e]),U2(function(){return Ag(s)&&i({inst:s}),t(function(){Ag(s)&&i({inst:s})})},[t]),z2(n),n}function Ag(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!V2(t,n)}catch{return!0}}function W2(t,e){return e()}var H2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?W2:B2;wk.useSyncExternalStore=bl.useSyncExternalStore!==void 0?bl.useSyncExternalStore:H2;_k.exports=wk;var q2=_k.exports;const G2=CM.useInsertionEffect,K2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q2=K2?A.useLayoutEffect:A.useEffect,Y2=G2||Q2,Ek=t=>{const e=A.useRef([t,(...n)=>e[0](...n)]).current;return Y2(()=>{e[0]=t}),e[1]},X2="popstate",fw="pushState",pw="replaceState",Z2="hashchange",fT=[X2,fw,pw,Z2],J2=t=>{for(const e of fT)addEventListener(e,t);return()=>{for(const e of fT)removeEventListener(e,t)}},xk=(t,e)=>q2.useSyncExternalStore(J2,t,e),eF=()=>location.search,tF=({ssrSearch:t=""}={})=>xk(eF,()=>t),pT=()=>location.pathname,nF=({ssrPath:t}={})=>xk(pT,t?()=>t:pT),rF=(t,{replace:e=!1,state:n=null}={})=>history[e?pw:fw](n,"",t),sF=(t={})=>[nF(t),rF],mT=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[mT]>"u"){for(const t of[fw,pw]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,mT,{value:!0})}const iF=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Tk=(t="")=>t==="/"?"":t,oF=(t,e)=>t[0]==="~"?t.slice(1):Tk(e)+t,aF=(t="",e)=>iF(gT(Tk(t)),gT(e)),gT=t=>{try{return decodeURI(t)}catch{return t}},Ck={hook:sF,searchHook:tF,parser:L2,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Ik=A.createContext(Ck),Ql=()=>A.useContext(Ik),Sk={},bk=A.createContext(Sk),lF=()=>A.useContext(bk),rm=t=>{const[e,n]=t.hook(t);return[aF(t.base,e),Ek((r,s)=>n(oF(r,t.base),s))]},Ji=()=>rm(Ql()),mw=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((h,f)=>[h,l[f]])):o.groups;let d={...l};return c&&Object.assign(d,c),d})(),...r?[a]:[]]:[!1,null]},cF=t=>mw(Ql().parser,t,Ji()[0]),uF=({children:t,...e})=>{var d,h;const n=Ql(),r=e.hook?Ck:n;let s=r;const[i,o]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((h=e.hook)==null?void 0:h.hrefs);let a=A.useRef({}),l=a.current,c=l;for(let f in r){const g=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===c&&g!==c[f]&&(a.current=c={...c}),c[f]=g,g!==r[f]&&(s=c)}return A.createElement(Ik.Provider,{value:s,children:t})},yT=({children:t,component:e},n)=>e?A.createElement(e,{params:n}):typeof t=="function"?t(n):t,dF=t=>{let e=A.useRef(Sk);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},Qs=({path:t,nest:e,match:n,...r})=>{const s=Ql(),[i]=rm(s),[o,a,l]=n??mw(s.parser,t,i,e),c=dF({...lF(),...a});if(!o)return null;const d=l?A.createElement(uF,{base:l},yT(r,c)):yT(r,c);return A.createElement(bk.Provider,{value:c,children:d})},za=A.forwardRef((t,e)=>{const n=Ql(),[r,s]=rm(n),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:d,replace:h,state:f,...g}=t,w=Ek(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),_=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&A.isValidElement(c)?A.cloneElement(c,{onClick:w,href:_}):A.createElement("a",{...g,onClick:w,href:_,className:d!=null&&d.call?d(r===o):d,children:c,ref:e})}),kk=t=>Array.isArray(t)?t.flatMap(e=>kk(e&&e.type===A.Fragment?e.props.children:e)):[t],hF=({children:t,location:e})=>{const n=Ql(),[r]=rm(n);for(const s of kk(t)){let i=0;if(A.isValidElement(s)&&(i=mw(n.parser,s.props.path,e||r,s.props.nest))[0])return A.cloneElement(s,{match:i})}return null};var Sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yo=typeof window>"u"||"Deno"in globalThis;function Tn(){}function fF(t,e){return typeof t=="function"?t(e):t}function sv(t){return typeof t=="number"&&t>=0&&t!==1/0}function Rk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xa(t,e){return typeof t=="function"?t(e):t}function mr(t,e){return typeof t=="function"?t(e):t}function vT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==gw(o,e.options))return!1}else if(!Wu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function _T(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Bu(e.options.mutationKey)!==Bu(i))return!1}else if(!Wu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function gw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Bu)(t)}function Bu(t){return JSON.stringify(t,(e,n)=>ov(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Wu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Wu(t[n],e[n])):!1}function Ak(t,e){if(t===e)return t;const n=wT(t)&&wT(e);if(n||ov(t)&&ov(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=Ak(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function iv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function wT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ov(t){if(!ET(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ET(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ET(t){return Object.prototype.toString.call(t)==="[object Object]"}function pF(t){return new Promise(e=>{setTimeout(e,t)})}function av(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ak(t,e):e}function mF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yw=Symbol();function Pk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function yF(t,e){return typeof t=="function"?t(...e):!!t}var Oo,ai,al,YS,vF=(YS=class extends Sd{constructor(){super();ge(this,Oo);ge(this,ai);ge(this,al);ie(this,al,e=>{if(!Yo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,ai)||this.setEventListener(L(this,al))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,ai))==null||e.call(this),ie(this,ai,void 0))}setEventListener(e){var n;ie(this,al,e),(n=L(this,ai))==null||n.call(this),ie(this,ai,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,Oo)!==e&&(ie(this,Oo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,Oo)=="boolean"?L(this,Oo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Oo=new WeakMap,ai=new WeakMap,al=new WeakMap,YS),vw=new vF,ll,li,cl,XS,_F=(XS=class extends Sd{constructor(){super();ge(this,ll,!0);ge(this,li);ge(this,cl);ie(this,cl,e=>{if(!Yo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,li)||this.setEventListener(L(this,cl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,li))==null||e.call(this),ie(this,li,void 0))}setEventListener(e){var n;ie(this,cl,e),(n=L(this,li))==null||n.call(this),ie(this,li,e(this.setOnline.bind(this)))}setOnline(e){L(this,ll)!==e&&(ie(this,ll,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,ll)}},ll=new WeakMap,li=new WeakMap,cl=new WeakMap,XS),Bf=new _F;function lv(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function wF(t){return Math.min(1e3*2**t,3e4)}function Nk(t){return(t??"online")==="online"?Bf.isOnline():!0}var Ok=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Pg(t){return t instanceof Ok}function Dk(t){let e=!1,n=0,r=!1,s;const i=lv(),o=_=>{var E;r||(f(new Ok(_)),(E=t.abort)==null||E.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>vw.isFocused()&&(t.networkMode==="always"||Bf.isOnline())&&t.canRun(),d=()=>Nk(t.networkMode)&&t.canRun(),h=_=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,_),s==null||s(),i.resolve(_))},f=_=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,_),s==null||s(),i.reject(_))},g=()=>new Promise(_=>{var E;s=x=>{(r||c())&&_(x)},(E=t.onPause)==null||E.call(t)}).then(()=>{var _;s=void 0,r||(_=t.onContinue)==null||_.call(t)}),w=()=>{if(r)return;let _;const E=n===0?t.initialPromise:void 0;try{_=E??t.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(h).catch(x=>{var F;if(r)return;const v=t.retry??(Yo?0:3),C=t.retryDelay??wF,N=typeof C=="function"?C(n,x):C,M=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(e||!M){f(x);return}n++,(F=t.onFail)==null||F.call(t,n,x),pF(N).then(()=>c()?void 0:g()).then(()=>{e?f(x):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():g().then(w),i)}}var EF=t=>setTimeout(t,0);function xF(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=EF;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Ut=xF(),Do,ZS,Mk=(ZS=class{constructor(){ge(this,Do)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sv(this.gcTime)&&ie(this,Do,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yo?1/0:5*60*1e3))}clearGcTimeout(){L(this,Do)&&(clearTimeout(L(this,Do)),ie(this,Do,void 0))}},Do=new WeakMap,ZS),ul,dl,Qn,Mo,Jt,gd,Lo,dr,ps,JS,TF=(JS=class extends Mk{constructor(n){super();ge(this,dr);ge(this,ul);ge(this,dl);ge(this,Qn);ge(this,Mo);ge(this,Jt);ge(this,gd);ge(this,Lo);ie(this,Lo,!1),ie(this,gd,n.defaultOptions),this.setOptions(n.options),this.observers=[],ie(this,Mo,n.client),ie(this,Qn,L(this,Mo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ie(this,ul,CF(this.options)),this.state=n.state??L(this,ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=L(this,Jt))==null?void 0:n.promise}setOptions(n){this.options={...L(this,gd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Qn).remove(this)}setData(n,r){const s=av(this.state.data,n,this.options);return Ne(this,dr,ps).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ne(this,dr,ps).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=L(this,Jt))==null?void 0:s.promise;return(i=L(this,Jt))==null||i.cancel(n),r?r.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,ul))}isActive(){return this.observers.some(n=>mr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Rk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Jt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Jt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),L(this,Qn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(L(this,Jt)&&(L(this,Lo)?L(this,Jt).cancel({revert:!0}):L(this,Jt).cancelRetry()),this.scheduleGc()),L(this,Qn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ne(this,dr,ps).call(this,{type:"invalidate"})}fetch(n,r){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,Jt))return L(this,Jt).continueRetry(),L(this,Jt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const f=this.observers.find(g=>g.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ie(this,Lo,!0),s.signal)})},o=()=>{const f=Pk(this.options,r),g={client:L(this,Mo),queryKey:this.queryKey,meta:this.meta};return i(g),ie(this,Lo,!1),this.options.persister?this.options.persister(f,g,this):f(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,Mo),state:this.state,fetchFn:o};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),ie(this,dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Ne(this,dr,ps).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var g,w,_,E;Pg(f)&&f.silent||Ne(this,dr,ps).call(this,{type:"error",error:f}),Pg(f)||((w=(g=L(this,Qn).config).onError)==null||w.call(g,f,this),(E=(_=L(this,Qn).config).onSettled)==null||E.call(_,this.state.data,f,this)),this.scheduleGc()};return ie(this,Jt,Dk({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var g,w,_,E;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){l(x);return}(w=(g=L(this,Qn).config).onSuccess)==null||w.call(g,f,this),(E=(_=L(this,Qn).config).onSettled)==null||E.call(_,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,g)=>{Ne(this,dr,ps).call(this,{type:"failed",failureCount:f,error:g})},onPause:()=>{Ne(this,dr,ps).call(this,{type:"pause"})},onContinue:()=>{Ne(this,dr,ps).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),L(this,Jt).start()}},ul=new WeakMap,dl=new WeakMap,Qn=new WeakMap,Mo=new WeakMap,Jt=new WeakMap,gd=new WeakMap,Lo=new WeakMap,dr=new WeakSet,ps=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Lk(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Pg(i)&&i.revert&&L(this,dl)?{...L(this,dl),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Ut.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,Qn).notify({query:this,type:"updated",action:n})})},JS);function Lk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Nk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Vr,eb,IF=(eb=class extends Sd{constructor(e={}){super();ge(this,Vr);this.config=e,ie(this,Vr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??gw(s,n);let o=this.get(i);return o||(o=new TF({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,Vr).has(e.queryHash)||(L(this,Vr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,Vr).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,Vr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ut.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Vr).get(e)}getAll(){return[...L(this,Vr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>vT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>vT(e,r)):n}notify(e){Ut.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ut.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ut.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Vr=new WeakMap,eb),jr,un,Fo,Ur,Js,tb,SF=(tb=class extends Mk{constructor(n){super();ge(this,Ur);ge(this,jr);ge(this,un);ge(this,Fo);this.mutationId=n.mutationId,ie(this,un,n.mutationCache),ie(this,jr,[]),this.state=n.state||bF(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){L(this,jr).includes(n)||(L(this,jr).push(n),this.clearGcTimeout(),L(this,un).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ie(this,jr,L(this,jr).filter(r=>r!==n)),this.scheduleGc(),L(this,un).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){L(this,jr).length||(this.state.status==="pending"?this.scheduleGc():L(this,un).remove(this))}continue(){var n;return((n=L(this,Fo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,c,d,h,f,g,w,_,E,x,v,C,N,M,F,S,T,b;const r=()=>{Ne(this,Ur,Js).call(this,{type:"continue"})};ie(this,Fo,Dk({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{Ne(this,Ur,Js).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{Ne(this,Ur,Js).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,un).canRun(this)}));const s=this.state.status==="pending",i=!L(this,Fo).canStart();try{if(s)r();else{Ne(this,Ur,Js).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=L(this,un).config).onMutate)==null?void 0:a.call(o,n,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));O!==this.state.context&&Ne(this,Ur,Js).call(this,{type:"pending",context:O,variables:n,isPaused:i})}const k=await L(this,Fo).start();return await((h=(d=L(this,un).config).onSuccess)==null?void 0:h.call(d,k,n,this.state.context,this)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,k,n,this.state.context)),await((_=(w=L(this,un).config).onSettled)==null?void 0:_.call(w,k,null,this.state.variables,this.state.context,this)),await((x=(E=this.options).onSettled)==null?void 0:x.call(E,k,null,n,this.state.context)),Ne(this,Ur,Js).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(v=L(this,un).config).onError)==null?void 0:C.call(v,k,n,this.state.context,this)),await((M=(N=this.options).onError)==null?void 0:M.call(N,k,n,this.state.context)),await((S=(F=L(this,un).config).onSettled)==null?void 0:S.call(F,void 0,k,this.state.variables,this.state.context,this)),await((b=(T=this.options).onSettled)==null?void 0:b.call(T,void 0,k,n,this.state.context)),k}finally{Ne(this,Ur,Js).call(this,{type:"error",error:k})}}finally{L(this,un).runNext(this)}}},jr=new WeakMap,un=new WeakMap,Fo=new WeakMap,Ur=new WeakSet,Js=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ut.batch(()=>{L(this,jr).forEach(s=>{s.onMutationUpdate(n)}),L(this,un).notify({mutation:this,type:"updated",action:n})})},tb);function bF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ys,hr,yd,nb,kF=(nb=class extends Sd{constructor(e={}){super();ge(this,ys);ge(this,hr);ge(this,yd);this.config=e,ie(this,ys,new Set),ie(this,hr,new Map),ie(this,yd,0)}build(e,n,r){const s=new SF({mutationCache:this,mutationId:++dh(this,yd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){L(this,ys).add(e);const n=Rh(e);if(typeof n=="string"){const r=L(this,hr).get(n);r?r.push(e):L(this,hr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,ys).delete(e)){const n=Rh(e);if(typeof n=="string"){const r=L(this,hr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&L(this,hr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rh(e);if(typeof n=="string"){const r=L(this,hr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Rh(e);if(typeof n=="string"){const s=(r=L(this,hr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ut.batch(()=>{L(this,ys).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,ys).clear(),L(this,hr).clear()})}getAll(){return Array.from(L(this,ys))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>_T(n,r))}findAll(e={}){return this.getAll().filter(n=>_T(e,n))}notify(e){Ut.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ut.batch(()=>Promise.all(e.map(n=>n.continue().catch(Tn))))}},ys=new WeakMap,hr=new WeakMap,yd=new WeakMap,nb);function Rh(t){var e;return(e=t.options.scope)==null?void 0:e.id}function xT(t){return{onFetch:(e,n)=>{var d,h,f,g,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let _=!1;const E=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},x=Pk(e.options,e.fetchOptions),v=async(C,N,M)=>{if(_)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const F={client:e.client,queryKey:e.queryKey,pageParam:N,direction:M?"backward":"forward",meta:e.options.meta};E(F);const S=await x(F),{maxPages:T}=e.options,b=M?gF:mF;return{pages:b(C.pages,S,T),pageParams:b(C.pageParams,N,T)}};if(s&&i.length){const C=s==="backward",N=C?RF:TT,M={pages:i,pageParams:o},F=N(r,M);a=await v(M,F,C)}else{const C=t??i.length;do{const N=l===0?o[0]??r.initialPageParam:TT(r,a);if(l>0&&N==null)break;a=await v(a,N),l++}while(l<C)}return a};e.options.persister?e.fetchFn=()=>{var _,E;return(E=(_=e.options).persister)==null?void 0:E.call(_,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function TT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function RF(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ut,ci,ui,hl,fl,di,pl,ml,rb,AF=(rb=class{constructor(t={}){ge(this,ut);ge(this,ci);ge(this,ui);ge(this,hl);ge(this,fl);ge(this,di);ge(this,pl);ge(this,ml);ie(this,ut,t.queryCache||new IF),ie(this,ci,t.mutationCache||new kF),ie(this,ui,t.defaultOptions||{}),ie(this,hl,new Map),ie(this,fl,new Map),ie(this,di,0)}mount(){dh(this,di)._++,L(this,di)===1&&(ie(this,pl,vw.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,ut).onFocus())})),ie(this,ml,Bf.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,ut).onOnline())})))}unmount(){var t,e;dh(this,di)._--,L(this,di)===0&&((t=L(this,pl))==null||t.call(this),ie(this,pl,void 0),(e=L(this,ml))==null||e.call(this),ie(this,ml,void 0))}isFetching(t){return L(this,ut).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,ci).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,ut).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=L(this,ut).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Xa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return L(this,ut).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,ut).get(r.queryHash),i=s==null?void 0:s.state.data,o=fF(e,i);if(o!==void 0)return L(this,ut).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ut.batch(()=>L(this,ut).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,ut).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,ut);Ut.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,ut);return Ut.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ut.batch(()=>L(this,ut).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(t,e={}){return Ut.batch(()=>(L(this,ut).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ut.batch(()=>L(this,ut).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,ut).build(this,e);return n.isStaleByTime(Xa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Tn).catch(Tn)}fetchInfiniteQuery(t){return t.behavior=xT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Tn).catch(Tn)}ensureInfiniteQueryData(t){return t.behavior=xT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bf.isOnline()?L(this,ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,ut)}getMutationCache(){return L(this,ci)}getDefaultOptions(){return L(this,ui)}setDefaultOptions(t){ie(this,ui,t)}setQueryDefaults(t,e){L(this,hl).set(Bu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,hl).values()],n={};return e.forEach(r=>{Wu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){L(this,fl).set(Bu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,fl).values()],n={};return e.forEach(r=>{Wu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,ui).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,ui).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,ut).clear(),L(this,ci).clear()}},ut=new WeakMap,ci=new WeakMap,ui=new WeakMap,hl=new WeakMap,fl=new WeakMap,di=new WeakMap,pl=new WeakMap,ml=new WeakMap,rb),xn,Oe,vd,dn,Vo,gl,hi,fi,_d,yl,vl,jo,Uo,pi,_l,qe,Hc,cv,uv,dv,hv,fv,pv,mv,Fk,sb,PF=(sb=class extends Sd{constructor(e,n){super();ge(this,qe);ge(this,xn);ge(this,Oe);ge(this,vd);ge(this,dn);ge(this,Vo);ge(this,gl);ge(this,hi);ge(this,fi);ge(this,_d);ge(this,yl);ge(this,vl);ge(this,jo);ge(this,Uo);ge(this,pi);ge(this,_l,new Set);this.options=n,ie(this,xn,e),ie(this,fi,null),ie(this,hi,lv()),this.options.experimental_prefetchInRender||L(this,hi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Oe).addObserver(this),CT(L(this,Oe),this.options)?Ne(this,qe,Hc).call(this):this.updateResult(),Ne(this,qe,hv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gv(L(this,Oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gv(L(this,Oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ne(this,qe,fv).call(this),Ne(this,qe,pv).call(this),L(this,Oe).removeObserver(this)}setOptions(e){const n=this.options,r=L(this,Oe);if(this.options=L(this,xn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mr(this.options.enabled,L(this,Oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ne(this,qe,mv).call(this),L(this,Oe).setOptions(this.options),n._defaulted&&!iv(this.options,n)&&L(this,xn).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Oe),observer:this});const s=this.hasListeners();s&&IT(L(this,Oe),r,this.options,n)&&Ne(this,qe,Hc).call(this),this.updateResult(),s&&(L(this,Oe)!==r||mr(this.options.enabled,L(this,Oe))!==mr(n.enabled,L(this,Oe))||Xa(this.options.staleTime,L(this,Oe))!==Xa(n.staleTime,L(this,Oe)))&&Ne(this,qe,cv).call(this);const i=Ne(this,qe,uv).call(this);s&&(L(this,Oe)!==r||mr(this.options.enabled,L(this,Oe))!==mr(n.enabled,L(this,Oe))||i!==L(this,pi))&&Ne(this,qe,dv).call(this,i)}getOptimisticResult(e){const n=L(this,xn).getQueryCache().build(L(this,xn),e),r=this.createResult(n,e);return OF(this,r)&&(ie(this,dn,r),ie(this,gl,this.options),ie(this,Vo,L(this,Oe).state)),r}getCurrentResult(){return L(this,dn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){L(this,_l).add(e)}getCurrentQuery(){return L(this,Oe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=L(this,xn).defaultQueryOptions(e),r=L(this,xn).getQueryCache().build(L(this,xn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ne(this,qe,Hc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,dn)))}createResult(e,n){var b;const r=L(this,Oe),s=this.options,i=L(this,dn),o=L(this,Vo),a=L(this,gl),c=e!==r?e.state:L(this,vd),{state:d}=e;let h={...d},f=!1,g;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&CT(e,n),P=k&&IT(e,r,n,s);(O||P)&&(h={...h,...Lk(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:_,status:E}=h;g=h.data;let x=!1;if(n.placeholderData!==void 0&&g===void 0&&E==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,x=!0):k=typeof n.placeholderData=="function"?n.placeholderData((b=L(this,vl))==null?void 0:b.state.data,L(this,vl)):n.placeholderData,k!==void 0&&(E="success",g=av(i==null?void 0:i.data,k,n),f=!0)}if(n.select&&g!==void 0&&!x)if(i&&g===(o==null?void 0:o.data)&&n.select===L(this,_d))g=L(this,yl);else try{ie(this,_d,n.select),g=n.select(g),g=av(i==null?void 0:i.data,g,n),ie(this,yl,g),ie(this,fi,null)}catch(k){ie(this,fi,k)}L(this,fi)&&(w=L(this,fi),g=L(this,yl),_=Date.now(),E="error");const v=h.fetchStatus==="fetching",C=E==="pending",N=E==="error",M=C&&v,F=g!==void 0,T={status:E,fetchStatus:h.fetchStatus,isPending:C,isSuccess:E==="success",isError:N,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:_,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!C,isLoadingError:N&&!F,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&F,isStale:_w(e,n),refetch:this.refetch,promise:L(this,hi)};if(this.options.experimental_prefetchInRender){const k=R=>{T.status==="error"?R.reject(T.error):T.data!==void 0&&R.resolve(T.data)},O=()=>{const R=ie(this,hi,T.promise=lv());k(R)},P=L(this,hi);switch(P.status){case"pending":e.queryHash===r.queryHash&&k(P);break;case"fulfilled":(T.status==="error"||T.data!==P.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==P.reason)&&O();break}}return T}updateResult(){const e=L(this,dn),n=this.createResult(L(this,Oe),this.options);if(ie(this,Vo,L(this,Oe).state),ie(this,gl,this.options),L(this,Vo).data!==void 0&&ie(this,vl,L(this,Oe)),iv(n,e))return;ie(this,dn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!L(this,_l).size)return!0;const o=new Set(i??L(this,_l));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,dn)).some(a=>{const l=a;return L(this,dn)[l]!==e[l]&&o.has(l)})};Ne(this,qe,Fk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ne(this,qe,hv).call(this)}},xn=new WeakMap,Oe=new WeakMap,vd=new WeakMap,dn=new WeakMap,Vo=new WeakMap,gl=new WeakMap,hi=new WeakMap,fi=new WeakMap,_d=new WeakMap,yl=new WeakMap,vl=new WeakMap,jo=new WeakMap,Uo=new WeakMap,pi=new WeakMap,_l=new WeakMap,qe=new WeakSet,Hc=function(e){Ne(this,qe,mv).call(this);let n=L(this,Oe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Tn)),n},cv=function(){Ne(this,qe,fv).call(this);const e=Xa(this.options.staleTime,L(this,Oe));if(Yo||L(this,dn).isStale||!sv(e))return;const r=Rk(L(this,dn).dataUpdatedAt,e)+1;ie(this,jo,setTimeout(()=>{L(this,dn).isStale||this.updateResult()},r))},uv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Oe)):this.options.refetchInterval)??!1},dv=function(e){Ne(this,qe,pv).call(this),ie(this,pi,e),!(Yo||mr(this.options.enabled,L(this,Oe))===!1||!sv(L(this,pi))||L(this,pi)===0)&&ie(this,Uo,setInterval(()=>{(this.options.refetchIntervalInBackground||vw.isFocused())&&Ne(this,qe,Hc).call(this)},L(this,pi)))},hv=function(){Ne(this,qe,cv).call(this),Ne(this,qe,dv).call(this,Ne(this,qe,uv).call(this))},fv=function(){L(this,jo)&&(clearTimeout(L(this,jo)),ie(this,jo,void 0))},pv=function(){L(this,Uo)&&(clearInterval(L(this,Uo)),ie(this,Uo,void 0))},mv=function(){const e=L(this,xn).getQueryCache().build(L(this,xn),this.options);if(e===L(this,Oe))return;const n=L(this,Oe);ie(this,Oe,e),ie(this,vd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Fk=function(e){Ut.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(L(this,dn))}),L(this,xn).getQueryCache().notify({query:L(this,Oe),type:"observerResultsUpdated"})})},sb);function NF(t,e){return mr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function CT(t,e){return NF(t,e)||t.state.data!==void 0&&gv(t,e,e.refetchOnMount)}function gv(t,e,n){if(mr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_w(t,e)}return!1}function IT(t,e,n,r){return(t!==e||mr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_w(t,n)}function _w(t,e){return mr(e.enabled,t)!==!1&&t.isStaleByTime(Xa(e.staleTime,t))}function OF(t,e){return!iv(t.getCurrentResult(),e)}var Vk=A.createContext(void 0),DF=t=>{const e=A.useContext(Vk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},MF=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Vk.Provider,{value:t,children:e})),jk=A.createContext(!1),LF=()=>A.useContext(jk);jk.Provider;function FF(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var VF=A.createContext(FF()),jF=()=>A.useContext(VF),UF=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},$F=t=>{A.useEffect(()=>{t.clearReset()},[t])},zF=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||yF(n,[t.error,r])),BF=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},WF=(t,e)=>t.isLoading&&t.isFetching&&!e,HF=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ST=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function qF(t,e,n){var h,f,g,w,_;const r=DF(),s=LF(),i=jF(),o=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",BF(o),UF(o,i),$F(i);const a=!r.getQueryCache().get(o.queryHash),[l]=A.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),d=!s&&t.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(E=>{const x=d?l.subscribe(Ut.batchCalls(E)):Tn;return l.updateResult(),x},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),A.useEffect(()=>{l.setOptions(o)},[o,l]),HF(o,c))throw ST(o,l,i);if(zF({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||w.call(g,o,c),o.experimental_prefetchInRender&&!Yo&&WF(c,s)){const E=a?ST(o,l,i):(_=r.getQueryCache().get(o.queryHash))==null?void 0:_.promise;E==null||E.catch(Tn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function kl(t,e){return qF(t,PF)}async function GF(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const KF=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await GF(n),await n.json())},QF=new AF({defaultOptions:{queries:{queryFn:KF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),YF=1,XF=1e6;let Ng=0;function ZF(){return Ng=(Ng+1)%Number.MAX_SAFE_INTEGER,Ng.toString()}const Og=new Map,bT=t=>{if(Og.has(t))return;const e=setTimeout(()=>{Og.delete(t),du({type:"REMOVE_TOAST",toastId:t})},XF);Og.set(t,e)},JF=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,YF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?bT(n):t.toasts.forEach(r=>{bT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},rf=[];let sf={toasts:[]};function du(t){sf=JF(sf,t),rf.forEach(e=>{e(sf)})}function eV({...t}){const e=ZF(),n=s=>du({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>du({type:"DISMISS_TOAST",toastId:e});return du({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function sm(){const[t,e]=A.useState(sf);return A.useEffect(()=>(rf.push(e),()=>{const n=rf.indexOf(e);n>-1&&rf.splice(n,1)}),[t]),{...t,toast:eV,dismiss:n=>du({type:"DISMISS_TOAST",toastId:n})}}function Et(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uk(...t){return e=>{let n=!1;const r=t.map(s=>{const i=kT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():kT(t[s],null)}}}}function nr(...t){return A.useCallback(Uk(...t),t)}function Yl(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var x;const{scope:f,children:g,...w}=h,_=((x=f==null?void 0:f[t])==null?void 0:x[l])||a,E=A.useMemo(()=>w,Object.values(w));return m.jsx(_.Provider,{value:E,children:g})};c.displayName=i+"Provider";function d(h,f){var _;const g=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,w=A.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,tV(s,...e)]}function tV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Wf(t){const e=nV(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(sV);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var $k=Wf("Slot");function nV(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=oV(s),a=iV(i,s.props);return s.type!==A.Fragment&&(a.ref=r?Uk(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zk=Symbol("radix.slottable");function rV(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=zk,e}function sV(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zk}function iV(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function oV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function aV(t){const e=t+"CollectionProvider",[n,r]=Yl(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:E,children:x}=_,v=ke.useRef(null),C=ke.useRef(new Map).current;return m.jsx(s,{scope:E,itemMap:C,collectionRef:v,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=Wf(a),c=ke.forwardRef((_,E)=>{const{scope:x,children:v}=_,C=i(a,x),N=nr(E,C.collectionRef);return m.jsx(l,{ref:N,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Wf(d),g=ke.forwardRef((_,E)=>{const{scope:x,children:v,...C}=_,N=ke.useRef(null),M=nr(E,N),F=i(d,x);return ke.useEffect(()=>(F.itemMap.set(N,{ref:N,...C}),()=>void F.itemMap.delete(N))),m.jsx(f,{[h]:"",ref:M,children:v})});g.displayName=d;function w(_){const E=i(t+"CollectionConsumer",_);return ke.useCallback(()=>{const v=E.collectionRef.current;if(!v)return[];const C=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort((F,S)=>C.indexOf(F.ref.current)-C.indexOf(S.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,r]}var lV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],At=lV.reduce((t,e)=>{const n=Wf(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Bk(t,e){t&&Id.flushSync(()=>t.dispatchEvent(e))}function es(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function cV(t,e=globalThis==null?void 0:globalThis.document){const n=es(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var uV="DismissableLayer",yv="dismissableLayer.update",dV="dismissableLayer.pointerDownOutside",hV="dismissableLayer.focusOutside",RT,Wk=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ww=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Wk),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),w=nr(e,S=>h(S)),_=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(E),v=d?_.indexOf(d):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,N=v>=x,M=pV(S=>{const T=S.target,b=[...c.branches].some(k=>k.contains(T));!N||b||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),F=mV(S=>{const T=S.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return cV(S=>{v===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(RT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),AT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=RT)}},[d,f,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),AT())},[d,c]),A.useEffect(()=>{const S=()=>g({});return document.addEventListener(yv,S),()=>document.removeEventListener(yv,S)},[]),m.jsx(At.div,{...l,ref:w,style:{pointerEvents:C?N?"auto":"none":void 0,...t.style},onFocusCapture:Et(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Et(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Et(t.onPointerDownCapture,M.onPointerDownCapture)})});ww.displayName=uV;var fV="DismissableLayerBranch",Hk=A.forwardRef((t,e)=>{const n=A.useContext(Wk),r=A.useRef(null),s=nr(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(At.div,{...t,ref:s})});Hk.displayName=fV;function pV(t,e=globalThis==null?void 0:globalThis.document){const n=es(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){qk(dV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function mV(t,e=globalThis==null?void 0:globalThis.document){const n=es(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&qk(hV,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AT(){const t=new CustomEvent(yv);document.dispatchEvent(t)}function qk(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Bk(s,i):s.dispatchEvent(i)}var gV=ww,yV=Hk,Xo=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},vV="Portal",Gk=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);Xo(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?M2.createPortal(m.jsx(At.div,{...r,ref:e}),o):null});Gk.displayName=vV;function _V(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var Ew=t=>{const{present:e,children:n}=t,r=wV(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=nr(r.ref,EV(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};Ew.displayName="Presence";function wV(t){const[e,n]=A.useState(),r=A.useRef({}),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=_V(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Ah(r.current);i.current=a==="mounted"?c:"none"},[a]),Xo(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,g=Ah(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Xo(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const _=Ah(r.current).includes(g.animationName);if(g.target===e&&_&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},f=g=>{g.target===e&&(i.current=Ah(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Ah(t){return(t==null?void 0:t.animationName)||"none"}function EV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Kk({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=xV({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=es(n),l=A.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function xV({defaultProp:t,onChange:e}){const n=A.useState(t),[r]=n,s=A.useRef(r),i=es(e);return A.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var TV="VisuallyHidden",im=A.forwardRef((t,e)=>m.jsx(At.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));im.displayName=TV;var CV=im,xw="ToastProvider",[Tw,IV,SV]=aV("Toast"),[Qk,GK]=Yl("Toast",[SV]),[bV,om]=Qk(xw),Yk=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${xw}\`. Expected non-empty \`string\`.`),m.jsx(Tw.Provider,{scope:e,children:m.jsx(bV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(g=>g+1),[]),onToastRemove:A.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Yk.displayName=xw;var Xk="ToastViewport",kV=["F8"],vv="toast.viewportPause",_v="toast.viewportResume",Zk=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=kV,label:s="Notifications ({hotkey})",...i}=t,o=om(Xk,n),a=IV(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=nr(e,h,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;A.useEffect(()=>{const E=x=>{var C;r.length!==0&&r.every(N=>x[N]||x.code===N)&&((C=h.current)==null||C.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),A.useEffect(()=>{const E=l.current,x=h.current;if(w&&E&&x){const v=()=>{if(!o.isClosePausedRef.current){const F=new CustomEvent(vv);x.dispatchEvent(F),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const F=new CustomEvent(_v);x.dispatchEvent(F),o.isClosePausedRef.current=!1}},N=F=>{!E.contains(F.relatedTarget)&&C()},M=()=>{E.contains(document.activeElement)||C()};return E.addEventListener("focusin",v),E.addEventListener("focusout",N),E.addEventListener("pointermove",v),E.addEventListener("pointerleave",M),window.addEventListener("blur",v),window.addEventListener("focus",C),()=>{E.removeEventListener("focusin",v),E.removeEventListener("focusout",N),E.removeEventListener("pointermove",v),E.removeEventListener("pointerleave",M),window.removeEventListener("blur",v),window.removeEventListener("focus",C)}}},[w,o.isClosePausedRef]);const _=A.useCallback(({tabbingDirection:E})=>{const v=a().map(C=>{const N=C.ref.current,M=[N,...$V(N)];return E==="forwards"?M:M.reverse()});return(E==="forwards"?v.reverse():v).flat()},[a]);return A.useEffect(()=>{const E=h.current;if(E){const x=v=>{var M,F,S;const C=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!C){const T=document.activeElement,b=v.shiftKey;if(v.target===E&&b){(M=c.current)==null||M.focus();return}const P=_({tabbingDirection:b?"backwards":"forwards"}),R=P.findIndex(W=>W===T);Dg(P.slice(R+1))?v.preventDefault():b?(F=c.current)==null||F.focus():(S=d.current)==null||S.focus()}};return E.addEventListener("keydown",x),()=>E.removeEventListener("keydown",x)}},[a,_]),m.jsxs(yV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&m.jsx(wv,{ref:c,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"forwards"});Dg(E)}}),m.jsx(Tw.Slot,{scope:n,children:m.jsx(At.ol,{tabIndex:-1,...i,ref:f})}),w&&m.jsx(wv,{ref:d,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"backwards"});Dg(E)}})]})});Zk.displayName=Xk;var Jk="ToastFocusProxy",wv=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=om(Jk,n);return m.jsx(im,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});wv.displayName=Jk;var am="Toast",RV="toast.swipeStart",AV="toast.swipeMove",PV="toast.swipeCancel",NV="toast.swipeEnd",eR=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=Kk({prop:r,defaultProp:s,onChange:i});return m.jsx(Ew,{present:n||a,children:m.jsx(MV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:es(t.onPause),onResume:es(t.onResume),onSwipeStart:Et(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Et(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Et(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Et(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});eR.displayName=am;var[OV,DV]=Qk(am,{onClose(){}}),MV=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...w}=t,_=om(am,n),[E,x]=A.useState(null),v=nr(e,W=>x(W)),C=A.useRef(null),N=A.useRef(null),M=s||_.duration,F=A.useRef(0),S=A.useRef(M),T=A.useRef(0),{onToastAdd:b,onToastRemove:k}=_,O=es(()=>{var ue;(E==null?void 0:E.contains(document.activeElement))&&((ue=_.viewport)==null||ue.focus()),o()}),P=A.useCallback(W=>{!W||W===1/0||(window.clearTimeout(T.current),F.current=new Date().getTime(),T.current=window.setTimeout(O,W))},[O]);A.useEffect(()=>{const W=_.viewport;if(W){const ue=()=>{P(S.current),c==null||c()},ce=()=>{const me=new Date().getTime()-F.current;S.current=S.current-me,window.clearTimeout(T.current),l==null||l()};return W.addEventListener(vv,ce),W.addEventListener(_v,ue),()=>{W.removeEventListener(vv,ce),W.removeEventListener(_v,ue)}}},[_.viewport,M,l,c,P]),A.useEffect(()=>{i&&!_.isClosePausedRef.current&&P(M)},[i,M,_.isClosePausedRef,P]),A.useEffect(()=>(b(),()=>k()),[b,k]);const R=A.useMemo(()=>E?aR(E):null,[E]);return _.viewport?m.jsxs(m.Fragment,{children:[R&&m.jsx(LV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),m.jsx(OV,{scope:n,onClose:O,children:Id.createPortal(m.jsx(Tw.ItemSlot,{scope:n,children:m.jsx(gV,{asChild:!0,onEscapeKeyDown:Et(a,()=>{_.isFocusedToastEscapeKeyDownRef.current||O(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(At.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":_.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Et(t.onKeyDown,W=>{W.key==="Escape"&&(a==null||a(W.nativeEvent),W.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Et(t.onPointerDown,W=>{W.button===0&&(C.current={x:W.clientX,y:W.clientY})}),onPointerMove:Et(t.onPointerMove,W=>{if(!C.current)return;const ue=W.clientX-C.current.x,ce=W.clientY-C.current.y,me=!!N.current,z=["left","right"].includes(_.swipeDirection),Y=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,oe=z?Y(0,ue):0,we=z?0:Y(0,ce),Pe=W.pointerType==="touch"?10:2,Be={x:oe,y:we},qt={originalEvent:W,delta:Be};me?(N.current=Be,Ph(AV,h,qt,{discrete:!1})):PT(Be,_.swipeDirection,Pe)?(N.current=Be,Ph(RV,d,qt,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(ue)>Pe||Math.abs(ce)>Pe)&&(C.current=null)}),onPointerUp:Et(t.onPointerUp,W=>{const ue=N.current,ce=W.target;if(ce.hasPointerCapture(W.pointerId)&&ce.releasePointerCapture(W.pointerId),N.current=null,C.current=null,ue){const me=W.currentTarget,z={originalEvent:W,delta:ue};PT(ue,_.swipeDirection,_.swipeThreshold)?Ph(NV,g,z,{discrete:!0}):Ph(PV,f,z,{discrete:!0}),me.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),LV=t=>{const{__scopeToast:e,children:n,...r}=t,s=om(am,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return jV(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(Gk,{asChild:!0,children:m.jsx(im,{...r,children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})})})},FV="ToastTitle",tR=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(At.div,{...r,ref:e})});tR.displayName=FV;var VV="ToastDescription",nR=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(At.div,{...r,ref:e})});nR.displayName=VV;var rR="ToastAction",sR=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(oR,{altText:n,asChild:!0,children:m.jsx(Cw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rR}\`. Expected non-empty \`string\`.`),null)});sR.displayName=rR;var iR="ToastClose",Cw=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=DV(iR,n);return m.jsx(oR,{asChild:!0,children:m.jsx(At.button,{type:"button",...r,ref:e,onClick:Et(t.onClick,s.onClose)})})});Cw.displayName=iR;var oR=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return m.jsx(At.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function aR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),UV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...aR(r))}}),e}function Ph(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Bk(s,i):s.dispatchEvent(i)}var PT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function jV(t=()=>{}){const e=es(t);Xo(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function UV(t){return t.nodeType===t.ELEMENT_NODE}function $V(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Dg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var zV=Yk,lR=Zk,cR=eR,uR=tR,dR=nR,hR=sR,fR=Cw;function pR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=pR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=pR(t))&&(r&&(r+=" "),r+=e);return r}const NT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,OT=mR,Iw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return OT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=NT(d)||NT(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...g}=d;return Object.entries(g).every(w=>{let[_,E]=w;return Array.isArray(E)?E.includes({...i,...a}[_]):{...i,...a}[_]===E})?[...c,h,f]:c},[]);return OT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gR=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...WV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gR("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(HV,{ref:i,iconNode:e,className:gR(`lucide-${BV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=yR("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=yR("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sw="-",KV=t=>{const e=YV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Sw);return a[0]===""&&a.length!==1&&a.shift(),vR(a,e)||QV(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},vR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Sw);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},DT=/^\[(.+)\]$/,QV=t=>{if(DT.test(t)){const e=DT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},YV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ZV(Object.entries(t.classGroups),n).forEach(([i,o])=>{Ev(o,r,i,e)}),r},Ev=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:MT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(XV(s)){Ev(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Ev(o,MT(e,i),n,r)})})},MT=(t,e)=>{let n=t;return e.split(Sw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},XV=t=>t.isThemeGetter,ZV=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,JV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},_R="!",ej=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let E=0;E<a.length;E++){let x=a[E];if(c===0){if(x===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(d,E)),d=E+i;continue}if(x==="/"){h=E;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(d),g=f.startsWith(_R),w=g?f.substring(1):f,_=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:_}};return n?a=>n({className:a,parseClassName:o}):o},tj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},nj=t=>({cache:JV(t.cacheSize),parseClassName:ej(t),...KV(t)}),rj=/\s+/,sj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(rj);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:g}=n(c);let w=!!g,_=r(w?f.substring(0,g):f);if(!_){if(!w){a=c+(a.length>0?" "+a:a);continue}if(_=r(f),!_){a=c+(a.length>0?" "+a:a);continue}w=!1}const E=tj(d).join(":"),x=h?E+_R:E,v=x+_;if(i.includes(v))continue;i.push(v);const C=s(_,w);for(let N=0;N<C.length;++N){const M=C[N];i.push(x+M)}a=c+(a.length>0?" "+a:a)}return a};function ij(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wR(e))&&(r&&(r+=" "),r+=n);return r}const wR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wR(t[r]))&&(n&&(n+=" "),n+=e);return n};function oj(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=nj(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=sj(l,n);return s(l,d),d}return function(){return i(ij.apply(null,arguments))}}const Je=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},ER=/^\[(?:([a-z-]+):)?(.+)\]$/i,aj=/^\d+\/\d+$/,lj=new Set(["px","full","screen"]),cj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hs=t=>Za(t)||lj.has(t)||aj.test(t),Ys=t=>Xl(t,"length",Ej),Za=t=>!!t&&!Number.isNaN(Number(t)),Mg=t=>Xl(t,"number",Za),Pc=t=>!!t&&Number.isInteger(Number(t)),pj=t=>t.endsWith("%")&&Za(t.slice(0,-1)),Te=t=>ER.test(t),Xs=t=>cj.test(t),mj=new Set(["length","size","percentage"]),gj=t=>Xl(t,mj,xR),yj=t=>Xl(t,"position",xR),vj=new Set(["image","url"]),_j=t=>Xl(t,vj,Tj),wj=t=>Xl(t,"",xj),Nc=()=>!0,Xl=(t,e,n)=>{const r=ER.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Ej=t=>uj.test(t)&&!dj.test(t),xR=()=>!1,xj=t=>hj.test(t),Tj=t=>fj.test(t),Cj=()=>{const t=Je("colors"),e=Je("spacing"),n=Je("blur"),r=Je("brightness"),s=Je("borderColor"),i=Je("borderRadius"),o=Je("borderSpacing"),a=Je("borderWidth"),l=Je("contrast"),c=Je("grayscale"),d=Je("hueRotate"),h=Je("invert"),f=Je("gap"),g=Je("gradientColorStops"),w=Je("gradientColorStopPositions"),_=Je("inset"),E=Je("margin"),x=Je("opacity"),v=Je("padding"),C=Je("saturate"),N=Je("scale"),M=Je("sepia"),F=Je("skew"),S=Je("space"),T=Je("translate"),b=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Te,e],P=()=>[Te,e],R=()=>["",hs,Ys],W=()=>["auto",Za,Te],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ce=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Te],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[Za,Te];return{cacheSize:500,separator:":",theme:{colors:[Nc],spacing:[hs,Ys],blur:["none","",Xs,Te],brightness:we(),borderColor:[t],borderRadius:["none","","full",Xs,Te],borderSpacing:P(),borderWidth:R(),contrast:we(),grayscale:Y(),hueRotate:we(),invert:Y(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[pj,Ys],inset:O(),margin:O(),opacity:we(),padding:P(),saturate:we(),scale:we(),sepia:Y(),skew:we(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Xs]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Te]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pc,Te]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Pc,Te]}],"grid-cols":[{"grid-cols":[Nc]}],"col-start-end":[{col:["auto",{span:["full",Pc,Te]},Te]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Nc]}],"row-start-end":[{row:["auto",{span:[Pc,Te]},Te]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,e]}],"min-w":[{"min-w":[Te,e,"min","max","fit"]}],"max-w":[{"max-w":[Te,e,"none","full","min","max","fit","prose",{screen:[Xs]},Xs]}],h:[{h:[Te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Xs,Ys]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mg]}],"font-family":[{font:[Nc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",Za,Mg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hs,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hs,Ys]}],"underline-offset":[{"underline-offset":["auto",hs,Te]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),yj]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_j]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...ce(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:ce()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ce()]}],"outline-offset":[{"outline-offset":[hs,Te]}],"outline-w":[{outline:[hs,Ys]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[hs,Ys]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Xs,wj]}],"shadow-color":[{shadow:[Nc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Xs,Te]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[C]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Pc,Te]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[hs,Ys,Mg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ij=oj(Cj);function lt(...t){return Ij(mR(t))}const Sj=zV,TR=A.forwardRef(({className:t,...e},n)=>m.jsx(lR,{ref:n,className:lt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));TR.displayName=lR.displayName;const bj=Iw("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CR=A.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(cR,{ref:r,className:lt(bj({variant:e}),t),...n}));CR.displayName=cR.displayName;const kj=A.forwardRef(({className:t,...e},n)=>m.jsx(hR,{ref:n,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));kj.displayName=hR.displayName;const IR=A.forwardRef(({className:t,...e},n)=>m.jsx(fR,{ref:n,className:lt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(GV,{className:"h-4 w-4"})}));IR.displayName=fR.displayName;const SR=A.forwardRef(({className:t,...e},n)=>m.jsx(uR,{ref:n,className:lt("text-sm font-semibold",t),...e}));SR.displayName=uR.displayName;const bR=A.forwardRef(({className:t,...e},n)=>m.jsx(dR,{ref:n,className:lt("text-sm opacity-90",t),...e}));bR.displayName=dR.displayName;function Rj(){const{toasts:t}=sm();return m.jsxs(Sj,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return m.jsxs(CR,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(SR,{children:n}),r&&m.jsx(bR,{children:r})]}),s,m.jsx(IR,{})]},e)}),m.jsx(TR,{})]})}const Aj=["top","right","bottom","left"],Li=Math.min,Vn=Math.max,Hf=Math.round,Nh=Math.floor,Yr=t=>({x:t,y:t}),Pj={left:"right",right:"left",bottom:"top",top:"bottom"},Nj={start:"end",end:"start"};function xv(t,e,n){return Vn(t,Li(e,n))}function Ps(t,e){return typeof t=="function"?t(e):t}function Ns(t){return t.split("-")[0]}function Zl(t){return t.split("-")[1]}function bw(t){return t==="x"?"y":"x"}function kw(t){return t==="y"?"height":"width"}function Fi(t){return["top","bottom"].includes(Ns(t))?"y":"x"}function Rw(t){return bw(Fi(t))}function Oj(t,e,n){n===void 0&&(n=!1);const r=Zl(t),s=Rw(t),i=kw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=qf(o)),[o,qf(o)]}function Dj(t){const e=qf(t);return[Tv(t),e,Tv(e)]}function Tv(t){return t.replace(/start|end/g,e=>Nj[e])}function Mj(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Lj(t,e,n,r){const s=Zl(t);let i=Mj(Ns(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Tv)))),i}function qf(t){return t.replace(/left|right|bottom|top/g,e=>Pj[e])}function Fj(t){return{top:0,right:0,bottom:0,left:0,...t}}function kR(t){return typeof t!="number"?Fj(t):{top:t,right:t,bottom:t,left:t}}function Gf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function LT(t,e,n){let{reference:r,floating:s}=t;const i=Fi(e),o=Rw(e),a=kw(o),l=Ns(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Zl(e)){case"start":g[o]-=f*(n&&c?-1:1);break;case"end":g[o]+=f*(n&&c?-1:1);break}return g}const Vj=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=LT(c,r,l),f=r,g={},w=0;for(let _=0;_<a.length;_++){const{name:E,fn:x}=a[_],{x:v,y:C,data:N,reset:M}=await x({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=C??h,g={...g,[E]:{...g[E],...N}},M&&w<=50&&(w++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:d,y:h}=LT(c,f,l)),_=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:g}};async function Hu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:g=0}=Ps(e,t),w=kR(g),E=a[f?h==="floating"?"reference":"floating":h],x=Gf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),N=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},M=Gf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:C,strategy:l}):v);return{top:(x.top-M.top+w.top)/N.y,bottom:(M.bottom-x.bottom+w.bottom)/N.y,left:(x.left-M.left+w.left)/N.x,right:(M.right-x.right+w.right)/N.x}}const jj=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ps(t,e)||{};if(c==null)return{};const h=kR(d),f={x:n,y:r},g=Rw(s),w=kw(g),_=await o.getDimensions(c),E=g==="y",x=E?"top":"left",v=E?"bottom":"right",C=E?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[g]-f[g]-i.floating[w],M=f[g]-i.reference[g],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=F?F[C]:0;(!S||!await(o.isElement==null?void 0:o.isElement(F)))&&(S=a.floating[C]||i.floating[w]);const T=N/2-M/2,b=S/2-_[w]/2-1,k=Li(h[x],b),O=Li(h[v],b),P=k,R=S-_[w]-O,W=S/2-_[w]/2+T,ue=xv(P,W,R),ce=!l.arrow&&Zl(s)!=null&&W!==ue&&i.reference[w]/2-(W<P?k:O)-_[w]/2<0,me=ce?W<P?W-P:W-R:0;return{[g]:f[g]+me,data:{[g]:ue,centerOffset:W-ue-me,...ce&&{alignmentOffset:me}},reset:ce}}}),Uj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:_=!0,...E}=Ps(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ns(s),v=Fi(a),C=Ns(a)===a,N=await(l.isRTL==null?void 0:l.isRTL(c.floating)),M=f||(C||!_?[qf(a)]:Dj(a)),F=w!=="none";!f&&F&&M.push(...Lj(a,_,w,N));const S=[a,...M],T=await Hu(e,E),b=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(T[x]),h){const W=Oj(s,o,N);b.push(T[W[0]],T[W[1]])}if(k=[...k,{placement:s,overflows:b}],!b.every(W=>W<=0)){var O,P;const W=(((O=i.flip)==null?void 0:O.index)||0)+1,ue=S[W];if(ue)return{data:{index:W,overflows:k},reset:{placement:ue}};let ce=(P=k.filter(me=>me.overflows[0]<=0).sort((me,z)=>me.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!ce)switch(g){case"bestFit":{var R;const me=(R=k.filter(z=>{if(F){const Y=Fi(z.placement);return Y===v||Y==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Y=>Y>0).reduce((Y,oe)=>Y+oe,0)]).sort((z,Y)=>z[1]-Y[1])[0])==null?void 0:R[0];me&&(ce=me);break}case"initialPlacement":ce=a;break}if(s!==ce)return{reset:{placement:ce}}}return{}}}};function FT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function VT(t){return Aj.some(e=>t[e]>=0)}const $j=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ps(t,e);switch(r){case"referenceHidden":{const i=await Hu(e,{...s,elementContext:"reference"}),o=FT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VT(o)}}}case"escaped":{const i=await Hu(e,{...s,altBoundary:!0}),o=FT(i,n.floating);return{data:{escapedOffsets:o,escaped:VT(o)}}}default:return{}}}}};async function zj(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ns(n),a=Zl(n),l=Fi(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=Ps(e,t);let{mainAxis:f,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),l?{x:g*d,y:f*c}:{x:f*c,y:g*d}}const Bj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await zj(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Wj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x,y:v}=E;return{x,y:v}}},...l}=Ps(t,e),c={x:n,y:r},d=await Hu(e,l),h=Fi(Ns(s)),f=bw(h);let g=c[f],w=c[h];if(i){const E=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=g+d[E],C=g-d[x];g=xv(v,g,C)}if(o){const E=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=w+d[E],C=w-d[x];w=xv(v,w,C)}const _=a.fn({...e,[f]:g,[h]:w});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[f]:i,[h]:o}}}}}},Hj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ps(t,e),d={x:n,y:r},h=Fi(s),f=bw(h);let g=d[f],w=d[h];const _=Ps(a,e),E=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const C=f==="y"?"height":"width",N=i.reference[f]-i.floating[C]+E.mainAxis,M=i.reference[f]+i.reference[C]-E.mainAxis;g<N?g=N:g>M&&(g=M)}if(c){var x,v;const C=f==="y"?"width":"height",N=["top","left"].includes(Ns(s)),M=i.reference[h]-i.floating[C]+(N&&((x=o.offset)==null?void 0:x[h])||0)+(N?0:E.crossAxis),F=i.reference[h]+i.reference[C]+(N?0:((v=o.offset)==null?void 0:v[h])||0)-(N?E.crossAxis:0);w<M?w=M:w>F&&(w=F)}return{[f]:g,[h]:w}}}},qj=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ps(t,e),d=await Hu(e,c),h=Ns(s),f=Zl(s),g=Fi(s)==="y",{width:w,height:_}=i.floating;let E,x;h==="top"||h==="bottom"?(E=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,E=f==="end"?"top":"bottom");const v=_-d.top-d.bottom,C=w-d.left-d.right,N=Li(_-d[E],v),M=Li(w-d[x],C),F=!e.middlewareData.shift;let S=N,T=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=v),F&&!f){const k=Vn(d.left,0),O=Vn(d.right,0),P=Vn(d.top,0),R=Vn(d.bottom,0);g?T=w-2*(k!==0||O!==0?k+O:Vn(d.left,d.right)):S=_-2*(P!==0||R!==0?P+R:Vn(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const b=await o.getDimensions(a.floating);return w!==b.width||_!==b.height?{reset:{rects:!0}}:{}}}};function lm(){return typeof window<"u"}function Jl(t){return RR(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function is(t){var e;return(e=(RR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function RR(t){return lm()?t instanceof Node||t instanceof $n(t).Node:!1}function Rr(t){return lm()?t instanceof Element||t instanceof $n(t).Element:!1}function ts(t){return lm()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function jT(t){return!lm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}function bd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Gj(t){return["table","td","th"].includes(Jl(t))}function cm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Aw(t){const e=Pw(),n=Rr(t)?Ar(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Kj(t){let e=Vi(t);for(;ts(e)&&!Rl(e);){if(Aw(e))return e;if(cm(e))return null;e=Vi(e)}return null}function Pw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rl(t){return["html","body","#document"].includes(Jl(t))}function Ar(t){return $n(t).getComputedStyle(t)}function um(t){return Rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vi(t){if(Jl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||jT(t)&&t.host||is(t);return jT(e)?e.host:e}function AR(t){const e=Vi(t);return Rl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ts(e)&&bd(e)?e:AR(e)}function qu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=AR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=Cv(o);return e.concat(o,o.visualViewport||[],bd(s)?s:[],a&&n?qu(a):[])}return e.concat(s,qu(s,[],n))}function Cv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function PR(t){const e=Ar(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ts(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Hf(n)!==i||Hf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Nw(t){return Rr(t)?t:t.contextElement}function Ja(t){const e=Nw(t);if(!ts(e))return Yr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=PR(e);let o=(i?Hf(n.width):n.width)/r,a=(i?Hf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Qj=Yr(0);function NR(t){const e=$n(t);return!Pw()||!e.visualViewport?Qj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Yj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function Zo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Nw(t);let o=Yr(1);e&&(r?Rr(r)&&(o=Ja(r)):o=Ja(t));const a=Yj(i,n,r)?NR(i):Yr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=$n(i),g=r&&Rr(r)?$n(r):r;let w=f,_=Cv(w);for(;_&&r&&g!==w;){const E=Ja(_),x=_.getBoundingClientRect(),v=Ar(_),C=x.left+(_.clientLeft+parseFloat(v.paddingLeft))*E.x,N=x.top+(_.clientTop+parseFloat(v.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,h*=E.y,l+=C,c+=N,w=$n(_),_=Cv(w)}}return Gf({width:d,height:h,x:l,y:c})}function Ow(t,e){const n=um(t).scrollLeft;return e?e.left+n:Zo(is(t)).left+n}function OR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Ow(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Xj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=is(r),a=e?cm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Yr(1);const d=Yr(0),h=ts(r);if((h||!h&&!i)&&((Jl(r)!=="body"||bd(o))&&(l=um(r)),ts(r))){const g=Zo(r);c=Ja(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const f=o&&!h&&!i?OR(o,l,!0):Yr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function Zj(t){return Array.from(t.getClientRects())}function Jj(t){const e=is(t),n=um(t),r=t.ownerDocument.body,s=Vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ow(t);const a=-n.scrollTop;return Ar(r).direction==="rtl"&&(o+=Vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function e4(t,e){const n=$n(t),r=is(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Pw();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function t4(t,e){const n=Zo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ts(t)?Ja(t):Yr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function UT(t,e,n){let r;if(e==="viewport")r=e4(t,n);else if(e==="document")r=Jj(is(t));else if(Rr(e))r=t4(e,n);else{const s=NR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Gf(r)}function DR(t,e){const n=Vi(t);return n===e||!Rr(n)||Rl(n)?!1:Ar(n).position==="fixed"||DR(n,e)}function n4(t,e){const n=e.get(t);if(n)return n;let r=qu(t,[],!1).filter(a=>Rr(a)&&Jl(a)!=="body"),s=null;const i=Ar(t).position==="fixed";let o=i?Vi(t):t;for(;Rr(o)&&!Rl(o);){const a=Ar(o),l=Aw(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bd(o)&&!l&&DR(t,o))?r=r.filter(d=>d!==o):s=a,o=Vi(o)}return e.set(t,r),r}function r4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cm(e)?[]:n4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=UT(e,d,s);return c.top=Vn(h.top,c.top),c.right=Li(h.right,c.right),c.bottom=Li(h.bottom,c.bottom),c.left=Vn(h.left,c.left),c},UT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function s4(t){const{width:e,height:n}=PR(t);return{width:e,height:n}}function i4(t,e,n){const r=ts(e),s=is(e),i=n==="fixed",o=Zo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Yr(0);if(r||!r&&!i)if((Jl(e)!=="body"||bd(s))&&(a=um(e)),r){const f=Zo(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=Ow(s));const c=s&&!r&&!i?OR(s,a):Yr(0),d=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:d,y:h,width:o.width,height:o.height}}function Lg(t){return Ar(t).position==="static"}function $T(t,e){if(!ts(t)||Ar(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return is(t)===n&&(n=n.ownerDocument.body),n}function MR(t,e){const n=$n(t);if(cm(t))return n;if(!ts(t)){let s=Vi(t);for(;s&&!Rl(s);){if(Rr(s)&&!Lg(s))return s;s=Vi(s)}return n}let r=$T(t,e);for(;r&&Gj(r)&&Lg(r);)r=$T(r,e);return r&&Rl(r)&&Lg(r)&&!Aw(r)?n:r||Kj(t)||n}const o4=async function(t){const e=this.getOffsetParent||MR,n=this.getDimensions,r=await n(t.floating);return{reference:i4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a4(t){return Ar(t).direction==="rtl"}const l4={convertOffsetParentRelativeRectToViewportRelativeRect:Xj,getDocumentElement:is,getClippingRect:r4,getOffsetParent:MR,getElementRects:o4,getClientRects:Zj,getDimensions:s4,getScale:Ja,isElement:Rr,isRTL:a4};function LR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function c4(t,e){let n=null,r;const s=is(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:g}=c;if(a||e(),!f||!g)return;const w=Nh(h),_=Nh(s.clientWidth-(d+f)),E=Nh(s.clientHeight-(h+g)),x=Nh(d),C={rootMargin:-w+"px "+-_+"px "+-E+"px "+-x+"px",threshold:Vn(0,Li(1,l))||1};let N=!0;function M(F){const S=F[0].intersectionRatio;if(S!==l){if(!N)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!LR(c,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(M,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,C)}n.observe(t)}return o(!0),i}function u4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Nw(t),d=s||i?[...c?qu(c):[],...qu(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?c4(c,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(x=>{let[v]=x;v&&v.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let w,_=l?Zo(t):null;l&&E();function E(){const x=Zo(t);_&&!LR(_,x)&&n(),_=x,w=requestAnimationFrame(E)}return n(),()=>{var x;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(w)}}const d4=Bj,h4=Wj,f4=Uj,p4=qj,m4=$j,zT=jj,g4=Hj,y4=(t,e,n)=>{const r=new Map,s={platform:l4,...n},i={...s.platform,_c:r};return Vj(t,e,{...s,platform:i})};var of=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Kf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Kf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function FR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function BT(t,e){const n=FR(t);return Math.round(e*n)/n}function Fg(t){const e=A.useRef(t);return of(()=>{e.current=t}),e}function v4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=A.useState(r);Kf(f,r)||g(r);const[w,_]=A.useState(null),[E,x]=A.useState(null),v=A.useCallback(z=>{z!==F.current&&(F.current=z,_(z))},[]),C=A.useCallback(z=>{z!==S.current&&(S.current=z,x(z))},[]),N=i||w,M=o||E,F=A.useRef(null),S=A.useRef(null),T=A.useRef(d),b=l!=null,k=Fg(l),O=Fg(s),P=Fg(c),R=A.useCallback(()=>{if(!F.current||!S.current)return;const z={placement:e,strategy:n,middleware:f};O.current&&(z.platform=O.current),y4(F.current,S.current,z).then(Y=>{const oe={...Y,isPositioned:P.current!==!1};W.current&&!Kf(T.current,oe)&&(T.current=oe,Id.flushSync(()=>{h(oe)}))})},[f,e,n,O,P]);of(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(z=>({...z,isPositioned:!1})))},[c]);const W=A.useRef(!1);of(()=>(W.current=!0,()=>{W.current=!1}),[]),of(()=>{if(N&&(F.current=N),M&&(S.current=M),N&&M){if(k.current)return k.current(N,M,R);R()}},[N,M,R,k,b]);const ue=A.useMemo(()=>({reference:F,floating:S,setReference:v,setFloating:C}),[v,C]),ce=A.useMemo(()=>({reference:N,floating:M}),[N,M]),me=A.useMemo(()=>{const z={position:n,left:0,top:0};if(!ce.floating)return z;const Y=BT(ce.floating,d.x),oe=BT(ce.floating,d.y);return a?{...z,transform:"translate("+Y+"px, "+oe+"px)",...FR(ce.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:oe}},[n,a,ce.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:R,refs:ue,elements:ce,floatingStyles:me}),[d,R,ue,ce,me])}const _4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?zT({element:r.current,padding:s}).fn(n):{}:r?zT({element:r,padding:s}).fn(n):{}}}},w4=(t,e)=>({...d4(t),options:[t,e]}),E4=(t,e)=>({...h4(t),options:[t,e]}),x4=(t,e)=>({...g4(t),options:[t,e]}),T4=(t,e)=>({...f4(t),options:[t,e]}),C4=(t,e)=>({...p4(t),options:[t,e]}),I4=(t,e)=>({...m4(t),options:[t,e]}),S4=(t,e)=>({..._4(t),options:[t,e]});var b4="Arrow",VR=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return m.jsx(At.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});VR.displayName=b4;var k4=VR;function jR(t){const[e,n]=A.useState(void 0);return Xo(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var UR="Popper",[$R,zR]=Yl(UR),[KK,BR]=$R(UR),WR="PopperAnchor",HR=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=BR(WR,n),o=A.useRef(null),a=nr(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(At.div,{...s,ref:a})});HR.displayName=WR;var Dw="PopperContent",[R4,A4]=$R(Dw),qR=A.forwardRef((t,e)=>{var Gt,ao,Bs,Pr,as,ls;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:w,..._}=t,E=BR(Dw,n),[x,v]=A.useState(null),C=nr(e,ar=>v(ar)),[N,M]=A.useState(null),F=jR(N),S=(F==null?void 0:F.width)??0,T=(F==null?void 0:F.height)??0,b=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(c)?c:[c],P=O.length>0,R={padding:k,boundary:O.filter(N4),altBoundary:P},{refs:W,floatingStyles:ue,placement:ce,isPositioned:me,middlewareData:z}=v4({strategy:"fixed",placement:b,whileElementsMounted:(...ar)=>u4(...ar,{animationFrame:g==="always"}),elements:{reference:E.anchor},middleware:[w4({mainAxis:s+T,alignmentAxis:o}),l&&E4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?x4():void 0,...R}),l&&T4({...R}),C4({...R,apply:({elements:ar,rects:cs,availableWidth:Ws,availableHeight:fa})=>{const{width:cc,height:Kd}=cs.reference,Nr=ar.floating.style;Nr.setProperty("--radix-popper-available-width",`${Ws}px`),Nr.setProperty("--radix-popper-available-height",`${fa}px`),Nr.setProperty("--radix-popper-anchor-width",`${cc}px`),Nr.setProperty("--radix-popper-anchor-height",`${Kd}px`)}}),N&&S4({element:N,padding:a}),O4({arrowWidth:S,arrowHeight:T}),f&&I4({strategy:"referenceHidden",...R})]}),[Y,oe]=QR(ce),we=es(w);Xo(()=>{me&&(we==null||we())},[me,we]);const Pe=(Gt=z.arrow)==null?void 0:Gt.x,Be=(ao=z.arrow)==null?void 0:ao.y,qt=((Bs=z.arrow)==null?void 0:Bs.centerOffset)!==0,[En,On]=A.useState();return Xo(()=>{x&&On(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:me?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:En,"--radix-popper-transform-origin":[(Pr=z.transformOrigin)==null?void 0:Pr.x,(as=z.transformOrigin)==null?void 0:as.y].join(" "),...((ls=z.hide)==null?void 0:ls.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(R4,{scope:n,placedSide:Y,onArrowChange:M,arrowX:Pe,arrowY:Be,shouldHideArrow:qt,children:m.jsx(At.div,{"data-side":Y,"data-align":oe,..._,ref:C,style:{..._.style,animation:me?void 0:"none"}})})})});qR.displayName=Dw;var GR="PopperArrow",P4={top:"bottom",right:"left",bottom:"top",left:"right"},KR=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=A4(GR,r),o=P4[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(k4,{...s,ref:n,style:{...s.style,display:"block"}})})});KR.displayName=GR;function N4(t){return t!==null}var O4=t=>({name:"transformOrigin",options:t,fn(e){var E,x,v;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=QR(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let w="",_="";return c==="bottom"?(w=o?h:`${f}px`,_=`${-l}px`):c==="top"?(w=o?h:`${f}px`,_=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,_=o?h:`${g}px`):c==="left"&&(w=`${r.floating.width+l}px`,_=o?h:`${g}px`),{data:{x:w,y:_}}}});function QR(t){const[e,n="center"]=t.split("-");return[e,n]}var D4=HR,M4=qR,L4=KR,[dm,QK]=Yl("Tooltip",[zR]),Mw=zR(),YR="TooltipProvider",F4=700,WT="tooltip.open",[V4,XR]=dm(YR),ZR=t=>{const{__scopeTooltip:e,delayDuration:n=F4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(V4,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};ZR.displayName=YR;var JR="Tooltip",[YK,hm]=dm(JR),Iv="TooltipTrigger",j4=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=hm(Iv,n),i=XR(Iv,n),o=Mw(n),a=A.useRef(null),l=nr(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(D4,{asChild:!0,...o,children:m.jsx(At.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Et(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Et(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Et(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Et(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Et(t.onBlur,s.onClose),onClick:Et(t.onClick,s.onClose)})})});j4.displayName=Iv;var U4="TooltipPortal",[XK,$4]=dm(U4,{forceMount:void 0}),Al="TooltipContent",eA=A.forwardRef((t,e)=>{const n=$4(Al,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=hm(Al,t.__scopeTooltip);return m.jsx(Ew,{present:r||o.open,children:o.disableHoverableContent?m.jsx(tA,{side:s,...i,ref:e}):m.jsx(z4,{side:s,...i,ref:e})})}),z4=A.forwardRef((t,e)=>{const n=hm(Al,t.__scopeTooltip),r=XR(Al,t.__scopeTooltip),s=A.useRef(null),i=nr(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=A.useCallback(()=>{a(null),h(!1)},[h]),g=A.useCallback((w,_)=>{const E=w.currentTarget,x={x:w.clientX,y:w.clientY},v=G4(x,E.getBoundingClientRect()),C=K4(x,v),N=Q4(_.getBoundingClientRect()),M=X4([...C,...N]);a(M),h(!0)},[h]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(l&&d){const w=E=>g(E,d),_=E=>g(E,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",_)}}},[l,d,g,f]),A.useEffect(()=>{if(o){const w=_=>{const E=_.target,x={x:_.clientX,y:_.clientY},v=(l==null?void 0:l.contains(E))||(d==null?void 0:d.contains(E)),C=!Y4(x,o);v?f():C&&(f(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,c,f]),m.jsx(tA,{...t,ref:i})}),[B4,W4]=dm(JR,{isInside:!1}),H4=rV("TooltipContent"),tA=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=hm(Al,n),c=Mw(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(WT,d),()=>document.removeEventListener(WT,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=f=>{const g=f.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),m.jsx(ww,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:m.jsxs(M4,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(H4,{children:r}),m.jsx(B4,{scope:n,isInside:!0,children:m.jsx(CV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});eA.displayName=Al;var nA="TooltipArrow",q4=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Mw(n);return W4(nA,n).isInside?null:m.jsx(L4,{...s,...r,ref:e})});q4.displayName=nA;function G4(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function K4(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Q4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Y4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,d=e[o].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function X4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Z4(e)}function Z4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var J4=ZR,rA=eA;const eU=J4,tU=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(rA,{ref:r,sideOffset:e,className:lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));tU.displayName=rA.displayName;const Lw=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Lw.displayName="Card";const nU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("flex flex-col space-y-1.5 p-6",t),...e}));nU.displayName="CardHeader";const rU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("text-2xl font-semibold leading-none tracking-tight",t),...e}));rU.displayName="CardTitle";const sU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("text-sm text-muted-foreground",t),...e}));sU.displayName="CardDescription";const Fw=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("p-6 pt-0",t),...e}));Fw.displayName="CardContent";const iU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("flex items-center p-6 pt-0",t),...e}));iU.displayName="CardFooter";function oU(){return m.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:m.jsx(Lw,{className:"w-full max-w-md mx-4",children:m.jsxs(Fw,{className:"pt-6",children:[m.jsxs("div",{className:"flex mb-4 gap-2",children:[m.jsx(qV,{className:"h-8 w-8 text-red-500"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),m.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var kd=t=>t.type==="checkbox",ko=t=>t instanceof Date,pn=t=>t==null;const sA=t=>typeof t=="object";var vt=t=>!pn(t)&&!Array.isArray(t)&&sA(t)&&!ko(t),iA=t=>vt(t)&&t.target?kd(t.target)?t.target.checked:t.target.value:t,aU=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,oA=(t,e)=>t.has(aU(e)),lU=t=>{const e=t.constructor&&t.constructor.prototype;return vt(e)&&e.hasOwnProperty("isPrototypeOf")},Vw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ft(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Vw&&(t instanceof Blob||r))&&(n||vt(t)))if(e=n?[]:{},!n&&!lU(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Ft(t[s]));else return t;return e}var fm=t=>Array.isArray(t)?t.filter(Boolean):[],mt=t=>t===void 0,Z=(t,e,n)=>{if(!e||!vt(t))return n;const r=fm(e.split(/[,[\].]+?/)).reduce((s,i)=>pn(s)?s:s[i],t);return mt(r)||r===t?mt(t[e])?n:t[e]:r},Fn=t=>typeof t=="boolean",jw=t=>/^\w*$/.test(t),aA=t=>fm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(t,e,n)=>{let r=-1;const s=jw(e)?[e]:aA(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=vt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Qf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},gr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lA=ke.createContext(null),pm=()=>ke.useContext(lA),cU=t=>{const{children:e,...n}=t;return ke.createElement(lA.Provider,{value:n},e)};var cA=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==gr.all&&(e._proxyFormState[o]=!r||gr.all),n&&(n[o]=!0),t[o]}});return s};const Uw=typeof window<"u"?A.useLayoutEffect:A.useEffect;function uU(t){const e=pm(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=ke.useState(n._formState),l=ke.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Uw(()=>n._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!r&&a({...n._formState,...c})}}),[s,r,i]),ke.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),ke.useMemo(()=>cA(o,n,l.current,!1),[o,n])}var qr=t=>typeof t=="string",uA=(t,e,n,r,s)=>qr(t)?(r&&e.watch.add(t),Z(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Z(n,i))):(r&&(e.watchAll=!0),n);function dU(t){const e=pm(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=ke.useRef(s),[l,c]=ke.useState(n._getWatch(r,a.current));return Uw(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:d=>!i&&c(uA(r,n._names,d.values||n._formValues,!1,a.current))}),[r,n,i,o]),ke.useEffect(()=>n._removeUnmounted()),l}function hU(t){const e=pm(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=oA(s._names.array,n),a=dU({control:s,name:n,defaultValue:Z(s._formValues,n,Z(s._defaultValues,n,t.defaultValue)),exact:!0}),l=uU({control:s,name:n,exact:!0}),c=ke.useRef(t),d=ke.useRef(s.register(n,{...t.rules,value:a,...Fn(t.disabled)?{disabled:t.disabled}:{}})),h=ke.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Z(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Z(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Z(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Z(l.validatingFields,n)},error:{enumerable:!0,get:()=>Z(l.errors,n)}}),[l,n]),f=ke.useCallback(E=>d.current.onChange({target:{value:iA(E),name:n},type:Qf.CHANGE}),[n]),g=ke.useCallback(()=>d.current.onBlur({target:{value:Z(s._formValues,n),name:n},type:Qf.BLUR}),[n,s._formValues]),w=ke.useCallback(E=>{const x=Z(s._fields,n);x&&E&&(x._f.ref={focus:()=>E.focus(),select:()=>E.select(),setCustomValidity:v=>E.setCustomValidity(v),reportValidity:()=>E.reportValidity()})},[s._fields,n]),_=ke.useMemo(()=>({name:n,value:a,...Fn(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:f,onBlur:g,ref:w}),[n,r,l.disabled,f,g,w,a]);return ke.useEffect(()=>{const E=s._options.shouldUnregister||i;s.register(n,{...c.current.rules,...Fn(c.current.disabled)?{disabled:c.current.disabled}:{}});const x=(v,C)=>{const N=Z(s._fields,v);N&&N._f&&(N._f.mount=C)};if(x(n,!0),E){const v=Ft(Z(s._options.defaultValues,n));He(s._defaultValues,n,v),mt(Z(s._formValues,n))&&He(s._formValues,n,v)}return!o&&s.register(n),()=>{(o?E&&!s._state.action:E)?s.unregister(n):x(n,!1)}},[n,s,o,i]),ke.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),ke.useMemo(()=>({field:_,formState:l,fieldState:h}),[_,l,h])}const fU=t=>t.render(hU(t));var dA=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},hu=t=>Array.isArray(t)?t:[t],HT=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Sv=t=>pn(t)||!sA(t);function ii(t,e){if(Sv(t)||Sv(e))return t===e;if(ko(t)&&ko(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(ko(i)&&ko(o)||vt(i)&&vt(o)||Array.isArray(i)&&Array.isArray(o)?!ii(i,o):i!==o)return!1}}return!0}var hn=t=>vt(t)&&!Object.keys(t).length,$w=t=>t.type==="file",yr=t=>typeof t=="function",Yf=t=>{if(!Vw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},hA=t=>t.type==="select-multiple",zw=t=>t.type==="radio",pU=t=>zw(t)||kd(t),Vg=t=>Yf(t)&&t.isConnected;function mU(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=mt(t)?r++:t[e[r++]];return t}function gU(t){for(const e in t)if(t.hasOwnProperty(e)&&!mt(t[e]))return!1;return!0}function Tt(t,e){const n=Array.isArray(e)?e:jw(e)?[e]:aA(e),r=n.length===1?t:mU(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(vt(r)&&hn(r)||Array.isArray(r)&&gU(r))&&Tt(t,n.slice(0,-1)),t}var fA=t=>{for(const e in t)if(yr(t[e]))return!0;return!1};function Xf(t,e={}){const n=Array.isArray(t);if(vt(t)||n)for(const r in t)Array.isArray(t[r])||vt(t[r])&&!fA(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Xf(t[r],e[r])):pn(t[r])||(e[r]=!0);return e}function pA(t,e,n){const r=Array.isArray(t);if(vt(t)||r)for(const s in t)Array.isArray(t[s])||vt(t[s])&&!fA(t[s])?mt(e)||Sv(n[s])?n[s]=Array.isArray(t[s])?Xf(t[s],[]):{...Xf(t[s])}:pA(t[s],pn(e)?{}:e[s],n[s]):n[s]=!ii(t[s],e[s]);return n}var Oc=(t,e)=>pA(t,e,Xf(e));const qT={value:!1,isValid:!1},GT={value:!0,isValid:!0};var mA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!mt(t[0].attributes.value)?mt(t[0].value)||t[0].value===""?GT:{value:t[0].value,isValid:!0}:GT:qT}return qT},gA=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>mt(t)?t:e?t===""?NaN:t&&+t:n&&qr(t)?new Date(t):r?r(t):t;const KT={isValid:!1,value:null};var yA=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,KT):KT;function QT(t){const e=t.ref;return $w(e)?e.files:zw(e)?yA(t.refs).value:hA(e)?[...e.selectedOptions].map(({value:n})=>n):kd(e)?mA(t.refs).value:gA(mt(e.value)?t.ref.value:e.value,t)}var yU=(t,e,n,r)=>{const s={};for(const i of t){const o=Z(e,i);o&&He(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Zf=t=>t instanceof RegExp,Dc=t=>mt(t)?t:Zf(t)?t.source:vt(t)?Zf(t.value)?t.value.source:t.value:t,YT=t=>({isOnSubmit:!t||t===gr.onSubmit,isOnBlur:t===gr.onBlur,isOnChange:t===gr.onChange,isOnAll:t===gr.all,isOnTouch:t===gr.onTouched});const XT="AsyncFunction";var vU=t=>!!t&&!!t.validate&&!!(yr(t.validate)&&t.validate.constructor.name===XT||vt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===XT)),_U=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ZT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const fu=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=Z(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(fu(a,e))break}else if(vt(a)&&fu(a,e))break}}};function JT(t,e,n){const r=Z(t,n);if(r||jw(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=Z(e,i),a=Z(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var wU=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return hn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||gr.all))},EU=(t,e,n)=>!t||!e||t===e||hu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),xU=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,TU=(t,e)=>!fm(Z(t,e)).length&&Tt(t,e),CU=(t,e,n)=>{const r=hu(Z(t,n));return He(r,"root",e[n]),He(t,n,r),t},af=t=>qr(t);function eC(t,e,n="validate"){if(af(t)||Array.isArray(t)&&t.every(af)||Fn(t)&&!t)return{type:n,message:af(t)?t:"",ref:e}}var xa=t=>vt(t)&&!Zf(t)?t:{value:t,message:""},tC=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:g,validate:w,name:_,valueAsNumber:E,mount:x}=t._f,v=Z(n,_);if(!x||e.has(_))return{};const C=a?a[0]:o,N=P=>{s&&C.reportValidity&&(C.setCustomValidity(Fn(P)?"":P||""),C.reportValidity())},M={},F=zw(o),S=kd(o),T=F||S,b=(E||$w(o))&&mt(o.value)&&mt(v)||Yf(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,k=dA.bind(null,_,r,M),O=(P,R,W,ue=fs.maxLength,ce=fs.minLength)=>{const me=P?R:W;M[_]={type:P?ue:ce,message:me,ref:o,...k(P?ue:ce,me)}};if(i?!Array.isArray(v)||!v.length:l&&(!T&&(b||pn(v))||Fn(v)&&!v||S&&!mA(a).isValid||F&&!yA(a).isValid)){const{value:P,message:R}=af(l)?{value:!!l,message:l}:xa(l);if(P&&(M[_]={type:fs.required,message:R,ref:C,...k(fs.required,R)},!r))return N(R),M}if(!b&&(!pn(h)||!pn(f))){let P,R;const W=xa(f),ue=xa(h);if(!pn(v)&&!isNaN(v)){const ce=o.valueAsNumber||v&&+v;pn(W.value)||(P=ce>W.value),pn(ue.value)||(R=ce<ue.value)}else{const ce=o.valueAsDate||new Date(v),me=oe=>new Date(new Date().toDateString()+" "+oe),z=o.type=="time",Y=o.type=="week";qr(W.value)&&v&&(P=z?me(v)>me(W.value):Y?v>W.value:ce>new Date(W.value)),qr(ue.value)&&v&&(R=z?me(v)<me(ue.value):Y?v<ue.value:ce<new Date(ue.value))}if((P||R)&&(O(!!P,W.message,ue.message,fs.max,fs.min),!r))return N(M[_].message),M}if((c||d)&&!b&&(qr(v)||i&&Array.isArray(v))){const P=xa(c),R=xa(d),W=!pn(P.value)&&v.length>+P.value,ue=!pn(R.value)&&v.length<+R.value;if((W||ue)&&(O(W,P.message,R.message),!r))return N(M[_].message),M}if(g&&!b&&qr(v)){const{value:P,message:R}=xa(g);if(Zf(P)&&!v.match(P)&&(M[_]={type:fs.pattern,message:R,ref:o,...k(fs.pattern,R)},!r))return N(R),M}if(w){if(yr(w)){const P=await w(v,n),R=eC(P,C);if(R&&(M[_]={...R,...k(fs.validate,R.message)},!r))return N(R.message),M}else if(vt(w)){let P={};for(const R in w){if(!hn(P)&&!r)break;const W=eC(await w[R](v,n),C,R);W&&(P={...W,...k(R,W.message)},N(W.message),r&&(M[_]=P))}if(!hn(P)&&(M[_]={ref:C,...P},!r))return M}}return N(!0),M};const IU={mode:gr.onSubmit,reValidateMode:gr.onChange,shouldFocusError:!0};function SU(t={}){let e={...IU,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:yr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=vt(e.defaultValues)||vt(e.values)?Ft(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Ft(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:HT(),state:HT()},g=e.criteriaMode===gr.all,w=D=>j=>{clearTimeout(c),c=setTimeout(D,j)},_=async D=>{if(!e.disabled&&(d.isValid||h.isValid||D)){const j=e.resolver?hn((await S()).errors):await b(r,!0);j!==n.isValid&&f.state.next({isValid:j})}},E=(D,j)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((D||Array.from(a.mount)).forEach($=>{$&&(j?He(n.validatingFields,$,j):Tt(n.validatingFields,$))}),f.state.next({validatingFields:n.validatingFields,isValidating:!hn(n.validatingFields)}))},x=(D,j=[],$,ee,X=!0,G=!0)=>{if(ee&&$&&!e.disabled){if(o.action=!0,G&&Array.isArray(Z(r,D))){const te=$(Z(r,D),ee.argA,ee.argB);X&&He(r,D,te)}if(G&&Array.isArray(Z(n.errors,D))){const te=$(Z(n.errors,D),ee.argA,ee.argB);X&&He(n.errors,D,te),TU(n.errors,D)}if((d.touchedFields||h.touchedFields)&&G&&Array.isArray(Z(n.touchedFields,D))){const te=$(Z(n.touchedFields,D),ee.argA,ee.argB);X&&He(n.touchedFields,D,te)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Oc(s,i)),f.state.next({name:D,isDirty:O(D,j),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else He(i,D,j)},v=(D,j)=>{He(n.errors,D,j),f.state.next({errors:n.errors})},C=D=>{n.errors=D,f.state.next({errors:n.errors,isValid:!1})},N=(D,j,$,ee)=>{const X=Z(r,D);if(X){const G=Z(i,D,mt($)?Z(s,D):$);mt(G)||ee&&ee.defaultChecked||j?He(i,D,j?G:QT(X._f)):W(D,G),o.mount&&_()}},M=(D,j,$,ee,X)=>{let G=!1,te=!1;const ye={name:D};if(!e.disabled){if(!$||ee){(d.isDirty||h.isDirty)&&(te=n.isDirty,n.isDirty=ye.isDirty=O(),G=te!==ye.isDirty);const We=ii(Z(s,D),j);te=!!Z(n.dirtyFields,D),We?Tt(n.dirtyFields,D):He(n.dirtyFields,D,!0),ye.dirtyFields=n.dirtyFields,G=G||(d.dirtyFields||h.dirtyFields)&&te!==!We}if($){const We=Z(n.touchedFields,D);We||(He(n.touchedFields,D,$),ye.touchedFields=n.touchedFields,G=G||(d.touchedFields||h.touchedFields)&&We!==$)}G&&X&&f.state.next(ye)}return G?ye:{}},F=(D,j,$,ee)=>{const X=Z(n.errors,D),G=(d.isValid||h.isValid)&&Fn(j)&&n.isValid!==j;if(e.delayError&&$?(l=w(()=>v(D,$)),l(e.delayError)):(clearTimeout(c),l=null,$?He(n.errors,D,$):Tt(n.errors,D)),($?!ii(X,$):X)||!hn(ee)||G){const te={...ee,...G&&Fn(j)?{isValid:j}:{},errors:n.errors,name:D};n={...n,...te},f.state.next(te)}},S=async D=>{E(D,!0);const j=await e.resolver(i,e.context,yU(D||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(D),j},T=async D=>{const{errors:j}=await S(D);if(D)for(const $ of D){const ee=Z(j,$);ee?He(n.errors,$,ee):Tt(n.errors,$)}else n.errors=j;return j},b=async(D,j,$={valid:!0})=>{for(const ee in D){const X=D[ee];if(X){const{_f:G,...te}=X;if(G){const ye=a.array.has(G.name),We=X._f&&vU(X._f);We&&d.validatingFields&&E([ee],!0);const ln=await tC(X,a.disabled,i,g,e.shouldUseNativeValidation&&!j,ye);if(We&&d.validatingFields&&E([ee]),ln[G.name]&&($.valid=!1,j))break;!j&&(Z(ln,G.name)?ye?CU(n.errors,ln,G.name):He(n.errors,G.name,ln[G.name]):Tt(n.errors,G.name))}!hn(te)&&await b(te,j,$)}}return $.valid},k=()=>{for(const D of a.unMount){const j=Z(r,D);j&&(j._f.refs?j._f.refs.every($=>!Vg($)):!Vg(j._f.ref))&&Gt(D)}a.unMount=new Set},O=(D,j)=>!e.disabled&&(D&&j&&He(i,D,j),!ii(oe(),s)),P=(D,j,$)=>uA(D,a,{...o.mount?i:mt(j)?s:qr(D)?{[D]:j}:j},$,j),R=D=>fm(Z(o.mount?i:s,D,e.shouldUnregister?Z(s,D,[]):[])),W=(D,j,$={})=>{const ee=Z(r,D);let X=j;if(ee){const G=ee._f;G&&(!G.disabled&&He(i,D,gA(j,G)),X=Yf(G.ref)&&pn(j)?"":j,hA(G.ref)?[...G.ref.options].forEach(te=>te.selected=X.includes(te.value)):G.refs?kd(G.ref)?G.refs.forEach(te=>{(!te.defaultChecked||!te.disabled)&&(Array.isArray(X)?te.checked=!!X.find(ye=>ye===te.value):te.checked=X===te.value||!!X)}):G.refs.forEach(te=>te.checked=te.value===X):$w(G.ref)?G.ref.value="":(G.ref.value=X,G.ref.type||f.state.next({name:D,values:Ft(i)})))}($.shouldDirty||$.shouldTouch)&&M(D,X,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&Y(D)},ue=(D,j,$)=>{for(const ee in j){if(!j.hasOwnProperty(ee))return;const X=j[ee],G=`${D}.${ee}`,te=Z(r,G);(a.array.has(D)||vt(X)||te&&!te._f)&&!ko(X)?ue(G,X,$):W(G,X,$)}},ce=(D,j,$={})=>{const ee=Z(r,D),X=a.array.has(D),G=Ft(j);He(i,D,G),X?(f.array.next({name:D,values:Ft(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&$.shouldDirty&&f.state.next({name:D,dirtyFields:Oc(s,i),isDirty:O(D,G)})):ee&&!ee._f&&!pn(G)?ue(D,G,$):W(D,G,$),ZT(D,a)&&f.state.next({...n}),f.state.next({name:o.mount?D:void 0,values:Ft(i)})},me=async D=>{o.mount=!0;const j=D.target;let $=j.name,ee=!0;const X=Z(r,$),G=We=>{ee=Number.isNaN(We)||ko(We)&&isNaN(We.getTime())||ii(We,Z(i,$,We))},te=YT(e.mode),ye=YT(e.reValidateMode);if(X){let We,ln;const lo=j.type?QT(X._f):iA(D),Or=D.type===Qf.BLUR||D.type===Qf.FOCUS_OUT,co=!_U(X._f)&&!e.resolver&&!Z(n.errors,$)&&!X._f.deps||xU(Or,Z(n.touchedFields,$),n.isSubmitted,ye,te),pa=ZT($,a,Or);He(i,$,lo),Or?(X._f.onBlur&&X._f.onBlur(D),l&&l(0)):X._f.onChange&&X._f.onChange(D);const ma=M($,lo,Or),uc=!hn(ma)||pa;if(!Or&&f.state.next({name:$,type:D.type,values:Ft(i)}),co)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?Or&&_():Or||_()),uc&&f.state.next({name:$,...pa?{}:ma});if(!Or&&pa&&f.state.next({...n}),e.resolver){const{errors:Qd}=await S([$]);if(G(lo),ee){const zm=JT(n.errors,r,$),ga=JT(Qd,r,zm.name||$);We=ga.error,$=ga.name,ln=hn(Qd)}}else E([$],!0),We=(await tC(X,a.disabled,i,g,e.shouldUseNativeValidation))[$],E([$]),G(lo),ee&&(We?ln=!1:(d.isValid||h.isValid)&&(ln=await b(r,!0)));ee&&(X._f.deps&&Y(X._f.deps),F($,ln,We,ma))}},z=(D,j)=>{if(Z(n.errors,j)&&D.focus)return D.focus(),1},Y=async(D,j={})=>{let $,ee;const X=hu(D);if(e.resolver){const G=await T(mt(D)?D:X);$=hn(G),ee=D?!X.some(te=>Z(G,te)):$}else D?(ee=(await Promise.all(X.map(async G=>{const te=Z(r,G);return await b(te&&te._f?{[G]:te}:te)}))).every(Boolean),!(!ee&&!n.isValid)&&_()):ee=$=await b(r);return f.state.next({...!qr(D)||(d.isValid||h.isValid)&&$!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:$}:{},errors:n.errors}),j.shouldFocus&&!ee&&fu(r,z,D?X:a.mount),ee},oe=D=>{const j={...o.mount?i:s};return mt(D)?j:qr(D)?Z(j,D):D.map($=>Z(j,$))},we=(D,j)=>({invalid:!!Z((j||n).errors,D),isDirty:!!Z((j||n).dirtyFields,D),error:Z((j||n).errors,D),isValidating:!!Z(n.validatingFields,D),isTouched:!!Z((j||n).touchedFields,D)}),Pe=D=>{D&&hu(D).forEach(j=>Tt(n.errors,j)),f.state.next({errors:D?n.errors:{}})},Be=(D,j,$)=>{const ee=(Z(r,D,{_f:{}})._f||{}).ref,X=Z(n.errors,D)||{},{ref:G,message:te,type:ye,...We}=X;He(n.errors,D,{...We,...j,ref:ee}),f.state.next({name:D,errors:n.errors,isValid:!1}),$&&$.shouldFocus&&ee&&ee.focus&&ee.focus()},qt=(D,j)=>yr(D)?f.state.subscribe({next:$=>D(P(void 0,j),$)}):P(D,j,!0),En=D=>f.state.subscribe({next:j=>{EU(D.name,j.name,D.exact)&&wU(j,D.formState||d,cc,D.reRenderRoot)&&D.callback({values:{...i},...n,...j})}}).unsubscribe,On=D=>(o.mount=!0,h={...h,...D.formState},En({...D,formState:h})),Gt=(D,j={})=>{for(const $ of D?hu(D):a.mount)a.mount.delete($),a.array.delete($),j.keepValue||(Tt(r,$),Tt(i,$)),!j.keepError&&Tt(n.errors,$),!j.keepDirty&&Tt(n.dirtyFields,$),!j.keepTouched&&Tt(n.touchedFields,$),!j.keepIsValidating&&Tt(n.validatingFields,$),!e.shouldUnregister&&!j.keepDefaultValue&&Tt(s,$);f.state.next({values:Ft(i)}),f.state.next({...n,...j.keepDirty?{isDirty:O()}:{}}),!j.keepIsValid&&_()},ao=({disabled:D,name:j})=>{(Fn(D)&&o.mount||D||a.disabled.has(j))&&(D?a.disabled.add(j):a.disabled.delete(j))},Bs=(D,j={})=>{let $=Z(r,D);const ee=Fn(j.disabled)||Fn(e.disabled);return He(r,D,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:D}},name:D,mount:!0,...j}}),a.mount.add(D),$?ao({disabled:Fn(j.disabled)?j.disabled:e.disabled,name:D}):N(D,!0,j.value),{...ee?{disabled:j.disabled||e.disabled}:{},...e.progressive?{required:!!j.required,min:Dc(j.min),max:Dc(j.max),minLength:Dc(j.minLength),maxLength:Dc(j.maxLength),pattern:Dc(j.pattern)}:{},name:D,onChange:me,onBlur:me,ref:X=>{if(X){Bs(D,j),$=Z(r,D);const G=mt(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,te=pU(G),ye=$._f.refs||[];if(te?ye.find(We=>We===G):G===$._f.ref)return;He(r,D,{_f:{...$._f,...te?{refs:[...ye.filter(Vg),G,...Array.isArray(Z(s,D))?[{}]:[]],ref:{type:G.type,name:D}}:{ref:G}}}),N(D,!1,void 0,G)}else $=Z(r,D,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(oA(a.array,D)&&o.action)&&a.unMount.add(D)}}},Pr=()=>e.shouldFocusError&&fu(r,z,a.mount),as=D=>{Fn(D)&&(f.state.next({disabled:D}),fu(r,(j,$)=>{const ee=Z(r,$);ee&&(j.disabled=ee._f.disabled||D,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(X=>{X.disabled=ee._f.disabled||D}))},0,!1))},ls=(D,j)=>async $=>{let ee;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let X=Ft(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:te}=await S();n.errors=G,X=te}else await b(r);if(a.disabled.size)for(const G of a.disabled)He(X,G,void 0);if(Tt(n.errors,"root"),hn(n.errors)){f.state.next({errors:{}});try{await D(X,$)}catch(G){ee=G}}else j&&await j({...n.errors},$),Pr(),setTimeout(Pr);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hn(n.errors)&&!ee,submitCount:n.submitCount+1,errors:n.errors}),ee)throw ee},ar=(D,j={})=>{Z(r,D)&&(mt(j.defaultValue)?ce(D,Ft(Z(s,D))):(ce(D,j.defaultValue),He(s,D,Ft(j.defaultValue))),j.keepTouched||Tt(n.touchedFields,D),j.keepDirty||(Tt(n.dirtyFields,D),n.isDirty=j.defaultValue?O(D,Ft(Z(s,D))):O()),j.keepError||(Tt(n.errors,D),d.isValid&&_()),f.state.next({...n}))},cs=(D,j={})=>{const $=D?Ft(D):s,ee=Ft($),X=hn(D),G=X?s:ee;if(j.keepDefaultValues||(s=$),!j.keepValues){if(j.keepDirtyValues){const te=new Set([...a.mount,...Object.keys(Oc(s,i))]);for(const ye of Array.from(te))Z(n.dirtyFields,ye)?He(G,ye,Z(i,ye)):ce(ye,Z(G,ye))}else{if(Vw&&mt(D))for(const te of a.mount){const ye=Z(r,te);if(ye&&ye._f){const We=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(Yf(We)){const ln=We.closest("form");if(ln){ln.reset();break}}}}for(const te of a.mount)ce(te,Z(G,te))}i=Ft(G),f.array.next({values:{...G}}),f.state.next({values:{...G}})}a={mount:j.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!j.keepIsValid||!!j.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:j.keepSubmitCount?n.submitCount:0,isDirty:X?!1:j.keepDirty?n.isDirty:!!(j.keepDefaultValues&&!ii(D,s)),isSubmitted:j.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:j.keepDirtyValues?j.keepDefaultValues&&i?Oc(s,i):n.dirtyFields:j.keepDefaultValues&&D?Oc(s,D):j.keepDirty?n.dirtyFields:{},touchedFields:j.keepTouched?n.touchedFields:{},errors:j.keepErrors?n.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ws=(D,j)=>cs(yr(D)?D(i):D,j),fa=(D,j={})=>{const $=Z(r,D),ee=$&&$._f;if(ee){const X=ee.refs?ee.refs[0]:ee.ref;X.focus&&(X.focus(),j.shouldSelect&&yr(X.select)&&X.select())}},cc=D=>{n={...n,...D}},Nr={control:{register:Bs,unregister:Gt,getFieldState:we,handleSubmit:ls,setError:Be,_subscribe:En,_runSchema:S,_getWatch:P,_getDirty:O,_setValid:_,_setFieldArray:x,_setDisabledField:ao,_setErrors:C,_getFieldArray:R,_reset:cs,_resetDefaultValues:()=>yr(e.defaultValues)&&e.defaultValues().then(D=>{Ws(D,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:as,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(D){o=D},get _defaultValues(){return s},get _names(){return a},set _names(D){a=D},get _formState(){return n},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:On,trigger:Y,register:Bs,handleSubmit:ls,watch:qt,setValue:ce,getValues:oe,reset:Ws,resetField:ar,clearErrors:Pe,unregister:Gt,setError:Be,setFocus:fa,getFieldState:we};return{...Nr,formControl:Nr}}function nC(t={}){const e=ke.useRef(void 0),n=ke.useRef(void 0),[r,s]=ke.useState({isDirty:!1,isValidating:!1,isLoading:yr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:yr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:SU(t),formState:r},t.formControl&&t.defaultValues&&!yr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,Uw(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),ke.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ke.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode),t.errors&&!hn(t.errors)&&i._setErrors(t.errors)},[i,t.errors,t.mode,t.reValidateMode]),ke.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),ke.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),ke.useEffect(()=>{t.values&&!ii(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),ke.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=cA(r,i),e.current}const rC=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Z(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},vA=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?rC(r.ref,n,t):r.refs&&r.refs.forEach(s=>rC(s,n,t))}},bU=(t,e)=>{e.shouldUseNativeValidation&&vA(t,e);const n={};for(const r in t){const s=Z(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(kU(e.names||Object.keys(t),r)){const o=Object.assign({},Z(n,r));He(o,"root",i),He(n,r,o)}else He(n,r,i)}return n},kU=(t,e)=>t.some(n=>n.startsWith(e+"."));var RU=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=dA(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},sC=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&vA({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:bU(RU(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},$e;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})($e||($e={}));var iC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(iC||(iC={}));const ae=$e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ni=t=>{switch(typeof t){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(t)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(t)?ae.array:t===null?ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ae.promise:typeof Map<"u"&&t instanceof Map?ae.map:typeof Set<"u"&&t instanceof Set?ae.set:typeof Date<"u"&&t instanceof Date?ae.date:ae.object;default:return ae.unknown}},q=$e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Os extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Os))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Os.create=t=>new Os(t);const bv=(t,e)=>{let n;switch(t.code){case q.invalid_type:t.received===ae.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,$e.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:n=`Unrecognized key(s) in object: ${$e.joinValues(t.keys,", ")}`;break;case q.invalid_union:n="Invalid input";break;case q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${$e.joinValues(t.options)}`;break;case q.invalid_enum_value:n=`Invalid enum value. Expected ${$e.joinValues(t.options)}, received '${t.received}'`;break;case q.invalid_arguments:n="Invalid function arguments";break;case q.invalid_return_type:n="Invalid function return type";break;case q.invalid_date:n="Invalid date";break;case q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:$e.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case q.custom:n="Invalid input";break;case q.invalid_intersection_types:n="Intersection results could not be merged";break;case q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case q.not_finite:n="Number must be finite";break;default:n=e.defaultError,$e.assertNever(t)}return{message:n}};let AU=bv;function PU(){return AU}const NU=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function ne(t,e){const n=PU(),r=NU({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===bv?void 0:bv].filter(s=>!!s)});t.common.issues.push(r)}class Hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ee;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Hn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ee;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ee=Object.freeze({status:"aborted"}),qc=t=>({status:"dirty",value:t}),ir=t=>({status:"valid",value:t}),oC=t=>t.status==="aborted",aC=t=>t.status==="dirty",Pl=t=>t.status==="valid",Jf=t=>typeof Promise<"u"&&t instanceof Promise;var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));var ep=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_A=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Gc,Kc;class ji{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lC=(t,e)=>{if(Pl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Os(t.common.issues);return this._error=n,this._error}}};function Se(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class je{get description(){return this._def.description}_getType(e){return ni(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hn,ctx:{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Jf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},s=this._parseSync({data:e,path:r.path,parent:r});return lC(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Pl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Pl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Jf(s)?s:Promise.resolve(s));return lC(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:q.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ol({schema:this,typeName:_e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ki.create(this,this._def)}nullable(){return Dl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xr.create(this)}promise(){return sp.create(this,this._def)}or(e){return np.create([this,e],this._def)}and(e){return rp.create(this,e,this._def)}transform(e){return new Ol({...Se(this._def),schema:this,typeName:_e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Rv({...Se(this._def),innerType:this,defaultValue:n,typeName:_e.ZodDefault})}brand(){return new t3({typeName:_e.ZodBranded,type:this,...Se(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Av({...Se(this._def),innerType:this,catchValue:n,typeName:_e.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Bw.create(this,e)}readonly(){return Pv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OU=/^c[^\s-]{8,}$/i,DU=/^[0-9a-z]+$/,MU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,LU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FU=/^[a-z0-9_-]{21}$/i,VU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,UU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$U="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jg;const zU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,HU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,wA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KU=new RegExp(`^${wA}$`);function EA(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function QU(t){return new RegExp(`^${EA(t)}$`)}function YU(t){let e=`${wA}T${EA(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function XU(t,e){return!!((e==="v4"||!e)&&zU.test(t)||(e==="v6"||!e)&&WU.test(t))}function ZU(t,e){if(!VU.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function JU(t,e){return!!((e==="v4"||!e)&&BU.test(t)||(e==="v6"||!e)&&HU.test(t))}class yi extends je{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return ne(i,{code:q.invalid_type,expected:ae.string,received:i.parsedType}),Ee}const r=new Hn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ne(s,{code:q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ne(s,{code:q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")UU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"email",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")jg||(jg=new RegExp($U,"u")),jg.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"emoji",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")LU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"uuid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")FU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"nanoid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")OU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cuid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")DU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cuid2",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")MU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"ulid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ne(s,{validation:"url",code:q.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"regex",code:q.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?YU(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?KU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?QU(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:q.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?jU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"duration",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?XU(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"ip",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?ZU(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"jwt",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?JU(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cidr",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?qU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"base64",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?GU.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"base64url",code:q.invalid_string,message:i.message}),r.dirty()):$e.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:q.invalid_string,...le.errToObj(r)})}_addCheck(e){return new yi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...le.errToObj(n)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new yi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yi.create=t=>new yi({checks:[],typeName:_e.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Se(t)});function e3(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Gu extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return ne(i,{code:q.invalid_type,expected:ae.number,received:i.parsedType}),Ee}let r;const s=new Hn;for(const i of this._def.checks)i.kind==="int"?$e.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:q.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?e3(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:q.not_finite,message:i.message}),s.dirty()):$e.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Gu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Gu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$e.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Gu.create=t=>new Gu({checks:[],typeName:_e.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Se(t)});class Ku extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let r;const s=new Hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):$e.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ne(n,{code:q.invalid_type,expected:ae.bigint,received:n.parsedType}),Ee}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Ku({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Ku({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ku.create=t=>new Ku({checks:[],typeName:_e.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Se(t)});class cC extends je{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.boolean,received:r.parsedType}),Ee}return ir(e.data)}}cC.create=t=>new cC({typeName:_e.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Se(t)});class tp extends je{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return ne(i,{code:q.invalid_type,expected:ae.date,received:i.parsedType}),Ee}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ne(i,{code:q.invalid_date}),Ee}const r=new Hn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):$e.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tp({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}tp.create=t=>new tp({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_e.ZodDate,...Se(t)});class uC extends je{_parse(e){if(this._getType(e)!==ae.symbol){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.symbol,received:r.parsedType}),Ee}return ir(e.data)}}uC.create=t=>new uC({typeName:_e.ZodSymbol,...Se(t)});class dC extends je{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.undefined,received:r.parsedType}),Ee}return ir(e.data)}}dC.create=t=>new dC({typeName:_e.ZodUndefined,...Se(t)});class hC extends je{_parse(e){if(this._getType(e)!==ae.null){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.null,received:r.parsedType}),Ee}return ir(e.data)}}hC.create=t=>new hC({typeName:_e.ZodNull,...Se(t)});class fC extends je{constructor(){super(...arguments),this._any=!0}_parse(e){return ir(e.data)}}fC.create=t=>new fC({typeName:_e.ZodAny,...Se(t)});class pC extends je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ir(e.data)}}pC.create=t=>new pC({typeName:_e.ZodUnknown,...Se(t)});class Ui extends je{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:q.invalid_type,expected:ae.never,received:n.parsedType}),Ee}}Ui.create=t=>new Ui({typeName:_e.ZodNever,...Se(t)});class mC extends je{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.void,received:r.parsedType}),Ee}return ir(e.data)}}mC.create=t=>new mC({typeName:_e.ZodVoid,...Se(t)});class Xr extends je{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ae.array)return ne(n,{code:q.invalid_type,expected:ae.array,received:n.parsedType}),Ee;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ne(n,{code:o?q.too_big:q.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ne(n,{code:q.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ne(n,{code:q.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ji(n,o,n.path,a)))).then(o=>Hn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ji(n,o,n.path,a)));return Hn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Xr({...this._def,minLength:{value:e,message:le.toString(n)}})}max(e,n){return new Xr({...this._def,maxLength:{value:e,message:le.toString(n)}})}length(e,n){return new Xr({...this._def,exactLength:{value:e,message:le.toString(n)}})}nonempty(e){return this.min(1,e)}}Xr.create=(t,e)=>new Xr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_e.ZodArray,...Se(e)});function Ia(t){if(t instanceof dt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ki.create(Ia(r))}return new dt({...t._def,shape:()=>e})}else return t instanceof Xr?new Xr({...t._def,type:Ia(t.element)}):t instanceof ki?ki.create(Ia(t.unwrap())):t instanceof Dl?Dl.create(Ia(t.unwrap())):t instanceof Jo?Jo.create(t.items.map(e=>Ia(e))):t}class dt extends je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=$e.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ae.object){const c=this._getOrReturnCtx(e);return ne(c,{code:q.invalid_type,expected:ae.object,received:c.parsedType}),Ee}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ui&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new ji(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Ui){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(ne(s,{code:q.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new ji(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,f=await d.value;c.push({key:h,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>Hn.mergeObjectSync(r,c)):Hn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new dt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new dt({...this._def,unknownKeys:"strip"})}passthrough(){return new dt({...this._def,unknownKeys:"passthrough"})}extend(e){return new dt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_e.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new dt({...this._def,catchall:e})}pick(e){const n={};for(const r of $e.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new dt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of $e.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new dt({...this._def,shape:()=>n})}deepPartial(){return Ia(this)}partial(e){const n={};for(const r of $e.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new dt({...this._def,shape:()=>n})}required(e){const n={};for(const r of $e.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ki;)i=i._def.innerType;n[r]=i}return new dt({...this._def,shape:()=>n})}keyof(){return xA($e.objectKeys(this.shape))}}dt.create=(t,e)=>new dt({shape:()=>t,unknownKeys:"strip",catchall:Ui.create(),typeName:_e.ZodObject,...Se(e)});dt.strictCreate=(t,e)=>new dt({shape:()=>t,unknownKeys:"strict",catchall:Ui.create(),typeName:_e.ZodObject,...Se(e)});dt.lazycreate=(t,e)=>new dt({shape:t,unknownKeys:"strip",catchall:Ui.create(),typeName:_e.ZodObject,...Se(e)});class np extends je{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Os(a.ctx.common.issues));return ne(n,{code:q.invalid_union,unionErrors:o}),Ee}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Os(l));return ne(n,{code:q.invalid_union,unionErrors:a}),Ee}}get options(){return this._def.options}}np.create=(t,e)=>new np({options:t,typeName:_e.ZodUnion,...Se(e)});function kv(t,e){const n=ni(t),r=ni(e);if(t===e)return{valid:!0,data:t};if(n===ae.object&&r===ae.object){const s=$e.objectKeys(e),i=$e.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=kv(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ae.array&&r===ae.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=kv(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===ae.date&&r===ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rp extends je{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(oC(i)||oC(o))return Ee;const a=kv(i.value,o.value);return a.valid?((aC(i)||aC(o))&&n.dirty(),{status:n.value,value:a.data}):(ne(r,{code:q.invalid_intersection_types}),Ee)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rp.create=(t,e,n)=>new rp({left:t,right:e,typeName:_e.ZodIntersection,...Se(n)});class Jo extends je{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.array)return ne(r,{code:q.invalid_type,expected:ae.array,received:r.parsedType}),Ee;if(r.data.length<this._def.items.length)return ne(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ee;!this._def.rest&&r.data.length>this._def.items.length&&(ne(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ji(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Hn.mergeArray(n,o)):Hn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Jo({...this._def,rest:e})}}Jo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jo({items:t,typeName:_e.ZodTuple,rest:null,...Se(e)})};class gC extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.map)return ne(r,{code:q.invalid_type,expected:ae.map,received:r.parsedType}),Ee;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new ji(r,a,r.path,[c,"key"])),value:i._parse(new ji(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Ee;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Ee;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}}}}gC.create=(t,e,n)=>new gC({valueType:e,keyType:t,typeName:_e.ZodMap,...Se(n)});class Qu extends je{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.set)return ne(r,{code:q.invalid_type,expected:ae.set,received:r.parsedType}),Ee;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ne(r,{code:q.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ne(r,{code:q.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Ee;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new ji(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Qu({...this._def,minSize:{value:e,message:le.toString(n)}})}max(e,n){return new Qu({...this._def,maxSize:{value:e,message:le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Qu.create=(t,e)=>new Qu({valueType:t,minSize:null,maxSize:null,typeName:_e.ZodSet,...Se(e)});class yC extends je{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}yC.create=(t,e)=>new yC({getter:t,typeName:_e.ZodLazy,...Se(e)});class vC extends je{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:q.invalid_literal,expected:this._def.value}),Ee}return{status:"valid",value:e.data}}get value(){return this._def.value}}vC.create=(t,e)=>new vC({value:t,typeName:_e.ZodLiteral,...Se(e)});function xA(t,e){return new Nl({values:t,typeName:_e.ZodEnum,...Se(e)})}class Nl extends je{constructor(){super(...arguments),Gc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{expected:$e.joinValues(r),received:n.parsedType,code:q.invalid_type}),Ee}if(ep(this,Gc,"f")||_A(this,Gc,new Set(this._def.values),"f"),!ep(this,Gc,"f").has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{received:n.data,code:q.invalid_enum_value,options:r}),Ee}return ir(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Nl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Nl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Gc=new WeakMap;Nl.create=xA;class _C extends je{constructor(){super(...arguments),Kc.set(this,void 0)}_parse(e){const n=$e.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const s=$e.objectValues(n);return ne(r,{expected:$e.joinValues(s),received:r.parsedType,code:q.invalid_type}),Ee}if(ep(this,Kc,"f")||_A(this,Kc,new Set($e.getValidEnumValues(this._def.values)),"f"),!ep(this,Kc,"f").has(e.data)){const s=$e.objectValues(n);return ne(r,{received:r.data,code:q.invalid_enum_value,options:s}),Ee}return ir(e.data)}get enum(){return this._def.values}}Kc=new WeakMap;_C.create=(t,e)=>new _C({values:t,typeName:_e.ZodNativeEnum,...Se(e)});class sp extends je{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.promise&&n.common.async===!1)return ne(n,{code:q.invalid_type,expected:ae.promise,received:n.parsedType}),Ee;const r=n.parsedType===ae.promise?n.data:Promise.resolve(n.data);return ir(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}sp.create=(t,e)=>new sp({type:t,typeName:_e.ZodPromise,...Se(e)});class Ol extends je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ne(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ee;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Ee:l.status==="dirty"||n.value==="dirty"?qc(l.value):l});{if(n.value==="aborted")return Ee;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ee:a.status==="dirty"||n.value==="dirty"?qc(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ee:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ee:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Pl(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Pl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);$e.assertNever(s)}}Ol.create=(t,e,n)=>new Ol({schema:t,typeName:_e.ZodEffects,effect:e,...Se(n)});Ol.createWithPreprocess=(t,e,n)=>new Ol({schema:e,effect:{type:"preprocess",transform:t},typeName:_e.ZodEffects,...Se(n)});class ki extends je{_parse(e){return this._getType(e)===ae.undefined?ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ki.create=(t,e)=>new ki({innerType:t,typeName:_e.ZodOptional,...Se(e)});class Dl extends je{_parse(e){return this._getType(e)===ae.null?ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Dl.create=(t,e)=>new Dl({innerType:t,typeName:_e.ZodNullable,...Se(e)});class Rv extends je{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Rv.create=(t,e)=>new Rv({innerType:t,typeName:_e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});class Av extends je{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Jf(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Os(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Os(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Av.create=(t,e)=>new Av({innerType:t,typeName:_e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});class wC extends je{_parse(e){if(this._getType(e)!==ae.nan){const r=this._getOrReturnCtx(e);return ne(r,{code:q.invalid_type,expected:ae.nan,received:r.parsedType}),Ee}return{status:"valid",value:e.data}}}wC.create=t=>new wC({typeName:_e.ZodNaN,...Se(t)});class t3 extends je{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Bw extends je{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ee:i.status==="dirty"?(n.dirty(),qc(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ee:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Bw({in:e,out:n,typeName:_e.ZodPipeline})}}class Pv extends je{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Pl(s)&&(s.value=Object.freeze(s.value)),s);return Jf(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Pv.create=(t,e)=>new Pv({innerType:t,typeName:_e.ZodReadonly,...Se(e)});dt.lazycreate;var _e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_e||(_e={}));const ip=yi.create;Ui.create;Xr.create;const n3=dt.create;dt.strictCreate;np.create;rp.create;Jo.create;Nl.create;sp.create;ki.create;Dl.create;const vo=A.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:lt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));vo.displayName="Input";const r3=Iw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vr=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?$k:"button";return m.jsx(o,{className:lt(r3({variant:e,size:n,className:t})),ref:i,...s})});vr.displayName="Button";var s3="Label",TA=A.forwardRef((t,e)=>m.jsx(At.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));TA.displayName=s3;var CA=TA;const i3=Iw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),IA=A.forwardRef(({className:t,...e},n)=>m.jsx(CA,{ref:n,className:lt(i3(),t),...e}));IA.displayName=CA.displayName;const EC=cU,SA=A.createContext({}),Ta=({...t})=>m.jsx(SA.Provider,{value:{name:t.name},children:m.jsx(fU,{...t})}),mm=()=>{const t=A.useContext(SA),e=A.useContext(bA),{getFieldState:n,formState:r}=pm(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},bA=A.createContext({}),_o=A.forwardRef(({className:t,...e},n)=>{const r=A.useId();return m.jsx(bA.Provider,{value:{id:r},children:m.jsx("div",{ref:n,className:lt("space-y-2",t),...e})})});_o.displayName="FormItem";const wo=A.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=mm();return m.jsx(IA,{ref:n,className:lt(r&&"text-destructive",t),htmlFor:s,...e})});wo.displayName="FormLabel";const Eo=A.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=mm();return m.jsx($k,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});Eo.displayName="FormControl";const o3=A.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=mm();return m.jsx("p",{ref:n,id:r,className:lt("text-sm text-muted-foreground",t),...e})});o3.displayName="FormDescription";const xo=A.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=mm(),o=s?String((s==null?void 0:s.message)??""):e;return o?m.jsx("p",{ref:r,id:i,className:lt("text-sm font-medium text-destructive",t),...n,children:o}):null});xo.displayName="FormMessage";const a3=()=>{};var xC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw ec(e)},ec=function(t){return new Error("Firebase Database ("+kA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},l3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new c3;const f=i<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(t){const e=RA(t);return Ww.encodeByteArray(e,!0)},op=function(t){return AA(t).replace(/\./g,"")},ap=function(t){try{return Ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){return PA(void 0,t)}function PA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!d3(n)||(t[n]=PA(t[n],e[n]));return t}function d3(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=()=>h3().__FIREBASE_DEFAULTS__,p3=()=>{if(typeof process>"u"||typeof xC>"u")return;const t=xC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ap(t[1]);return e&&JSON.parse(e)},gm=()=>{try{return a3()||f3()||p3()||m3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NA=t=>{var e,n;return(n=(e=gm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hw=t=>{const e=NA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},OA=()=>{var t;return(t=gm())===null||t===void 0?void 0:t.config},DA=t=>{var e;return(e=gm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){return t.endsWith(".cloudworkstations.dev")}async function ym(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[op(JSON.stringify(n)),op(JSON.stringify(o)),""].join(".")}const pu={};function g3(){const t={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?t.emulator.push(e):t.prod.push(e);return t}function y3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let TC=!1;function to(t,e){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||pu[t]===e||pu[t]||TC)return;pu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=g3().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{TC=!0,o()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=y3(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),E=document.getElementById(_)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;a(C),d(E,_);const N=c();l(v,x),C.append(v,w,E,N),document.body.appendChild(C)}i?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function v3(){var t;const e=(t=gm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w3(){const t=an();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FA(){return kA.NODE_ADMIN===!0}function E3(){return!v3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VA(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function x3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="FirebaseError";class or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=T3,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?C3(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new or(s,a,r)}}function C3(t,e){return t.replace(I3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const I3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){return JSON.parse(t)}function It(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Yu(ap(i[0])||""),n=Yu(ap(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},S3=function(t){const e=UA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},b3=function(t){const e=UA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ml(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Nv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lp(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ds(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(CC(i)&&CC(o)){if(!Ds(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function CC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Yc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),d=1518500249):(c=i^o^a,d=1859775393):h<60?(c=i&o|a&(i|o),d=2400959708):(c=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+c+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function R3(t,e){const n=new A3(t,e);return n.subscribe.bind(n)}class A3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ug),s.error===void 0&&(s.error=Ug),s.complete===void 0&&(s.complete=Ug);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}function $A(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=1e3,D3=2,M3=4*60*60*1e3,L3=.5;function IC(t,e=O3,n=D3){const r=e*Math.pow(n,t),s=Math.round(L3*r*(Math.random()-.5)*2);return Math.min(M3,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j3(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:V3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V3(t){return t===To?void 0:t}function j3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const $3={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},z3=be.INFO,B3={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},W3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rd{constructor(e){this.name=e,this._logLevel=z3,this._logHandler=W3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const H3=(t,e)=>e.some(n=>t instanceof n);let SC,bC;function q3(){return SC||(SC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G3(){return bC||(bC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zA=new WeakMap,Ov=new WeakMap,BA=new WeakMap,$g=new WeakMap,Qw=new WeakMap;function K3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ri(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zA.set(n,t)}).catch(()=>{}),Qw.set(e,t),e}function Q3(t){if(Ov.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ov.set(t,e)}let Dv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ov.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y3(t){Dv=t(Dv)}function X3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zg(this),e,...n);return BA.set(r,e.sort?e.sort():[e]),Ri(r)}:G3().includes(t)?function(...e){return t.apply(zg(this),e),Ri(zA.get(this))}:function(...e){return Ri(t.apply(zg(this),e))}}function Z3(t){return typeof t=="function"?X3(t):(t instanceof IDBTransaction&&Q3(t),H3(t,q3())?new Proxy(t,Dv):t)}function Ri(t){if(t instanceof IDBRequest)return K3(t);if($g.has(t))return $g.get(t);const e=Z3(t);return e!==t&&($g.set(t,e),Qw.set(e,t)),e}const zg=t=>Qw.get(t);function WA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const J3=["get","getKey","getAll","getAllKeys","count"],e6=["put","add","delete","clear"],Bg=new Map;function kC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||J3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Bg.set(e,i),i}Y3(t=>({...t,get:(e,n,r)=>kC(e,n)||t.get(e,n,r),has:(e,n)=>!!kC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mv="@firebase/app",RC="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Rd("@firebase/app"),r6="@firebase/app-compat",s6="@firebase/analytics-compat",i6="@firebase/analytics",o6="@firebase/app-check-compat",a6="@firebase/app-check",l6="@firebase/auth",c6="@firebase/auth-compat",u6="@firebase/database",d6="@firebase/data-connect",h6="@firebase/database-compat",f6="@firebase/functions",p6="@firebase/functions-compat",m6="@firebase/installations",g6="@firebase/installations-compat",y6="@firebase/messaging",v6="@firebase/messaging-compat",_6="@firebase/performance",w6="@firebase/performance-compat",E6="@firebase/remote-config",x6="@firebase/remote-config-compat",T6="@firebase/storage",C6="@firebase/storage-compat",I6="@firebase/firestore",S6="@firebase/vertexai",b6="@firebase/firestore-compat",k6="firebase",R6="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="[DEFAULT]",A6={[Mv]:"fire-core",[r6]:"fire-core-compat",[i6]:"fire-analytics",[s6]:"fire-analytics-compat",[a6]:"fire-app-check",[o6]:"fire-app-check-compat",[l6]:"fire-auth",[c6]:"fire-auth-compat",[u6]:"fire-rtdb",[d6]:"fire-data-connect",[h6]:"fire-rtdb-compat",[f6]:"fire-fn",[p6]:"fire-fn-compat",[m6]:"fire-iid",[g6]:"fire-iid-compat",[y6]:"fire-fcm",[v6]:"fire-fcm-compat",[_6]:"fire-perf",[w6]:"fire-perf-compat",[E6]:"fire-rc",[x6]:"fire-rc-compat",[T6]:"fire-gcs",[C6]:"fire-gcs-compat",[I6]:"fire-fst",[b6]:"fire-fst-compat",[S6]:"fire-vertex","fire-js":"fire-js",[k6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new Map,P6=new Map,Fv=new Map;function AC(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(Fv.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Fv.set(e,t);for(const n of cp.values())AC(n,t);for(const n of P6.values())AC(n,t);return!0}function $s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new ua("app","Firebase",N6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=R6;function HA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lv,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ai.create("bad-app-name",{appName:String(s)});if(n||(n=OA()),!n)throw Ai.create("no-options");const i=cp.get(s);if(i){if(Ds(n,i.options)&&Ds(r,i.config))return i;throw Ai.create("duplicate-app",{appName:s})}const o=new U3(s);for(const l of Fv.values())o.addComponent(l);const a=new O6(n,r,o);return cp.set(s,a),a}function Ad(t=Lv){const e=cp.get(t);if(!e&&t===Lv&&OA())return HA();if(!e)throw Ai.create("no-app",{appName:t});return e}function sn(t,e,n){var r;let s=(r=A6[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(a.join(" "));return}rr(new qn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="firebase-heartbeat-database",M6=1,Xu="firebase-heartbeat-store";let Wg=null;function qA(){return Wg||(Wg=WA(D6,M6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ai.create("idb-open",{originalErrorMessage:t.message})})),Wg}async function L6(t){try{const n=(await qA()).transaction(Xu),r=await n.objectStore(Xu).get(GA(t));return await n.done,r}catch(e){if(e instanceof or)Ms.warn(e.message);else{const n=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function PC(t,e){try{const r=(await qA()).transaction(Xu,"readwrite");await r.objectStore(Xu).put(e,GA(t)),await r.done}catch(n){if(n instanceof or)Ms.warn(n.message);else{const r=Ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(r.message)}}}function GA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=1024,V6=30;class j6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>V6){const o=z6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NC(),{heartbeatsToSend:r,unsentEntries:s}=U6(this._heartbeatsCache.heartbeats),i=op(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ms.warn(n),""}}}function NC(){return new Date().toISOString().substring(0,10)}function U6(t,e=F6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),OC(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),OC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VA()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return PC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return PC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function OC(t){return op(JSON.stringify({version:2,heartbeats:t})).length}function z6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){rr(new qn("platform-logger",e=>new t6(e),"PRIVATE")),rr(new qn("heartbeat",e=>new j6(e),"PRIVATE")),sn(Mv,RC,t),sn(Mv,RC,"esm2017"),sn("fire-js","")}B6("");function Yw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function KA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W6=KA,QA=new ua("auth","Firebase",KA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Rd("@firebase/auth");function H6(t,...e){up.logLevel<=be.WARN&&up.warn(`Auth (${no}): ${t}`,...e)}function lf(t,...e){up.logLevel<=be.ERROR&&up.error(`Auth (${no}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw Zw(t,...e)}function Sr(t,...e){return Zw(t,...e)}function Xw(t,e,n){const r=Object.assign(Object.assign({},W6()),{[e]:n});return new ua("auth","Firebase",r).create(e,{appName:t.name})}function Cs(t){return Xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),Xw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QA.create(t,...e)}function fe(t,e,...n){if(!t)throw Zw(e,...n)}function ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lf(e),new Error(e)}function Ls(t,e){t||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G6(){return DC()==="http:"||DC()==="https:"}function DC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G6()||MA()||"connection"in navigator)?navigator.onLine:!0}function Q6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ls(n>e,"Short delay should be less than long delay!"),this.isMobile=Kw()||LA()}get(){return K6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e){Ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z6=new Pd(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function so(t,e,n,r,s={}){return XA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return _3()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&eo(t.emulatorConfig.host)&&(c.credentials="include"),YA.fetch()(await ZA(t,t.config.apiHost,n,a),c)})}async function XA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y6),e);try{const s=new e9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Oh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Oh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Xw(t,d,c);sr(t,d)}}catch(s){if(s instanceof or)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function Nd(t,e,n,r,s={}){const i=await so(t,e,n,r,s);return"mfaPendingCredential"in i&&sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function ZA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Jw(t.config,s):`${t.config.apiScheme}://${s}`;return X6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function J6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),Z6.get())})}}function Oh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Sr(t,e,r);return s.customData._tokenResponse=n,s}function MC(t){return t!==void 0&&t.enterprise!==void 0}class t9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return J6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n9(t,e){return so(t,"GET","/v2/recaptchaConfig",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(t,e){return so(t,"POST","/v1/accounts:delete",e)}async function dp(t,e){return so(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s9(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=e0(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mu(Hg(s.auth_time)),issuedAtTime:mu(Hg(s.iat)),expirationTime:mu(Hg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hg(t){return Number(t)*1e3}function e0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ap(n);return s?JSON.parse(s):(lf("Failed to decode base64 JWT payload"),null)}catch(s){return lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LC(t){const e=e0(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof or&&i9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zu(t,dp(n,{idToken:r}));fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?JA(i.providerUserInfo):[],a=l9(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new jv(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function a9(t){const e=Mt(t);await hp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function JA(t){return t.map(e=>{var{providerId:n}=e,r=Yw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e){const n=await XA(t,{},async()=>{const r=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await ZA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u9(t,e){return so(t,"POST","/v2/accounts:revokeToken",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=LC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await c9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new el;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Yw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return s9(this,e)}reload(){return a9(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await Zu(this,r9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:N,isAnonymous:M,providerData:F,stsTokenManager:S}=n;fe(C&&S,e,"internal-error");const T=el.fromJSON(this.name,S);fe(typeof C=="string",e,"internal-error"),Zs(h,e.name),Zs(f,e.name),fe(typeof N=="boolean",e,"internal-error"),fe(typeof M=="boolean",e,"internal-error"),Zs(g,e.name),Zs(w,e.name),Zs(_,e.name),Zs(E,e.name),Zs(x,e.name),Zs(v,e.name);const b=new wr({uid:C,auth:e,email:f,emailVerified:N,displayName:h,isAnonymous:M,photoURL:w,phoneNumber:g,tenantId:_,stsTokenManager:T,createdAt:x,lastLoginAt:v});return F&&Array.isArray(F)&&(b.providerData=F.map(k=>Object.assign({},k))),E&&(b._redirectEventId=E),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new el;s.updateFromServerResponse(n);const i=new wr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?JA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new el;a.updateFromIdToken(r);const l=new wr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new jv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Map;function Es(t){Ls(t instanceof Function,"Expected a class definition");let e=FC.get(t);return e?(Ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eP.type="NONE";const VC=eP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e,n){return`firebase:${t}:${e}:${n}`}class tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cf(this.userKey,s.apiKey,i),this.fullPersistenceKey=cf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dp(this.auth,{idToken:e}).catch(()=>{});return n?wr._fromGetAccountInfoResponse(this.auth,n,e):null}return wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tl(Es(VC),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Es(VC);const o=cf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await dp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await wr._fromGetAccountInfoResponse(e,f,d)}else h=wr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new tl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new tl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oP(e))return"Blackberry";if(aP(e))return"Webos";if(nP(e))return"Safari";if((e.includes("chrome/")||rP(e))&&!e.includes("edge/"))return"Chrome";if(iP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tP(t=an()){return/firefox\//i.test(t)}function nP(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rP(t=an()){return/crios\//i.test(t)}function sP(t=an()){return/iemobile/i.test(t)}function iP(t=an()){return/android/i.test(t)}function oP(t=an()){return/blackberry/i.test(t)}function aP(t=an()){return/webos/i.test(t)}function t0(t=an()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function d9(t=an()){var e;return t0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h9(){return w3()&&document.documentMode===10}function lP(t=an()){return t0(t)||iP(t)||aP(t)||oP(t)||/windows phone/i.test(t)||sP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e=[]){let n;switch(t){case"Browser":n=jC(an());break;case"Worker":n=`${jC(an())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e={}){return so(t,"GET","/v2/passwordPolicy",ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=6;class g9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:m9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UC(this),this.idTokenSubscription=new UC(this),this.beforeStateQueue=new f9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Es(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dp(this,{idToken:e}),r=await wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Cs(this));const n=e?Mt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p9(this),n=new g9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await u9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Es(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&H6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function io(t){return Mt(t)}class UC{constructor(e){this.auth=e,this.observer=null,this.addObserver=R3(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v9(t){_m=t}function uP(t){return _m.loadJS(t)}function _9(){return _m.recaptchaEnterpriseScript}function w9(){return _m.gapiScript}function E9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class x9{constructor(){this.enterprise=new T9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class T9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const C9="recaptcha-enterprise",dP="NO_RECAPTCHA";class I9{constructor(e){this.type=C9,this.auth=io(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{n9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new t9(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;MC(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(dP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x9().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&MC(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_9();l.length!==0&&(l+=a),uP(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function $C(t,e,n,r=!1,s=!1){const i=new I9(t);let o;if(s)o=dP;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Uv(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $C(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await $C(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t,e){const n=$s(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ds(i,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function b9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k9(t,e,n){const r=io(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=hP(e),{host:o,port:a}=R9(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Ds(c,r.config.emulator)&&Ds(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,eo(o)?(to("Auth",!0),ym(`${i}//${o}${l}`)):A9()}function hP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function R9(t){const e=hP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zC(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:zC(o)}}}function zC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function P9(t,e){return so(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(t,e){return Nd(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function D9(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends n0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ju(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ju(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,n,"signInWithPassword",N9);case"emailLink":return O9(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,r,"signUpPassword",P9);case"emailLink":return D9(e,{idToken:n,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e){return Nd(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="http://localhost";class ea extends n0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Yw(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ea(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nl(e,n)}buildRequest(){const e={requestUri:M9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F9(t){const e=Qc(Yc(t)).link,n=e?Qc(Yc(e)).deep_link_id:null,r=Qc(Yc(t)).deep_link_id;return(r?Qc(Yc(r)).link:null)||r||n||e||t}class r0{constructor(e){var n,r,s,i,o,a;const l=Qc(Yc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=L9((s=l.mode)!==null&&s!==void 0?s:null);fe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=F9(e);try{return new r0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(e,n){return Ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=r0.parseLink(n);return fe(r,"argument-error"),Ju._fromEmailAndCode(e,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends s0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Od{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Od{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Od{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(t,e){return Nd(t,"POST","/v1/accounts:signUp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await wr._fromIdTokenResponse(e,r,s),o=BC(r);return new ta({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=BC(r);return new ta({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function BC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends or{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fp(e,n,r,s)}}function fP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fp._fromErrorAndOperation(t,i,e,r):i})}async function j9(t,e,n=!1){const r=await Zu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ta._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(t,e,n=!1){const{auth:r}=t;if(mn(r.app))return Promise.reject(Cs(r));const s="reauthenticate";try{const i=await Zu(t,fP(r,s,e,t),n);fe(i.idToken,r,"internal-error");const o=e0(i.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),ta._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e,n=!1){if(mn(t.app))return Promise.reject(Cs(t));const r="signIn",s=await fP(t,r,e),i=await ta._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function $9(t,e){return pP(io(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t){const e=io(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z9(t,e,n){if(mn(t.app))return Promise.reject(Cs(t));const r=io(t),o=await Uv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",V9).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&mP(t),l}),a=await ta._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function B9(t,e,n){return mn(t.app)?Promise.reject(Cs(t)):$9(Mt(t),nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mP(t),r})}function W9(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function H9(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function q9(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}function G9(t){return Mt(t).signOut()}const pp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pp,"1"),this.storage.removeItem(pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=1e3,Q9=10;class yP extends gP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);h9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Q9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},K9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yP.type="LOCAL";const Y9=yP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP extends gP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vP.type="SESSION";const _P=vP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await X9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=i0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function J9(t){Zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function e5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function n5(){return wP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="firebaseLocalStorageDb",r5=1,mp="firebaseLocalStorage",xP="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([mp],e?"readwrite":"readonly").objectStore(mp)}function s5(){const t=indexedDB.deleteDatabase(EP);return new Dd(t).toPromise()}function $v(){const t=indexedDB.open(EP,r5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mp,{keyPath:xP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mp)?e(r):(r.close(),await s5(),e(await $v()))})})}async function WC(t,e,n){const r=Em(t,!0).put({[xP]:e,value:n});return new Dd(r).toPromise()}async function i5(t,e){const n=Em(t,!1).get(e),r=await new Dd(n).toPromise();return r===void 0?null:r.value}function HC(t,e){const n=Em(t,!0).delete(e);return new Dd(n).toPromise()}const o5=800,a5=3;class TP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $v(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>a5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(n5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await e5(),!this.activeServiceWorker)return;this.sender=new Z9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $v();return await WC(e,pp,"1"),await HC(e,pp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>i5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>HC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Em(s,!1).getAll();return new Dd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TP.type="LOCAL";const l5=TP;new Pd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e){return e?Es(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends n0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c5(t){return pP(t.auth,new o0(t),t.bypassAuthState)}function u5(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),U9(n,new o0(t),t.bypassAuthState)}async function d5(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),j9(n,new o0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c5;case"linkViaPopup":case"linkViaRedirect":return d5;case"reauthViaPopup":case"reauthViaRedirect":return u5;default:sr(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=new Pd(2e3,1e4);async function qg(t,e,n){if(mn(t.app))return Promise.reject(Sr(t,"operation-not-supported-in-this-environment"));const r=io(t);q6(t,e,s0);const s=CP(r,n);return new Ro(r,"signInViaPopup",e,s).executeNotNull()}class Ro extends IP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=i0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h5.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="pendingRedirect",uf=new Map;class p5 extends IP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const r=await m5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m5(t,e){const n=v5(e),r=y5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function g5(t,e){uf.set(t._key(),e)}function y5(t){return Es(t._redirectPersistence)}function v5(t){return cf(f5,t.config.apiKey,t.name)}async function _5(t,e,n=!1){if(mn(t.app))return Promise.reject(Cs(t));const r=io(t),s=CP(r,e),o=await new p5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=10*60*1e3;class E5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SP(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qC(e))}saveEventToCache(e){this.cachedEventUids.add(qC(e)),this.lastProcessedEventTime=Date.now()}}function qC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e={}){return so(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I5=/^https?/;async function S5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T5(t);for(const n of e)try{if(b5(n))return}catch{}sr(t,"unauthorized-domain")}function b5(t){const e=Vv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!I5.test(n))return!1;if(C5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=new Pd(3e4,6e4);function GC(){const t=Zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function R5(t){return new Promise((e,n)=>{var r,s,i;function o(){GC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GC(),n(Sr(t,"network-request-failed"))},timeout:k5.get()})}if(!((s=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zr().gapi)===null||i===void 0)&&i.load)o();else{const a=E9("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Sr(t,"network-request-failed"))},uP(`${w9()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw df=null,e})}let df=null;function A5(t){return df=df||R5(t),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=new Pd(5e3,15e3),N5="__/auth/iframe",O5="emulator/auth/iframe",D5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L5(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jw(e,O5):`https://${t.config.authDomain}/${N5}`,r={apiKey:e.apiKey,appName:t.name,v:no},s=M5.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${tc(r).slice(1)}`}async function F5(t){const e=await A5(t),n=Zr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:L5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Sr(t,"network-request-failed"),a=Zr().setTimeout(()=>{i(o)},P5.get());function l(){Zr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j5=500,U5=600,$5="_blank",z5="http://localhost";class KC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B5(t,e,n,r=j5,s=U5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},V5),{width:r.toString(),height:s.toString(),top:i,left:o}),c=an().toLowerCase();n&&(a=rP(c)?$5:n),tP(c)&&(e=e||z5,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,w])=>`${f}${g}=${w},`,"");if(d9(c)&&a!=="_self")return W5(e||"",a),new KC(null);const h=window.open(e||"",a,d);fe(h,t,"popup-blocked");try{h.focus()}catch{}return new KC(h)}function W5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="__/auth/handler",q5="emulator/auth/handler",G5=encodeURIComponent("fac");async function QC(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:no,eventId:s};if(e instanceof s0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Nv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Od){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${G5}=${encodeURIComponent(l)}`:"";return`${K5(t)}?${tc(a).slice(1)}${c}`}function K5({config:t}){return t.emulator?Jw(t,q5):`https://${t.authDomain}/${H5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="webStorageSupport";class Q5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_P,this._completeRedirectFn=_5,this._overrideRedirectResult=g5}async _openPopup(e,n,r,s){var i;Ls((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await QC(e,n,r,Vv(),s);return B5(e,o,i0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await QC(e,n,r,Vv(),s);return J9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ls(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await F5(e),r=new E5(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gg,{type:Gg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Gg];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lP()||nP()||t0()}}const Y5=Q5;var YC="@firebase/auth",XC="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J5(t){rr(new qn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cP(t)},c=new y9(r,s,i,l);return b9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new qn("auth-internal",e=>{const n=io(e.getProvider("auth").getImmediate());return(r=>new X5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(YC,XC,Z5(t)),sn(YC,XC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=5*60,t$=DA("authIdTokenMaxAge")||e$;let ZC=null;const n$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>t$)return;const s=n==null?void 0:n.token;ZC!==s&&(ZC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function r$(t=Ad()){const e=$s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=S9(t,{popupRedirectResolver:Y5,persistence:[l5,Y9,_P]}),r=DA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=n$(i.toString());H9(n,o,()=>o(n.currentUser)),W9(n,a=>o(a))}}const s=NA("auth");return s?k9(n,`http://${s}`):to("Auth",!1),n}function s$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Sr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",s$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J5("Browser");var i$="firebase",o$="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(i$,o$,"app");var JC={};const eI="@firebase/database",tI="1.0.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bP="";function a$(t){bP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),It(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Yu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Us(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l$(e)}}catch{}return new c$},Ao=kP("localStorage"),u$=kP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Rd("@firebase/database"),d$=function(){let t=1;return function(){return t++}}(),RP=function(t){const e=N3(t),n=new k3;n.update(e);const r=n.digest();return Ww.encodeByteArray(r)},Md=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Md.apply(null,r):typeof r=="object"?e+=It(r):e+=r,e+=" "}return e};let gu=null,nI=!0;const h$=function(t,e){K(!e,"Can't turn on custom loggers persistently."),rl.logLevel=be.VERBOSE,gu=rl.log.bind(rl)},nn=function(...t){if(nI===!0&&(nI=!1,gu===null&&u$.get("logging_enabled")===!0&&h$()),gu){const e=Md.apply(null,t);gu(e)}},Ld=function(t){return function(...e){nn(t,...e)}},zv=function(...t){const e="FIREBASE INTERNAL ERROR: "+Md(...t);rl.error(e)},Fs=function(...t){const e=`FIREBASE FATAL ERROR: ${Md(...t)}`;throw rl.error(e),new Error(e)},zn=function(...t){const e="FIREBASE WARNING: "+Md(...t);rl.warn(e)},f$=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},p$=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ll="[MIN_NAME]",na="[MAX_NAME]",rc=function(t,e){if(t===e)return 0;if(t===Ll||e===na)return-1;if(e===Ll||t===na)return 1;{const n=rI(t),r=rI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},m$=function(t,e){return t===e?0:t<e?-1:1},Mc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+It(e))},a0=function(t){if(typeof t!="object"||t===null)return It(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=It(e[r]),n+=":",n+=a0(t[e[r]]);return n+="}",n},PP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Nn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const NP=function(t){K(!AP(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},g$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},y$=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function v$(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const _$=new RegExp("^-?(0*)\\d{1,10}$"),w$=-2147483648,E$=2147483647,rI=function(t){if(_$.test(t)){const e=Number(t);if(e>=w$&&e<=E$)return e}return null},Fd=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw zn("Exception was thrown by user callback.",n),e},Math.floor(0))}},x$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,n){this.appCheckProvider=n,this.appName=e.name,mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){zn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zn(e)}}class hf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}hf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="5",OP="v",DP="s",MP="r",LP="f",FP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,VP="ls",jP="p",Bv="ac",UP="websocket",$P="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ao.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ao.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function I$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function BP(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===UP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$P)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);I$(t)&&(n.ns=t.namespace);const s=[];return Nn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this.counters_={}}incrementCounter(e,n=1){Us(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return u3(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg={},Qg={};function c0(t){const e=t.toString();return Kg[e]||(Kg[e]=new S$),Kg[e]}function b$(t,e){const n=t.toString();return Qg[n]||(Qg[n]=e()),Qg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Fd(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="start",R$="close",A$="pLPCommand",P$="pRTLPCB",WP="id",HP="pw",qP="ser",N$="cb",O$="seg",D$="ts",M$="d",L$="dframe",GP=1870,KP=30,F$=GP-KP,V$=25e3,j$=3e4;class Ba{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ld(e),this.stats_=c0(n),this.urlFn=l=>(this.appCheckToken&&(l[Bv]=this.appCheckToken),BP(n,$P,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new k$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(j$)),p$(()=>{if(this.isClosed_)return;this.scriptTagHolder=new u0((...i)=>{const[o,a,l,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sI)this.id=a,this.password=l;else if(o===R$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[sI]="t",r[qP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[N$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[OP]=l0,this.transportSessionId&&(r[DP]=this.transportSessionId),this.lastSessionId&&(r[VP]=this.lastSessionId),this.applicationId&&(r[jP]=this.applicationId),this.appCheckToken&&(r[Bv]=this.appCheckToken),typeof location<"u"&&location.hostname&&FP.test(location.hostname)&&(r[MP]=LP);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ba.forceAllow_=!0}static forceDisallow(){Ba.forceDisallow_=!0}static isAvailable(){return Ba.forceAllow_?!0:!Ba.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g$()&&!y$()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=It(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=AA(n),s=PP(r,F$);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[L$]="t",r[WP]=e,r[HP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=It(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class u0{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=d$(),window[A$+this.uniqueCallbackIdentifier]=e,window[P$+this.uniqueCallbackIdentifier]=n,this.myIFrame=u0.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nn("frame writing exception"),a.stack&&nn(a.stack),nn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WP]=this.myID,e[HP]=this.myPW,e[qP]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+KP+r.length<=GP;){const o=this.pendingSegs.shift();r=r+"&"+O$+s+"="+o.seg+"&"+D$+s+"="+o.ts+"&"+M$+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(V$)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=16384,$$=45e3;let gp=null;typeof MozWebSocket<"u"?gp=MozWebSocket:typeof WebSocket<"u"&&(gp=WebSocket);class _r{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ld(this.connId),this.stats_=c0(n),this.connURL=_r.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[OP]=l0,typeof location<"u"&&location.hostname&&FP.test(location.hostname)&&(o[MP]=LP),n&&(o[DP]=n),r&&(o[VP]=r),s&&(o[Bv]=s),i&&(o[jP]=i),BP(e,UP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ao.set("previous_websocket_failure",!0);try{let r;FA(),this.mySock=new gp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){_r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gp!==null&&!_r.forceDisallow_}static previouslyFailed(){return Ao.isInMemoryStorage||Ao.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ao.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Yu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=It(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=PP(n,U$);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($$))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_r.responsesRequiredToBeHealthy=2;_r.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{static get ALL_TRANSPORTS(){return[Ba,_r]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=_r&&_r.isAvailable();let r=n&&!_r.previouslyFailed();if(e.webSocketOnly&&(n||zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[_r];else{const s=this.transports_=[];for(const i of ed.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ed.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ed.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=6e4,B$=5e3,W$=10*1024,H$=100*1024,Yg="t",iI="d",q$="s",oI="r",G$="e",aI="o",lI="a",cI="n",uI="p",K$="h";class Q${constructor(e,n,r,s,i,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ld("c:"+this.id+":"),this.transportManager_=new ed(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=yu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>H$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>W$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yg in e){const n=e[Yg];n===lI?this.upgradeIfSecondaryHealthy_():n===oI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Mc("t",e),r=Mc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:cI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Mc("t",e),r=Mc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Mc(Yg,e);if(iI in e){const r=e[iI];if(n===K$){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===cI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===q$?this.onConnectionShutdown_(r):n===oI?this.onReset_(r):n===G$?zv("Server Error: "+r):n===aI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),l0!==r&&zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(z$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(B$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends YP{static getInstance(){return new yp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=32,hI=768;class Qe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ze(){return new Qe("")}function De(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $i(t){return t.pieces_.length-t.pieceNum_}function Ye(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Qe(t.pieces_,e)}function XP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Y$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ZP(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function JP(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Qe(e,0)}function St(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Qe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Qe(n,0)}function Re(t){return t.pieceNum_>=t.pieces_.length}function yn(t,e){const n=De(t),r=De(e);if(n===null)return e;if(n===r)return yn(Ye(t),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function eN(t,e){if($i(t)!==$i(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Er(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($i(t)>$i(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class X${constructor(e,n){this.errorPrefix_=n,this.parts_=ZP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vm(this.parts_[r]);tN(this)}}function Z$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vm(e),tN(t)}function J$(t){const e=t.parts_.pop();t.byteLength_-=vm(e),t.parts_.length>0&&(t.byteLength_-=1)}function tN(t){if(t.byteLength_>hI)throw new Error(t.errorPrefix_+"has a key path longer than "+hI+" bytes ("+t.byteLength_+").");if(t.parts_.length>dI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dI+") or object contains a cycle "+Co(t))}function Co(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends YP{static getInstance(){return new d0}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=1e3,ez=60*5*1e3,fI=30*1e3,tz=1.3,nz=3e4,rz="server_kill",pI=3;class Is extends QP{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Is.nextPersistentConnectionId_++,this.log_=Ld("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lc,this.maxReconnectDelay_=ez,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!FA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");d0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(It(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new qw,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Is.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Us(e,"w")){const r=Ml(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||b3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=S3(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+It(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zv("Unrecognized action received from server: "+It(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nz&&(this.reconnectDelay_=Lc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Is.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new Q$(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{zn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(rz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&zn(h),l())}}}interrupt(e){nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Nv(this.interruptReasons_)&&(this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>a0(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Qe(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pI&&(this.reconnectDelay_=fI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+bP.replace(/\./g,"-")]=1,Kw()?e["framework.cordova"]=1:LA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yp.getInstance().currentlyOnline();return Nv(this.interruptReasons_)&&e}}Is.nextPersistentConnectionId_=0;Is.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ie(Ll,e),s=new Ie(Ll,n);return this.compare(r,s)!==0}minPost(){return Ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh;class nN extends xm{static get __EMPTY_NODE(){return Dh}static set __EMPTY_NODE(e){Dh=e}compare(e,n){return rc(e.name,n.name)}isDefinedOn(e){throw ec("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(na,Dh)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,Dh)}toString(){return".key"}}const sl=new nN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=class{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ln=class Xc{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xc.RED,this.left=s??Gr.EMPTY_NODE,this.right=i??Gr.EMPTY_NODE}copy(e,n,r,s,i){return new Xc(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Gr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Xc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Xc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Ln.RED=!0;Ln.BLACK=!1;class sz{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Gr=class ff{constructor(e,n=ff.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ff(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ln.BLACK,null,null))}remove(e){return new ff(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Mh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Mh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Mh(this.root_,null,this.comparator_,!0,e)}};Gr.EMPTY_NODE=new sz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(t,e){return rc(t.name,e.name)}function h0(t,e){return rc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wv;function oz(t){Wv=t}const rN=function(t){return typeof t=="number"?"number:"+NP(t):"string:"+t},sN=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Us(e,".sv"),"Priority must be a string or number.")}else K(t===Wv||t.isEmpty(),"priority of unexpected type.");K(t===Wv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mI;class Pt{static set __childrenNodeConstructor(e){mI=e}static get __childrenNodeConstructor(){return mI}constructor(e,n=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),sN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Re(e)?this:De(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=De(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||$i(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+rN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=NP(this.value_):e+=this.value_,this.lazyHash_=RP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Pt.VALUE_TYPE_ORDER.indexOf(n),i=Pt.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+n),K(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iN,oN;function az(t){iN=t}function lz(t){oN=t}class cz extends xm{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?rc(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(na,new Pt("[PRIORITY-POST]",oN))}makePost(e,n){const r=iN(e);return new Ie(n,new Pt("[PRIORITY-POST]",r))}toString(){return".priority"}}const pt=new cz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=Math.log(2);class dz{constructor(e){const n=i=>parseInt(Math.log(i)/uz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vp=function(t,e,n,r){t.sort(e);const s=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new Ln(f,h.node,Ln.BLACK,null,null);{const g=parseInt(d/2,10)+l,w=s(l,g),_=s(g+1,c);return h=t[g],f=n?n(h):h,new Ln(f,h.node,Ln.BLACK,w,_)}},i=function(l){let c=null,d=null,h=t.length;const f=function(w,_){const E=h-w,x=h;h-=w;const v=s(E+1,x),C=t[E],N=n?n(C):C;g(new Ln(N,C.node,_,null,v))},g=function(w){c?(c.left=w,c=w):(d=w,c=w)};for(let w=0;w<l.count;++w){const _=l.nextBitIsOne(),E=Math.pow(2,l.count-(w+1));_?f(E,Ln.BLACK):(f(E,Ln.BLACK),f(E,Ln.RED))}return d},o=new dz(t.length),a=i(o);return new Gr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;const Ca={};class xs{static get Default(){return K(Ca&&pt,"ChildrenNode.ts has not been loaded"),Xg=Xg||new xs({".priority":Ca},{".priority":pt}),Xg}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ml(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gr?n:null}hasIndex(e){return Us(this.indexSet_,e.toString())}addIndex(e,n){K(e!==sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ie.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=vp(r,e.getCompare()):a=Ca;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new xs(d,c)}addToIndexes(e,n){const r=lp(this.indexes_,(s,i)=>{const o=Ml(this.indexSet_,i);if(K(o,"Missing index implementation for "+i),s===Ca)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ie.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),vp(a,o.getCompare())}else return Ca;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Ie(e.name,a))),l.insert(e,e.node)}});return new xs(r,this.indexSet_)}removeFromIndexes(e,n){const r=lp(this.indexes_,s=>{if(s===Ca)return s;{const i=n.get(e.name);return i?s.remove(new Ie(e.name,i)):s}});return new xs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc;class pe{static get EMPTY_NODE(){return Fc||(Fc=new pe(new Gr(h0),null,xs.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&sN(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fc}updatePriority(e){return this.children_.isEmpty()?this:new pe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fc:n}}getChild(e){const n=De(e);return n===null?this:this.getImmediateChild(n).getChild(Ye(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ie(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Fc:this.priorityNode_;return new pe(s,o,i)}}updateChild(e,n){const r=De(e);if(r===null)return n;{K(De(e)!==".priority"||$i(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ye(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(pt,(o,a)=>{n[o]=a.val(e),r++,i&&pe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+rN(this.getPriority().val())+":"),this.forEachChild(pt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":RP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ie(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vd?-1:0}withIndex(e){if(e===sl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new pe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(pt),s=n.getIterator(pt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===sl?null:this.indexMap_.get(e.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hz extends pe{constructor(){super(new Gr(h0),pe.EMPTY_NODE,xs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}}const Vd=new hz;Object.defineProperties(Ie,{MIN:{value:new Ie(Ll,pe.EMPTY_NODE)},MAX:{value:new Ie(na,Vd)}});nN.__EMPTY_NODE=pe.EMPTY_NODE;Pt.__childrenNodeConstructor=pe;oz(Vd);lz(Vd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=!0;function $t(t,e=null){if(t===null)return pe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pt(n,$t(e))}if(!(t instanceof Array)&&fz){const n=[];let r=!1;if(Nn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=$t(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ie(o,l)))}}),n.length===0)return pe.EMPTY_NODE;const i=vp(n,iz,o=>o.name,h0);if(r){const o=vp(n,pt.getCompare());return new pe(i,$t(e),new xs({".priority":o},{".priority":pt}))}else return new pe(i,$t(e),xs.Default)}else{let n=pe.EMPTY_NODE;return Nn(t,(r,s)=>{if(Us(t,r)&&r.substring(0,1)!=="."){const i=$t(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority($t(e))}}az($t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz extends xm{constructor(e){super(),this.indexPath_=e,K(!Re(e)&&De(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?rc(e.name,n.name):i}makePost(e,n){const r=$t(e),s=pe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ie(n,s)}maxPost(){const e=pe.EMPTY_NODE.updateChild(this.indexPath_,Vd);return new Ie(na,e)}toString(){return ZP(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz extends xm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?rc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){const r=$t(e);return new Ie(n,r)}toString(){return".value"}}const gz=new mz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){return{type:"value",snapshotNode:t}}function Fl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function td(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function nd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function yz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(td(n,a)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Fl(n,r)):o.trackChildChange(nd(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(pt,(s,i)=>{n.hasChild(s)||r.trackChildChange(td(s,i))}),n.isLeafNode()||n.forEachChild(pt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(nd(s,i,o))}else r.trackChildChange(Fl(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?pe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.indexedFilter_=new f0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rd.getStartPost_(e),this.endPost_=rd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Ie(n,r))||(r=pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=pe.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(pe.EMPTY_NODE);const i=this;return n.forEachChild(pt,(o,a)=>{i.matches(new Ie(o,a))||(s=s.updateImmediateChild(o,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new rd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Ie(n,r))||(r=pe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=pe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(pe.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,g)=>h(g,f)}else o=this.index_.getCompare();const a=e;K(a.numChildren()===this.limit_,"");const l=new Ie(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,l);if(d&&!r.isEmpty()&&g>=0)return i!=null&&i.trackChildChange(nd(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(td(n,h));const _=a.updateImmediateChild(n,pe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Fl(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:d&&o(c,l)>=0?(i!=null&&(i.trackChildChange(td(c.name,c.node)),i.trackChildChange(Fl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,pe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:na}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){const e=new p0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _z(t){return t.loadsAllData()?new f0(t.getIndex()):t.hasLimit()?new vz(t):new rd(t)}function gI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pt?n="$priority":t.index_===gz?n="$value":t.index_===sl?n="$key":(K(t.index_ instanceof pz,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=It(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=It(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+It(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=It(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+It(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends QP{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Ld("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=_p.getListenId_(e,r),a={};this.listens_[o]=a;const l=gI(e._queryParams);this.restRequest_(i+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),Ml(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=_p.getListenId_(e,n);delete this.listens_[r]}get(e){const n=gI(e._queryParams),r=e._path.toString(),s=new qw;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+tc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Yu(a.responseText)}catch{zn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&zn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){return{value:null,children:new Map}}function lN(t,e,n){if(Re(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=De(e);t.children.has(r)||t.children.set(r,wp());const s=t.children.get(r);e=Ye(e),lN(s,e,n)}}function Hv(t,e,n){t.value!==null?n(e,t.value):Ez(t,(r,s)=>{const i=new Qe(e.toString()+"/"+r);Hv(s,i,n)})}function Ez(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=10*1e3,Tz=30*1e3,Cz=5*60*1e3;class Iz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xz(e);const r=vI+(Tz-vI)*Math.random();yu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nn(e,(s,i)=>{i>0&&Us(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),yu(this.reportStats_.bind(this),Math.floor(Math.random()*2*Cz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xr||(xr={}));function cN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function m0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function g0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xr.ACK_USER_WRITE,this.source=cN()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Qe(e));return new Ep(ze(),n,this.revert)}}else return K(De(this.path)===e,"operationForChild called for unrelated child."),new Ep(Ye(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.source=e,this.path=n,this.type=xr.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new sd(this.source,ze()):new sd(this.source,Ye(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xr.OVERWRITE}operationForChild(e){return Re(this.path)?new ra(this.source,ze(),this.snap.getImmediateChild(e)):new ra(this.source,Ye(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xr.MERGE}operationForChild(e){if(Re(this.path)){const n=this.children.subtree(new Qe(e));return n.isEmpty()?null:n.value?new ra(this.source,ze(),n.value):new id(this.source,ze(),n)}else return K(De(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new id(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const n=De(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bz(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(yz(o.childName,o.snapshotNode))}),Vc(t,s,"child_removed",e,r,n),Vc(t,s,"child_added",e,r,n),Vc(t,s,"child_moved",i,r,n),Vc(t,s,"child_changed",e,r,n),Vc(t,s,"value",e,r,n),s}function Vc(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Rz(t,a,l)),o.forEach(a=>{const l=kz(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function kz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Rz(t,e,n){if(e.childName==null||n.childName==null)throw ec("Should only compare child_ events.");const r=new Ie(e.childName,e.snapshotNode),s=new Ie(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){return{eventCache:t,serverCache:e}}function vu(t,e,n,r){return Tm(new zi(e,n,r),t.serverCache)}function uN(t,e,n,r){return Tm(t.eventCache,new zi(e,n,r))}function xp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sa(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;const Az=()=>(Zg||(Zg=new Gr(m$)),Zg);class tt{static fromObject(e){let n=new tt(null);return Nn(e,(r,s)=>{n=n.set(new Qe(r),s)}),n}constructor(e,n=Az()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ze(),value:this.value};if(Re(e))return null;{const r=De(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Ye(e),n);return i!=null?{path:St(new Qe(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const n=De(e),r=this.children.get(n);return r!==null?r.subtree(Ye(e)):new tt(null)}}set(e,n){if(Re(e))return new tt(n,this.children);{const r=De(e),i=(this.children.get(r)||new tt(null)).set(Ye(e),n),o=this.children.insert(r,i);return new tt(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const n=De(e),r=this.children.get(n);if(r){const s=r.remove(Ye(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new tt(null):new tt(this.value,i)}else return this}}get(e){if(Re(e))return this.value;{const n=De(e),r=this.children.get(n);return r?r.get(Ye(e)):null}}setTree(e,n){if(Re(e))return n;{const r=De(e),i=(this.children.get(r)||new tt(null)).setTree(Ye(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new tt(this.value,o)}}fold(e){return this.fold_(ze(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(St(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ze(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Re(e))return null;{const i=De(e),o=this.children.get(i);return o?o.findOnPath_(Ye(e),St(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ze(),n)}foreachOnPath_(e,n,r){if(Re(e))return this;{this.value&&r(n,this.value);const s=De(e),i=this.children.get(s);return i?i.foreachOnPath_(Ye(e),St(n,s),r):new tt(null)}}foreach(e){this.foreach_(ze(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(St(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.writeTree_=e}static empty(){return new br(new tt(null))}}function _u(t,e,n){if(Re(e))return new br(new tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=yn(s,e);return i=i.updateChild(o,n),new br(t.writeTree_.set(s,i))}else{const s=new tt(n),i=t.writeTree_.setTree(e,s);return new br(i)}}}function _I(t,e,n){let r=t;return Nn(n,(s,i)=>{r=_u(r,St(e,s),i)}),r}function wI(t,e){if(Re(e))return br.empty();{const n=t.writeTree_.setTree(e,new tt(null));return new br(n)}}function qv(t,e){return da(t,e)!=null}function da(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yn(n.path,e)):null}function EI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pt,(r,s)=>{e.push(new Ie(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ie(r,s.value))}),e}function Pi(t,e){if(Re(e))return t;{const n=da(t,e);return n!=null?new br(new tt(n)):new br(t.writeTree_.subtree(e))}}function Gv(t){return t.writeTree_.isEmpty()}function Vl(t,e){return dN(ze(),t.writeTree_,e)}function dN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(K(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=dN(St(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(St(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){return mN(e,t)}function Pz(t,e,n,r,s){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=_u(t.visibleWrites,e,n)),t.lastWriteId=r}function Nz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Oz(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Dz(a,r.path)?s=!1:Er(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Mz(t),!0;if(r.snap)t.visibleWrites=wI(t.visibleWrites,r.path);else{const a=r.children;Nn(a,l=>{t.visibleWrites=wI(t.visibleWrites,St(r.path,l))})}return!0}else return!1}function Dz(t,e){if(t.snap)return Er(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Er(St(t.path,n),e))return!0;return!1}function Mz(t){t.visibleWrites=hN(t.allWrites,Lz,ze()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Lz(t){return t.visible}function hN(t,e,n){let r=br.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Er(n,o)?(a=yn(n,o),r=_u(r,a,i.snap)):Er(o,n)&&(a=yn(o,n),r=_u(r,ze(),i.snap.getChild(a)));else if(i.children){if(Er(n,o))a=yn(n,o),r=_I(r,a,i.children);else if(Er(o,n))if(a=yn(o,n),Re(a))r=_I(r,ze(),i.children);else{const l=Ml(i.children,De(a));if(l){const c=l.getChild(Ye(a));r=_u(r,ze(),c)}}}else throw ec("WriteRecord should have .snap or .children")}}return r}function fN(t,e,n,r,s){if(!r&&!s){const i=da(t.visibleWrites,e);if(i!=null)return i;{const o=Pi(t.visibleWrites,e);if(Gv(o))return n;if(n==null&&!qv(o,ze()))return null;{const a=n||pe.EMPTY_NODE;return Vl(o,a)}}}else{const i=Pi(t.visibleWrites,e);if(!s&&Gv(i))return n;if(!s&&n==null&&!qv(i,ze()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Er(c.path,e)||Er(e,c.path))},a=hN(t.allWrites,o,e),l=n||pe.EMPTY_NODE;return Vl(a,l)}}}function Fz(t,e,n){let r=pe.EMPTY_NODE;const s=da(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(pt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Pi(t.visibleWrites,e);return n.forEachChild(pt,(o,a)=>{const l=Vl(Pi(i,new Qe(o)),a);r=r.updateImmediateChild(o,l)}),EI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Pi(t.visibleWrites,e);return EI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Vz(t,e,n,r,s){K(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=St(e,n);if(qv(t.visibleWrites,i))return null;{const o=Pi(t.visibleWrites,i);return Gv(o)?s.getChild(n):Vl(o,s.getChild(n))}}function jz(t,e,n,r){const s=St(e,n),i=da(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Pi(t.visibleWrites,s);return Vl(o,r.getNode().getImmediateChild(n))}else return null}function Uz(t,e){return da(t.visibleWrites,e)}function $z(t,e,n,r,s,i,o){let a;const l=Pi(t.visibleWrites,e),c=da(l,ze());if(c!=null)a=c;else if(n!=null)a=Vl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<s;)h(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function zz(){return{visibleWrites:br.empty(),allWrites:[],lastWriteId:-1}}function Tp(t,e,n,r){return fN(t.writeTree,t.treePath,e,n,r)}function y0(t,e){return Fz(t.writeTree,t.treePath,e)}function xI(t,e,n,r){return Vz(t.writeTree,t.treePath,e,n,r)}function Cp(t,e){return Uz(t.writeTree,St(t.treePath,e))}function Bz(t,e,n,r,s,i){return $z(t.writeTree,t.treePath,e,n,r,s,i)}function v0(t,e,n){return jz(t.writeTree,t.treePath,e,n)}function pN(t,e){return mN(St(t.treePath,e),t.writeTree)}function mN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,nd(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,td(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Fl(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,nd(r,e.snapshotNode,s.oldSnap));else throw ec("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const gN=new Hz;class _0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new zi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return v0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sa(this.viewCache_),i=Bz(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){return{filter:t}}function Gz(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Kz(t,e,n,r,s){const i=new Wz;let o,a;if(n.type===xr.OVERWRITE){const c=n;c.source.fromUser?o=Kv(t,e,c.path,c.snap,r,s,i):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=Ip(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===xr.MERGE){const c=n;c.source.fromUser?o=Yz(t,e,c.path,c.children,r,s,i):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Qv(t,e,c.path,c.children,r,s,a,i))}else if(n.type===xr.ACK_USER_WRITE){const c=n;c.revert?o=Jz(t,e,c.path,r,s,i):o=Xz(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===xr.LISTEN_COMPLETE)o=Zz(t,e,n.path,r,i);else throw ec("Unknown operation type: "+n.type);const l=i.getChanges();return Qz(e,o,l),{viewCache:o,changes:l}}function Qz(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=xp(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(aN(xp(e)))}}function yN(t,e,n,r,s,i){const o=e.eventCache;if(Cp(r,n)!=null)return e;{let a,l;if(Re(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=sa(e),d=c instanceof pe?c:pe.EMPTY_NODE,h=y0(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=Tp(r,sa(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=De(n);if(c===".priority"){K($i(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=xI(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Ye(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=xI(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=v0(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,s,i):a=o.getNode()}}return vu(e,a,o.isFullyInitialized()||Re(n),t.filter.filtersNodes())}}function Ip(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Re(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),g,null)}else{const g=De(n);if(!l.isCompleteForPath(n)&&$i(n)>1)return e;const w=Ye(n),E=l.getNode().getImmediateChild(g).updateChild(w,r);g===".priority"?c=d.updatePriority(l.getNode(),E):c=d.updateChild(l.getNode(),g,E,w,gN,null)}const h=uN(e,c,l.isFullyInitialized()||Re(n),d.filtersNodes()),f=new _0(s,h,i);return yN(t,h,n,s,f,a)}function Kv(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const d=new _0(s,e,i);if(Re(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=vu(e,c,!0,t.filter.filtersNodes());else{const h=De(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=vu(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ye(n),g=a.getNode().getImmediateChild(h);let w;if(Re(f))w=r;else{const _=d.getCompleteChild(h);_!=null?XP(f)===".priority"&&_.getChild(JP(f)).isEmpty()?w=_:w=_.updateChild(f,r):w=pe.EMPTY_NODE}if(g.equals(w))l=e;else{const _=t.filter.updateChild(a.getNode(),h,w,f,d,o);l=vu(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function TI(t,e){return t.eventCache.isCompleteForChild(e)}function Yz(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const d=St(n,l);TI(e,De(d))&&(a=Kv(t,a,d,c,s,i,o))}),r.foreach((l,c)=>{const d=St(n,l);TI(e,De(d))||(a=Kv(t,a,d,c,s,i,o))}),a}function CI(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Qv(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Re(n)?c=r:c=new tt(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),w=CI(t,g,f);l=Ip(t,l,new Qe(h),w,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const g=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!g){const w=e.serverCache.getNode().getImmediateChild(h),_=CI(t,w,f);l=Ip(t,l,new Qe(h),_,s,i,o,a)}}),l}function Xz(t,e,n,r,s,i,o){if(Cp(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Re(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ip(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Re(n)){let c=new tt(null);return l.getNode().forEachChild(sl,(d,h)=>{c=c.set(new Qe(d),h)}),Qv(t,e,n,c,s,i,a,o)}else return e}else{let c=new tt(null);return r.foreach((d,h)=>{const f=St(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),Qv(t,e,n,c,s,i,a,o)}}function Zz(t,e,n,r,s){const i=e.serverCache,o=uN(e,i.getNode(),i.isFullyInitialized()||Re(n),i.isFiltered());return yN(t,o,n,r,gN,s)}function Jz(t,e,n,r,s,i){let o;if(Cp(r,n)!=null)return e;{const a=new _0(r,e,s),l=e.eventCache.getNode();let c;if(Re(n)||De(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Tp(r,sa(e));else{const h=e.serverCache.getNode();K(h instanceof pe,"serverChildren would be complete if leaf node"),d=y0(r,h)}d=d,c=t.filter.updateFullNode(l,d,i)}else{const d=De(n);let h=v0(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,Ye(n),a,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,pe.EMPTY_NODE,Ye(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Tp(r,sa(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||Cp(r,ze())!=null,vu(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new f0(r.getIndex()),i=_z(r);this.processor_=qz(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(pe.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(pe.EMPTY_NODE,a.getNode(),null),d=new zi(l,o.isFullyInitialized(),s.filtersNodes()),h=new zi(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Tm(h,d),this.eventGenerator_=new Sz(this.query_)}get query(){return this.query_}}function tB(t){return t.viewCache_.serverCache.getNode()}function nB(t){return xp(t.viewCache_)}function rB(t,e){const n=sa(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Re(e)&&!n.getImmediateChild(De(e)).isEmpty())?n.getChild(e):null}function II(t){return t.eventRegistrations_.length===0}function sB(t,e){t.eventRegistrations_.push(e)}function SI(t,e,n){const r=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function bI(t,e,n,r){e.type===xr.MERGE&&e.source.queryId!==null&&(K(sa(t.viewCache_),"We should always have a full cache before handling merges"),K(xp(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Kz(t.processor_,s,e,n,r);return Gz(t.processor_,i.viewCache),K(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,vN(t,i.changes,i.viewCache.eventCache.getNode(),null)}function iB(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pt,(i,o)=>{r.push(Fl(i,o))}),n.isFullyInitialized()&&r.push(aN(n.getNode())),vN(t,r,n.getNode(),e)}function vN(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return bz(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp;class _N{constructor(){this.views=new Map}}function oB(t){K(!Sp,"__referenceConstructor has already been defined"),Sp=t}function aB(){return K(Sp,"Reference.ts has not been loaded"),Sp}function lB(t){return t.views.size===0}function w0(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return K(i!=null,"SyncTree gave us an op for an invalid query."),bI(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(bI(o,e,n,r));return i}}function wN(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Tp(n,s?r:null),l=!1;a?l=!0:r instanceof pe?(a=y0(n,r),l=!1):(a=pe.EMPTY_NODE,l=!1);const c=Tm(new zi(a,l,!1),new zi(r,s,!1));return new eB(e,c)}return o}function cB(t,e,n,r,s,i){const o=wN(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),sB(o,n),iB(o,n)}function uB(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Bi(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(SI(c,n,r)),II(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(SI(l,n,r)),II(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Bi(t)&&i.push(new(aB())(e._repo,e._path)),{removed:i,events:o}}function EN(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ni(t,e){let n=null;for(const r of t.views.values())n=n||rB(r,e);return n}function xN(t,e){if(e._queryParams.loadsAllData())return Im(t);{const r=e._queryIdentifier;return t.views.get(r)}}function TN(t,e){return xN(t,e)!=null}function Bi(t){return Im(t)!=null}function Im(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp;function dB(t){K(!bp,"__referenceConstructor has already been defined"),bp=t}function hB(){return K(bp,"Reference.ts has not been loaded"),bp}let fB=1;class kI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=zz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pB(t,e,n,r,s){return Pz(t.pendingWriteTree_,e,n,r,s),s?Ud(t,new ra(cN(),e,n)):[]}function Wa(t,e,n=!1){const r=Nz(t.pendingWriteTree_,e);if(Oz(t.pendingWriteTree_,e)){let i=new tt(null);return r.snap!=null?i=i.set(ze(),!0):Nn(r.children,o=>{i=i.set(new Qe(o),!0)}),Ud(t,new Ep(r.path,i,n))}else return[]}function jd(t,e,n){return Ud(t,new ra(m0(),e,n))}function mB(t,e,n){const r=tt.fromObject(n);return Ud(t,new id(m0(),e,r))}function gB(t,e){return Ud(t,new sd(m0(),e))}function yB(t,e,n){const r=E0(t,n);if(r){const s=x0(r),i=s.path,o=s.queryId,a=yn(i,e),l=new sd(g0(o),a);return T0(t,i,l)}else return[]}function CN(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||TN(o,e))){const l=uB(o,e,n,r);lB(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,g)=>Bi(g));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const g=EB(f);for(let w=0;w<g.length;++w){const _=g[w],E=_.query,x=RN(t,_);t.listenProvider_.startListening(wu(E),od(t,E),x.hashFn,x.onComplete)}}}!h&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(wu(e),null):c.forEach(f=>{const g=t.queryToTagMap.get(Sm(f));t.listenProvider_.stopListening(wu(f),g)}))}xB(t,c)}return a}function IN(t,e,n,r){const s=E0(t,r);if(s!=null){const i=x0(s),o=i.path,a=i.queryId,l=yn(o,e),c=new ra(g0(a),l,n);return T0(t,o,c)}else return[]}function vB(t,e,n,r){const s=E0(t,r);if(s){const i=x0(s),o=i.path,a=i.queryId,l=yn(o,e),c=tt.fromObject(n),d=new id(g0(a),l,c);return T0(t,o,d)}else return[]}function _B(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,g)=>{const w=yn(f,s);i=i||Ni(g,w),o=o||Bi(g)});let a=t.syncPointTree_.get(s);a?(o=o||Bi(a),i=i||Ni(a,ze())):(a=new _N,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=pe.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((g,w)=>{const _=Ni(w,ze());_&&(i=i.updateImmediateChild(g,_))}));const c=TN(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Sm(e);K(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=TB();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=Cm(t.pendingWriteTree_,s);let h=cB(a,e,n,d,i,l);if(!c&&!o&&!r){const f=xN(a,e);h=h.concat(CB(t,e,f))}return h}function SN(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=yn(o,e),c=Ni(a,l);if(c)return c});return fN(s,e,i,n,!0)}function wB(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const h=yn(c,n);r=r||Ni(d,h)});let s=t.syncPointTree_.get(n);s?r=r||Ni(s,ze()):(s=new _N,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new zi(r,!0,!1):null,a=Cm(t.pendingWriteTree_,e._path),l=wN(s,e,a,i?o.getNode():pe.EMPTY_NODE,i);return nB(l)}function Ud(t,e){return bN(e,t.syncPointTree_,null,Cm(t.pendingWriteTree_,ze()))}function bN(t,e,n,r){if(Re(t.path))return kN(t,e,n,r);{const s=e.get(ze());n==null&&s!=null&&(n=Ni(s,ze()));let i=[];const o=De(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=pN(r,o);i=i.concat(bN(a,l,c,d))}return s&&(i=i.concat(w0(s,t,r,n))),i}}function kN(t,e,n,r){const s=e.get(ze());n==null&&s!=null&&(n=Ni(s,ze()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=pN(r,o),d=t.operationForChild(o);d&&(i=i.concat(kN(d,a,l,c)))}),s&&(i=i.concat(w0(s,t,r,n))),i}function RN(t,e){const n=e.query,r=od(t,n);return{hashFn:()=>(tB(e)||pe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?yB(t,n._path,r):gB(t,n._path);{const i=v$(s,n);return CN(t,n,null,i)}}}}function od(t,e){const n=Sm(e);return t.queryToTagMap.get(n)}function Sm(t){return t._path.toString()+"$"+t._queryIdentifier}function E0(t,e){return t.tagToQueryMap.get(e)}function x0(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Qe(t.substr(0,e))}}function T0(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const s=Cm(t.pendingWriteTree_,e);return w0(r,n,s,null)}function EB(t){return t.fold((e,n,r)=>{if(n&&Bi(n))return[Im(n)];{let s=[];return n&&(s=EN(n)),Nn(r,(i,o)=>{s=s.concat(o)}),s}})}function wu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(hB())(t._repo,t._path):t}function xB(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Sm(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function TB(){return fB++}function CB(t,e,n){const r=e._path,s=od(t,e),i=RN(t,n),o=t.listenProvider_.startListening(wu(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)K(!Bi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,h)=>{if(!Re(c)&&d&&Bi(d))return[Im(d).query];{let f=[];return d&&(f=f.concat(EN(d).map(g=>g.query))),Nn(h,(g,w)=>{f=f.concat(w)}),f}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(wu(d),od(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new C0(n)}node(){return this.node_}}class I0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=St(this.path_,e);return new I0(this.syncTree_,n)}node(){return SN(this.syncTree_,this.path_)}}const IB=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},RI=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return SB(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bB(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},SB=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},bB=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const s=e.node();if(K(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},kB=function(t,e,n,r){return S0(e,new I0(n,t),r)},RB=function(t,e,n){return S0(t,new C0(e),n)};function S0(t,e,n){const r=t.getPriority().val(),s=RI(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=RI(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Pt(a,$t(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Pt(s))),o.forEachChild(pt,(a,l)=>{const c=S0(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function k0(t,e){let n=e instanceof Qe?e:new Qe(e),r=t,s=De(n);for(;s!==null;){const i=Ml(r.node.children,s)||{children:{},childCount:0};r=new b0(s,r,i),n=Ye(n),s=De(n)}return r}function sc(t){return t.node.value}function AN(t,e){t.node.value=e,Yv(t)}function PN(t){return t.node.childCount>0}function AB(t){return sc(t)===void 0&&!PN(t)}function bm(t,e){Nn(t.node.children,(n,r)=>{e(new b0(n,t,r))})}function NN(t,e,n,r){n&&!r&&e(t),bm(t,s=>{NN(s,e,!0,r)}),n&&r&&e(t)}function PB(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function $d(t){return new Qe(t.parent===null?t.name:$d(t.parent)+"/"+t.name)}function Yv(t){t.parent!==null&&NB(t.parent,t.name,t)}function NB(t,e,n){const r=AB(n),s=Us(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Yv(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Yv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=/[\[\].#$\/\u0000-\u001F\u007F]/,DB=/[\[\].#$\u0000-\u001F\u007F]/,Jg=10*1024*1024,ON=function(t){return typeof t=="string"&&t.length!==0&&!OB.test(t)},DN=function(t){return typeof t=="string"&&t.length!==0&&!DB.test(t)},MB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DN(t)},MN=function(t,e,n){const r=n instanceof Qe?new X$(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Co(r));if(typeof e=="function")throw new Error(t+"contains a function "+Co(r)+" with contents = "+e.toString());if(AP(e))throw new Error(t+"contains "+e.toString()+" "+Co(r));if(typeof e=="string"&&e.length>Jg/3&&vm(e)>Jg)throw new Error(t+"contains a string greater than "+Jg+" utf8 bytes "+Co(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Nn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!ON(o)))throw new Error(t+" contains an invalid key ("+o+") "+Co(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Z$(r,o),MN(t,a,r),J$(r)}),s&&i)throw new Error(t+' contains ".value" child '+Co(r)+" in addition to actual children.")}},LN=function(t,e,n,r){if(!DN(n))throw new Error($A(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},LB=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LN(t,e,n)},FB=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ON(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!MB(n))throw new Error($A(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jB(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!eN(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function oo(t,e,n){jB(t,n),UB(t,r=>Er(r,e)||Er(e,r))}function UB(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?($B(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $B(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gu&&nn("event: "+n.toString()),Fd(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="repo_interrupt",BB=25;class WB{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wp(),this.transactionQueueTree_=new b0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HB(t,e,n){if(t.stats_=c0(t.repoInfo_),t.forceRestClient_||x$())t.server_=new _p(t.repoInfo_,(r,s,i,o)=>{AI(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>PI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{It(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Is(t.repoInfo_,e,(r,s,i,o)=>{AI(t,r,s,i,o)},r=>{PI(t,r)},r=>{GB(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=b$(t.repoInfo_,()=>new Iz(t.stats_,t.server_)),t.infoData_=new wz,t.infoSyncTree_=new kI({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=jd(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),R0(t,"connected",!1),t.serverSyncTree_=new kI({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);oo(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function qB(t){const n=t.infoData_.getNode(new Qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function FN(t){return IB({timestamp:qB(t)})}function AI(t,e,n,r,s){t.dataUpdateCount++;const i=new Qe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=lp(n,c=>$t(c));o=vB(t.serverSyncTree_,i,l,s)}else{const l=$t(n);o=IN(t.serverSyncTree_,i,l,s)}else if(r){const l=lp(n,c=>$t(c));o=mB(t.serverSyncTree_,i,l)}else{const l=$t(n);o=jd(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=N0(t,i)),oo(t.eventQueue_,a,o)}function PI(t,e){R0(t,"connected",e),e===!1&&YB(t)}function GB(t,e){Nn(e,(n,r)=>{R0(t,n,r)})}function R0(t,e,n){const r=new Qe("/.info/"+e),s=$t(n);t.infoData_.updateSnapshot(r,s);const i=jd(t.infoSyncTree_,r,s);oo(t.eventQueue_,r,i)}function KB(t){return t.nextWriteId_++}function QB(t,e,n){const r=wB(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=$t(s).withIndex(e._queryParams.getIndex());_B(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=jd(t.serverSyncTree_,e._path,i);else{const a=od(t.serverSyncTree_,e);o=IN(t.serverSyncTree_,e._path,i,a)}return oo(t.eventQueue_,e._path,o),CN(t.serverSyncTree_,e,n,null,!0),i},s=>(A0(t,"get for query "+It(e)+" failed: "+s),Promise.reject(new Error(s))))}function YB(t){A0(t,"onDisconnectEvents");const e=FN(t),n=wp();Hv(t.onDisconnect_,ze(),(s,i)=>{const o=kB(s,i,t.serverSyncTree_,e);lN(n,s,o)});let r=[];Hv(n,ze(),(s,i)=>{r=r.concat(jd(t.serverSyncTree_,s,i));const o=eW(t,s);N0(t,o)}),t.onDisconnect_=wp(),oo(t.eventQueue_,ze(),r)}function XB(t){t.persistentConnection_&&t.persistentConnection_.interrupt(zB)}function A0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nn(n,...e)}function VN(t,e,n){return SN(t.serverSyncTree_,e,n)||pe.EMPTY_NODE}function P0(t,e=t.transactionQueueTree_){if(e||km(t,e),sc(e)){const n=UN(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&ZB(t,$d(e),n)}else PN(e)&&bm(e,n=>{P0(t,n)})}function ZB(t,e,n){const r=n.map(c=>c.currentWriteId),s=VN(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];K(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=yn(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{A0(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Wa(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();km(t,k0(t.transactionQueueTree_,e)),P0(t,t.transactionQueueTree_),oo(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Fd(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{zn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}N0(t,e)}},o)}function N0(t,e){const n=jN(t,e),r=$d(n),s=UN(t,n);return JB(t,s,r),r}function JB(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=yn(n,l.path);let d=!1,h;if(K(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=BB)d=!0,h="maxretry",s=s.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0));else{const f=VN(t,l.path,o);l.currentInputSnapshot=f;const g=e[a].update(f.val());if(g!==void 0){MN("transaction failed: Data returned ",g,l.path);let w=$t(g);typeof g=="object"&&g!=null&&Us(g,".priority")||(w=w.updatePriority(f.getPriority()));const E=l.currentWriteId,x=FN(t),v=RB(w,f,x);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=v,l.currentWriteId=KB(t),o.splice(o.indexOf(E),1),s=s.concat(pB(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),s=s.concat(Wa(t.serverSyncTree_,E,!0))}else d=!0,h="nodata",s=s.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0))}oo(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}km(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Fd(r[a]);P0(t,t.transactionQueueTree_)}function jN(t,e){let n,r=t.transactionQueueTree_;for(n=De(e);n!==null&&sc(r)===void 0;)r=k0(r,n),e=Ye(e),n=De(e);return r}function UN(t,e){const n=[];return $N(t,e,n),n.sort((r,s)=>r.order-s.order),n}function $N(t,e,n){const r=sc(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);bm(e,s=>{$N(t,s,n)})}function km(t,e){const n=sc(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,AN(e,n.length>0?n:void 0)}bm(e,r=>{km(t,r)})}function eW(t,e){const n=$d(jN(t,e)),r=k0(t.transactionQueueTree_,e);return PB(r,s=>{ey(t,s)}),ey(t,r),NN(r,s=>{ey(t,s)}),n}function ey(t,e){const n=sc(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Wa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?AN(e,void 0):n.length=i+1,oo(t.eventQueue_,$d(e),s);for(let o=0;o<r.length;o++)Fd(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function nW(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zn(`Invalid query segment '${n}' in query '${t}'`)}return e}const NI=function(t,e){const n=rW(t),r=n.namespace;n.domain==="firebase.com"&&Fs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Fs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||f$();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new zP(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Qe(n.pathString)}},rW=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=tW(t.substring(d,h)));const f=nW(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+It(this.snapshot.exportVal())}}class iW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Re(this._path)?null:XP(this._path)}get ref(){return new zs(this._repo,this._path)}get _queryIdentifier(){const e=yI(this._queryParams),n=a0(e);return n==="{}"?"default":n}get _queryObject(){return yI(this._queryParams)}isEqual(e){if(e=Mt(e),!(e instanceof O0))return!1;const n=this._repo===e._repo,r=eN(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Y$(this._path)}}class zs extends O0{constructor(e,n){super(e,n,new p0,!1)}get parent(){const e=JP(this._path);return e===null?null:new zs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ad{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Qe(e),r=Xv(this.ref,e);return new ad(this._node.getChild(n),r,pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ad(s,Xv(this.ref,r),pt)))}hasChild(e){const n=new Qe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ld(t,e){return t=Mt(t),t._checkNotDeleted("ref"),e!==void 0?Xv(t._root,e):t._root}function Xv(t,e){return t=Mt(t),De(t._path)===null?LB("child","path",e):LN("child","path",e),new zs(t._repo,St(t._path,e))}function cd(t){t=Mt(t);const e=new oW(()=>{}),n=new D0(e);return QB(t._repo,t,n).then(r=>new ad(r,new zs(t._repo,t._path),t._queryParams.getIndex()))}class D0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new sW("value",this,new ad(e.snapshotNode,new zs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new iW(this,e,n):null}matches(e){return e instanceof D0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}oB(zs);dB(zs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW="FIREBASE_DATABASE_EMULATOR_HOST",Zv={};let lW=!1;function cW(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=eo(i);t.repoInfo_=new zP(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function uW(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Fs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=NI(i,s),a=o.repoInfo,l;typeof process<"u"&&JC&&(l=JC[aW]),l?(i=`http://${l}?ns=${a.namespace}`,o=NI(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new C$(t.name,t.options,e);FB("Invalid Firebase Database URL",o),Re(o.path)||Fs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=hW(a,t,c,new T$(t,n));return new fW(d,t)}function dW(t,e){const n=Zv[e];(!n||n[t.key]!==t)&&Fs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),XB(t),delete n[t.key]}function hW(t,e,n,r){let s=Zv[e.name];s||(s={},Zv[e.name]=s);let i=s[t.toURLString()];return i&&Fs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new WB(t,lW,n,r),s[t.toURLString()]=i,i}class fW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(HB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,to("Database",this._repo.repoInfo_.emulatorOptions!==null)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zs(this._repo,ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Fs("Cannot call "+e+" on a deleted database.")}}function pW(t=Ad(),e){const n=$s(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Hw("database");r&&mW(n,...r)}return n}function mW(t,e,n,r={}){t=Mt(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Ds(r,i.repoInfo_.emulatorOptions))return;Fs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new hf(hf.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:Gw(r.mockUserToken,t.app.options.projectId);o=new hf(a)}eo(e)&&(ym(e),to("Database",!0)),cW(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(t){a$(no),rr(new qn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return uW(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),sn(eI,tI,t),sn(eI,tI,"esm2017")}Is.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Is.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};gW();var OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,zN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.D=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(k,O,P){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return T.prototype[O].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,b){b||(b=0);var k=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)k[O]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(O=0;16>O;++O)k[O]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],O=S.g[2];var P=S.g[3],R=T+(P^b&(O^P))+k[0]+3614090360&4294967295;T=b+(R<<7&4294967295|R>>>25),R=P+(O^T&(b^O))+k[1]+3905402710&4294967295,P=T+(R<<12&4294967295|R>>>20),R=O+(b^P&(T^b))+k[2]+606105819&4294967295,O=P+(R<<17&4294967295|R>>>15),R=b+(T^O&(P^T))+k[3]+3250441966&4294967295,b=O+(R<<22&4294967295|R>>>10),R=T+(P^b&(O^P))+k[4]+4118548399&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(O^T&(b^O))+k[5]+1200080426&4294967295,P=T+(R<<12&4294967295|R>>>20),R=O+(b^P&(T^b))+k[6]+2821735955&4294967295,O=P+(R<<17&4294967295|R>>>15),R=b+(T^O&(P^T))+k[7]+4249261313&4294967295,b=O+(R<<22&4294967295|R>>>10),R=T+(P^b&(O^P))+k[8]+1770035416&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(O^T&(b^O))+k[9]+2336552879&4294967295,P=T+(R<<12&4294967295|R>>>20),R=O+(b^P&(T^b))+k[10]+4294925233&4294967295,O=P+(R<<17&4294967295|R>>>15),R=b+(T^O&(P^T))+k[11]+2304563134&4294967295,b=O+(R<<22&4294967295|R>>>10),R=T+(P^b&(O^P))+k[12]+1804603682&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(O^T&(b^O))+k[13]+4254626195&4294967295,P=T+(R<<12&4294967295|R>>>20),R=O+(b^P&(T^b))+k[14]+2792965006&4294967295,O=P+(R<<17&4294967295|R>>>15),R=b+(T^O&(P^T))+k[15]+1236535329&4294967295,b=O+(R<<22&4294967295|R>>>10),R=T+(O^P&(b^O))+k[1]+4129170786&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^O&(T^b))+k[6]+3225465664&4294967295,P=T+(R<<9&4294967295|R>>>23),R=O+(T^b&(P^T))+k[11]+643717713&4294967295,O=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(O^P))+k[0]+3921069994&4294967295,b=O+(R<<20&4294967295|R>>>12),R=T+(O^P&(b^O))+k[5]+3593408605&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^O&(T^b))+k[10]+38016083&4294967295,P=T+(R<<9&4294967295|R>>>23),R=O+(T^b&(P^T))+k[15]+3634488961&4294967295,O=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(O^P))+k[4]+3889429448&4294967295,b=O+(R<<20&4294967295|R>>>12),R=T+(O^P&(b^O))+k[9]+568446438&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^O&(T^b))+k[14]+3275163606&4294967295,P=T+(R<<9&4294967295|R>>>23),R=O+(T^b&(P^T))+k[3]+4107603335&4294967295,O=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(O^P))+k[8]+1163531501&4294967295,b=O+(R<<20&4294967295|R>>>12),R=T+(O^P&(b^O))+k[13]+2850285829&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^O&(T^b))+k[2]+4243563512&4294967295,P=T+(R<<9&4294967295|R>>>23),R=O+(T^b&(P^T))+k[7]+1735328473&4294967295,O=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(O^P))+k[12]+2368359562&4294967295,b=O+(R<<20&4294967295|R>>>12),R=T+(b^O^P)+k[5]+4294588738&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^O)+k[8]+2272392833&4294967295,P=T+(R<<11&4294967295|R>>>21),R=O+(P^T^b)+k[11]+1839030562&4294967295,O=P+(R<<16&4294967295|R>>>16),R=b+(O^P^T)+k[14]+4259657740&4294967295,b=O+(R<<23&4294967295|R>>>9),R=T+(b^O^P)+k[1]+2763975236&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^O)+k[4]+1272893353&4294967295,P=T+(R<<11&4294967295|R>>>21),R=O+(P^T^b)+k[7]+4139469664&4294967295,O=P+(R<<16&4294967295|R>>>16),R=b+(O^P^T)+k[10]+3200236656&4294967295,b=O+(R<<23&4294967295|R>>>9),R=T+(b^O^P)+k[13]+681279174&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^O)+k[0]+3936430074&4294967295,P=T+(R<<11&4294967295|R>>>21),R=O+(P^T^b)+k[3]+3572445317&4294967295,O=P+(R<<16&4294967295|R>>>16),R=b+(O^P^T)+k[6]+76029189&4294967295,b=O+(R<<23&4294967295|R>>>9),R=T+(b^O^P)+k[9]+3654602809&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^O)+k[12]+3873151461&4294967295,P=T+(R<<11&4294967295|R>>>21),R=O+(P^T^b)+k[15]+530742520&4294967295,O=P+(R<<16&4294967295|R>>>16),R=b+(O^P^T)+k[2]+3299628645&4294967295,b=O+(R<<23&4294967295|R>>>9),R=T+(O^(b|~P))+k[0]+4096336452&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~O))+k[7]+1126891415&4294967295,P=T+(R<<10&4294967295|R>>>22),R=O+(T^(P|~b))+k[14]+2878612391&4294967295,O=P+(R<<15&4294967295|R>>>17),R=b+(P^(O|~T))+k[5]+4237533241&4294967295,b=O+(R<<21&4294967295|R>>>11),R=T+(O^(b|~P))+k[12]+1700485571&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~O))+k[3]+2399980690&4294967295,P=T+(R<<10&4294967295|R>>>22),R=O+(T^(P|~b))+k[10]+4293915773&4294967295,O=P+(R<<15&4294967295|R>>>17),R=b+(P^(O|~T))+k[1]+2240044497&4294967295,b=O+(R<<21&4294967295|R>>>11),R=T+(O^(b|~P))+k[8]+1873313359&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~O))+k[15]+4264355552&4294967295,P=T+(R<<10&4294967295|R>>>22),R=O+(T^(P|~b))+k[6]+2734768916&4294967295,O=P+(R<<15&4294967295|R>>>17),R=b+(P^(O|~T))+k[13]+1309151649&4294967295,b=O+(R<<21&4294967295|R>>>11),R=T+(O^(b|~P))+k[4]+4149444226&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~O))+k[11]+3174756917&4294967295,P=T+(R<<10&4294967295|R>>>22),R=O+(T^(P|~b))+k[2]+718787259&4294967295,O=P+(R<<15&4294967295|R>>>17),R=b+(P^(O|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var b=T-this.blockSize,k=this.B,O=this.h,P=0;P<T;){if(O==0)for(;P<=b;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<T;)if(k[O++]=S.charCodeAt(P++),O==this.blockSize){s(this,k),O=0;break}}else for(;P<T;)if(k[O++]=S[P++],O==this.blockSize){s(this,k),O=0;break}}this.h=O,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var b=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=b&255,b/=256;for(this.u(S),S=Array(16),T=b=0;4>T;++T)for(var k=0;32>k;k+=8)S[b++]=this.g[T]>>>k&255;return S};function i(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;for(var b=[],k=!0,O=S.length-1;0<=O;O--){var P=S[O]|0;k&&P==T||(b[O]=P,k=!1)}this.g=b}var a={};function l(S){return-128<=S&&128>S?i(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return E(c(-S));for(var T=[],b=1,k=0;S>=b;k++)T[k]=S/b|0,b*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),k=h,O=0;O<S.length;O+=8){var P=Math.min(8,S.length-O),R=parseInt(S.substring(O,O+P),T);8>P?(P=c(Math.pow(T,P)),k=k.j(P).add(c(R))):(k=k.j(b),k=k.add(c(R)))}return k}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-E(this).m();for(var S=0,T=1,b=0;b<this.g.length;b++){var k=this.i(b);S+=(0<=k?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(_(this))return"-"+E(this).toString(S);for(var T=c(Math.pow(S,6)),b=this,k="";;){var O=N(b,T).g;b=x(b,O.j(T));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=O,w(b))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=x(this,S),_(S)?-1:w(S)?0:1};function E(S){for(var T=S.g.length,b=[],k=0;k<T;k++)b[k]=~S.g[k];return new o(b,~S.h).add(f)}t.abs=function(){return _(this)?E(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],k=0,O=0;O<=T;O++){var P=k+(this.i(O)&65535)+(S.i(O)&65535),R=(P>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);k=R>>>16,P&=65535,R&=65535,b[O]=R<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function x(S,T){return S.add(E(T))}t.j=function(S){if(w(this)||w(S))return h;if(_(this))return _(S)?E(this).j(E(S)):E(E(this).j(S));if(_(S))return E(this.j(E(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,b=[],k=0;k<2*T;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<S.g.length;O++){var P=this.i(k)>>>16,R=this.i(k)&65535,W=S.i(O)>>>16,ue=S.i(O)&65535;b[2*k+2*O]+=R*ue,v(b,2*k+2*O),b[2*k+2*O+1]+=P*ue,v(b,2*k+2*O+1),b[2*k+2*O+1]+=R*W,v(b,2*k+2*O+1),b[2*k+2*O+2]+=P*W,v(b,2*k+2*O+2)}for(k=0;k<T;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=T;k<2*T;k++)b[k]=0;return new o(b,0)};function v(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function C(S,T){this.g=S,this.h=T}function N(S,T){if(w(T))throw Error("division by zero");if(w(S))return new C(h,h);if(_(S))return T=N(E(S),T),new C(E(T.g),E(T.h));if(_(T))return T=N(S,E(T)),new C(E(T.g),T.h);if(30<S.g.length){if(_(S)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var b=f,k=T;0>=k.l(S);)b=M(b),k=M(k);var O=F(b,1),P=F(k,1);for(k=F(k,2),b=F(b,2);!w(k);){var R=P.add(k);0>=R.l(S)&&(O=O.add(b),P=R),k=F(k,1),b=F(b,1)}return T=x(S,O.j(T)),new C(O,T)}for(O=h;0<=S.l(T);){for(b=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=c(b),R=P.j(T);_(R)||0<R.l(S);)b-=k,P=c(b),R=P.j(T);w(P)&&(P=f),O=O.add(P),S=x(S,R)}return new C(O,S)}t.A=function(S){return N(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],k=0;k<T;k++)b[k]=this.i(k)&S.i(k);return new o(b,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],k=0;k<T;k++)b[k]=this.i(k)|S.i(k);return new o(b,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],k=0;k<T;k++)b[k]=this.i(k)^S.i(k);return new o(b,this.h^S.h)};function M(S){for(var T=S.g.length+1,b=[],k=0;k<T;k++)b[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(b,S.h)}function F(S,T){var b=T>>5;T%=32;for(var k=S.g.length-b,O=[],P=0;P<k;P++)O[P]=0<T?S.i(P+b)>>>T|S.i(P+b+1)<<32-T:S.i(P+b);return new o(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Oi=o}).apply(typeof OI<"u"?OI:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BN,Zc,WN,pf,Jv,HN,qN,GN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var y=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var V=u[I];if(!(V in y))break e;y=y[V]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var y=0,I=!1,V={next:function(){if(!I&&y<u.length){var U=y++;return{value:p(U,u[U]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,y){return u.call.apply(u.bind,arguments)}function h(u,p,y){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function f(u,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function w(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(I,V,U){for(var Q=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Q[Ke-2]=arguments[Ke];return p.prototype[V].apply(I,Q)}}function _(u){const p=u.length;if(0<p){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function E(u,p){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(l(I)){const V=u.length||0,U=I.length||0;u.length=V+U;for(let Q=0;Q<U;Q++)u[V+Q]=I[Q]}else u.push(I)}}class x{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function F(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function S(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function T(u){const p={};for(const y in u)p[y]=u[y];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let y,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(y in I)u[y]=I[y];for(let U=0;U<b.length;U++)y=b[U],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function O(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function P(u){a.setTimeout(()=>{throw u},0)}function R(){var u=Y;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,y){const I=ue.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new x(()=>new ce,u=>u.reset());class ce{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let me,z=!1,Y=new W,oe=()=>{const u=a.Promise.resolve(void 0);me=()=>{u.then(we)}};var we=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){P(y)}var p=ue;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}z=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return u}();function En(u,p){if(Be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{N(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:On[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&En.aa.h.call(this)}}w(En,Be);var On={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),ao=0;function Bs(u,p,y,I,V){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=V,this.key=++ao,this.da=this.fa=!1}function Pr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function as(u){this.src=u,this.g={},this.h=0}as.prototype.add=function(u,p,y,I,V){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var Q=ar(u,p,I,V);return-1<Q?(p=u[Q],y||(p.fa=!1)):(p=new Bs(p,this.src,U,!!I,V),p.fa=y,u.push(p)),p};function ls(u,p){var y=p.type;if(y in u.g){var I=u.g[y],V=Array.prototype.indexOf.call(I,p,void 0),U;(U=0<=V)&&Array.prototype.splice.call(I,V,1),U&&(Pr(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function ar(u,p,y,I){for(var V=0;V<u.length;++V){var U=u[V];if(!U.da&&U.listener==p&&U.capture==!!y&&U.ha==I)return V}return-1}var cs="closure_lm_"+(1e6*Math.random()|0),Ws={};function fa(u,p,y,I,V){if(Array.isArray(p)){for(var U=0;U<p.length;U++)fa(u,p[U],y,I,V);return null}return y=G(y),u&&u[Gt]?u.K(p,y,c(I)?!!I.capture:!!I,V):cc(u,p,y,!1,I,V)}function cc(u,p,y,I,V,U){if(!p)throw Error("Invalid event type");var Q=c(V)?!!V.capture:!!V,Ke=ee(u);if(Ke||(u[cs]=Ke=new as(u)),y=Ke.add(p,y,I,Q,U),y.proxy)return y;if(I=Kd(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)qt||(V=Q),V===void 0&&(V=!1),u.addEventListener(p.toString(),I,V);else if(u.attachEvent)u.attachEvent(j(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Kd(){function u(y){return p.call(u.src,u.listener,y)}const p=$;return u}function Nr(u,p,y,I,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)Nr(u,p[U],y,I,V);else I=c(I)?!!I.capture:!!I,y=G(y),u&&u[Gt]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],y=ar(U,y,I,V),-1<y&&(Pr(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=ee(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ar(p,y,I,V)),(y=-1<u?p[u]:null)&&D(y))}function D(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Gt])ls(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent(j(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=ee(p))?(ls(y,u),y.h==0&&(y.src=null,p[cs]=null)):Pr(u)}}}function j(u){return u in Ws?Ws[u]:Ws[u]="on"+u}function $(u,p){if(u.da)u=!0;else{p=new En(p,this);var y=u.listener,I=u.ha||u.src;u.fa&&D(u),u=y.call(I,p)}return u}function ee(u){return u=u[cs],u instanceof as?u:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(u){return typeof u=="function"?u:(u[X]||(u[X]=function(p){return u.handleEvent(p)}),u[X])}function te(){Pe.call(this),this.i=new as(this),this.M=this,this.F=null}w(te,Pe),te.prototype[Gt]=!0,te.prototype.removeEventListener=function(u,p,y,I){Nr(this,u,p,y,I)};function ye(u,p){var y,I=u.F;if(I)for(y=[];I;I=I.F)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Be(p,u);else if(p instanceof Be)p.target=p.target||u;else{var V=p;p=new Be(I,u),k(p,V)}if(V=!0,y)for(var U=y.length-1;0<=U;U--){var Q=p.g=y[U];V=We(Q,I,!0,p)&&V}if(Q=p.g=u,V=We(Q,I,!0,p)&&V,V=We(Q,I,!1,p)&&V,y)for(U=0;U<y.length;U++)Q=p.g=y[U],V=We(Q,I,!1,p)&&V}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],I=0;I<y.length;I++)Pr(y[I]);delete u.g[p],u.h--}}this.F=null},te.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},te.prototype.L=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function We(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,U=0;U<p.length;++U){var Q=p[U];if(Q&&!Q.da&&Q.capture==y){var Ke=Q.listener,Lt=Q.ha||Q.src;Q.fa&&ls(u.i,Q),V=Ke.call(Lt,I)!==!1&&V}}return V&&!I.defaultPrevented}function ln(u,p,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function lo(u){u.g=ln(()=>{u.g=null,u.i&&(u.i=!1,lo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Or extends Pe{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:lo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function co(u){Pe.call(this),this.h=u,this.g={}}w(co,Pe);var pa=[];function ma(u){F(u.g,function(p,y){this.g.hasOwnProperty(y)&&D(p)},u),u.g={}}co.prototype.N=function(){co.aa.N.call(this),ma(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uc=a.JSON.stringify,Qd=a.JSON.parse,zm=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ga(){}ga.prototype.h=null;function hE(u){return u.h||(u.h=u.i())}function fE(){}var dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bm(){Be.call(this,"d")}w(Bm,Be);function Wm(){Be.call(this,"c")}w(Wm,Be);var uo={},pE=null;function Yd(){return pE=pE||new te}uo.La="serverreachability";function mE(u){Be.call(this,uo.La,u)}w(mE,Be);function hc(u){const p=Yd();ye(p,new mE(p))}uo.STAT_EVENT="statevent";function gE(u,p){Be.call(this,uo.STAT_EVENT,u),this.stat=p}w(gE,Be);function cn(u){const p=Yd();ye(p,new gE(p,u))}uo.Ma="timingevent";function yE(u,p){Be.call(this,uo.Ma,u),this.size=p}w(yE,Be);function fc(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function pc(){this.g=!0}pc.prototype.xa=function(){this.g=!1};function jD(u,p,y,I,V,U){u.info(function(){if(u.g)if(U)for(var Q="",Ke=U.split("&"),Lt=0;Lt<Ke.length;Lt++){var Ue=Ke[Lt].split("=");if(1<Ue.length){var Kt=Ue[0];Ue=Ue[1];var Qt=Kt.split("_");Q=2<=Qt.length&&Qt[1]=="type"?Q+(Kt+"="+Ue+"&"):Q+(Kt+"=redacted&")}}else Q=null;else Q=U;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+p+`
`+y+`
`+Q})}function UD(u,p,y,I,V,U,Q){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+p+`
`+y+`
`+U+" "+Q})}function ya(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+zD(u,y)+(I?" "+I:"")})}function $D(u,p){u.info(function(){return"TIMEOUT: "+p})}pc.prototype.info=function(){};function zD(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var I=y[u];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Q=1;Q<V.length;Q++)V[Q]=""}}}}return uc(y)}catch{return p}}var Xd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hm;function Zd(){}w(Zd,ga),Zd.prototype.g=function(){return new XMLHttpRequest},Zd.prototype.i=function(){return{}},Hm=new Zd;function Hs(u,p,y,I){this.j=u,this.i=p,this.l=y,this.R=I||1,this.U=new co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _E}function _E(){this.i=null,this.g="",this.h=!1}var wE={},qm={};function Gm(u,p,y){u.L=1,u.v=nh(us(p)),u.m=y,u.P=!0,EE(u,null)}function EE(u,p){u.F=Date.now(),Jd(u),u.A=us(u.v);var y=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),ME(y.i,"t",I),u.C=0,y=u.j.J,u.h=new _E,u.g=JE(u.j,y?p:null,!u.m),0<u.O&&(u.M=new Or(f(u.Y,u,u.g),u.O)),p=u.U,y=u.g,I=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(pa[0]=V.toString()),V=pa);for(var U=0;U<V.length;U++){var Q=fa(y,V[U],I||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),hc(),jD(u.i,u.u,u.A,u.l,u.R,u.m)}Hs.prototype.ca=function(u){u=u.target;const p=this.M;p&&ds(u)==3?p.j():this.Y(u)},Hs.prototype.Y=function(u){try{if(u==this.g)e:{const Qt=ds(this.g);var p=this.g.Ba();const wa=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||zE(this.g)))){this.J||Qt!=4||p==7||(p==8||0>=wa?hc(3):hc(2)),Km(this);var y=this.g.Z();this.X=y;t:if(xE(this)){var I=zE(this.g);u="";var V=I.length,U=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ho(this),mc(this);var Q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(U&&p==V-1)});I.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=y==200,UD(this.i,this.u,this.A,this.l,this.R,Qt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Lt=this.g;if((Ke=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ke)){var Ue=Ke;break t}}Ue=null}if(y=Ue)ya(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qm(this,y);else{this.o=!1,this.s=3,cn(12),ho(this),mc(this);break e}}if(this.P){y=!0;let lr;for(;!this.J&&this.C<Q.length;)if(lr=BD(this,Q),lr==qm){Qt==4&&(this.s=4,cn(14),y=!1),ya(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==wE){this.s=4,cn(15),ya(this.i,this.l,Q,"[Invalid Chunk]"),y=!1;break}else ya(this.i,this.l,lr,null),Qm(this,lr);if(xE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||Q.length!=0||this.h.h||(this.s=1,cn(16),y=!1),this.o=this.o&&y,!y)ya(this.i,this.l,Q,"[Invalid Chunked Response]"),ho(this),mc(this);else if(0<Q.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),tg(Kt),Kt.M=!0,cn(11))}}else ya(this.i,this.l,Q,null),Qm(this,Q);Qt==4&&ho(this),this.o&&!this.J&&(Qt==4?QE(this.j,this):(this.o=!1,Jd(this)))}else oM(this.g),y==400&&0<Q.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),ho(this),mc(this)}}}catch{}finally{}};function xE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function BD(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?qm:(y=Number(p.substring(y,I)),isNaN(y)?wE:(I+=1,I+y>p.length?qm:(p=p.slice(I,I+y),u.C=I+y,p)))}Hs.prototype.cancel=function(){this.J=!0,ho(this)};function Jd(u){u.S=Date.now()+u.I,TE(u,u.I)}function TE(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=fc(f(u.ba,u),p)}function Km(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hs.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($D(this.i,this.A),this.L!=2&&(hc(),cn(17)),ho(this),this.s=2,mc(this)):TE(this,this.S-u)};function mc(u){u.j.G==0||u.J||QE(u.j,u)}function ho(u){Km(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ma(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Qm(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Ym(y.h,u))){if(!u.K&&Ym(y.h,u)&&y.G==3){try{var I=y.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)lh(y),oh(y);else break e;eg(y),cn(18)}}else y.za=V[1],0<y.za-y.T&&37500>V[2]&&y.F&&y.v==0&&!y.C&&(y.C=fc(f(y.Za,y),6e3));if(1>=SE(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else po(y,11)}else if((u.K||y.g==u)&&lh(y),!v(p))for(V=y.Da.g.parse(p),p=0;p<V.length;p++){let Ue=V[p];if(y.T=Ue[0],Ue=Ue[1],y.G==2)if(Ue[0]=="c"){y.K=Ue[1],y.ia=Ue[2];const Kt=Ue[3];Kt!=null&&(y.la=Kt,y.j.info("VER="+y.la));const Qt=Ue[4];Qt!=null&&(y.Aa=Qt,y.j.info("SVER="+y.Aa));const wa=Ue[5];wa!=null&&typeof wa=="number"&&0<wa&&(I=1.5*wa,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const lr=u.g;if(lr){const uh=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uh){var U=I.h;U.g||uh.indexOf("spdy")==-1&&uh.indexOf("quic")==-1&&uh.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Xm(U,U.h),U.h=null))}if(I.D){const ng=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;ng&&(I.ya=ng,Ze(I.I,I.D,ng))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Q=u;if(I.qa=ZE(I,I.J?I.ia:null,I.W),Q.K){bE(I.h,Q);var Ke=Q,Lt=I.L;Lt&&(Ke.I=Lt),Ke.B&&(Km(Ke),Jd(Ke)),I.g=Q}else GE(I);0<y.i.length&&ah(y)}else Ue[0]!="stop"&&Ue[0]!="close"||po(y,7);else y.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?po(y,7):Jm(y):Ue[0]!="noop"&&y.l&&y.l.ta(Ue),y.v=0)}}hc(4)}catch{}}var WD=class{constructor(u,p){this.g=u,this.map=p}};function CE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function IE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function SE(u){return u.h?1:u.g?u.g.size:0}function Ym(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Xm(u,p){u.g?u.g.add(p):u.h=p}function bE(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}CE.prototype.cancel=function(){if(this.i=kE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return _(u.i)}function HD(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],y=u.length,I=0;I<y;I++)p.push(u[I]);return p}p=[],y=0;for(I in u)p[y++]=u[I];return p}function qD(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const I in u)p[y++]=I;return p}}}function RE(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=qD(u),I=HD(u),V=I.length,U=0;U<V;U++)p.call(void 0,I[U],y&&y[U],u)}var AE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GD(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var I=u[y].indexOf("="),V=null;if(0<=I){var U=u[y].substring(0,I);V=u[y].substring(I+1)}else U=u[y];p(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function fo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fo){this.h=u.h,eh(this,u.j),this.o=u.o,this.g=u.g,th(this,u.s),this.l=u.l;var p=u.i,y=new vc;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),PE(this,y),this.m=u.m}else u&&(p=String(u).match(AE))?(this.h=!1,eh(this,p[1]||"",!0),this.o=gc(p[2]||""),this.g=gc(p[3]||"",!0),th(this,p[4]),this.l=gc(p[5]||"",!0),PE(this,p[6]||"",!0),this.m=gc(p[7]||"")):(this.h=!1,this.i=new vc(null,this.h))}fo.prototype.toString=function(){var u=[],p=this.j;p&&u.push(yc(p,NE,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(yc(p,NE,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(yc(y,y.charAt(0)=="/"?YD:QD,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",yc(y,ZD)),u.join("")};function us(u){return new fo(u)}function eh(u,p,y){u.j=y?gc(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function th(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function PE(u,p,y){p instanceof vc?(u.i=p,JD(u.i,u.h)):(y||(p=yc(p,XD)),u.i=new vc(p,u.h))}function Ze(u,p,y){u.i.set(p,y)}function nh(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function gc(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yc(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,KD),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function KD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var NE=/[#\/\?@]/g,QD=/[#\?:]/g,YD=/[#\?]/g,XD=/[#\?@]/g,ZD=/#/g;function vc(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function qs(u){u.g||(u.g=new Map,u.h=0,u.i&&GD(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=vc.prototype,t.add=function(u,p){qs(this),this.i=null,u=va(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function OE(u,p){qs(u),p=va(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function DE(u,p){return qs(u),p=va(u,p),u.g.has(p)}t.forEach=function(u,p){qs(this),this.g.forEach(function(y,I){y.forEach(function(V){u.call(p,V,I,this)},this)},this)},t.na=function(){qs(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let I=0;I<p.length;I++){const V=u[I];for(let U=0;U<V.length;U++)y.push(p[I])}return y},t.V=function(u){qs(this);let p=[];if(typeof u=="string")DE(this,u)&&(p=p.concat(this.g.get(va(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},t.set=function(u,p){return qs(this),this.i=null,u=va(this,u),DE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ME(u,p,y){OE(u,p),0<y.length&&(u.i=null,u.g.set(va(u,p),_(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var I=p[y];const U=encodeURIComponent(String(I)),Q=this.V(I);for(I=0;I<Q.length;I++){var V=U;Q[I]!==""&&(V+="="+encodeURIComponent(String(Q[I]))),u.push(V)}}return this.i=u.join("&")};function va(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function JD(u,p){p&&!u.j&&(qs(u),u.i=null,u.g.forEach(function(y,I){var V=I.toLowerCase();I!=V&&(OE(this,I),ME(this,V,y))},u)),u.j=p}function eM(u,p){const y=new pc;if(a.Image){const I=new Image;I.onload=g(Gs,y,"TestLoadImage: loaded",!0,p,I),I.onerror=g(Gs,y,"TestLoadImage: error",!1,p,I),I.onabort=g(Gs,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(Gs,y,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function tM(u,p){const y=new pc,I=new AbortController,V=setTimeout(()=>{I.abort(),Gs(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(U=>{clearTimeout(V),U.ok?Gs(y,"TestPingServer: ok",!0,p):Gs(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Gs(y,"TestPingServer: error",!1,p)})}function Gs(u,p,y,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(y)}catch{}}function nM(){this.g=new zm}function rM(u,p,y){const I=y||"";try{RE(u,function(V,U){let Q=V;c(V)&&(Q=uc(V)),p.push(I+U+"="+encodeURIComponent(Q))})}catch(V){throw p.push(I+"type="+encodeURIComponent("_badmap")),V}}function rh(u){this.l=u.Ub||null,this.j=u.eb||!1}w(rh,ga),rh.prototype.g=function(){return new sh(this.l,this.j)},rh.prototype.i=function(u){return function(){return u}}({});function sh(u,p){te.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(sh,te),t=sh.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,wc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_c(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wc(this)),this.g&&(this.readyState=3,wc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function LE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?_c(this):wc(this),this.readyState==3&&LE(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,_c(this))},t.Qa=function(u){this.g&&(this.response=u,_c(this))},t.ga=function(){this.g&&_c(this)};function _c(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wc(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function wc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function FE(u){let p="";return F(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function Zm(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=FE(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ze(u,p,y))}function ct(u){te.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ct,te);var sM=/^https?$/i,iM=["POST","PUT"];t=ct.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hm.g(),this.v=this.o?hE(this.o):hE(Hm),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){VE(this,U);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)y.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())y.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iM,p,void 0))||I||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Q]of y)this.g.setRequestHeader(U,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$E(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){VE(this,U)}};function VE(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,jE(u),ih(u)}function jE(u){u.A||(u.A=!0,ye(u,"complete"),ye(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ye(this,"complete"),ye(this,"abort"),ih(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ih(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?UE(this):this.bb())},t.bb=function(){UE(this)};function UE(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ds(u)!=4||u.Z()!=2)){if(u.u&&ds(u)==4)ln(u.Ea,0,u);else if(ye(u,"readystatechange"),ds(u)==4){u.h=!1;try{const Q=u.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=Q===0){var V=String(u.D).match(AE)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!sM.test(V?V.toLowerCase():"")}y=I}if(y)ye(u,"complete"),ye(u,"success");else{u.m=6;try{var U=2<ds(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",jE(u)}}finally{ih(u)}}}}function ih(u,p){if(u.g){$E(u);const y=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ye(u,"ready");try{y.onreadystatechange=I}catch{}}}function $E(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ds(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Qd(p)}};function zE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oM(u){const p={};u=(u.g&&2<=ds(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(v(u[I]))continue;var y=O(u[I]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=p[V]||[];p[V]=U,U.push(y)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ec(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function BE(u){this.Aa=0,this.i=[],this.j=new pc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ec("baseRetryDelayMs",5e3,u),this.cb=Ec("retryDelaySeedMs",1e4,u),this.Wa=Ec("forwardChannelMaxRetries",2,u),this.wa=Ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new CE(u&&u.concurrentRequestLimit),this.Da=new nM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=BE.prototype,t.la=8,t.G=1,t.connect=function(u,p,y,I){cn(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=ZE(this,null,this.W),ah(this)};function Jm(u){if(WE(u),u.G==3){var p=u.U++,y=us(u.I);if(Ze(y,"SID",u.K),Ze(y,"RID",p),Ze(y,"TYPE","terminate"),xc(u,y),p=new Hs(u,u.j,p),p.L=2,p.v=nh(us(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=JE(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Jd(p)}XE(u)}function oh(u){u.g&&(tg(u),u.g.cancel(),u.g=null)}function WE(u){oh(u),u.u&&(a.clearTimeout(u.u),u.u=null),lh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ah(u){if(!IE(u.h)&&!u.s){u.s=!0;var p=u.Ga;me||oe(),z||(me(),z=!0),Y.add(p,u),u.B=0}}function aM(u,p){return SE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=fc(f(u.Ga,u,p),YE(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Hs(this,this.j,u);let U=this.o;if(this.S&&(U?(U=T(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=qE(this,V,p),y=us(this.I),Ze(y,"RID",u),Ze(y,"CVER",22),this.D&&Ze(y,"X-HTTP-Session-Id",this.D),xc(this,y),U&&(this.O?p="headers="+encodeURIComponent(String(FE(U)))+"&"+p:this.m&&Zm(y,this.m,U)),Xm(this.h,V),this.Ua&&Ze(y,"TYPE","init"),this.P?(Ze(y,"$req",p),Ze(y,"SID","null"),V.T=!0,Gm(V,y,null)):Gm(V,y,p),this.G=2}}else this.G==3&&(u?HE(this,u):this.i.length==0||IE(this.h)||HE(this))};function HE(u,p){var y;p?y=p.l:y=u.U++;const I=us(u.I);Ze(I,"SID",u.K),Ze(I,"RID",y),Ze(I,"AID",u.T),xc(u,I),u.m&&u.o&&Zm(I,u.m,u.o),y=new Hs(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=qE(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xm(u.h,y),Gm(y,I,p)}function xc(u,p){u.H&&F(u.H,function(y,I){Ze(p,I,y)}),u.l&&RE({},function(y,I){Ze(p,I,y)})}function qE(u,p,y){y=Math.min(u.i.length,y);var I=u.l?f(u.l.Na,u.l,u):null;e:{var V=u.i;let U=-1;for(;;){const Q=["count="+y];U==-1?0<y?(U=V[0].g,Q.push("ofs="+U)):U=0:Q.push("ofs="+U);let Ke=!0;for(let Lt=0;Lt<y;Lt++){let Ue=V[Lt].g;const Kt=V[Lt].map;if(Ue-=U,0>Ue)U=Math.max(0,V[Lt].g-100),Ke=!1;else try{rM(Kt,Q,"req"+Ue+"_")}catch{I&&I(Kt)}}if(Ke){I=Q.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,I}function GE(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;me||oe(),z||(me(),z=!0),Y.add(p,u),u.v=0}}function eg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=fc(f(u.Fa,u),YE(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,KE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=fc(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),oh(this),KE(this))};function tg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function KE(u){u.g=new Hs(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=us(u.qa);Ze(p,"RID","rpc"),Ze(p,"SID",u.K),Ze(p,"AID",u.T),Ze(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(p,"TO",u.ja),Ze(p,"TYPE","xmlhttp"),xc(u,p),u.m&&u.o&&Zm(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=nh(us(p)),y.m=null,y.P=!0,EE(y,u)}t.Za=function(){this.C!=null&&(this.C=null,oh(this),eg(this),cn(19))};function lh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function QE(u,p){var y=null;if(u.g==p){lh(u),tg(u),u.g=null;var I=2}else if(Ym(u.h,p))y=p.D,bE(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;I=Yd(),ye(I,new yE(I,y)),ah(u)}else GE(u);else if(V=p.s,V==3||V==0&&0<p.X||!(I==1&&aM(u,p)||I==2&&eg(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),V){case 1:po(u,5);break;case 4:po(u,10);break;case 3:po(u,6);break;default:po(u,2)}}}function YE(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function po(u,p){if(u.j.info("Error code "+p),p==2){var y=f(u.fb,u),I=u.Xa;const V=!I;I=new fo(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||eh(I,"https"),nh(I),V?eM(I.toString(),y):tM(I.toString(),y)}else cn(2);u.G=0,u.l&&u.l.sa(p),XE(u),WE(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function XE(u){if(u.G=0,u.ka=[],u.l){const p=kE(u.h);(p.length!=0||u.i.length!=0)&&(E(u.ka,p),E(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function ZE(u,p,y){var I=y instanceof fo?us(y):new fo(y);if(I.g!="")p&&(I.g=p+"."+I.g),th(I,I.s);else{var V=a.location;I=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var U=new fo(null);I&&eh(U,I),p&&(U.g=p),V&&th(U,V),y&&(U.l=y),I=U}return y=u.D,p=u.ya,y&&p&&Ze(I,y,p),Ze(I,"VER",u.la),xc(u,I),I}function JE(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ct(new rh({eb:y})):new ct(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ex(){}t=ex.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ch(){}ch.prototype.g=function(u,p){return new Dn(u,p)};function Dn(u,p){te.call(this),this.g=new BE(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!v(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new _a(this)}w(Dn,te),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Jm(this.g)},Dn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=uc(u),u=y);p.i.push(new WD(p.Ya++,u)),p.G==3&&ah(p)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Jm(this.g),delete this.g,Dn.aa.N.call(this)};function tx(u){Bm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(tx,Bm);function nx(){Wm.call(this),this.status=1}w(nx,Wm);function _a(u){this.g=u}w(_a,ex),_a.prototype.ua=function(){ye(this.g,"a")},_a.prototype.ta=function(u){ye(this.g,new tx(u))},_a.prototype.sa=function(u){ye(this.g,new nx)},_a.prototype.ra=function(){ye(this.g,"b")},ch.prototype.createWebChannel=ch.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,GN=function(){return new ch},qN=function(){return Yd()},HN=uo,Jv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xd.NO_ERROR=0,Xd.TIMEOUT=8,Xd.HTTP_ERROR=6,pf=Xd,vE.COMPLETE="complete",WN=vE,fE.EventType=dc,dc.OPEN="a",dc.CLOSE="b",dc.ERROR="c",dc.MESSAGE="d",te.prototype.listen=te.prototype.K,Zc=fE,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,BN=ct}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});const DI="@firebase/firestore",MI="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Rd("@firebase/firestore");function Sa(){return ia.logLevel}function re(t,...e){if(ia.logLevel<=be.DEBUG){const n=e.map(M0);ia.debug(`Firestore (${ic}): ${t}`,...n)}}function Vs(t,...e){if(ia.logLevel<=be.ERROR){const n=e.map(M0);ia.error(`Firestore (${ic}): ${t}`,...n)}}function jl(t,...e){if(ia.logLevel<=be.WARN){const n=e.map(M0);ia.warn(`Firestore (${ic}): ${t}`,...n)}}function M0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KN(t,r,n)}function KN(t,e,n){let r=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vs(r),new Error(r)}function ot(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||KN(e,s,r)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class vW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _W{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Bo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bo,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string",31837,{l:r}),new QN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class wW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0,3512);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new LI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=TW(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function e_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ce(r,s);{const i=YN(),o=CW(i.encode(FI(t,n)),i.encode(FI(e,n)));return o!==0?o:Ce(r,s)}}n+=r>65535?2:1}return Ce(t.length,e.length)}function FI(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function CW(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ce(t[n],e[n]);return Ce(t.length,e.length)}function Ul(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=-62135596800,jI=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jI);return new An(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<VI)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jI}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-VI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new An(0,0))}static max(){return new ve(new An(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__name__";class Fr{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Fr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const r=Fr.isNumericId(e),s=Fr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Fr.extractNumericId(e).compare(Fr.extractNumericId(n)):e_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class ft extends Fr{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const IW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Fr{construct(e,n,r){return new gn(e,n,r)}static isValidIdentifier(e){return IW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UI}static keyField(){return new gn([UI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ft.fromString(e))}static fromName(e){return new he(ft.fromString(e).popFirst(5))}static empty(){return new he(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=-1;function SW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new An(n+1,0):new An(n,r));return new Wi(s,he.empty(),e)}function bW(t){return new Wi(t.readTime,t.key,ud)}class Wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wi(ve.min(),he.empty(),ud)}static max(){return new Wi(ve.max(),he.empty(),ud)}}function kW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==RW)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function PW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Am.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW=-1;function Pm(t){return t==null}function t_(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="";function OW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$I(e)),e=DW(t.get(n),e);return $I(e)}function DW(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ZN:n+="";break;default:n+=i}}return n}function $I(t){return t+ZN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new BI(this.data.getIterator())}getIteratorFrom(e){return new BI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class BI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new vi([])}unionWith(e){let n=new Rt(gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JN("Invalid base64 string: "+i):i}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const LW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(ot(!!t,39018),typeof t=="string"){let e=0;const n=LW.exec(t);if(ot(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qi(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="server_timestamp",tO="__type__",nO="__previous_value__",rO="__local_write_time__";function L0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[tO])===null||n===void 0?void 0:n.stringValue)===eO}function Nm(t){const e=t.mapValue.fields[nO];return L0(e)?Nm(e):e}function dd(t){const e=Hi(t.mapValue.fields[rO].timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const kp="(default)";class hd{constructor(e,n){this.projectId=e,this.database=n||kp}static empty(){return new hd("","")}get isDefaultDatabase(){return this.database===kp}isEqual(e){return e instanceof hd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW="__type__",sO="__max__",Vh={mapValue:{fields:{__type__:{stringValue:sO}}}},jW="__vector__",n_="value";function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?L0(t)?4:$W(t)?9007199254740991:UW(t)?10:11:xe(28295,{value:t})}function ns(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dd(t).isEqual(dd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hi(s.timestampValue),a=Hi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qi(s.bytesValue).isEqual(qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=gt(s.doubleValue),a=gt(i.doubleValue);return o===a?t_(o)===t_(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ul(t.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(zI(o)!==zI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ns(o[l],a[l])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function fd(t,e){return(t.values||[]).find(n=>ns(n,e))!==void 0}function $l(t,e){if(t===e)return 0;const n=Gi(t),r=Gi(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=gt(i.integerValue||i.doubleValue),l=gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return WI(t.timestampValue,e.timestampValue);case 4:return WI(dd(t),dd(e));case 5:return e_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=qi(i),l=qi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ce(a[c],l[c]);if(d!==0)return d}return Ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ce(gt(i.latitude),gt(o.latitude));return a!==0?a:Ce(gt(i.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},f=o.fields||{},g=(a=h[n_])===null||a===void 0?void 0:a.arrayValue,w=(l=f[n_])===null||l===void 0?void 0:l.arrayValue,_=Ce(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:HI(g,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Vh.mapValue&&o===Vh.mapValue)return 0;if(i===Vh.mapValue)return 1;if(o===Vh.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=e_(l[h],d[h]);if(f!==0)return f;const g=$l(a[l[h]],c[d[h]]);if(g!==0)return g}return Ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{Pe:n})}}function WI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Hi(t),r=Hi(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function HI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$l(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function zl(t){return r_(t)}function r_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=r_(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${r_(n.fields[o])}`;return s+"}"}(t.mapValue):xe(61005,{value:t})}function mf(t){switch(Gi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nm(t);return e?16+mf(e):16;case 5:return 2*t.stringValue.length;case 6:return qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+mf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return zd(r.fields,(i,o)=>{s+=i.length+mf(o)}),s}(t.mapValue);default:throw xe(13486,{value:t})}}function s_(t){return!!t&&"integerValue"in t}function F0(t){return!!t&&"arrayValue"in t}function qI(t){return!!t&&"nullValue"in t}function GI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ty(t){return!!t&&"mapValue"in t}function UW(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VW])===null||n===void 0?void 0:n.stringValue)===jW}function Eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zd(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $W(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ty(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=gn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Eu(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ty(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ty(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zd(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Hr(Eu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,ve.min(),ve.min(),ve.min(),Hr.empty(),0)}static newFoundDocument(e,n,r,s){return new rn(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new rn(e,2,n,ve.min(),ve.min(),Hr.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,ve.min(),ve.min(),Hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.position=e,this.inclusive=n}}function KI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=$l(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function QI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n="asc"){this.field=e,this.dir=n}}function zW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{}class bt extends iO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WW(e,n,r):n==="array-contains"?new GW(e,r):n==="in"?new KW(e,r):n==="not-in"?new QW(e,r):n==="array-contains-any"?new YW(e,r):new bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HW(e,r):new qW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($l(n,this.value)):n!==null&&Gi(this.value)===Gi(n)&&this.matchesComparison($l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends iO{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new rs(e,n)}matches(e){return oO(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function oO(t){return t.op==="and"}function aO(t){return BW(t)&&oO(t)}function BW(t){for(const e of t.filters)if(e instanceof rs)return!1;return!0}function i_(t){if(t instanceof bt)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(aO(t))return t.filters.map(e=>i_(e)).join(",");{const e=t.filters.map(n=>i_(n)).join(",");return`${t.op}(${e})`}}function lO(t,e){return t instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.field.isEqual(s.field)&&ns(r.value,s.value)}(t,e):t instanceof rs?function(r,s){return s instanceof rs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&lO(o,s.filters[a]),!0):!1}(t,e):void xe(19439)}function cO(t){return t instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${zl(n.value)}`}(t):t instanceof rs?function(n){return n.op.toString()+" {"+n.getFilters().map(cO).join(" ,")+"}"}(t):"Filter"}class WW extends bt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class HW extends bt{constructor(e,n){super(e,"in",n),this.keys=uO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qW extends bt{constructor(e,n){super(e,"not-in",n),this.keys=uO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uO(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class GW extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return F0(n)&&fd(n.arrayValue,this.value)}}class KW extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fd(this.value.arrayValue,n)}}class QW extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fd(this.value.arrayValue,n)}}class YW extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!F0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function YI(t,e=null,n=[],r=[],s=null,i=null,o=null){return new XW(t,e,n,r,s,i,o)}function V0(t){const e=Le(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>i_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zl(r)).join(",")),e.Ie=n}return e.Ie}function j0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QI(t.startAt,e.startAt)&&QI(t.endAt,e.endAt)}function o_(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ZW(t,e,n,r,s,i,o,a){return new Om(t,e,n,r,s,i,o,a)}function U0(t){return new Om(t)}function XI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JW(t){return t.collectionGroup!==null}function xu(t){const e=Le(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(gn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ap(i,r))}),n.has(gn.keyField().canonicalString())||e.Ee.push(new Ap(gn.keyField(),r))}return e.Ee}function Jr(t){const e=Le(t);return e.de||(e.de=eH(e,xu(t))),e.de}function eH(t,e){if(t.limitType==="F")return YI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ap(s.field,i)});const n=t.endAt?new Rp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rp(t.startAt.position,t.startAt.inclusive):null;return YI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function a_(t,e,n){return new Om(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dm(t,e){return j0(Jr(t),Jr(e))&&t.limitType===e.limitType}function dO(t){return`${V0(Jr(t))}|lt:${t.limitType}`}function ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cO(s)).join(", ")}]`),Pm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zl(s)).join(",")),`Target(${r})`}(Jr(t))}; limitType=${t.limitType})`}function Mm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=KI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,xu(r),s)||r.endAt&&!function(o,a,l){const c=KI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,xu(r),s))}(t,e)}function tH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hO(t){return(e,n)=>{let r=!1;for(const s of xu(t)){const i=nH(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nH(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$l(l,c):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zd(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return MW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=new _t(he.comparator);function Ki(){return rH}const fO=new _t(he.comparator);function Jc(...t){let e=fO;for(const n of t)e=e.insert(n.key,n);return e}function sH(t){let e=fO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Po(){return Tu()}function pO(){return Tu()}function Tu(){return new ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const iH=new Rt(he.comparator);function Fe(...t){let e=iH;for(const n of t)e=e.add(n);return e}const oH=new Rt(Ce);function aH(){return oH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t_(e)?"-0":e}}function cH(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this._=void 0}}function uH(t,e,n){return t instanceof l_?function(s,i){const o={fields:{[tO]:{stringValue:eO},[rO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&L0(i)&&(i=Nm(i)),i&&(o.fields[nO]=i),{mapValue:o}}(n,e):t instanceof Pp?mO(t,e):t instanceof Np?gO(t,e):function(s,i){const o=hH(s,i),a=ZI(o)+ZI(s.Re);return s_(o)&&s_(s.Re)?cH(a):lH(s.serializer,a)}(t,e)}function dH(t,e,n){return t instanceof Pp?mO(t,e):t instanceof Np?gO(t,e):n}function hH(t,e){return t instanceof c_?function(r){return s_(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class l_ extends Lm{}class Pp extends Lm{constructor(e){super(),this.elements=e}}function mO(t,e){const n=yO(e);for(const r of t.elements)n.some(s=>ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class Np extends Lm{constructor(e){super(),this.elements=e}}function gO(t,e){let n=yO(e);for(const r of t.elements)n=n.filter(s=>!ns(s,r));return{arrayValue:{values:n}}}class c_ extends Lm{constructor(e,n){super(),this.serializer=e,this.Re=n}}function ZI(t){return gt(t.integerValue||t.doubleValue)}function yO(t){return F0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fH(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Pp&&s instanceof Pp||r instanceof Np&&s instanceof Np?Ul(r.elements,s.elements,ns):r instanceof c_&&s instanceof c_?ns(r.Re,s.Re):r instanceof l_&&s instanceof l_}(t.transform,e.transform)}class Wo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wo}static exists(e){return new Wo(void 0,e)}static updateTime(e){return new Wo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $0{}function vO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mH(t.key,Wo.none()):new z0(t.key,t.data,Wo.none());{const n=t.data,r=Hr.empty();let s=new Rt(gn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fm(t.key,r,new vi(s.toArray()),Wo.none())}}function pH(t,e,n){t instanceof z0?function(s,i,o){const a=s.value.clone(),l=eS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fm?function(s,i,o){if(!gf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=eS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_O(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cu(t,e,n,r){return t instanceof z0?function(i,o,a,l){if(!gf(i.precondition,o))return a;const c=i.value.clone(),d=tS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fm?function(i,o,a,l){if(!gf(i.precondition,o))return a;const c=tS(i.fieldTransforms,l,o),d=o.data;return d.setAll(_O(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return gf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function JI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ul(r,s,(i,o)=>fH(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class z0 extends $0{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fm extends $0{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _O(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eS(t,e,n){const r=new Map;ot(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dH(o,a,n[s]))}return r}function tS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uH(i,o,e))}return r}class mH extends $0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pH(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=vO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,(n,r)=>JI(n,r))&&Ul(this.baseMutations,e.baseMutations,(n,r)=>JI(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Me;function wO(t){if(t===void 0)return Vs("GRPC error has no .code"),J.UNKNOWN;switch(t){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return xe(39323,{code:t})}}(Me=wt||(wt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=new Oi([4294967295,4294967295],0);function nS(t){const e=YN().encode(t),n=new zN;return n.update(e),new Uint8Array(n.digest())}function rS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Oi([n,r],0),new Oi([s,i],0)]}class B0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(r<0)throw new eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Oi.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Oi.fromNumber(r)));return s.compare(_H)===1&&(s=new Oi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=nS(e),[r,s]=rS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new B0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=nS(e),[r,s]=rS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Bd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vm(ve.min(),s,new _t(Ce),Ki(),Fe())}}class Bd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bd(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class EO{constructor(e,n){this.targetId=e,this.Ce=n}}class xO{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sS{constructor(){this.Fe=0,this.Me=iS(),this.xe=Ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Fe(),n=Fe(),r=Fe();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:xe(38017,{changeType:i})}}),new Bd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=iS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ot(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class wH{constructor(e){this.ze=e,this.je=new Map,this.He=Ki(),this.Je=jh(),this.Ye=jh(),this.Ze=new _t(Ce)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(o_(i))if(r===0){const o=new he(i.path);this.tt(n,o,rn.newNoDocument(o,ve.min()))}else ot(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=qi(r).toUint8Array()}catch(l){if(l instanceof JN)return jl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new B0(o,s,i)}catch(l){return jl(l instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&o_(a.target)){const l=new he(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,rn.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=Fe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Vm(e,n,this.Ze,this.He,r);return this.He=Ki(),this.Je=jh(),this.Ye=jh(),this.Ze=new _t(Ce),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new sS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(Ce),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(Ce),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new sS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function jh(){return new _t(he.comparator)}function iS(){return new _t(he.comparator)}const EH={asc:"ASCENDING",desc:"DESCENDING"},xH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TH={and:"AND",or:"OR"};class CH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function u_(t,e){return t.useProto3Json||Pm(e)?e:{value:e}}function IH(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function il(t){return ot(!!t,49232),ve.fromTimestamp(function(n){const r=Hi(n);return new An(r.seconds,r.nanos)}(t))}function bH(t,e){return d_(t,e).canonicalString()}function d_(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TO(t){const e=ft.fromString(t);return ot(kO(e),10190,{key:e.toString()}),e}function ny(t,e){const n=TO(e);if(n.get(1)!==t.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(IO(n))}function CO(t,e){return bH(t.databaseId,e)}function kH(t){const e=TO(t);return e.length===4?ft.emptyPath():IO(e)}function oS(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IO(t){return ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function RH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:xe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ot(d===void 0||typeof d=="string",58123),Ht.fromBase64String(d||"")):(ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ht.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?J.UNKNOWN:wO(c.code);return new de(d,c.message||"")}(o);n=new xO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ny(t,r.document.name),i=il(r.document.updateTime),o=r.document.createTime?il(r.document.createTime):ve.min(),a=new Hr({mapValue:{fields:r.document.fields}}),l=rn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new yf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ny(t,r.document),i=r.readTime?il(r.readTime):ve.min(),o=rn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new yf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ny(t,r.document),i=r.removedTargetIds||[];n=new yf([],i,s,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vH(s,i),a=r.targetId;n=new EO(a,o)}}return n}function AH(t,e){return{documents:[CO(t,e.path)]}}function PH(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CO(t,s);const i=function(c){if(c.length!==0)return bO(rs.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:ka(f.field),direction:DH(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=u_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:s}}function NH(t){let e=kH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ot(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=SO(h);return f instanceof rs&&aO(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Ap(Ra(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Pm(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Rp(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new Rp(g,f)}(n.endAt)),ZW(e,s,o,i,a,"F",l,c)}function OH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ra(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ra(n.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ra(n.unaryFilter.field);return bt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ra(n.unaryFilter.field);return bt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return bt.create(Ra(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rs.create(n.compositeFilter.filters.map(r=>SO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function DH(t){return EH[t]}function MH(t){return xH[t]}function LH(t){return TH[t]}function ka(t){return{fieldPath:t.canonicalString()}}function Ra(t){return gn.fromServerFormat(t.fieldPath)}function bO(t){return t instanceof bt?function(n){if(n.op==="=="){if(GI(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NAN"}};if(qI(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GI(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NAN"}};if(qI(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(n.field),op:MH(n.op),value:n.value}}}(t):t instanceof rs?function(n){const r=n.getFilters().map(s=>bO(s));return r.length===1?r[0]:{compositeFilter:{op:LH(n.op),filters:r}}}(t):xe(54877,{filter:t})}function kO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,r,s,i=ve.min(),o=ve.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e){this.wt=e}}function VH(t){const e=NH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?a_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.yn=new UH}addToCollectionParentIndex(e,n){return this.yn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Wi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class UH{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RO=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(RO,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Bl(0)}static ir(){return new Bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="LruGarbageCollector",$H=1048576;function cS([t,e],[n,r]){const s=Ce(t,n);return s===0?Ce(e,r):s}class zH{constructor(e){this.cr=e,this.buffer=new Rt(cS),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){re(lS,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oc(n)?re(lS,"Ignoring IndexedDB error during garbage collection: ",n):await Rm(n)}await this.Ir(3e5)})}}class WH{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Am.le);const r=new zH(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(aS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aS):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Sa()<=be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function HH(t,e){return new WH(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){this.changes=new ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Cu(r.mutation,s,vi.empty(),An.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Fe()){const s=Po();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ki();const o=Tu(),a=function(){return Tu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Fm)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Cu(d.mutation,c,d.mutation.getFieldMask(),An.now())):o.set(c.key,vi.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new GH(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Tu();let s=new _t((o,a)=>o-a),i=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||vi.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Fe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=pO();d.forEach(f=>{if(!i.has(f)){const g=vO(n.get(f),r.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JW(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Po());let a=ud,l=i;return o.next(c=>B.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Fe())).next(d=>({batchId:a,changes:sH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Jc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jc();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const c=function(h,f){return new Om(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,rn.newInvalidDocument(d)))});let a=Jc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Cu(d.mutation,c,vi.empty(),An.now()),Mm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return B.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:il(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:VH(s.bundledQuery),readTime:il(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(){this.overlays=new _t(he.comparator),this.Or=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Po();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Po(),i=n.length+1,o=new he(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new _t((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Po(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Po(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return B.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yH(n,r));let i=this.Or.get(n);i===void 0&&(i=Fe(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.Nr=new Rt(Nt.Br),this.Lr=new Rt(Nt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Nt(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new he(new ft([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new he(new ft([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Fe();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return he.comparator(e.key,n.key)||Ce(e.Gr,n.Gr)}static kr(e,n){return Ce(e.Gr,n.Gr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Rt(Nt.Br)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gH(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.zr=this.zr.add(new Nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?NW:this.Jn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const a=this.jr(o.Gr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ce);return n.forEach(s=>{const i=new Nt(s,0),o=new Nt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],a=>{r=r.add(a.Gr)})}),B.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Nt(new he(i),0);let a=new Rt(Ce);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Gr)),!0)},o),B.resolve(this.Jr(a))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ot(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return B.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new Nt(n,0),s=this.zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(e){this.Zr=e,this.docs=function(){return new _t(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=Ki();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rn.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ki();const o=n.path,a=new he(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kW(bW(d),r)<=0||(s.has(d.key)||Mm(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){xe(9500)}Xr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new e8(this)}getSize(e){return B.resolve(this.size)}}class e8 extends qH{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.persistence=e,this.ei=new ha(n=>V0(n),j0),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.ti=0,this.ni=new W0,this.targetCount=0,this.ri=Bl.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),B.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Bl(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.ar(n),B.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.ii={},this.overlays={},this.si=new Am(0),this.oi=!1,this.oi=!0,this._i=new XH,this.referenceDelegate=e(this),this.ai=new t8(this),this.indexManager=new jH,this.remoteDocumentCache=function(s){return new JH(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new FH(n),this.ci=new QH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new ZH(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new n8(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return B.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class n8 extends AW{constructor(e){super(),this.currentSequenceNumber=e}}class H0{constructor(e){this.persistence=e,this.Ti=new W0,this.Ii=null}static Ei(e){return new H0(e)}get di(){if(this.Ii)return this.Ii;throw xe(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,r=>{const s=he.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,ve.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return B.or([()=>B.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Op{constructor(e,n){this.persistence=e,this.Ri=new ha(r=>OW(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=HH(this,n)}static Ei(e,n){return new Op(e,n)}li(){}hi(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return B.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mf(e.data.value)),n}gr(e,n,r){return B.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=Fe(),s=Fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new q0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return E3()?8:PW(an())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new r8;return this.fs(e,n,o).next(a=>{if(i.result=a,this.Is)return this.gs(e,n,o,a.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Sa()<=be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),B.resolve()):(Sa()<=be.DEBUG&&re("QueryEngine","Query:",ba(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Sa()<=be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):B.resolve())}Rs(e,n){if(XI(n))return B.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=a_(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Fe(...i);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(n,a);return this.ys(n,c,o,l.readTime)?this.Rs(e,a_(n,null,"F")):this.ws(e,c,n,l)}))})))}Vs(e,n,r,s){return XI(n)||s.isEqual(ve.min())?B.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(n,i);return this.ys(n,o,r,s)?B.resolve(null):(Sa()<=be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ba(n)),this.ws(e,o,n,SW(s,ud)).next(a=>a))})}ps(e,n){let r=new Rt(hO(e));return n.forEach((s,i)=>{Mm(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Sa()<=be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ba(n)),this.As.getDocumentsMatchingQuery(e,n,Wi.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LocalStore",i8=3e8;class o8{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new _t(Ce),this.Ds=new ha(i=>V0(i),j0),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KH(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function a8(t,e,n,r){return new o8(t,e,n,r)}async function PO(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Fe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function NO(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function l8(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.ai.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.ai.addMatchingKeys(i,d.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ht.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(_,E,x){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=i8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,g,d)&&a.push(n.ai.updateTargetData(i,g))});let l=Ki(),c=Fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(c8(i,o,e.documentUpdates).next(d=>{l=d.xs,c=d.Os})),!r.isEqual(ve.min())){const d=n.ai.getLastRemoteSnapshotVersion(i).next(h=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ss=s,i))}function c8(t,e,n){let r=Fe(),s=Fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ki();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re(G0,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:s}})}function u8(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.ai.allocateTargetId(r).next(o=>(s=new _i(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function h_(t,e,n){const r=Le(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!oc(o))throw o;re(G0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function uS(t,e,n){const r=Le(t);let s=ve.min(),i=Fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Le(l),f=h.Ds.get(d);return f!==void 0?B.resolve(h.Ss.get(f)):h.ai.getTargetData(c,d)}(r,o,Jr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:Fe())).next(a=>(d8(r,tH(e),a),{documents:a,Ns:i})))}function d8(t,e,n){let r=t.vs.get(e)||ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class dS{constructor(){this.activeTargetIds=aH()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h8{constructor(){this.So=new dS,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new dS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="ConnectivityMonitor";class fS{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){re(hS,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){re(hS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function f_(){return Uh===null?Uh=function(){return 268435456+Math.round(2147483648*Math.random())}():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="RestConnection",p8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m8{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===kp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const o=f_(),a=this.$o(e,n.toUriEncodedString());re(ry,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(l,s,i);const{host:c}=new URL(a),d=eo(c);return this.Ko(e,a,l,r,d).then(h=>(re(ry,`Received RPC '${e}' ${o}: `,h),h),h=>{throw jl(ry,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Wo(e,n,r,s,i,o){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ic}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=p8[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class y8 extends m8{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const o=f_();return new Promise((a,l)=>{const c=new BN;c.setWithCredentials(!0),c.listenOnce(WN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pf.NO_ERROR:const h=c.getResponseJson();re(Zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case pf.TIMEOUT:re(Zt,`RPC '${e}' ${o} timed out`),l(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const f=c.getStatus();if(re(Zt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const _=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(v)>=0?v:J.UNKNOWN}(w.status);l(new de(_,w.message))}else l(new de(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new de(J.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{s_:e,streamId:o,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{re(Zt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);re(Zt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}a_(e,n,r){const s=f_(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GN(),a=qN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");re(Zt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,g=!1;const w=new g8({Go:E=>{g?re(Zt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(re(Zt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),re(Zt,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},zo:()=>h.close()}),_=(E,x,v)=>{E.listen(x,C=>{try{v(C)}catch(N){setTimeout(()=>{throw N},0)}})};return _(h,Zc.EventType.OPEN,()=>{g||(re(Zt,`RPC '${e}' stream ${s} transport opened.`),w.t_())}),_(h,Zc.EventType.CLOSE,()=>{g||(g=!0,re(Zt,`RPC '${e}' stream ${s} transport closed`),w.r_())}),_(h,Zc.EventType.ERROR,E=>{g||(g=!0,jl(Zt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),w.r_(new de(J.UNAVAILABLE,"The operation could not be completed")))}),_(h,Zc.EventType.MESSAGE,E=>{var x;if(!g){const v=E.data[0];ot(!!v,16349);const C=v,N=(C==null?void 0:C.error)||((x=C[0])===null||x===void 0?void 0:x.error);if(N){re(Zt,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let F=function(b){const k=wt[b];if(k!==void 0)return wO(k)}(M),S=N.message;F===void 0&&(F=J.INTERNAL,S="Unknown error status: "+M+" with message "+N.message),g=!0,w.r_(new de(F,S)),h.close()}else re(Zt,`RPC '${e}' stream ${s} received:`,v),w.i_(v)}}),_(a,HN.STAT_EVENT,E=>{E.stat===Jv.PROXY?re(Zt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Jv.NOPROXY&&re(Zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.n_()},0),w}}function sy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return new CH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="PersistentStream";class v8{constructor(e,n,r,s,i,o,a,l){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new DO(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Vs(n.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return re(pS,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(re(pS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _8 extends v8{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=RH(this.serializer,e),r=function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?il(o.readTime):ve.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=oS(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=o_(l)?{documents:AH(i,l)}:{query:PH(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SH(i,o.resumeToken);const c=u_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=IH(i,o.snapshotVersion.toTimestamp());const c=u_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=OH(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=oS(this.serializer),n.removeTarget=e,this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{}class E8 extends w8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,d_(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(J.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,d_(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(J.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class x8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Vs(n),this.ea=!1):re("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="RemoteStore";class T8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Hd(this)&&(re(Wl,"Restarting streams for network reachability change."),await async function(l){const c=Le(l);c.aa.add(4),await Wd(c),c.la.set("Unknown"),c.aa.delete(4),await jm(c)}(this))})}),this.la=new x8(r,s)}}async function jm(t){if(Hd(t))for(const e of t.ua)await e(!0)}async function Wd(t){for(const e of t.ua)await e(!1)}function MO(t,e){const n=Le(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),X0(n)?Y0(n):ac(n).b_()&&Q0(n,e))}function K0(t,e){const n=Le(t),r=ac(n);n._a.delete(e),r.b_()&&LO(n,e),n._a.size===0&&(r.b_()?r.v_():Hd(n)&&n.la.set("Unknown"))}function Q0(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(t).U_(e)}function LO(t,e){t.ha.Ke(e),ac(t).K_(e)}function Y0(t){t.ha=new wH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ac(t).start(),t.la.ta()}function X0(t){return Hd(t)&&!ac(t).w_()&&t._a.size>0}function Hd(t){return Le(t).aa.size===0}function FO(t){t.ha=void 0}async function C8(t){t.la.set("Online")}async function I8(t){t._a.forEach((e,n)=>{Q0(t,e)})}async function S8(t,e){FO(t),X0(t)?(t.la.ia(e),Y0(t)):t.la.set("Unknown")}async function b8(t,e,n){if(t.la.set("Online"),e instanceof xO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s._a.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s._a.delete(a),s.ha.removeTarget(a))}(t,e)}catch(r){re(Wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mS(t,r)}else if(e instanceof yf?t.ha.Xe(e):e instanceof EO?t.ha.ot(e):t.ha.nt(e),!n.isEqual(ve.min()))try{const r=await NO(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i._a.get(c);d&&i._a.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i._a.get(l);if(!d)return;i._a.set(l,d.withResumeToken(Ht.EMPTY_BYTE_STRING,d.snapshotVersion)),LO(i,l);const h=new _i(d.target,l,c,d.sequenceNumber);Q0(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){re(Wl,"Failed to raise snapshot:",r),await mS(t,r)}}async function mS(t,e,n){if(!oc(e))throw e;t.aa.add(1),await Wd(t),t.la.set("Offline"),n||(n=()=>NO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(Wl,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await jm(t)})}async function gS(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),re(Wl,"RemoteStore received new credentials");const r=Hd(n);n.aa.add(3),await Wd(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await jm(n)}async function k8(t,e){const n=Le(t);e?(n.aa.delete(2),await jm(n)):e||(n.aa.add(2),await Wd(n),n.la.set("Unknown"))}function ac(t){return t.Pa||(t.Pa=function(n,r,s){const i=Le(n);return i.Y_(),new _8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:C8.bind(null,t),Jo:I8.bind(null,t),Zo:S8.bind(null,t),Q_:b8.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),X0(t)?Y0(t):t.la.set("Unknown")):(await t.Pa.stop(),FO(t))})),t.Pa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Z0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VO(t,e){if(Vs("AsyncQueue",`${e}: ${t}`),oc(t))return new de(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Jc(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.Ia=new _t(he.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):xe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hl(e,n,ol.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class A8{constructor(){this.queries=vS(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=Le(n),i=s.queries;s.queries=vS(),i.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new de(J.ABORTED,"Firestore shutting down"))}}function vS(){return new ha(t=>dO(t),Dm)}async function P8(t,e){const n=Le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new R8,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=VO(o,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&J0(n)}async function N8(t,e){const n=Le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function O8(t,e){const n=Le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Ra)a.pa(s)&&(r=!0);o.Aa=s}}r&&J0(n)}function D8(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function J0(t){t.fa.forEach(e=>{e.next()})}var p_,_S;(_S=p_||(p_={})).ya="default",_S.Cache="cache";class M8{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==p_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.key=e}}class UO{constructor(e){this.key=e}}class L8{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Fe(),this.mutatedKeys=Fe(),this.Ua=hO(e),this.Ka=new ol(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new yS,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),g=Mm(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;f&&g?f.data.isEqual(g.data)?w!==_&&(r.track({type:3,doc:g}),E=!0):this.ja(f,g)||(r.track({type:2,doc:g}),E=!0,(l&&this.Ua(g,l)>0||c&&this.Ua(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),E=!0):f&&!g&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(g?(o=o.add(g),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:o,za:r,ys:a,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((d,h)=>function(g,w){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:E})}};return _(g)-_(w)}(d.type,h.type)||this.Ua(d.doc,h.doc)),this.Ha(r),s=s!=null&&s;const a=n&&!s?this.Ja():[],l=this.$a.size===0&&this.current&&!s?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new Hl(this.query,e.Ka,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new yS,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Fe(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new UO(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new jO(r))}),n}Xa(e){this.qa=e.Ns,this.$a=Fe();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Hl.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const eE="SyncEngine";class F8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class V8{constructor(e){this.key=e,this.tu=!1}}class j8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new ha(a=>dO(a),Dm),this.iu=new Map,this.su=new Set,this.ou=new _t(he.comparator),this._u=new Map,this.au=new W0,this.uu={},this.cu=new Map,this.lu=Bl.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function U8(t,e,n=!0){const r=HO(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await $O(r,e,n,!0),s}async function $8(t,e){const n=HO(t);await $O(n,e,!0,!1)}async function $O(t,e,n,r){const s=await u8(t.localStore,Jr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await z8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&MO(t.remoteStore,s),a}async function z8(t,e,n,r,s){t.Pu=(h,f,g)=>async function(_,E,x,v){let C=E.view.Ga(x);C.ys&&(C=await uS(_.localStore,E.query,!1).then(({documents:S})=>E.view.Ga(S,C)));const N=v&&v.targetChanges.get(E.targetId),M=v&&v.targetMismatches.get(E.targetId)!=null,F=E.view.applyChanges(C,_.isPrimaryClient,N,M);return ES(_,E.targetId,F.Ya),F.snapshot}(t,h,f,g);const i=await uS(t.localStore,e,!0),o=new L8(e,i.Ns),a=o.Ga(i.documents),l=Bd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);ES(t,n,c.Ya);const d=new F8(e,n,o);return t.ru.set(e,d),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),c.snapshot}async function B8(t,e,n){const r=Le(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!Dm(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await h_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&K0(r.remoteStore,s.targetId),m_(r,s.targetId)}).catch(Rm)):(m_(r,s.targetId),await h_(r.localStore,s.targetId,!0))}async function W8(t,e){const n=Le(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),K0(n.remoteStore,r.targetId))}async function zO(t,e){const n=Le(t);try{const r=await l8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n._u.get(i);o&&(ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?ot(o.tu,14607):s.removedDocuments.size>0&&(ot(o.tu,42227),o.tu=!1))}),await WO(n,r,e)}catch(r){await Rm(r)}}function wS(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,o)=>{const a=o.view.ga(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Le(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Ra)f.ga(a)&&(c=!0)}),c&&J0(l)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H8(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let o=new _t(he.comparator);o=o.insert(i,rn.newNoDocument(i,ve.min()));const a=Fe().add(i),l=new Vm(ve.min(),new Map,new _t(Ce),o,a);await zO(r,l),r.ou=r.ou.remove(i),r._u.delete(e),tE(r)}else await h_(r.localStore,e,!1).then(()=>m_(r,e,n)).catch(Rm)}function m_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||BO(t,r)})}function BO(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(K0(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),tE(t))}function ES(t,e,n){for(const r of n)r instanceof jO?(t.au.addReference(r.key,e),q8(t,r)):r instanceof UO?(re(eE,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||BO(t,r.key)):xe(19791,{Iu:r})}function q8(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(re(eE,"New document in limbo: "+n),t.su.add(r),tE(t))}function tE(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new he(ft.fromString(e)),r=t.lu.next();t._u.set(r,new V8(n)),t.ou=t.ou.insert(n,r),MO(t.remoteStore,new _i(Jr(U0(n.path)),r,"TargetPurposeLimboResolution",Am.le))}}async function WO(t,e,n){const r=Le(t),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=q0.Ps(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(l,c){const d=Le(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(c,f=>B.forEach(f.ls,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>B.forEach(f.hs,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!oc(h))throw h;re(G0,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=d.Ss.get(f),w=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(w);d.Ss=d.Ss.insert(f,_)}}}(r.localStore,i))}async function G8(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){re(eE,"User change. New user:",e.toKey());const r=await PO(n.localStore,e);n.currentUser=e,function(i,o){i.cu.forEach(a=>{a.forEach(l=>{l.reject(new de(J.CANCELLED,o))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await WO(n,r.Ms)}}function K8(t,e){const n=Le(t),r=n._u.get(e);if(r&&r.tu)return Fe().add(r.key);{let s=Fe();const i=n.iu.get(e);if(!i)return s;for(const o of i){const a=n.ru.get(o);s=s.unionWith(a.view.Wa)}return s}}function HO(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H8.bind(null,e),e.nu.Q_=O8.bind(null,e.eventManager),e.nu.Tu=D8.bind(null,e.eventManager),e}class Dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=OO(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return a8(this.persistence,new s8,e.initialUser,this.serializer)}Ru(e){return new AO(H0.Ei,this.serializer)}Au(e){return new h8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dp.provider={build:()=>new Dp};class Q8 extends Dp{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){ot(this.persistence.referenceDelegate instanceof Op,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BH(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new AO(r=>Op.Ei(r,n),this.serializer)}}class g_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G8.bind(null,this.syncEngine),await k8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A8}()}createDatastore(e){const n=OO(e.databaseInfo.databaseId),r=function(i){return new y8(i)}(e.databaseInfo);return function(i,o,a,l){return new E8(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new T8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wS(this.syncEngine,n,0),function(){return fS.C()?new fS:new f8}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new j8(s,i,o,a,l,c);return d&&(h.hu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Le(s);re(Wl,"RemoteStore shutting down."),i.aa.add(5),await Wd(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}g_.provider={build:()=>new g_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="FirestoreClient";class X8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=XN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re(Qi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(Qi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=VO(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function iy(t,e){t.asyncQueue.verifyOperationInProgress(),re(Qi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await PO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Z8(t);re(Qi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>gS(e.remoteStore,s)),t._onlineComponents=e}async function Z8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Qi,"Using user provided OfflineComponentProvider");try{await iy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await iy(t,new Dp)}}else re(Qi,"Using default OfflineComponentProvider"),await iy(t,new Q8(void 0));return t._offlineComponents}async function J8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Qi,"Using user provided OnlineComponentProvider"),await xS(t,t._uninitializedComponentsProvider._online)):(re(Qi,"Using default OnlineComponentProvider"),await xS(t,new g_))),t._onlineComponents}async function eq(t){const e=await J8(t),n=e.eventManager;return n.onListen=U8.bind(null,e.syncEngine),n.onUnlisten=B8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W8.bind(null,e.syncEngine),n}function tq(t,e,n={}){const r=new Bo;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Y8({next:f=>{d.yu(),o.enqueueAndForget(()=>N8(i,h));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new M8(U0(a.path),d,{includeMetadataChanges:!0,Fa:!0});return P8(i,h)}(await eq(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rq(t,e,n,r){if(e===!0&&r===!0)throw new de(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CS(t){if(!he.isDocumentKey(t))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sq(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function y_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sq(t);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="firestore.googleapis.com",IS=!0;class SS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GO,this.ssl=IS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:IS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$H)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yW;switch(r.type){case"firstParty":return new EW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,to("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=TS.get(n);r&&(re("ComponentProvider","Removing Datastore"),TS.delete(n),r.terminate())}(this),Promise.resolve()}}function iq(t,e,n,r={}){var s;t=y_(t,nE);const i=eo(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;o.host!==GO&&o.host!==l&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Ds(c,a)&&(t._setSettings(c),i&&(ym(`https://${l}`),to("Firestore",!0)),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=en.MOCK_USER;else{d=Gw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new en(f)}t._authCredentials=new vW(new QN(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rE(this.firestore,e,this._query)}}class Ss{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ss(this.firestore,e,this._key)}}class pd extends rE{constructor(e,n,r){super(e,n,U0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ss(this.firestore,null,new he(e))}withConverter(e){return new pd(this.firestore,e,this._path)}}function oq(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=XN.newId()),nq("doc","path",e),t instanceof nE){const r=ft.fromString(e,...n);return CS(r),new Ss(t,null,new he(r))}{if(!(t instanceof Ss||t instanceof pd))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return CS(r),new Ss(t.firestore,t instanceof pd?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="AsyncQueue";class kS{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new DO(this,"async_queue_retry"),this.ju=()=>{const r=sy();r&&re(bS,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=sy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=sy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Bo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!oc(e))throw e;re(bS,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Vs("INTERNAL UNHANDLED ERROR: ",RS(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=Z0.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&xe(47125,{ec:RS(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function RS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class KO extends nE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kS(e),this._firestoreClient=void 0,await e}}}function aq(t,e){const n=typeof t=="object"?t:Ad(),r=typeof t=="string"?t:kp,s=$s(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Hw("firestore");i&&iq(s,...i)}return s}function lq(t){if(t._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cq(t),t._firestoreClient}function cq(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new FW(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new X8(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mp(Ht.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mp(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}const hq=new RegExp("[~\\*/\\[\\]]");function fq(t,e,n){if(e.search(hq)>=0)throw AS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new QO(...e.split("."))._internalPath}catch{throw AS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function AS(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new de(J.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(XO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pq extends YO{data(){return super.data()}}function XO(t,e){return typeof e=="string"?fq(t,e):e instanceof QO?e._internalPath:e._delegate._internalPath}class mq{convertValue(e,n="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zd(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[n_].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>gt(o.doubleValue));return new dq(i)}convertGeoPoint(e){return new uq(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new An(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);ot(kO(r),9688,{name:e});const s=new hd(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||Vs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZO extends YO{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yq(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(XO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yq extends ZO{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){t=y_(t,Ss);const e=y_(t.firestore,KO);return tq(lq(e),t._key).then(n=>wq(e,t,n))}class _q extends mq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mp(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,n)}}function wq(t,e,n){const r=n.docs.get(e._key),s=new _q(t);return new ZO(t,s,e._key,r,new gq(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ic=s})(no),rr(new qn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new KO(new _W(r.getProvider("auth-internal")),new xW(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),sn(DI,MI,e),sn(DI,MI,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="firebasestorage.googleapis.com",Eq="storageBucket",xq=2*60*1e3,Tq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends or{constructor(e,n,r=0){super(oy(e),`Firebase Storage: ${n} (${oy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ss;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ss||(ss={}));function oy(t){return"storage/"+t}function Cq(){const t="An unknown error occurred, please check the error payload for server response.";return new os(ss.UNKNOWN,t)}function Iq(){return new os(ss.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sq(){return new os(ss.CANCELED,"User canceled the upload/download.")}function bq(t){return new os(ss.INVALID_URL,"Invalid URL '"+t+"'.")}function kq(t){return new os(ss.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PS(t){return new os(ss.INVALID_ARGUMENT,t)}function eD(){return new os(ss.APP_DELETED,"The Firebase app was deleted.")}function Rq(t){return new os(ss.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tr.makeFromUrl(e,n)}catch{return new Tr(e,"")}if(r.path==="")return r;throw kq(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},_=n===JO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",x=new RegExp(`^https?://${_}/${s}/${E}`,"i"),C=[{regex:a,indices:l,postModify:i},{regex:g,indices:w,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<C.length;N++){const M=C[N],F=M.regex.exec(e);if(F){const S=F[M.indices.bucket];let T=F[M.indices.path];T||(T=""),r=new Tr(S,T),M.postModify(r);break}}if(r==null)throw bq(e);return r}}class Aq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(g,l())},E)}function f(){i&&clearTimeout(i)}function g(E,...x){if(c){f();return}if(E){f(),d.call(null,E,...x);return}if(l()||o){f(),d.call(null,E,...x);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,h(C)}let w=!1;function _(E){w||(w=!0,f(),!c&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function Nq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(t){return t!==void 0}function NS(t,e,n,r){if(r<e)throw PS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw PS(`Invalid value for '${t}'. Expected ${n} or less.`)}function Dq(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Lp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lp||(Lp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new $h(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Lp.NO_ERROR,l=i.getStatus();if(!a||Mq(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Lp.ABORT;r(!1,new $h(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new $h(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Oq(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Cq();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?eD():Sq();o(l)}else{const l=Iq();o(l)}};this.canceled_?n(!1,new $h(!1,null,!0)):this.backoffId_=Pq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $h{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Fq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Vq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Uq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $q(t,e,n,r,s,i,o=!0,a=!1){const l=Dq(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return jq(d,e),Fq(d,n),Vq(d,i),Uq(d,r),new Lq(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Bq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){this._service=e,n instanceof Tr?this._location=n:this._location=Tr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fp(e,n)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bq(this._location.path)}get storage(){return this._service}get parent(){const e=zq(this._location.path);if(e===null)return null;const n=new Tr(this._location.bucket,e);return new Fp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Rq(e)}}function OS(t,e){const n=e==null?void 0:e[Eq];return n==null?null:Tr.makeFromBucketSpec(n,t)}function Wq(t,e,n,r={}){t.host=`${e}:${n}`;const s=eo(e);s&&(ym(`https://${t.host}`),to("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Gw(i,t.app.options.projectId))}class Hq{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=JO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xq,this._maxUploadRetryTime=Tq,this._requests=new Set,s!=null?this._bucket=Tr.makeFromBucketSpec(s,this._host):this._bucket=OS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=OS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fp(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Aq(eD());{const o=$q(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DS="@firebase/storage",MS="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="storage";function qq(t=Ad(),e){t=Mt(t),to("Storage",!1);const r=$s(t,tD).getImmediate({identifier:e}),s=Hw("storage");return s&&Gq(r,...s),r}function Gq(t,e,n,r={}){Wq(t,e,n,r)}function Kq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Hq(n,r,s,e,no)}function Qq(){rr(new qn(tD,Kq,"PUBLIC").setMultipleInstances(!0)),sn(DS,MS,""),sn(DS,MS,"esm2017")}Qq();const nD="@firebase/installations",sE="0.6.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=1e4,sD=`w:${sE}`,iD="FIS_v2",Yq="https://firebaseinstallations.googleapis.com/v1",Xq=60*60*1e3,Zq="installations",Jq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oa=new ua(Zq,Jq,e7);function oD(t){return t instanceof or&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD({projectId:t}){return`${Yq}/projects/${t}/installations`}function lD(t){return{token:t.token,requestStatus:2,expiresIn:n7(t.expiresIn),creationTime:Date.now()}}async function cD(t,e){const r=(await e.json()).error;return oa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function t7(t,{refreshToken:e}){const n=uD(t);return n.append("Authorization",r7(e)),n}async function dD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function n7(t){return Number(t.replace("s","000"))}function r7(t){return`${iD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=aD(t),s=uD(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:iD,appId:t.appId,sdkVersion:sD},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dD(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:lD(c.authToken)}}else throw await cD("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=/^[cdef][\w-]{21}$/,v_="";function a7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=l7(t);return o7.test(n)?n:v_}catch{return v_}}function l7(t){return i7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Map;function pD(t,e){const n=Um(t);mD(n,e),c7(n,e)}function mD(t,e){const n=fD.get(t);if(n)for(const r of n)r(e)}function c7(t,e){const n=u7();n&&n.postMessage({key:t,fid:e}),d7()}let No=null;function u7(){return!No&&"BroadcastChannel"in self&&(No=new BroadcastChannel("[Firebase] FID Change"),No.onmessage=t=>{mD(t.data.key,t.data.fid)}),No}function d7(){fD.size===0&&No&&(No.close(),No=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="firebase-installations-database",f7=1,aa="firebase-installations-store";let ay=null;function iE(){return ay||(ay=WA(h7,f7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(aa)}}})),ay}async function Vp(t,e){const n=Um(t),s=(await iE()).transaction(aa,"readwrite"),i=s.objectStore(aa),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&pD(t,e.fid),e}async function gD(t){const e=Um(t),r=(await iE()).transaction(aa,"readwrite");await r.objectStore(aa).delete(e),await r.done}async function $m(t,e){const n=Um(t),s=(await iE()).transaction(aa,"readwrite"),i=s.objectStore(aa),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&pD(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t){let e;const n=await $m(t.appConfig,r=>{const s=p7(r),i=m7(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===v_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function p7(t){const e=t||{fid:a7(),registrationStatus:0};return yD(e)}function m7(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(oa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=g7(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y7(t)}:{installationEntry:e}}async function g7(t,e){try{const n=await s7(t,e);return Vp(t.appConfig,n)}catch(n){throw oD(n)&&n.customData.serverCode===409?await gD(t.appConfig):await Vp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function y7(t){let e=await LS(t.appConfig);for(;e.registrationStatus===1;)await hD(100),e=await LS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await oE(t);return r||n}return e}function LS(t){return $m(t,e=>{if(!e)throw oa.create("installation-not-found");return yD(e)})}function yD(t){return v7(t)?{fid:t.fid,registrationStatus:0}:t}function v7(t){return t.registrationStatus===1&&t.registrationTime+rD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7({appConfig:t,heartbeatServiceProvider:e},n){const r=w7(t,n),s=t7(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:sD,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dD(()=>fetch(r,a));if(l.ok){const c=await l.json();return lD(c)}else throw await cD("Generate Auth Token",l)}function w7(t,{fid:e}){return`${aD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t,e=!1){let n;const r=await $m(t.appConfig,i=>{if(!vD(i))throw oa.create("not-registered");const o=i.authToken;if(!e&&T7(o))return i;if(o.requestStatus===1)return n=E7(t,e),i;{if(!navigator.onLine)throw oa.create("app-offline");const a=I7(i);return n=x7(t,a),a}});return n?await n:r.authToken}async function E7(t,e){let n=await FS(t.appConfig);for(;n.authToken.requestStatus===1;)await hD(100),n=await FS(t.appConfig);const r=n.authToken;return r.requestStatus===0?aE(t,e):r}function FS(t){return $m(t,e=>{if(!vD(e))throw oa.create("not-registered");const n=e.authToken;return S7(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function x7(t,e){try{const n=await _7(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Vp(t.appConfig,r),n}catch(n){if(oD(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gD(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Vp(t.appConfig,r)}throw n}}function vD(t){return t!==void 0&&t.registrationStatus===2}function T7(t){return t.requestStatus===2&&!C7(t)}function C7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Xq}function I7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function S7(t){return t.requestStatus===1&&t.requestTime+rD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b7(t){const e=t,{installationEntry:n,registrationPromise:r}=await oE(e);return r?r.catch(console.error):aE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e=!1){const n=t;return await R7(n),(await aE(n,e)).token}async function R7(t){const{registrationPromise:e}=await oE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){if(!t||!t.options)throw ly("App Configuration");if(!t.name)throw ly("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ly(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ly(t){return oa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="installations",P7="installations-internal",N7=t=>{const e=t.getProvider("app").getImmediate(),n=A7(e),r=$s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},O7=t=>{const e=t.getProvider("app").getImmediate(),n=$s(e,_D).getImmediate();return{getId:()=>b7(n),getToken:s=>k7(n,s)}};function D7(){rr(new qn(_D,N7,"PUBLIC")),rr(new qn(P7,O7,"PRIVATE"))}D7();sn(nD,sE);sn(nD,sE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="analytics",M7="firebase_id",L7="origin",F7=60*1e3,V7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new Rd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bn=new ua("analytics","Analytics",j7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t){if(!t.startsWith(lE)){const e=Bn.create("invalid-gtag-resource",{gtagURL:t});return Pn.warn(e.message),""}return t}function wD(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $7(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function z7(t,e){const n=$7("firebase-js-sdk-policy",{createScriptURL:U7}),r=document.createElement("script"),s=`${lE}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function B7(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function W7(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await wD(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Pn.error(a)}t("config",s,i)}async function H7(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await wD(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Pn.error(i)}}function q7(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await H7(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await W7(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Pn.error(a)}}return s}function G7(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=q7(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function K7(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(lE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=30,Y7=1e3;class X7{constructor(e={},n=Y7){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ED=new X7;function Z7(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function J7(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Z7(r)},i=V7.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Bn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function eG(t,e=ED,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Bn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Bn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new rG;return setTimeout(async()=>{a.abort()},F7),xD({appId:r,apiKey:s,measurementId:i},o,a,e)}async function xD(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=ED){var i;const{appId:o,measurementId:a}=t;try{await tG(r,e)}catch(l){if(a)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await J7(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!nG(c)){if(s.deleteThrottleMetadata(o),a)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?IC(n,s.intervalMillis,Q7):IC(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),Pn.debug(`Calling attemptFetch again in ${d} millis`),xD(t,h,r,s)}}function tG(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Bn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nG(t){if(!(t instanceof or)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rG{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sG(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iG(){if(VA())try{await jA()}catch(t){return Pn.warn(Bn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Pn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oG(t,e,n,r,s,i,o){var a;const l=eG(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Pn.error(g)),e.push(l);const c=iG().then(g=>{if(g)return r.getId()}),[d,h]=await Promise.all([l,c]);K7(i)||z7(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[L7]="firebase",f.update=!0,h!=null&&(f[M7]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e){this.app=e}_delete(){return delete Iu[this.app.options.appId],Promise.resolve()}}let Iu={},VS=[];const jS={};let cy="dataLayer",lG="gtag",US,TD,$S=!1;function cG(){const t=[];if(MA()&&t.push("This is a browser extension environment."),x3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Bn.create("invalid-analytics-context",{errorInfo:e});Pn.warn(n.message)}}function uG(t,e,n){cG();const r=t.options.appId;if(!r)throw Bn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bn.create("no-api-key");if(Iu[r]!=null)throw Bn.create("already-exists",{id:r});if(!$S){B7(cy);const{wrappedGtag:i,gtagCore:o}=G7(Iu,VS,jS,cy,lG);TD=i,US=o,$S=!0}return Iu[r]=oG(t,VS,jS,e,US,cy,n),new aG(t)}function dG(t=Ad()){t=Mt(t);const e=$s(t,jp);return e.isInitialized()?e.getImmediate():hG(t)}function hG(t,e={}){const n=$s(t,jp);if(n.isInitialized()){const s=n.getImmediate();if(Ds(e,n.getOptions()))return s;throw Bn.create("already-initialized")}return n.initialize({options:e})}function fG(t,e,n,r){t=Mt(t),sG(TD,Iu[t.app.options.appId],e,n,r).catch(s=>Pn.error(s))}const zS="@firebase/analytics",BS="0.10.15";function pG(){rr(new qn(jp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return uG(r,s,n)},"PUBLIC")),rr(new qn("analytics-internal",t,"PRIVATE")),sn(zS,BS),sn(zS,BS,"esm2017");function t(e){try{const n=e.getProvider(jp).getImmediate();return{logEvent:(r,s,i)=>fG(n,r,s,i)}}catch(n){throw Bn.create("interop-component-reg-failed",{reason:n})}}}pG();const mG={apiKey:"AIzaSyCao2ih2XM8ZkEUpNrl7qs4AZKgq8eitmM",authDomain:"esports-hp.firebaseapp.com",databaseURL:"https://esports-hp-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"esports-hp",storageBucket:"esports-hp.firebasestorage.app",messagingSenderId:"578218788593",appId:"1:578218788593:web:995d61bdbbfe374bf6cb50",measurementId:"G-ELP77R773B"},qd=HA(mG),mo=r$(qd),md=pW(qd),gG=aq(qd);qq(qd);dG(qd);new Br;new zr;new Wr;const CD=A.createContext(null),lc=()=>{const t=A.useContext(CD);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},yG=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0),{toast:i}=sm();A.useEffect(()=>q9(mo,w=>{n(w),s(!1)}),[]);const f={currentUser:e,loading:r,signIn:async(g,w)=>{try{await B9(mo,g,w)}catch(_){throw i({title:"Error signing in",description:_.message,variant:"destructive"}),_}},signUp:async(g,w)=>{try{await z9(mo,g,w)}catch(_){throw i({title:"Error signing up",description:_.message,variant:"destructive"}),_}},logOut:async()=>{try{await G9(mo)}catch(g){throw i({title:"Error signing out",description:g.message,variant:"destructive"}),g}},signInWithGoogle:async()=>{try{const g=new Br;await qg(mo,g)}catch(g){throw i({title:"Error signing in with Google",description:g.message,variant:"destructive"}),g}},signInWithFacebook:async()=>{try{const g=new zr;await qg(mo,g)}catch(g){throw i({title:"Error signing in with Facebook",description:g.message,variant:"destructive"}),g}},signInWithTwitter:async()=>{try{const g=new Wr;await qg(mo,g)}catch(g){throw i({title:"Error signing in with Twitter",description:g.message,variant:"destructive"}),g}}};return m.jsx(CD.Provider,{value:f,children:!r&&t})},ID=n3({email:ip().email({message:"Please enter a valid email address"}),password:ip().min(6,{message:"Password must be at least 6 characters"})}),vG=ID.extend({username:ip().min(3,{message:"Username must be at least 3 characters"}),confirmPassword:ip().min(6,{message:"Password must be at least 6 characters"})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function _G(){const[t,e]=A.useState("login"),[n,r]=Ji(),{signIn:s,signUp:i,signInWithGoogle:o,signInWithFacebook:a,signInWithTwitter:l}=lc(),{toast:c}=sm(),d=nC({resolver:sC(ID),defaultValues:{email:"",password:""}}),h=nC({resolver:sC(vG),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),f=async _=>{try{await s(_.email,_.password),r("/dashboard")}catch(E){console.error("Login error:",E)}},g=async _=>{try{await i(_.email,_.password),c({title:"Account created successfully!",description:"You can now log in with your credentials."}),e("login")}catch(E){console.error("Registration error:",E)}},w=async _=>{try{switch(_){case"google":await o();break;case"facebook":await a();break;case"twitter":await l();break}r("/dashboard")}catch(E){console.error(`${_} login error:`,E)}};return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-dark",children:[m.jsxs("div",{className:"w-full max-w-md text-center mb-8",children:[m.jsx("div",{className:"w-64 h-32 mx-auto mb-4 flex items-center justify-center",children:m.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[m.jsx("rect",{x:"10",y:"10",width:"80",height:"30",rx:"5",fill:"none",stroke:"#FF5500",strokeWidth:"2"}),m.jsx("path",{d:"M20 25 L30 15 L40 25 L50 15 L60 25 L70 15 L80 25",stroke:"#FF5500",strokeWidth:"2",fill:"none"}),m.jsx("circle",{cx:"50",cy:"25",r:"10",fill:"#FF5500",opacity:"0.5"})]})}),m.jsx("h1",{className:"text-4xl font-bold text-primary font-rajdhani",children:"FIRE TOURNAMENT"}),m.jsx("p",{className:"text-text-secondary mt-2",children:"Level up your game. Join tournaments now."})]}),m.jsx("div",{className:"w-full max-w-md",children:m.jsx(Lw,{className:"bg-dark-surface border-dark-lighter",children:m.jsxs(Fw,{className:"pt-6",children:[m.jsxs("div",{className:"flex space-x-2 mb-6",children:[m.jsx("button",{onClick:()=>e("login"),className:`w-1/2 py-2 text-center font-rajdhani font-bold border-b-2 ${t==="login"?"text-white border-primary":"text-text-secondary border-dark-lighter"}`,children:"LOGIN"}),m.jsx("button",{onClick:()=>e("register"),className:`w-1/2 py-2 text-center font-rajdhani font-bold border-b-2 ${t==="register"?"text-white border-primary":"text-text-secondary border-dark-lighter"}`,children:"REGISTER"})]}),m.jsx("div",{className:t==="login"?"block":"hidden",children:m.jsx(EC,{...d,children:m.jsxs("form",{onSubmit:d.handleSubmit(f),className:"space-y-4",children:[m.jsx(Ta,{control:d.control,name:"email",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Email"}),m.jsx(Eo,{children:m.jsx(vo,{type:"email",placeholder:"your@email.com",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{})]})}),m.jsx(Ta,{control:d.control,name:"password",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Password"}),m.jsx(Eo,{children:m.jsx(vo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{}),m.jsx("div",{className:"flex justify-end mt-2",children:m.jsx("a",{href:"#",className:"text-secondary text-sm hover:underline",children:"Forgot Password?"})})]})}),m.jsxs(vr,{type:"submit",className:"w-full gaming-btn bg-primary hover:bg-primary/90 text-white font-rajdhani",children:[m.jsx("i",{className:"ri-login-box-line mr-2"})," LOGIN"]})]})})}),m.jsx("div",{className:t==="register"?"block":"hidden",children:m.jsx(EC,{...h,children:m.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-4",children:[m.jsx(Ta,{control:h.control,name:"username",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Username"}),m.jsx(Eo,{children:m.jsx(vo,{type:"text",placeholder:"gamertag",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white hover:border-primary",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{})]})}),m.jsx(Ta,{control:h.control,name:"email",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Email"}),m.jsx(Eo,{children:m.jsx(vo,{type:"email",placeholder:"your@email.com",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white hover:border-primary",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{})]})}),m.jsx(Ta,{control:h.control,name:"password",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Password"}),m.jsx(Eo,{children:m.jsx(vo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{})]})}),m.jsx(Ta,{control:h.control,name:"confirmPassword",render:({field:_})=>m.jsxs(_o,{children:[m.jsx(wo,{className:"text-text-secondary",children:"Confirm Password"}),m.jsx(Eo,{children:m.jsx(vo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:E=>_.onChange(E.target.value),value:_.value})}),m.jsx(xo,{})]})}),m.jsxs(vr,{type:"submit",className:"w-full gaming-btn bg-primary hover:bg-primary/90 text-white font-rajdhani",children:[m.jsx("i",{className:"ri-user-add-line mr-2"})," REGISTER"]})]})})}),m.jsxs("div",{className:"mt-6 text-center",children:[m.jsx("p",{className:"text-text-secondary",children:"Or continue with"}),m.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[m.jsx(vr,{onClick:()=>w("google"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-google-fill text-white text-xl"})}),m.jsx(vr,{onClick:()=>w("facebook"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-facebook-fill text-white text-xl"})}),m.jsx(vr,{onClick:()=>w("twitter"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-twitter-fill text-white text-xl"})})]})]})]})})})]})}function Gd(){const[t]=Ji();return m.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-surface border-t border-dark-lighter z-10",children:m.jsxs("div",{className:"flex justify-around",children:[m.jsx(za,{href:"/dashboard",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/dashboard"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-home-5-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1 font-medium",children:"Home"})]})}),m.jsx(za,{href:"/tournaments",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/tournaments"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-trophy-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1",children:"Tournaments"})]})}),m.jsx(za,{href:"/notifications",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/notifications"?"text-primary":"text-text-secondary"}`,children:[m.jsxs("div",{className:"relative",children:[m.jsx("i",{className:"ri-notification-3-line text-2xl"}),m.jsx("span",{className:"nav-indicator"})]}),m.jsx("span",{className:"text-xs mt-1",children:"Notifications"})]})}),m.jsx(za,{href:"/profile",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/profile"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-user-3-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1",children:"Profile"})]})})]})})}function zt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function wG(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const zh=43200,WS=1440;let EG={};function xG(){return EG}function HS(t){const e=zt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function vf(t,e){const n=zt(t),r=zt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function TG(t){return wG(t,Date.now())}function CG(t,e){const n=zt(t),r=zt(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function IG(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function SG(t,e){return+zt(t)-+zt(e)}function bG(t){const e=zt(t);return e.setHours(23,59,59,999),e}function kG(t){const e=zt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function RG(t){const e=zt(t);return+bG(e)==+kG(e)}function AG(t,e){const n=zt(t),r=zt(e),s=vf(n,r),i=Math.abs(CG(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=vf(n,r)===-s;RG(zt(t))&&i===1&&vf(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function PG(t,e,n){const r=SG(t,e)/1e3;return IG(n==null?void 0:n.roundingMethod)(r)}const NG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OG=(t,e,n)=>{let r;const s=NG[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function uy(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const DG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LG={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FG={date:uy({formats:DG,defaultWidth:"full"}),time:uy({formats:MG,defaultWidth:"full"}),dateTime:uy({formats:LG,defaultWidth:"full"})},VG={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jG=(t,e,n,r)=>VG[t];function jc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const UG={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$G={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BG={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qG=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},GG={ordinalNumber:qG,era:jc({values:UG,defaultWidth:"wide"}),quarter:jc({values:$G,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jc({values:zG,defaultWidth:"wide"}),day:jc({values:BG,defaultWidth:"wide"}),dayPeriod:jc({values:WG,defaultWidth:"wide",formattingValues:HG,defaultFormattingWidth:"wide"})};function Uc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?QG(a,h=>h.test(o)):KG(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function KG(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function QG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function YG(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const XG=/^(\d+)(th|st|nd|rd)?/i,ZG=/\d+/i,JG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eK={any:[/^b/i,/^(a|c)/i]},tK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nK={any:[/1/i,/2/i,/3/i,/4/i]},rK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cK={ordinalNumber:YG({matchPattern:XG,parsePattern:ZG,valueCallback:t=>parseInt(t,10)}),era:Uc({matchPatterns:JG,defaultMatchWidth:"wide",parsePatterns:eK,defaultParseWidth:"any"}),quarter:Uc({matchPatterns:tK,defaultMatchWidth:"wide",parsePatterns:nK,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Uc({matchPatterns:rK,defaultMatchWidth:"wide",parsePatterns:sK,defaultParseWidth:"any"}),day:Uc({matchPatterns:iK,defaultMatchWidth:"wide",parsePatterns:oK,defaultParseWidth:"any"}),dayPeriod:Uc({matchPatterns:aK,defaultMatchWidth:"any",parsePatterns:lK,defaultParseWidth:"any"})},uK={code:"en-US",formatDistance:OG,formatLong:FG,formatRelative:jG,localize:GG,match:cK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dK(t,e,n){const r=xG(),s=(n==null?void 0:n.locale)??r.locale??uK,i=2520,o=vf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=zt(e),c=zt(t)):(l=zt(t),c=zt(e));const d=PG(c,l),h=(HS(c)-HS(l))/1e3,f=Math.round((d-h)/60);let g;if(f<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):f===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",f,a);if(f<45)return s.formatDistance("xMinutes",f,a);if(f<90)return s.formatDistance("aboutXHours",1,a);if(f<WS){const w=Math.round(f/60);return s.formatDistance("aboutXHours",w,a)}else{if(f<i)return s.formatDistance("xDays",1,a);if(f<zh){const w=Math.round(f/WS);return s.formatDistance("xDays",w,a)}else if(f<zh*2)return g=Math.round(f/zh),s.formatDistance("aboutXMonths",g,a)}if(g=AG(c,l),g<12){const w=Math.round(f/zh);return s.formatDistance("xMonths",w,a)}else{const w=g%12,_=Math.trunc(g/12);return w<3?s.formatDistance("aboutXYears",_,a):w<9?s.formatDistance("overXYears",_,a):s.formatDistance("almostXYears",_+1,a)}}function hK(t,e){return dK(t,TG(t),e)}function qS({tournament:t,mode:e="compact"}){const n=new Date(t.startDate),r=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(n),s=hK(n,{addSuffix:!0}),i=()=>t.registrationOpen?t.participantsCount/t.maxParticipants>.7?m.jsx("span",{className:"inline-block bg-warning bg-opacity-20 text-warning text-xs px-2 py-1 rounded",children:"FILLING FAST"}):m.jsx("span",{className:"inline-block bg-success bg-opacity-20 text-success text-xs px-2 py-1 rounded",children:"OPEN"}):m.jsx("span",{className:"inline-block bg-error bg-opacity-20 text-error text-xs px-2 py-1 rounded",children:"CLOSED"});return e==="compact"?m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 mb-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white font-rajdhani",children:t.name}),m.jsxs("p",{className:"text-xs text-text-secondary mt-1 flex items-center",children:[m.jsx("i",{className:"ri-user-line mr-1"})," ",t.participantsCount," Players",m.jsx("span",{className:"mx-2",children:"•"}),m.jsx("i",{className:"ri-award-line mr-1"})," ₹",t.prizePool.toLocaleString()," Prize"]})]}),m.jsxs("div",{className:"text-right",children:[i(),m.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["Starts: ",r]})]})]}),m.jsxs("div",{className:"flex justify-between items-center mt-4",children:[m.jsx("div",{className:"flex -space-x-2",children:m.jsxs("div",{className:"w-6 h-6 rounded-full bg-dark-lighter border border-dark flex items-center justify-center text-xs",children:["+",t.participantsCount]})}),m.jsx(za,{href:`/tournament/${t.id}`,children:m.jsx(vr,{className:"gaming-btn bg-secondary text-white text-sm py-1.5 px-4 rounded-lg font-rajdhani",children:"JOIN NOW"})})]})]}):m.jsxs("div",{className:"relative rounded-xl overflow-hidden mb-4 card-glow",children:[m.jsx("div",{className:"relative h-40",children:m.jsxs("svg",{viewBox:"0 0 400 150",className:"w-full h-full absolute inset-0",children:[m.jsx("rect",{width:"400",height:"150",fill:"#1E1E1E"}),m.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:m.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#2D2D2D",strokeWidth:"1"})}),m.jsx("rect",{width:"400",height:"150",fill:"url(#grid)"}),m.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"#FF5500",fillOpacity:"0.1"}),m.jsx("circle",{cx:"350",cy:"100",r:"40",fill:"#9147FF",fillOpacity:"0.1"})]})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4",children:m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani",children:t.name}),m.jsxs("p",{className:"text-sm text-text-secondary flex items-center",children:[m.jsx("i",{className:"ri-calendar-line mr-1"})," ",s]})]}),m.jsx(za,{href:`/tournament/${t.id}`,children:m.jsx(vr,{className:"gaming-btn bg-primary text-white text-sm py-2 px-4 rounded-lg font-rajdhani",children:"REGISTER"})})]})})]})}function fK({match:t}){const e=()=>{switch(t.position){case 1:return{bgColor:"bg-success",icon:"ri-trophy-fill",text:"Victory Royale"};case 2:return{bgColor:"bg-warning",icon:"ri-number-2",text:"Second Place"};case 3:return{bgColor:"bg-warning",icon:"ri-number-3",text:"Third Place"};default:return{bgColor:"bg-error",icon:"ri-close-fill",text:"Eliminated"}}},n=()=>{switch(t.position){case 1:return"text-success";case 2:case 3:return"text-warning";default:return"text-error"}},r=e(),s=n(),i=new Date(t.date),o=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}).format(i);return m.jsx("div",{className:"bg-dark-surface rounded-xl p-4 mb-4 card-glow",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`w-10 h-10 rounded-full ${r.bgColor} flex items-center justify-center mr-3`,children:m.jsx("i",{className:`${r.icon} text-white`})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white",children:r.text}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[t.tournamentName," • ",o]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:`font-bold ${s} text-xl font-rajdhani`,children:["+",t.pointsEarned]}),m.jsx("p",{className:"text-xs text-text-secondary",children:"POINTS"})]})]})})}function pK(){var l;const{currentUser:t}=lc(),[e,n]=Ji();A.useEffect(()=>{t||n("/")},[t,n]);const{data:r,isLoading:s}=kl({queryKey:["/api/tournaments"],queryFn:async()=>{const c=await cd(ld(md,"tournaments"));return c.exists()?Object.values(c.val()):[]}}),{data:i,isLoading:o}=kl({queryKey:["/api/matches/recent",t==null?void 0:t.uid],queryFn:async()=>{if(!t)return[];const c=await cd(ld(md,`users/${t.uid}/matches`));return c.exists()?Object.values(c.val()):[]},enabled:!!t}),a={tournaments:(r==null?void 0:r.length)||0,matches:(i==null?void 0:i.length)||0};return t?m.jsxs("div",{className:"dashboard",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"DASHBOARD"}),m.jsx("span",{className:"bg-primary text-xs px-2 py-1 rounded text-white",children:"PRO"})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("button",{className:"relative",children:[m.jsx("i",{className:"ri-notification-3-line text-2xl text-white"}),m.jsx("span",{className:"absolute -top-1 -right-1 bg-error w-4 h-4 rounded-full text-xs flex items-center justify-center",children:"3"})]}),m.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-lighter flex items-center justify-center text-white",children:((l=t.email)==null?void 0:l.charAt(0).toUpperCase())||"U"})]})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-text-secondary text-sm",children:"Tournaments"}),m.jsx("i",{className:"ri-trophy-line text-primary"})]}),m.jsx("p",{className:"text-3xl font-bold text-white font-rajdhani",children:a.tournaments}),m.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[m.jsx("i",{className:"ri-arrow-up-line mr-1"})," +3 new this week"]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-text-secondary text-sm",children:"Matches"}),m.jsx("i",{className:"ri-sword-line text-primary"})]}),m.jsx("p",{className:"text-3xl font-bold text-white font-rajdhani",children:a.matches}),m.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[m.jsx("i",{className:"ri-arrow-up-line mr-1"})," +5 upcoming"]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white font-rajdhani",children:"UPCOMING TOURNAMENTS"}),m.jsx("a",{href:"#",className:"text-primary text-sm",children:"View All"})]}),s?m.jsx("div",{className:"p-8 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):r&&r.length>0?m.jsxs(m.Fragment,{children:[m.jsx(qS,{tournament:r[0],mode:"full"}),r.slice(1,3).map(c=>m.jsx(qS,{tournament:c},c.id))]}):m.jsx("div",{className:"bg-dark-surface rounded-xl p-6 text-center",children:m.jsx("p",{className:"text-text-secondary",children:"No upcoming tournaments available."})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white font-rajdhani",children:"YOUR RECENT MATCHES"}),m.jsx("a",{href:"#",className:"text-primary text-sm",children:"History"})]}),o?m.jsx("div",{className:"p-8 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i&&i.length>0?i.map(c=>m.jsx(fK,{match:c},c.id)):m.jsx("div",{className:"bg-dark-surface rounded-xl p-6 text-center",children:m.jsx("p",{className:"text-text-secondary",children:"No recent matches found."})})]})]}),m.jsx(Gd,{})]}):null}function mK(){return m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Notifications"}),m.jsx("div",{className:"bg-dark-surface rounded-xl p-6",children:m.jsx("p",{className:"text-text-secondary",children:"Your notifications will appear here."})})]})}function gK({team:t}){return m.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-dark-lighter",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-lighter flex items-center justify-center mr-3",children:m.jsx("span",{className:"text-xs text-text-primary",children:t.name.substring(0,2).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t.name}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[t.tournamentsPlayed," tournaments played"]})]})]}),m.jsxs("div",{className:"flex items-center",children:[t.badges.map((e,n)=>m.jsx("div",{className:`${e==="PRO"?"bg-success bg-opacity-20 text-success":e==="CHAMPION"?"bg-warning bg-opacity-20 text-warning":"bg-secondary bg-opacity-20 text-secondary"} text-xs px-2 py-1 rounded mr-2`,children:e},n)),m.jsx("i",{className:"ri-more-2-fill text-text-secondary"})]})]})}function yK(){const{currentUser:t}=lc(),[e,n]=Ji(),[r,s]=cF("/tournament/:id"),[i,o]=A.useState({days:0,hours:0,minutes:0,seconds:0});A.useEffect(()=>{t||n("/")},[t,n]);const{data:a,isLoading:l}=kl({queryKey:["/api/tournaments",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const f=await cd(ld(md,`tournaments/${s.id}`));return f.exists()?f.val():null},enabled:!!(s!=null&&s.id)}),{data:c,isLoading:d}=kl({queryKey:["/api/tournaments",s==null?void 0:s.id,"teams"],queryFn:async()=>{if(!(s!=null&&s.id))return[];const f=await cd(ld(md,`tournaments/${s.id}/teams`));return f.exists()?Object.values(f.val()):[]},enabled:!!(s!=null&&s.id)});if(A.useEffect(()=>{if(!a)return;const f=()=>{const w=new Date(a.registrationEndDate).getTime(),_=new Date().getTime(),E=w-_;if(E<0){o({days:0,hours:0,minutes:0,seconds:0});return}o({days:Math.floor(E/(1e3*60*60*24)),hours:Math.floor(E%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(E%(1e3*60*60)/(1e3*60)),seconds:Math.floor(E%(1e3*60)/1e3)})};f();const g=setInterval(f,1e3);return()=>clearInterval(g)},[a]),!r||!s||l)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})});if(!a)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsxs("div",{className:"bg-dark-surface p-6 rounded-xl text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-2 font-rajdhani",children:"Tournament Not Found"}),m.jsx("p",{className:"text-text-secondary mb-4",children:"The tournament you're looking for doesn't exist or has been removed."}),m.jsx(vr,{onClick:()=>n("/dashboard"),className:"gaming-btn bg-primary hover:bg-primary/90",children:"Back to Dashboard"})]})});const h=Math.round(a.participantsCount/a.maxParticipants*100);return m.jsxs("div",{className:"tournament-detail",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>n("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"TOURNAMENT DETAILS"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"relative rounded-xl overflow-hidden mb-6 card-glow",children:[m.jsx("div",{className:"w-full h-52 bg-gradient-to-br from-dark-lighter to-dark",children:m.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full h-full",children:[m.jsx("rect",{width:"400",height:"200",fill:"#1E1E1E"}),m.jsx("path",{d:"M0 100 Q100 50, 200 100 T400 100",stroke:"#FF5500",strokeWidth:"3",fill:"none"}),m.jsx("circle",{cx:"200",cy:"100",r:"30",fill:"#9147FF",fillOpacity:"0.3"}),m.jsx("circle",{cx:"100",cy:"50",r:"20",fill:"#FF5500",fillOpacity:"0.3"}),m.jsx("circle",{cx:"300",cy:"150",r:"25",fill:"#FF5500",fillOpacity:"0.3"})]})}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-white font-rajdhani",children:a.name}),m.jsxs("div",{className:"flex items-center mt-1",children:[a.registrationOpen?m.jsx("span",{className:"bg-primary text-white text-xs px-2 py-0.5 rounded mr-2",children:h>70?"FILLING FAST":"OPEN"}):m.jsx("span",{className:"bg-error text-white text-xs px-2 py-0.5 rounded mr-2",children:"CLOSED"}),m.jsx("p",{className:"text-sm text-text-secondary",children:new Date(a.startDate).toLocaleDateString()})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"TOURNAMENT INFO"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Format"}),m.jsx("p",{className:"font-medium text-white",children:a.format})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Entry Fee"}),m.jsxs("p",{className:"font-medium text-white",children:["₹",a.entryFee]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Team Size"}),m.jsxs("p",{className:"font-medium text-white",children:[a.teamSize," Players"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Prize Pool"}),m.jsxs("p",{className:"font-medium text-white",children:["₹",a.prizePool.toLocaleString()]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-text-secondary text-sm mb-1",children:"Registration Ends"}),m.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.days.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Days"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.hours.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Hours"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.minutes.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Minutes"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.seconds.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Seconds"})]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-text-secondary text-sm mb-2",children:"Tournament Progress"}),m.jsx("div",{className:"w-full bg-dark-lighter rounded-full h-2.5",children:m.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${h}%`}})}),m.jsxs("div",{className:"flex justify-between mt-1",children:[m.jsxs("p",{className:"text-xs text-text-secondary",children:[a.participantsCount,"/",a.maxParticipants," Teams"]}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[h,"% Full"]})]})]}),m.jsxs(vr,{disabled:!a.registrationOpen,className:"gaming-btn w-full bg-secondary hover:bg-secondary/90 text-white font-bold py-3 px-4 rounded-lg mt-2 font-rajdhani flex items-center justify-center",children:[m.jsx("i",{className:"ri-user-add-line mr-2"})," REGISTER YOUR TEAM"]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"RULES & REGULATIONS"}),m.jsx("div",{className:"space-y-3",children:a.rules.map((f,g)=>m.jsxs("div",{className:"flex",children:[m.jsx("i",{className:"ri-checkbox-circle-line text-primary text-xl mr-2 flex-shrink-0 mt-0.5"}),m.jsx("p",{className:"text-text-primary text-sm",children:f})]},g))}),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center",children:["View Full Rules ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani",children:"REGISTERED TEAMS"}),m.jsxs("span",{className:"text-text-secondary text-sm",children:[a.participantsCount,"/",a.maxParticipants]})]}),d?m.jsx("div",{className:"p-4 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):c&&c.length>0?m.jsxs(m.Fragment,{children:[c.slice(0,3).map(f=>m.jsx(gK,{team:f},f.id)),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center mx-auto",children:["View All Teams ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No teams have registered yet."})})]})]}),m.jsx(Gd,{})]})}function vK(){return m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Tournaments"}),m.jsx("div",{className:"bg-dark-surface rounded-xl p-6",children:m.jsx("p",{className:"text-text-secondary",children:"Available tournaments will appear here."})})]})}var cE="Progress",uE=100,[_K,eQ]=Yl(cE),[wK,EK]=_K(cE),SD=A.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=xK,...o}=t;(s||s===0)&&!GS(s)&&console.error(TK(`${s}`,"Progress"));const a=GS(s)?s:uE;r!==null&&!KS(r,a)&&console.error(CK(`${r}`,"Progress"));const l=KS(r,a)?r:null,c=Up(l)?i(l,a):void 0;return m.jsx(wK,{scope:n,value:l,max:a,children:m.jsx(At.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Up(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":RD(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});SD.displayName=cE;var bD="ProgressIndicator",kD=A.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=EK(bD,n);return m.jsx(At.div,{"data-state":RD(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});kD.displayName=bD;function xK(t,e){return`${Math.round(t/e*100)}%`}function RD(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Up(t){return typeof t=="number"}function GS(t){return Up(t)&&!isNaN(t)&&t>0}function KS(t,e){return Up(t)&&!isNaN(t)&&t<=e&&t>=0}function TK(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${uE}\`.`}function CK(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${uE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var AD=SD,IK=kD;const tu=A.forwardRef(({className:t,value:e,...n},r)=>m.jsx(AD,{ref:r,className:lt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:m.jsx(IK,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));tu.displayName=AD.displayName;function SK(){var l;const{currentUser:t}=lc(),[e,n]=Ji();A.useEffect(()=>{t||n("/")},[t,n]);const{data:r,isLoading:s}=kl({queryKey:["/api/users",t==null?void 0:t.uid,"profile"],queryFn:async()=>{if(!(t!=null&&t.uid))return null;const c=oq(gG,"users",t.uid),d=await vq(c);return d.exists()?d.data():null},enabled:!!t}),{data:i,isLoading:o}=kl({queryKey:["/api/users",t==null?void 0:t.uid,"activities"],queryFn:async()=>{if(!(t!=null&&t.uid))return[];const c=await cd(ld(md,`users/${t.uid}/activities`));return c.exists()?Object.values(c.val()):[]},enabled:!!t});if(!t)return null;if(s)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})});const a=r||{username:t.displayName||((l=t.email)==null?void 0:l.split("@")[0])||"Player",level:1,rank:"Rookie",verified:!1,tournamentsWon:0,matches:0,tournaments:0,kills:0,stats:{winRate:0,kdRatio:0,headshotPercentage:0,avgSurvivalTime:"00:00"},achievements:[]};return m.jsxs("div",{className:"profile-screen",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>n("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"PROFILE"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"bg-dark-surface rounded-xl overflow-hidden mb-6",children:[m.jsx("div",{className:"h-24 bg-gradient-to-r from-primary to-secondary relative",children:m.jsx("button",{className:"absolute right-3 top-3 bg-dark-surface bg-opacity-50 p-1 rounded-full",children:m.jsx("i",{className:"ri-pencil-line text-white"})})}),m.jsxs("div",{className:"flex flex-col items-center -mt-12 px-4 pb-6",children:[t.photoURL?m.jsx("img",{src:t.photoURL,alt:"Profile Avatar",className:"w-24 h-24 rounded-full border-4 border-dark-surface object-cover"}):m.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-dark-surface bg-dark-lighter flex items-center justify-center text-white text-4xl",children:a.username.charAt(0).toUpperCase()}),m.jsx("h2",{className:"text-xl font-bold text-white mt-3 font-rajdhani",children:a.username}),m.jsxs("p",{className:"text-text-secondary text-sm",children:["Level ",a.level," • ",a.rank]}),m.jsxs("div",{className:"flex items-center mt-2",children:[a.verified&&m.jsxs("div",{className:"bg-success text-white text-xs px-2 py-1 rounded flex items-center mr-2",children:[m.jsx("i",{className:"ri-verified-badge-line mr-1"})," Verified"]}),m.jsxs("div",{className:"bg-warning bg-opacity-20 text-warning text-xs px-2 py-1 rounded flex items-center",children:[m.jsx("i",{className:"ri-trophy-line mr-1"})," ",a.tournamentsWon," Tournaments Won"]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-6 w-full",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.matches}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Matches"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.tournaments}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Tournaments"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.kills>=1e3?`${(a.kills/1e3).toFixed(1)}K`:a.kills}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Kills"})]})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"GAME STATISTICS"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Win Rate"}),m.jsxs("div",{className:"flex items-center",children:[m.jsxs("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:[a.stats.winRate,"%"]}),m.jsx("div",{className:"w-full",children:m.jsx(tu,{value:a.stats.winRate,className:"h-2 bg-dark-lighter",indicatorColor:"bg-success"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"K/D Ratio"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:a.stats.kdRatio}),m.jsx("div",{className:"w-full",children:m.jsx(tu,{value:Math.min(a.stats.kdRatio*20,100),className:"h-2 bg-dark-lighter",indicatorColor:"bg-primary"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Headshot %"}),m.jsxs("div",{className:"flex items-center",children:[m.jsxs("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:[a.stats.headshotPercentage,"%"]}),m.jsx("div",{className:"w-full",children:m.jsx(tu,{value:a.stats.headshotPercentage,className:"h-2 bg-dark-lighter",indicatorColor:"bg-warning"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Avg. Survival Time"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:a.stats.avgSurvivalTime}),m.jsx("div",{className:"w-full",children:m.jsx(tu,{value:75,className:"h-2 bg-dark-lighter",indicatorColor:"bg-secondary"})})]})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"ACHIEVEMENTS"}),m.jsx("div",{className:"grid grid-cols-4 gap-4",children:a.achievements&&a.achievements.length>0?a.achievements.map((c,d)=>m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${c.colorClass} flex items-center justify-center`,children:m.jsx("i",{className:`${c.icon} text-white text-xl`})}),m.jsx("p",{className:"text-xs text-text-secondary mt-2 text-center",children:c.name})]},d)):m.jsx("div",{className:"col-span-4 text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No achievements unlocked yet. Keep playing to earn achievements!"})})})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"RECENT ACTIVITY"}),o?m.jsx("div",{className:"p-4 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):i&&i.length>0?m.jsxs(m.Fragment,{children:[i.slice(0,3).map((c,d)=>m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-lighter flex items-center justify-center mr-3 flex-shrink-0",children:m.jsx("i",{className:`${c.icon} ${c.iconColor}`})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:c.text}),m.jsx("p",{className:"text-xs text-text-secondary",children:new Date(c.timestamp).toLocaleString()})]})]},d)),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center mx-auto",children:["View All Activity ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No recent activity."})})]})]}),m.jsx(Gd,{})]})}function bK(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var dE="Switch",[kK,tQ]=Yl(dE),[RK,AK]=kK(dE),PD=A.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...h}=t,[f,g]=A.useState(null),w=nr(e,C=>g(C)),_=A.useRef(!1),E=f?d||!!f.closest("form"):!0,[x=!1,v]=Kk({prop:s,defaultProp:i,onChange:c});return m.jsxs(RK,{scope:n,checked:x,disabled:a,children:[m.jsx(At.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":DD(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:w,onClick:Et(t.onClick,C=>{v(N=>!N),E&&(_.current=C.isPropagationStopped(),_.current||C.stopPropagation())})}),E&&m.jsx(PK,{control:f,bubbles:!_.current,name:r,value:l,checked:x,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});PD.displayName=dE;var ND="SwitchThumb",OD=A.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=AK(ND,n);return m.jsx(At.span,{"data-state":DD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});OD.displayName=ND;var PK=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=A.useRef(null),o=bK(n),a=jR(e);return A.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function DD(t){return t?"checked":"unchecked"}var MD=PD,NK=OD;const LD=A.forwardRef(({className:t,...e},n)=>m.jsx(MD,{className:lt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:m.jsx(NK,{className:lt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));LD.displayName=MD.displayName;const Bh=({title:t,children:e})=>m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:t}),m.jsx("div",{className:"space-y-4",children:e})]}),Mr=({title:t,description:e,icon:n,onClick:r})=>m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-lighter",onClick:r,children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t}),m.jsx("p",{className:"text-xs text-text-secondary",children:e})]}),n?m.jsx("i",{className:`${n} text-text-secondary text-xl`}):null]}),Wh=({title:t,description:e,enabled:n,onToggle:r})=>m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-lighter",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t}),m.jsx("p",{className:"text-xs text-text-secondary",children:e})]}),m.jsx(LD,{checked:n,onCheckedChange:r})]});function OK(){const{currentUser:t,logOut:e}=lc(),[n,r]=Ji(),{toast:s}=sm();A.useEffect(()=>{t||r("/")},[t,r]);const i=async()=>{try{await e(),r("/")}catch(l){console.error("Logout error:",l)}},o=(l,c)=>{s({title:`${l} ${c?"enabled":"disabled"}`,description:"Your preference has been saved."})},a=l=>{s({title:l,description:"This feature is coming soon."})};return t?m.jsxs("div",{className:"settings-screen",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>r("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"SETTINGS"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs(Bh,{title:"ACCOUNT SETTINGS",children:[m.jsx(Mr,{title:"Profile Information",description:"Update your personal details",icon:"ri-arrow-right-s-line",onClick:()=>a("Profile Information")}),m.jsx(Mr,{title:"Password & Security",description:"Manage your login details",icon:"ri-arrow-right-s-line",onClick:()=>a("Password & Security")}),m.jsx(Mr,{title:"Connected Accounts",description:"Link your social accounts",icon:"ri-arrow-right-s-line",onClick:()=>a("Connected Accounts")}),m.jsx(Mr,{title:"Delete Account",description:"Permanently remove your data",icon:"ri-arrow-right-s-line",onClick:()=>a("Delete Account")})]}),m.jsxs(Bh,{title:"NOTIFICATION SETTINGS",children:[m.jsx(Wh,{title:"Tournament Reminders",description:"Get alerts before your tournaments",enabled:!0,onToggle:l=>o("Tournament Reminders",l)}),m.jsx(Wh,{title:"Match Results",description:"Notifications for match outcomes",enabled:!0,onToggle:l=>o("Match Results",l)}),m.jsx(Wh,{title:"Friend Requests",description:"Alerts for new friend connections",enabled:!1,onToggle:l=>o("Friend Requests",l)}),m.jsx(Wh,{title:"Marketing Emails",description:"Updates and promotional offers",enabled:!1,onToggle:l=>o("Marketing Emails",l)})]}),m.jsxs(Bh,{title:"APP SETTINGS",children:[m.jsx(Mr,{title:"Language",description:"English (United States)",icon:"ri-arrow-right-s-line",onClick:()=>a("Language")}),m.jsx(Mr,{title:"Theme",description:"Dark mode",icon:"ri-arrow-right-s-line",onClick:()=>a("Theme")}),m.jsx(Mr,{title:"Data Usage",description:"Manage app data settings",icon:"ri-arrow-right-s-line",onClick:()=>a("Data Usage")})]}),m.jsxs(Bh,{title:"",children:[m.jsx(Mr,{title:"Help & Support",description:"Get assistance with app issues",icon:"ri-arrow-right-s-line",onClick:()=>a("Help & Support")}),m.jsx(Mr,{title:"Privacy Policy",description:"Read our privacy terms",icon:"ri-arrow-right-s-line",onClick:()=>a("Privacy Policy")}),m.jsx(Mr,{title:"Terms of Service",description:"Read our user agreement",icon:"ri-arrow-right-s-line",onClick:()=>a("Terms of Service")})]}),m.jsxs(vr,{onClick:i,className:"gaming-btn w-full bg-error hover:bg-error/90 text-white font-bold py-3 px-4 rounded-lg mt-2 mb-6 font-rajdhani flex items-center justify-center",children:[m.jsx("i",{className:"ri-logout-box-line mr-2"})," LOGOUT"]}),m.jsx("p",{className:"text-center text-text-secondary text-sm",children:"App Version 1.0.0"})]}),m.jsx(Gd,{})]}):null}function DK(){const[t]=Ji(),{currentUser:e}=lc();if(!e&&t!=="/")return window.location.href="/",null;if(e&&t==="/")return window.location.href="/dashboard",null;const n=e&&t!=="/";return m.jsxs("div",{className:"min-h-screen bg-dark text-text-primary",children:[n&&m.jsx(Gd,{}),m.jsx("main",{className:n?"pt-16 px-4 md:px-8 lg:px-12":"",children:m.jsxs(hF,{children:[m.jsx(Qs,{path:"/",component:_G}),m.jsx(Qs,{path:"/dashboard",component:pK}),m.jsx(Qs,{path:"/tournaments",component:vK}),m.jsx(Qs,{path:"/tournament/:id",component:yK}),m.jsx(Qs,{path:"/notifications",component:mK}),m.jsx(Qs,{path:"/profile",component:SK}),m.jsx(Qs,{path:"/settings",component:OK}),m.jsx(Qs,{component:oU})]})})]})}function MK(){return m.jsx(MF,{client:QF,children:m.jsx(yG,{children:m.jsxs(eU,{children:[m.jsx(Rj,{}),m.jsx(DK,{})]})})})}var LK=(t,e,n,r,s,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function d(g){(Array.isArray(t)?t:[t]).forEach(w=>{let _=w==="class",E=_&&i?s.map(x=>i[x]||x):s;_?(l.classList.remove(...E),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(w,g)}),h(g)}function h(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(e)||n,w=o&&g==="system"?f():g;d(w)}catch{}},QS=["light","dark"],FD="(prefers-color-scheme: dark)",FK=typeof window>"u",VD=A.createContext(void 0),VK=t=>A.useContext(VD)?A.createElement(A.Fragment,null,t.children):A.createElement(UK,{...t}),jK=["light","dark"],UK=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=jK,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d,scriptProps:h})=>{let[f,g]=A.useState(()=>zK(s,o)),[w,_]=A.useState(()=>f==="system"?dy():f),E=l?Object.values(l):i,x=A.useCallback(M=>{let F=M;if(!F)return;M==="system"&&n&&(F=dy());let S=l?l[F]:F,T=e?BK(d):null,b=document.documentElement,k=O=>{O==="class"?(b.classList.remove(...E),S&&b.classList.add(S)):O.startsWith("data-")&&(S?b.setAttribute(O,S):b.removeAttribute(O))};if(Array.isArray(a)?a.forEach(k):k(a),r){let O=QS.includes(o)?o:null,P=QS.includes(F)?F:O;b.style.colorScheme=P}T==null||T()},[d]),v=A.useCallback(M=>{let F=typeof M=="function"?M(f):M;g(F);try{localStorage.setItem(s,F)}catch{}},[f]),C=A.useCallback(M=>{let F=dy(M);_(F),f==="system"&&n&&!t&&x("system")},[f,t]);A.useEffect(()=>{let M=window.matchMedia(FD);return M.addListener(C),C(M),()=>M.removeListener(C)},[C]),A.useEffect(()=>{let M=F=>{F.key===s&&(F.newValue?g(F.newValue):v(o))};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[v]),A.useEffect(()=>{x(t??f)},[t,f]);let N=A.useMemo(()=>({theme:f,setTheme:v,forcedTheme:t,resolvedTheme:f==="system"?w:f,themes:n?[...i,"system"]:i,systemTheme:n?w:void 0}),[f,v,t,w,n,i]);return A.createElement(VD.Provider,{value:N},A.createElement($K,{forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:o,value:l,themes:i,nonce:d,scriptProps:h}),c)},$K=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,e,i,t,a,o,r,s]).slice(1,-1);return A.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${LK.toString()})(${d})`}})}),zK=(t,e)=>{if(FK)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},BK=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},dy=t=>(t||(t=window.matchMedia(FD)),t.matches?"dark":"light");vk(document.getElementById("root")).render(m.jsx(VK,{attribute:"class",defaultTheme:"dark",children:m.jsx(MK,{})}));
