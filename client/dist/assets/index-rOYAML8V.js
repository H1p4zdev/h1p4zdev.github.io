var xx=t=>{throw TypeError(t)};var Ig=(t,e,n)=>e.has(t)||xx("Cannot "+n);var L=(t,e,n)=>(Ig(t,e,"read from private field"),n?n.call(t):e.get(t)),ve=(t,e,n)=>e.has(t)?xx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),oe=(t,e,n,r)=>(Ig(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Oe=(t,e,n)=>(Ig(t,e,"access private method"),n);var Ph=(t,e,n,r)=>({set _(s){oe(t,e,s,n)},get _(){return L(t,e,r)}});function EM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fb={exports:{}},am={},pb={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd=Symbol.for("react.element"),xM=Symbol.for("react.portal"),TM=Symbol.for("react.fragment"),IM=Symbol.for("react.strict_mode"),CM=Symbol.for("react.profiler"),SM=Symbol.for("react.provider"),bM=Symbol.for("react.context"),kM=Symbol.for("react.forward_ref"),RM=Symbol.for("react.suspense"),AM=Symbol.for("react.memo"),PM=Symbol.for("react.lazy"),Tx=Symbol.iterator;function NM(t){return t===null||typeof t!="object"?null:(t=Tx&&t[Tx]||t["@@iterator"],typeof t=="function"?t:null)}var mb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gb=Object.assign,yb={};function ec(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||mb}ec.prototype.isReactComponent={};ec.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ec.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vb(){}vb.prototype=ec.prototype;function j_(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||mb}var U_=j_.prototype=new vb;U_.constructor=j_;gb(U_,ec.prototype);U_.isPureReactComponent=!0;var Ix=Array.isArray,_b=Object.prototype.hasOwnProperty,$_={current:null},wb={key:!0,ref:!0,__self:!0,__source:!0};function Eb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_b.call(e,r)&&!wb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:jd,type:t,key:i,ref:o,props:s,_owner:$_.current}}function OM(t,e){return{$$typeof:jd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function z_(t){return typeof t=="object"&&t!==null&&t.$$typeof===jd}function DM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cx=/\/+/g;function Cg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DM(""+t.key):e.toString(36)}function hf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jd:case xM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Cg(o,0):r,Ix(s)?(n="",t!=null&&(n=t.replace(Cx,"$&/")+"/"),hf(s,e,n,"",function(c){return c})):s!=null&&(z_(s)&&(s=OM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ix(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Cg(i,a);o+=hf(i,e,n,l,s)}else if(l=NM(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Cg(i,a++),o+=hf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nh(t,e,n){if(t==null)return t;var r=[],s=0;return hf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function MM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},ff={transition:null},LM={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:ff,ReactCurrentOwner:$_};function xb(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Nh,forEach:function(t,e,n){Nh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nh(t,function(){e++}),e},toArray:function(t){return Nh(t,function(e){return e})||[]},only:function(t){if(!z_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=ec;Ae.Fragment=TM;Ae.Profiler=CM;Ae.PureComponent=j_;Ae.StrictMode=IM;Ae.Suspense=RM;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LM;Ae.act=xb;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=$_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_b.call(e,l)&&!wb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:jd,type:t.type,key:s,ref:i,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:bM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SM,_context:t},t.Consumer=t};Ae.createElement=Eb;Ae.createFactory=function(t){var e=Eb.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:kM,render:t}};Ae.isValidElement=z_;Ae.lazy=function(t){return{$$typeof:PM,_payload:{_status:-1,_result:t},_init:MM}};Ae.memo=function(t,e){return{$$typeof:AM,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=ff.transition;ff.transition={};try{t()}finally{ff.transition=e}};Ae.unstable_act=xb;Ae.useCallback=function(t,e){return En.current.useCallback(t,e)};Ae.useContext=function(t){return En.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return En.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return En.current.useEffect(t,e)};Ae.useId=function(){return En.current.useId()};Ae.useImperativeHandle=function(t,e,n){return En.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return En.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return En.current.useReducer(t,e,n)};Ae.useRef=function(t){return En.current.useRef(t)};Ae.useState=function(t){return En.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return En.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return En.current.useTransition()};Ae.version="18.3.1";pb.exports=Ae;var A=pb.exports;const Ee=hb(A),FM=EM({__proto__:null,default:Ee},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM=A,jM=Symbol.for("react.element"),UM=Symbol.for("react.fragment"),$M=Object.prototype.hasOwnProperty,zM=VM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BM={key:!0,ref:!0,__self:!0,__source:!0};function Tb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$M.call(e,r)&&!BM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jM,type:t,key:i,ref:o,props:s,_owner:zM.current}}am.Fragment=UM;am.jsx=Tb;am.jsxs=Tb;fb.exports=am;var m=fb.exports,Ib={exports:{}},Qn={},Cb={exports:{}},Sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Z){var ae=z.length;z.push(Z);e:for(;0<ae;){var _e=ae-1>>>1,Pe=z[_e];if(0<s(Pe,Z))z[_e]=Z,z[ae]=Pe,ae=_e;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],ae=z.pop();if(ae!==Z){z[0]=ae;e:for(var _e=0,Pe=z.length,Be=Pe>>>1;_e<Be;){var Gt=2*(_e+1)-1,Tn=z[Gt],Dn=Gt+1,cn=z[Dn];if(0>s(Tn,ae))Dn<Pe&&0>s(cn,Tn)?(z[_e]=cn,z[Dn]=ae,_e=Dn):(z[_e]=Tn,z[Gt]=ae,_e=Gt);else if(Dn<Pe&&0>s(cn,ae))z[_e]=cn,z[Dn]=ae,_e=Dn;else break e}}return Z}function s(z,Z){var ae=z.sortIndex-Z.sortIndex;return ae!==0?ae:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,g=!1,w=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(z){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=z)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function N(z){if(_=!1,I(z),!w)if(n(l)!==null)w=!0,ce(M);else{var Z=n(c);Z!==null&&ge(N,Z.startTime-z)}}function M(z,Z){w=!1,_&&(_=!1,E(T),T=-1),g=!0;var ae=f;try{for(I(Z),h=n(l);h!==null&&(!(h.expirationTime>Z)||z&&!O());){var _e=h.callback;if(typeof _e=="function"){h.callback=null,f=h.priorityLevel;var Pe=_e(h.expirationTime<=Z);Z=t.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===n(l)&&r(l),I(Z)}else r(l);h=n(l)}if(h!==null)var Be=!0;else{var Gt=n(c);Gt!==null&&ge(N,Gt.startTime-Z),Be=!1}return Be}finally{h=null,f=ae,g=!1}}var F=!1,C=null,T=-1,S=5,R=-1;function O(){return!(t.unstable_now()-R<S)}function P(){if(C!==null){var z=t.unstable_now();R=z;var Z=!0;try{Z=C(!0,z)}finally{Z?k():(F=!1,C=null)}}else F=!1}var k;if(typeof v=="function")k=function(){v(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ue=H.port2;H.port1.onmessage=P,k=function(){ue.postMessage(null)}}else k=function(){x(P,0)};function ce(z){C=z,F||(F=!0,k())}function ge(z,Z){T=x(function(){z(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,ce(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var ae=f;f=Z;try{return z()}finally{f=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=f;f=z;try{return Z()}finally{f=ae}},t.unstable_scheduleCallback=function(z,Z,ae){var _e=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?_e+ae:_e):ae=_e,z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ae+Pe,z={id:d++,callback:Z,priorityLevel:z,startTime:ae,expirationTime:Pe,sortIndex:-1},ae>_e?(z.sortIndex=ae,e(c,z),n(l)===null&&z===n(c)&&(_?(E(T),T=-1):_=!0,ge(N,ae-_e))):(z.sortIndex=Pe,e(l,z),w||g||(w=!0,ce(M))),z},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(z){var Z=f;return function(){var ae=f;f=Z;try{return z.apply(this,arguments)}finally{f=ae}}}})(Sb);Cb.exports=Sb;var WM=Cb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM=A,Gn=WM;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bb=new Set,Mu={};function pa(t,e){Rl(t,e),Rl(t+"Capture",e)}function Rl(t,e){for(Mu[t]=e,t=0;t<e.length;t++)bb.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oy=Object.prototype.hasOwnProperty,qM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sx={},bx={};function GM(t){return Oy.call(bx,t)?!0:Oy.call(Sx,t)?!1:qM.test(t)?bx[t]=!0:(Sx[t]=!0,!1)}function KM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QM(t,e,n,r){if(e===null||typeof e>"u"||KM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var B_=/[\-:]([a-z])/g;function W_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(B_,W_);Ht[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(B_,W_);Ht[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(B_,W_);Ht[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function H_(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QM(e,n,s,r)&&(n=null),r||s===null?GM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qs=HM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oh=Symbol.for("react.element"),Fa=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),q_=Symbol.for("react.strict_mode"),Dy=Symbol.for("react.profiler"),kb=Symbol.for("react.provider"),Rb=Symbol.for("react.context"),G_=Symbol.for("react.forward_ref"),My=Symbol.for("react.suspense"),Ly=Symbol.for("react.suspense_list"),K_=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),Ab=Symbol.for("react.offscreen"),kx=Symbol.iterator;function Nc(t){return t===null||typeof t!="object"?null:(t=kx&&t[kx]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Sg;function Yc(t){if(Sg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sg=e&&e[1]||""}return`
`+Sg+t}var bg=!1;function kg(t,e){if(!t||bg)return"";bg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yc(t):""}function YM(t){switch(t.tag){case 5:return Yc(t.type);case 16:return Yc("Lazy");case 13:return Yc("Suspense");case 19:return Yc("SuspenseList");case 0:case 2:case 15:return t=kg(t.type,!1),t;case 11:return t=kg(t.type.render,!1),t;case 1:return t=kg(t.type,!0),t;default:return""}}function Fy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Va:return"Fragment";case Fa:return"Portal";case Dy:return"Profiler";case q_:return"StrictMode";case My:return"Suspense";case Ly:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rb:return(t.displayName||"Context")+".Consumer";case kb:return(t._context.displayName||"Context")+".Provider";case G_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K_:return e=t.displayName||null,e!==null?e:Fy(t.type)||"Memo";case oi:e=t._payload,t=t._init;try{return Fy(t(e))}catch{}}return null}function ZM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fy(e);case 8:return e===q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XM(t){var e=Pb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dh(t){t._valueTracker||(t._valueTracker=XM(t))}function Nb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Pb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vy(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ob(t,e){e=e.checked,e!=null&&H_(t,"checked",e,!1)}function jy(t,e){Ob(t,e);var n=Li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uy(t,e.type,Li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ax(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uy(t,e,n){(e!=="number"||jf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zc=Array.isArray;function Ja(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Li(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $y(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Px(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Zc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Li(n)}}function Db(t,e){var n=Li(e.value),r=Li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mh,Lb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mh=Mh||document.createElement("div"),Mh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JM=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(t){JM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uu[e]=uu[t]})});function Fb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uu.hasOwnProperty(t)&&uu[t]?(""+e).trim():e+"px"}function Vb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eL=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function By(t,e){if(e){if(eL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Wy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=null;function Q_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qy=null,el=null,tl=null;function Ox(t){if(t=zd(t)){if(typeof qy!="function")throw Error(K(280));var e=t.stateNode;e&&(e=hm(e),qy(t.stateNode,t.type,e))}}function jb(t){el?tl?tl.push(t):tl=[t]:el=t}function Ub(){if(el){var t=el,e=tl;if(tl=el=null,Ox(t),e)for(t=0;t<e.length;t++)Ox(e[t])}}function $b(t,e){return t(e)}function zb(){}var Rg=!1;function Bb(t,e,n){if(Rg)return t(e,n);Rg=!0;try{return $b(t,e,n)}finally{Rg=!1,(el!==null||tl!==null)&&(zb(),Ub())}}function Fu(t,e){var n=t.stateNode;if(n===null)return null;var r=hm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Gy=!1;if(Ds)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{Gy=!1}function tL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var du=!1,Uf=null,$f=!1,Ky=null,nL={onError:function(t){du=!0,Uf=t}};function rL(t,e,n,r,s,i,o,a,l){du=!1,Uf=null,tL.apply(nL,arguments)}function sL(t,e,n,r,s,i,o,a,l){if(rL.apply(this,arguments),du){if(du){var c=Uf;du=!1,Uf=null}else throw Error(K(198));$f||($f=!0,Ky=c)}}function ma(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dx(t){if(ma(t)!==t)throw Error(K(188))}function iL(t){var e=t.alternate;if(!e){if(e=ma(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Dx(s),t;if(i===r)return Dx(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Hb(t){return t=iL(t),t!==null?qb(t):null}function qb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qb(t);if(e!==null)return e;t=t.sibling}return null}var Gb=Gn.unstable_scheduleCallback,Mx=Gn.unstable_cancelCallback,oL=Gn.unstable_shouldYield,aL=Gn.unstable_requestPaint,yt=Gn.unstable_now,lL=Gn.unstable_getCurrentPriorityLevel,Y_=Gn.unstable_ImmediatePriority,Kb=Gn.unstable_UserBlockingPriority,zf=Gn.unstable_NormalPriority,cL=Gn.unstable_LowPriority,Qb=Gn.unstable_IdlePriority,lm=null,Xr=null;function uL(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(lm,t,void 0,(t.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:fL,dL=Math.log,hL=Math.LN2;function fL(t){return t>>>=0,t===0?32:31-(dL(t)/hL|0)|0}var Lh=64,Fh=4194304;function Xc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Xc(a):(i&=o,i!==0&&(r=Xc(i)))}else o=n&~s,o!==0?r=Xc(o):i!==0&&(r=Xc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-br(e),s=1<<n,r|=t[n],e&=~s;return r}function pL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-br(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=pL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Qy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yb(){var t=Lh;return Lh<<=1,!(Lh&4194240)&&(Lh=64),t}function Ag(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ud(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-br(e),t[e]=n}function gL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-br(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Z_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-br(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var qe=0;function Zb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xb,X_,Jb,e1,t1,Yy=!1,Vh=[],Ti=null,Ii=null,Ci=null,Vu=new Map,ju=new Map,li=[],yL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(t,e){switch(t){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":Vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Dc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zd(e),e!==null&&X_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vL(t,e,n,r,s){switch(e){case"focusin":return Ti=Dc(Ti,t,e,n,r,s),!0;case"dragenter":return Ii=Dc(Ii,t,e,n,r,s),!0;case"mouseover":return Ci=Dc(Ci,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vu.set(i,Dc(Vu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ju.set(i,Dc(ju.get(i)||null,t,e,n,r,s)),!0}return!1}function n1(t){var e=Ro(t.target);if(e!==null){var n=ma(e);if(n!==null){if(e=n.tag,e===13){if(e=Wb(n),e!==null){t.blockedOn=e,t1(t.priority,function(){Jb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hy=r,n.target.dispatchEvent(r),Hy=null}else return e=zd(n),e!==null&&X_(e),t.blockedOn=n,!1;e.shift()}return!0}function Fx(t,e,n){pf(t)&&n.delete(e)}function _L(){Yy=!1,Ti!==null&&pf(Ti)&&(Ti=null),Ii!==null&&pf(Ii)&&(Ii=null),Ci!==null&&pf(Ci)&&(Ci=null),Vu.forEach(Fx),ju.forEach(Fx)}function Mc(t,e){t.blockedOn===e&&(t.blockedOn=null,Yy||(Yy=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,_L)))}function Uu(t){function e(s){return Mc(s,t)}if(0<Vh.length){Mc(Vh[0],t);for(var n=1;n<Vh.length;n++){var r=Vh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ti!==null&&Mc(Ti,t),Ii!==null&&Mc(Ii,t),Ci!==null&&Mc(Ci,t),Vu.forEach(e),ju.forEach(e),n=0;n<li.length;n++)r=li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<li.length&&(n=li[0],n.blockedOn===null);)n1(n),n.blockedOn===null&&li.shift()}var nl=qs.ReactCurrentBatchConfig,Wf=!0;function wL(t,e,n,r){var s=qe,i=nl.transition;nl.transition=null;try{qe=1,J_(t,e,n,r)}finally{qe=s,nl.transition=i}}function EL(t,e,n,r){var s=qe,i=nl.transition;nl.transition=null;try{qe=4,J_(t,e,n,r)}finally{qe=s,nl.transition=i}}function J_(t,e,n,r){if(Wf){var s=Zy(t,e,n,r);if(s===null)Ug(t,e,r,Hf,n),Lx(t,r);else if(vL(s,t,e,n,r))r.stopPropagation();else if(Lx(t,r),e&4&&-1<yL.indexOf(t)){for(;s!==null;){var i=zd(s);if(i!==null&&Xb(i),i=Zy(t,e,n,r),i===null&&Ug(t,e,r,Hf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ug(t,e,r,null,n)}}var Hf=null;function Zy(t,e,n,r){if(Hf=null,t=Q_(r),t=Ro(t),t!==null)if(e=ma(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hf=t,null}function r1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lL()){case Y_:return 1;case Kb:return 4;case zf:case cL:return 16;case Qb:return 536870912;default:return 16}default:return 16}}var _i=null,ew=null,mf=null;function s1(){if(mf)return mf;var t,e=ew,n=e.length,r,s="value"in _i?_i.value:_i.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mf=s.slice(t,1<r?1-r:void 0)}function gf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jh(){return!0}function Vx(){return!1}function Yn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jh:Vx,this.isPropagationStopped=Vx,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),e}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tw=Yn(tc),$d=lt({},tc,{view:0,detail:0}),xL=Yn($d),Pg,Ng,Lc,cm=lt({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lc&&(Lc&&t.type==="mousemove"?(Pg=t.screenX-Lc.screenX,Ng=t.screenY-Lc.screenY):Ng=Pg=0,Lc=t),Pg)},movementY:function(t){return"movementY"in t?t.movementY:Ng}}),jx=Yn(cm),TL=lt({},cm,{dataTransfer:0}),IL=Yn(TL),CL=lt({},$d,{relatedTarget:0}),Og=Yn(CL),SL=lt({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),bL=Yn(SL),kL=lt({},tc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RL=Yn(kL),AL=lt({},tc,{data:0}),Ux=Yn(AL),PL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OL[t])?!!e[t]:!1}function nw(){return DL}var ML=lt({},$d,{key:function(t){if(t.key){var e=PL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nw,charCode:function(t){return t.type==="keypress"?gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LL=Yn(ML),FL=lt({},cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$x=Yn(FL),VL=lt({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nw}),jL=Yn(VL),UL=lt({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),$L=Yn(UL),zL=lt({},cm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BL=Yn(zL),WL=[9,13,27,32],rw=Ds&&"CompositionEvent"in window,hu=null;Ds&&"documentMode"in document&&(hu=document.documentMode);var HL=Ds&&"TextEvent"in window&&!hu,i1=Ds&&(!rw||hu&&8<hu&&11>=hu),zx=" ",Bx=!1;function o1(t,e){switch(t){case"keyup":return WL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ja=!1;function qL(t,e){switch(t){case"compositionend":return a1(e);case"keypress":return e.which!==32?null:(Bx=!0,zx);case"textInput":return t=e.data,t===zx&&Bx?null:t;default:return null}}function GL(t,e){if(ja)return t==="compositionend"||!rw&&o1(t,e)?(t=s1(),mf=ew=_i=null,ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i1&&e.locale!=="ko"?null:e.data;default:return null}}var KL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KL[t.type]:e==="textarea"}function l1(t,e,n,r){jb(r),e=qf(e,"onChange"),0<e.length&&(n=new tw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fu=null,$u=null;function QL(t){_1(t,0)}function um(t){var e=za(t);if(Nb(e))return t}function YL(t,e){if(t==="change")return e}var c1=!1;if(Ds){var Dg;if(Ds){var Mg="oninput"in document;if(!Mg){var Hx=document.createElement("div");Hx.setAttribute("oninput","return;"),Mg=typeof Hx.oninput=="function"}Dg=Mg}else Dg=!1;c1=Dg&&(!document.documentMode||9<document.documentMode)}function qx(){fu&&(fu.detachEvent("onpropertychange",u1),$u=fu=null)}function u1(t){if(t.propertyName==="value"&&um($u)){var e=[];l1(e,$u,t,Q_(t)),Bb(QL,e)}}function ZL(t,e,n){t==="focusin"?(qx(),fu=e,$u=n,fu.attachEvent("onpropertychange",u1)):t==="focusout"&&qx()}function XL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return um($u)}function JL(t,e){if(t==="click")return um(e)}function e2(t,e){if(t==="input"||t==="change")return um(e)}function t2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:t2;function zu(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oy.call(e,s)||!Nr(t[s],e[s]))return!1}return!0}function Gx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kx(t,e){var n=Gx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gx(n)}}function d1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h1(){for(var t=window,e=jf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jf(t.document)}return e}function sw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function n2(t){var e=h1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d1(n.ownerDocument.documentElement,n)){if(r!==null&&sw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Kx(n,i);var o=Kx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var r2=Ds&&"documentMode"in document&&11>=document.documentMode,Ua=null,Xy=null,pu=null,Jy=!1;function Qx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jy||Ua==null||Ua!==jf(r)||(r=Ua,"selectionStart"in r&&sw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pu&&zu(pu,r)||(pu=r,r=qf(Xy,"onSelect"),0<r.length&&(e=new tw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ua)))}function Uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $a={animationend:Uh("Animation","AnimationEnd"),animationiteration:Uh("Animation","AnimationIteration"),animationstart:Uh("Animation","AnimationStart"),transitionend:Uh("Transition","TransitionEnd")},Lg={},f1={};Ds&&(f1=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function dm(t){if(Lg[t])return Lg[t];if(!$a[t])return t;var e=$a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f1)return Lg[t]=e[n];return t}var p1=dm("animationend"),m1=dm("animationiteration"),g1=dm("animationstart"),y1=dm("transitionend"),v1=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(t,e){v1.set(t,e),pa(e,[t])}for(var Fg=0;Fg<Yx.length;Fg++){var Vg=Yx[Fg],s2=Vg.toLowerCase(),i2=Vg[0].toUpperCase()+Vg.slice(1);eo(s2,"on"+i2)}eo(p1,"onAnimationEnd");eo(m1,"onAnimationIteration");eo(g1,"onAnimationStart");eo("dblclick","onDoubleClick");eo("focusin","onFocus");eo("focusout","onBlur");eo(y1,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jc));function Zx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sL(r,e,void 0,t),t.currentTarget=null}function _1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Zx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Zx(s,a,c),i=l}}}if($f)throw t=Ky,$f=!1,Ky=null,t}function Je(t,e){var n=e[sv];n===void 0&&(n=e[sv]=new Set);var r=t+"__bubble";n.has(r)||(w1(e,t,2,!1),n.add(r))}function jg(t,e,n){var r=0;e&&(r|=4),w1(n,t,r,e)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[$h]){t[$h]=!0,bb.forEach(function(n){n!=="selectionchange"&&(o2.has(n)||jg(n,!1,t),jg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$h]||(e[$h]=!0,jg("selectionchange",!1,e))}}function w1(t,e,n,r){switch(r1(e)){case 1:var s=wL;break;case 4:s=EL;break;default:s=J_}n=s.bind(null,e,n,t),s=void 0,!Gy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ug(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ro(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Bb(function(){var c=i,d=Q_(n),h=[];e:{var f=v1.get(t);if(f!==void 0){var g=tw,w=t;switch(t){case"keypress":if(gf(n)===0)break e;case"keydown":case"keyup":g=LL;break;case"focusin":w="focus",g=Og;break;case"focusout":w="blur",g=Og;break;case"beforeblur":case"afterblur":g=Og;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=IL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jL;break;case p1:case m1:case g1:g=bL;break;case y1:g=$L;break;case"scroll":g=xL;break;case"wheel":g=BL;break;case"copy":case"cut":case"paste":g=RL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$x}var _=(e&4)!==0,x=!_&&t==="scroll",E=_?f!==null?f+"Capture":null:f;_=[];for(var v=c,I;v!==null;){I=v;var N=I.stateNode;if(I.tag===5&&N!==null&&(I=N,E!==null&&(N=Fu(v,E),N!=null&&_.push(Wu(v,N,I)))),x)break;v=v.return}0<_.length&&(f=new g(f,w,null,n,d),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Hy&&(w=n.relatedTarget||n.fromElement)&&(Ro(w)||w[Ms]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?Ro(w):null,w!==null&&(x=ma(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(_=jx,N="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=$x,N="onPointerLeave",E="onPointerEnter",v="pointer"),x=g==null?f:za(g),I=w==null?f:za(w),f=new _(N,v+"leave",g,n,d),f.target=x,f.relatedTarget=I,N=null,Ro(d)===c&&(_=new _(E,v+"enter",w,n,d),_.target=I,_.relatedTarget=x,N=_),x=N,g&&w)t:{for(_=g,E=w,v=0,I=_;I;I=ka(I))v++;for(I=0,N=E;N;N=ka(N))I++;for(;0<v-I;)_=ka(_),v--;for(;0<I-v;)E=ka(E),I--;for(;v--;){if(_===E||E!==null&&_===E.alternate)break t;_=ka(_),E=ka(E)}_=null}else _=null;g!==null&&Xx(h,f,g,_,!1),w!==null&&x!==null&&Xx(h,x,w,_,!0)}}e:{if(f=c?za(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=YL;else if(Wx(f))if(c1)M=e2;else{M=XL;var F=ZL}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=JL);if(M&&(M=M(t,c))){l1(h,M,n,d);break e}F&&F(t,f,c),t==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&Uy(f,"number",f.value)}switch(F=c?za(c):window,t){case"focusin":(Wx(F)||F.contentEditable==="true")&&(Ua=F,Xy=c,pu=null);break;case"focusout":pu=Xy=Ua=null;break;case"mousedown":Jy=!0;break;case"contextmenu":case"mouseup":case"dragend":Jy=!1,Qx(h,n,d);break;case"selectionchange":if(r2)break;case"keydown":case"keyup":Qx(h,n,d)}var C;if(rw)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ja?o1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(i1&&n.locale!=="ko"&&(ja||T!=="onCompositionStart"?T==="onCompositionEnd"&&ja&&(C=s1()):(_i=d,ew="value"in _i?_i.value:_i.textContent,ja=!0)),F=qf(c,T),0<F.length&&(T=new Ux(T,t,null,n,d),h.push({event:T,listeners:F}),C?T.data=C:(C=a1(n),C!==null&&(T.data=C)))),(C=HL?qL(t,n):GL(t,n))&&(c=qf(c,"onBeforeInput"),0<c.length&&(d=new Ux("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=C))}_1(h,e)})}function Wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fu(t,n),i!=null&&r.unshift(Wu(t,i,s)),i=Fu(t,e),i!=null&&r.push(Wu(t,i,s))),t=t.return}return r}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Fu(n,i),l!=null&&o.unshift(Wu(n,l,a))):s||(l=Fu(n,i),l!=null&&o.push(Wu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var a2=/\r\n?/g,l2=/\u0000|\uFFFD/g;function Jx(t){return(typeof t=="string"?t:""+t).replace(a2,`
`).replace(l2,"")}function zh(t,e,n){if(e=Jx(e),Jx(t)!==e&&n)throw Error(K(425))}function Gf(){}var ev=null,tv=null;function nv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,c2=typeof clearTimeout=="function"?clearTimeout:void 0,eT=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof eT<"u"?function(t){return eT.resolve(null).then(t).catch(d2)}:rv;function d2(t){setTimeout(function(){throw t})}function $g(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Uu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uu(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nc=Math.random().toString(36).slice(2),Hr="__reactFiber$"+nc,Hu="__reactProps$"+nc,Ms="__reactContainer$"+nc,sv="__reactEvents$"+nc,h2="__reactListeners$"+nc,f2="__reactHandles$"+nc;function Ro(t){var e=t[Hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ms]||n[Hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tT(t);t!==null;){if(n=t[Hr])return n;t=tT(t)}return e}t=n,n=t.parentNode}return null}function zd(t){return t=t[Hr]||t[Ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function hm(t){return t[Hu]||null}var iv=[],Ba=-1;function to(t){return{current:t}}function tt(t){0>Ba||(t.current=iv[Ba],iv[Ba]=null,Ba--)}function Ye(t,e){Ba++,iv[Ba]=t.current,t.current=e}var Fi={},on=to(Fi),kn=to(!1),Qo=Fi;function Al(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rn(t){return t=t.childContextTypes,t!=null}function Kf(){tt(kn),tt(on)}function nT(t,e,n){if(on.current!==Fi)throw Error(K(168));Ye(on,e),Ye(kn,n)}function E1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,ZM(t)||"Unknown",s));return lt({},n,r)}function Qf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,Qo=on.current,Ye(on,t),Ye(kn,kn.current),!0}function rT(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=E1(t,e,Qo),r.__reactInternalMemoizedMergedChildContext=t,tt(kn),tt(on),Ye(on,t)):tt(kn),Ye(kn,n)}var Ts=null,fm=!1,zg=!1;function x1(t){Ts===null?Ts=[t]:Ts.push(t)}function p2(t){fm=!0,x1(t)}function no(){if(!zg&&Ts!==null){zg=!0;var t=0,e=qe;try{var n=Ts;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ts=null,fm=!1}catch(s){throw Ts!==null&&(Ts=Ts.slice(t+1)),Gb(Y_,no),s}finally{qe=e,zg=!1}}return null}var Wa=[],Ha=0,Yf=null,Zf=0,Jn=[],er=0,Yo=null,Cs=1,Ss="";function wo(t,e){Wa[Ha++]=Zf,Wa[Ha++]=Yf,Yf=t,Zf=e}function T1(t,e,n){Jn[er++]=Cs,Jn[er++]=Ss,Jn[er++]=Yo,Yo=t;var r=Cs;t=Ss;var s=32-br(r)-1;r&=~(1<<s),n+=1;var i=32-br(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cs=1<<32-br(e)+s|n<<s|r,Ss=i+t}else Cs=1<<i|n<<s|r,Ss=t}function iw(t){t.return!==null&&(wo(t,1),T1(t,1,0))}function ow(t){for(;t===Yf;)Yf=Wa[--Ha],Wa[Ha]=null,Zf=Wa[--Ha],Wa[Ha]=null;for(;t===Yo;)Yo=Jn[--er],Jn[er]=null,Ss=Jn[--er],Jn[er]=null,Cs=Jn[--er],Jn[er]=null}var zn=null,$n=null,nt=!1,gr=null;function I1(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,$n=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yo!==null?{id:Cs,overflow:Ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,$n=null,!0):!1;default:return!1}}function ov(t){return(t.mode&1)!==0&&(t.flags&128)===0}function av(t){if(nt){var e=$n;if(e){var n=e;if(!sT(t,e)){if(ov(t))throw Error(K(418));e=Si(n.nextSibling);var r=zn;e&&sT(t,e)?I1(r,n):(t.flags=t.flags&-4097|2,nt=!1,zn=t)}}else{if(ov(t))throw Error(K(418));t.flags=t.flags&-4097|2,nt=!1,zn=t}}}function iT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function Bh(t){if(t!==zn)return!1;if(!nt)return iT(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nv(t.type,t.memoizedProps)),e&&(e=$n)){if(ov(t))throw C1(),Error(K(418));for(;e;)I1(t,e),e=Si(e.nextSibling)}if(iT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=zn?Si(t.stateNode.nextSibling):null;return!0}function C1(){for(var t=$n;t;)t=Si(t.nextSibling)}function Pl(){$n=zn=null,nt=!1}function aw(t){gr===null?gr=[t]:gr.push(t)}var m2=qs.ReactCurrentBatchConfig;function Fc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Wh(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oT(t){var e=t._init;return e(t._payload)}function S1(t){function e(E,v){if(t){var I=E.deletions;I===null?(E.deletions=[v],E.flags|=16):I.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=Ai(E,v),E.index=0,E.sibling=null,E}function i(E,v,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<v?(E.flags|=2,v):I):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,I,N){return v===null||v.tag!==6?(v=Qg(I,E.mode,N),v.return=E,v):(v=s(v,I),v.return=E,v)}function l(E,v,I,N){var M=I.type;return M===Va?d(E,v,I.props.children,N,I.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===oi&&oT(M)===v.type)?(N=s(v,I.props),N.ref=Fc(E,v,I),N.return=E,N):(N=Tf(I.type,I.key,I.props,null,E.mode,N),N.ref=Fc(E,v,I),N.return=E,N)}function c(E,v,I,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Yg(I,E.mode,N),v.return=E,v):(v=s(v,I.children||[]),v.return=E,v)}function d(E,v,I,N,M){return v===null||v.tag!==7?(v=Ho(I,E.mode,N,M),v.return=E,v):(v=s(v,I),v.return=E,v)}function h(E,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Qg(""+v,E.mode,I),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oh:return I=Tf(v.type,v.key,v.props,null,E.mode,I),I.ref=Fc(E,null,v),I.return=E,I;case Fa:return v=Yg(v,E.mode,I),v.return=E,v;case oi:var N=v._init;return h(E,N(v._payload),I)}if(Zc(v)||Nc(v))return v=Ho(v,E.mode,I,null),v.return=E,v;Wh(E,v)}return null}function f(E,v,I,N){var M=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:a(E,v,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Oh:return I.key===M?l(E,v,I,N):null;case Fa:return I.key===M?c(E,v,I,N):null;case oi:return M=I._init,f(E,v,M(I._payload),N)}if(Zc(I)||Nc(I))return M!==null?null:d(E,v,I,N,null);Wh(E,I)}return null}function g(E,v,I,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(I)||null,a(v,E,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Oh:return E=E.get(N.key===null?I:N.key)||null,l(v,E,N,M);case Fa:return E=E.get(N.key===null?I:N.key)||null,c(v,E,N,M);case oi:var F=N._init;return g(E,v,I,F(N._payload),M)}if(Zc(N)||Nc(N))return E=E.get(I)||null,d(v,E,N,M,null);Wh(v,N)}return null}function w(E,v,I,N){for(var M=null,F=null,C=v,T=v=0,S=null;C!==null&&T<I.length;T++){C.index>T?(S=C,C=null):S=C.sibling;var R=f(E,C,I[T],N);if(R===null){C===null&&(C=S);break}t&&C&&R.alternate===null&&e(E,C),v=i(R,v,T),F===null?M=R:F.sibling=R,F=R,C=S}if(T===I.length)return n(E,C),nt&&wo(E,T),M;if(C===null){for(;T<I.length;T++)C=h(E,I[T],N),C!==null&&(v=i(C,v,T),F===null?M=C:F.sibling=C,F=C);return nt&&wo(E,T),M}for(C=r(E,C);T<I.length;T++)S=g(C,E,T,I[T],N),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?T:S.key),v=i(S,v,T),F===null?M=S:F.sibling=S,F=S);return t&&C.forEach(function(O){return e(E,O)}),nt&&wo(E,T),M}function _(E,v,I,N){var M=Nc(I);if(typeof M!="function")throw Error(K(150));if(I=M.call(I),I==null)throw Error(K(151));for(var F=M=null,C=v,T=v=0,S=null,R=I.next();C!==null&&!R.done;T++,R=I.next()){C.index>T?(S=C,C=null):S=C.sibling;var O=f(E,C,R.value,N);if(O===null){C===null&&(C=S);break}t&&C&&O.alternate===null&&e(E,C),v=i(O,v,T),F===null?M=O:F.sibling=O,F=O,C=S}if(R.done)return n(E,C),nt&&wo(E,T),M;if(C===null){for(;!R.done;T++,R=I.next())R=h(E,R.value,N),R!==null&&(v=i(R,v,T),F===null?M=R:F.sibling=R,F=R);return nt&&wo(E,T),M}for(C=r(E,C);!R.done;T++,R=I.next())R=g(C,E,T,R.value,N),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?T:R.key),v=i(R,v,T),F===null?M=R:F.sibling=R,F=R);return t&&C.forEach(function(P){return e(E,P)}),nt&&wo(E,T),M}function x(E,v,I,N){if(typeof I=="object"&&I!==null&&I.type===Va&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Oh:e:{for(var M=I.key,F=v;F!==null;){if(F.key===M){if(M=I.type,M===Va){if(F.tag===7){n(E,F.sibling),v=s(F,I.props.children),v.return=E,E=v;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===oi&&oT(M)===F.type){n(E,F.sibling),v=s(F,I.props),v.ref=Fc(E,F,I),v.return=E,E=v;break e}n(E,F);break}else e(E,F);F=F.sibling}I.type===Va?(v=Ho(I.props.children,E.mode,N,I.key),v.return=E,E=v):(N=Tf(I.type,I.key,I.props,null,E.mode,N),N.ref=Fc(E,v,I),N.return=E,E=N)}return o(E);case Fa:e:{for(F=I.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(E,v.sibling),v=s(v,I.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Yg(I,E.mode,N),v.return=E,E=v}return o(E);case oi:return F=I._init,x(E,v,F(I._payload),N)}if(Zc(I))return w(E,v,I,N);if(Nc(I))return _(E,v,I,N);Wh(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,I),v.return=E,E=v):(n(E,v),v=Qg(I,E.mode,N),v.return=E,E=v),o(E)):n(E,v)}return x}var Nl=S1(!0),b1=S1(!1),Xf=to(null),Jf=null,qa=null,lw=null;function cw(){lw=qa=Jf=null}function uw(t){var e=Xf.current;tt(Xf),t._currentValue=e}function lv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rl(t,e){Jf=t,lw=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function rr(t){var e=t._currentValue;if(lw!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if(Jf===null)throw Error(K(308));qa=t,Jf.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var Ao=null;function dw(t){Ao===null?Ao=[t]:Ao.push(t)}function k1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dw(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ls(t,r)}function Ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ai=!1;function hw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function As(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ls(t,n)}return s=r.interleaved,s===null?(e.next=e,dw(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ls(t,n)}function yf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z_(t,n)}}function aT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ep(t,e,n,r){var s=t.updateQueue;ai=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(f=e,g=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=lt({},h,f);break e;case 2:ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xo|=o,t.lanes=o,t.memoizedState=h}}function lT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Bd={},Jr=to(Bd),qu=to(Bd),Gu=to(Bd);function Po(t){if(t===Bd)throw Error(K(174));return t}function fw(t,e){switch(Ye(Gu,e),Ye(qu,t),Ye(Jr,Bd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zy(e,t)}tt(Jr),Ye(Jr,e)}function Ol(){tt(Jr),tt(qu),tt(Gu)}function A1(t){Po(Gu.current);var e=Po(Jr.current),n=zy(e,t.type);e!==n&&(Ye(qu,t),Ye(Jr,n))}function pw(t){qu.current===t&&(tt(Jr),tt(qu))}var it=to(0);function tp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bg=[];function mw(){for(var t=0;t<Bg.length;t++)Bg[t]._workInProgressVersionPrimary=null;Bg.length=0}var vf=qs.ReactCurrentDispatcher,Wg=qs.ReactCurrentBatchConfig,Zo=0,ot=null,It=null,Dt=null,np=!1,mu=!1,Ku=0,g2=0;function Yt(){throw Error(K(321))}function gw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function yw(t,e,n,r,s,i){if(Zo=i,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vf.current=t===null||t.memoizedState===null?w2:E2,t=n(r,s),mu){i=0;do{if(mu=!1,Ku=0,25<=i)throw Error(K(301));i+=1,Dt=It=null,e.updateQueue=null,vf.current=x2,t=n(r,s)}while(mu)}if(vf.current=rp,e=It!==null&&It.next!==null,Zo=0,Dt=It=ot=null,np=!1,e)throw Error(K(300));return t}function vw(){var t=Ku!==0;return Ku=0,t}function jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ot.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function sr(){if(It===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Dt===null?ot.memoizedState:Dt.next;if(e!==null)Dt=e,It=t;else{if(t===null)throw Error(K(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Dt===null?ot.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Qu(t,e){return typeof e=="function"?e(t):e}function Hg(t){var e=sr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=It,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Zo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ot.lanes|=d,Xo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ot.lanes|=i,Xo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qg(t){var e=sr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nr(i,e.memoizedState)||(bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function P1(){}function N1(t,e){var n=ot,r=sr(),s=e(),i=!Nr(r.memoizedState,s);if(i&&(r.memoizedState=s,bn=!0),r=r.queue,_w(M1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Yu(9,D1.bind(null,n,r,s,e),void 0,null),Mt===null)throw Error(K(349));Zo&30||O1(n,e,s)}return s}function O1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D1(t,e,n,r){e.value=n,e.getSnapshot=r,L1(e)&&F1(t)}function M1(t,e,n){return n(function(){L1(e)&&F1(t)})}function L1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function F1(t){var e=Ls(t,1);e!==null&&kr(e,t,1,-1)}function cT(t){var e=jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=_2.bind(null,ot,t),[e.memoizedState,t]}function Yu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function V1(){return sr().memoizedState}function _f(t,e,n,r){var s=jr();ot.flags|=t,s.memoizedState=Yu(1|e,n,void 0,r===void 0?null:r)}function pm(t,e,n,r){var s=sr();r=r===void 0?null:r;var i=void 0;if(It!==null){var o=It.memoizedState;if(i=o.destroy,r!==null&&gw(r,o.deps)){s.memoizedState=Yu(e,n,i,r);return}}ot.flags|=t,s.memoizedState=Yu(1|e,n,i,r)}function uT(t,e){return _f(8390656,8,t,e)}function _w(t,e){return pm(2048,8,t,e)}function j1(t,e){return pm(4,2,t,e)}function U1(t,e){return pm(4,4,t,e)}function $1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z1(t,e,n){return n=n!=null?n.concat([t]):null,pm(4,4,$1.bind(null,e,t),n)}function ww(){}function B1(t,e){var n=sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W1(t,e){var n=sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H1(t,e,n){return Zo&21?(Nr(n,e)||(n=Yb(),ot.lanes|=n,Xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=n)}function y2(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=Wg.transition;Wg.transition={};try{t(!1),e()}finally{qe=n,Wg.transition=r}}function q1(){return sr().memoizedState}function v2(t,e,n){var r=Ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G1(t))K1(e,n);else if(n=k1(t,e,n,r),n!==null){var s=_n();kr(n,t,r,s),Q1(n,e,r)}}function _2(t,e,n){var r=Ri(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G1(t))K1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(s.next=s,dw(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=k1(t,e,s,r),n!==null&&(s=_n(),kr(n,t,r,s),Q1(n,e,r))}}function G1(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function K1(t,e){mu=np=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z_(t,n)}}var rp={readContext:rr,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},w2={readContext:rr,useCallback:function(t,e){return jr().memoizedState=[t,e===void 0?null:e],t},useContext:rr,useEffect:uT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_f(4194308,4,$1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _f(4194308,4,t,e)},useInsertionEffect:function(t,e){return _f(4,2,t,e)},useMemo:function(t,e){var n=jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=v2.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var e=jr();return t={current:t},e.memoizedState=t},useState:cT,useDebugValue:ww,useDeferredValue:function(t){return jr().memoizedState=t},useTransition:function(){var t=cT(!1),e=t[0];return t=y2.bind(null,t[1]),jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ot,s=jr();if(nt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Mt===null)throw Error(K(349));Zo&30||O1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,uT(M1.bind(null,r,i,t),[t]),r.flags|=2048,Yu(9,D1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jr(),e=Mt.identifierPrefix;if(nt){var n=Ss,r=Cs;n=(r&~(1<<32-br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ku++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=g2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E2={readContext:rr,useCallback:B1,useContext:rr,useEffect:_w,useImperativeHandle:z1,useInsertionEffect:j1,useLayoutEffect:U1,useMemo:W1,useReducer:Hg,useRef:V1,useState:function(){return Hg(Qu)},useDebugValue:ww,useDeferredValue:function(t){var e=sr();return H1(e,It.memoizedState,t)},useTransition:function(){var t=Hg(Qu)[0],e=sr().memoizedState;return[t,e]},useMutableSource:P1,useSyncExternalStore:N1,useId:q1,unstable_isNewReconciler:!1},x2={readContext:rr,useCallback:B1,useContext:rr,useEffect:_w,useImperativeHandle:z1,useInsertionEffect:j1,useLayoutEffect:U1,useMemo:W1,useReducer:qg,useRef:V1,useState:function(){return qg(Qu)},useDebugValue:ww,useDeferredValue:function(t){var e=sr();return It===null?e.memoizedState=t:H1(e,It.memoizedState,t)},useTransition:function(){var t=qg(Qu)[0],e=sr().memoizedState;return[t,e]},useMutableSource:P1,useSyncExternalStore:N1,useId:q1,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mm={isMounted:function(t){return(t=t._reactInternals)?ma(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Ri(t),i=As(r,s);i.payload=e,n!=null&&(i.callback=n),e=bi(t,i,s),e!==null&&(kr(e,t,s,r),yf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Ri(t),i=As(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bi(t,i,s),e!==null&&(kr(e,t,s,r),yf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=Ri(t),s=As(n,r);s.tag=2,e!=null&&(s.callback=e),e=bi(t,s,r),e!==null&&(kr(e,t,r,n),yf(e,t,r))}};function dT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zu(n,r)||!zu(s,i):!0}function Y1(t,e,n){var r=!1,s=Fi,i=e.contextType;return typeof i=="object"&&i!==null?i=rr(i):(s=Rn(e)?Qo:on.current,r=e.contextTypes,i=(r=r!=null)?Al(t,s):Fi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mm.enqueueReplaceState(e,e.state,null)}function uv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hw(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rr(i):(i=Rn(e)?Qo:on.current,s.context=Al(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mm.enqueueReplaceState(s,s.state,null),ep(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dl(t,e){try{var n="",r=e;do n+=YM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T2=typeof WeakMap=="function"?WeakMap:Map;function Z1(t,e,n){n=As(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ip||(ip=!0,Ev=r),dv(t,e)},n}function X1(t,e,n){n=As(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dv(t,e),typeof r!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new T2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=F2.bind(null,t,e,n),e.then(t,t))}function pT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=As(-1,1),e.tag=2,bi(n,e,1))),n.lanes|=1),t)}var I2=qs.ReactCurrentOwner,bn=!1;function pn(t,e,n,r){e.child=t===null?b1(e,null,n,r):Nl(e,t.child,n,r)}function gT(t,e,n,r,s){n=n.render;var i=e.ref;return rl(e,s),r=yw(t,e,n,r,i,s),n=vw(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fs(t,e,s)):(nt&&n&&iw(e),e.flags|=1,pn(t,e,r,s),e.child)}function yT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,J1(t,e,i,r,s)):(t=Tf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zu,n(o,r)&&t.ref===e.ref)return Fs(t,e,s)}return e.flags|=1,t=Ai(i,r),t.ref=e.ref,t.return=e,e.child=t}function J1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zu(i,r)&&t.ref===e.ref)if(bn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,Fs(t,e,s)}return hv(t,e,n,r,s)}function ek(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ka,Fn),Fn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Ka,Fn),Fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(Ka,Fn),Fn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(Ka,Fn),Fn|=r;return pn(t,e,s,n),e.child}function tk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hv(t,e,n,r,s){var i=Rn(n)?Qo:on.current;return i=Al(e,i),rl(e,s),n=yw(t,e,n,r,i,s),r=vw(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fs(t,e,s)):(nt&&r&&iw(e),e.flags|=1,pn(t,e,n,s),e.child)}function vT(t,e,n,r,s){if(Rn(n)){var i=!0;Qf(e)}else i=!1;if(rl(e,s),e.stateNode===null)wf(t,e),Y1(e,n,r),uv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=rr(c):(c=Rn(n)?Qo:on.current,c=Al(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&hT(e,o,r,c),ai=!1;var f=e.memoizedState;o.state=f,ep(e,r,o,s),l=e.memoizedState,a!==r||f!==l||kn.current||ai?(typeof d=="function"&&(cv(e,n,d,r),l=e.memoizedState),(a=ai||dT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,R1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=rr(l):(l=Rn(n)?Qo:on.current,l=Al(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hT(e,o,r,l),ai=!1,f=e.memoizedState,o.state=f,ep(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||kn.current||ai?(typeof g=="function"&&(cv(e,n,g,r),w=e.memoizedState),(c=ai||dT(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return fv(t,e,n,r,i,s)}function fv(t,e,n,r,s,i){tk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rT(e,n,!1),Fs(t,e,i);r=e.stateNode,I2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nl(e,t.child,null,i),e.child=Nl(e,null,a,i)):pn(t,e,a,i),e.memoizedState=r.state,s&&rT(e,n,!0),e.child}function nk(t){var e=t.stateNode;e.pendingContext?nT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nT(t,e.context,!1),fw(t,e.containerInfo)}function _T(t,e,n,r,s){return Pl(),aw(s),e.flags|=256,pn(t,e,n,r),e.child}var pv={dehydrated:null,treeContext:null,retryLane:0};function mv(t){return{baseLanes:t,cachePool:null,transitions:null}}function rk(t,e,n){var r=e.pendingProps,s=it.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(it,s&1),t===null)return av(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vm(o,r,0,null),t=Ho(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mv(n),e.memoizedState=pv,t):Ew(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return C2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ai(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ai(a,i):(i=Ho(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pv,r}return i=t.child,t=i.sibling,r=Ai(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ew(t,e){return e=vm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hh(t,e,n,r){return r!==null&&aw(r),Nl(e,t.child,null,n),t=Ew(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function C2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gg(Error(K(422))),Hh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vm({mode:"visible",children:r.children},s,0,null),i=Ho(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Nl(e,t.child,null,o),e.child.memoizedState=mv(o),e.memoizedState=pv,i);if(!(e.mode&1))return Hh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=Gg(i,r,void 0),Hh(t,e,o,r)}if(a=(o&t.childLanes)!==0,bn||a){if(r=Mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ls(t,s),kr(r,t,s,-1))}return bw(),r=Gg(Error(K(421))),Hh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=V2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$n=Si(s.nextSibling),zn=e,nt=!0,gr=null,t!==null&&(Jn[er++]=Cs,Jn[er++]=Ss,Jn[er++]=Yo,Cs=t.id,Ss=t.overflow,Yo=e),e=Ew(e,r.children),e.flags|=4096,e)}function wT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lv(t.return,e,n)}function Kg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wT(t,n,e);else if(t.tag===19)wT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&tp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&tp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kg(e,!0,n,null,i);break;case"together":Kg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function S2(t,e,n){switch(e.tag){case 3:nk(e),Pl();break;case 5:A1(e);break;case 1:Rn(e.type)&&Qf(e);break;case 4:fw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(Xf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?rk(t,e,n):(Ye(it,it.current&1),t=Fs(t,e,n),t!==null?t.sibling:null);Ye(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,ek(t,e,n)}return Fs(t,e,n)}var ik,gv,ok,ak;ik=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gv=function(){};ok=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Po(Jr.current);var i=null;switch(n){case"input":s=Vy(t,s),r=Vy(t,r),i=[];break;case"select":s=lt({},s,{value:void 0}),r=lt({},r,{value:void 0}),i=[];break;case"textarea":s=$y(t,s),r=$y(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gf)}By(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ak=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vc(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function b2(t,e,n){var r=e.pendingProps;switch(ow(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Rn(e.type)&&Kf(),Zt(e),null;case 3:return r=e.stateNode,Ol(),tt(kn),tt(on),mw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Iv(gr),gr=null))),gv(t,e),Zt(e),null;case 5:pw(e);var s=Po(Gu.current);if(n=e.type,t!==null&&e.stateNode!=null)ok(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Zt(e),null}if(t=Po(Jr.current),Bh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hr]=e,r[Hu]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Jc.length;s++)Je(Jc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Rx(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":Px(r,i),Je("invalid",r)}By(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zh(r.textContent,a,t),s=["children",""+a]):Mu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Dh(r),Ax(r,i,!0);break;case"textarea":Dh(r),Nx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Gf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hr]=e,t[Hu]=r,ik(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wy(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jc.length;s++)Je(Jc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":Rx(t,r),s=Vy(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=lt({},r,{value:void 0}),Je("invalid",t);break;case"textarea":Px(t,r),s=$y(t,r),Je("invalid",t);break;default:s=r}By(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Vb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lu(t,l):typeof l=="number"&&Lu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&H_(t,i,l,o))}switch(n){case"input":Dh(t),Ax(t,r,!1);break;case"textarea":Dh(t),Nx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Li(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ja(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Gf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)ak(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Po(Gu.current),Po(Jr.current),Bh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hr]=e,(i=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:zh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hr]=e,e.stateNode=r}return Zt(e),null;case 13:if(tt(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&$n!==null&&e.mode&1&&!(e.flags&128))C1(),Pl(),e.flags|=98560,i=!1;else if(i=Bh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Hr]=e}else Pl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),i=!1}else gr!==null&&(Iv(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?kt===0&&(kt=3):bw())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Ol(),gv(t,e),t===null&&Bu(e.stateNode.containerInfo),Zt(e),null;case 10:return uw(e.type._context),Zt(e),null;case 17:return Rn(e.type)&&Kf(),Zt(e),null;case 19:if(tt(it),i=e.memoizedState,i===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tp(t),o!==null){for(e.flags|=128,Vc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>Ml&&(e.flags|=128,r=!0,Vc(i,!1),e.lanes=4194304)}else{if(!r)if(t=tp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Zt(e),null}else 2*yt()-i.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,r=!0,Vc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=it.current,Ye(it,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return Sw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function k2(t,e){switch(ow(e),e.tag){case 1:return Rn(e.type)&&Kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ol(),tt(kn),tt(on),mw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pw(e),null;case 13:if(tt(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Pl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(it),null;case 4:return Ol(),null;case 10:return uw(e.type._context),null;case 22:case 23:return Sw(),null;case 24:return null;default:return null}}var qh=!1,tn=!1,R2=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function yv(t,e,n){try{n()}catch(r){ht(t,e,r)}}var ET=!1;function A2(t,e){if(ev=Wf,t=h1(),sw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tv={focusedElem:t,selectionRange:n},Wf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,x=w.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:fr(e.type,_),x);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){ht(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return w=ET,ET=!1,w}function gu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yv(e,n,i)}s=s.next}while(s!==r)}}function gm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lk(t){var e=t.alternate;e!==null&&(t.alternate=null,lk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hr],delete e[Hu],delete e[sv],delete e[h2],delete e[f2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ck(t){return t.tag===5||t.tag===3||t.tag===4}function xT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ck(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gf));else if(r!==4&&(t=t.child,t!==null))for(_v(t,e,n),t=t.sibling;t!==null;)_v(t,e,n),t=t.sibling}function wv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wv(t,e,n),t=t.sibling;t!==null;)wv(t,e,n),t=t.sibling}var jt=null,mr=!1;function ei(t,e,n){for(n=n.child;n!==null;)uk(t,e,n),n=n.sibling}function uk(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(lm,n)}catch{}switch(n.tag){case 5:tn||Ga(n,e);case 6:var r=jt,s=mr;jt=null,ei(t,e,n),jt=r,mr=s,jt!==null&&(mr?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(mr?(t=jt,n=n.stateNode,t.nodeType===8?$g(t.parentNode,n):t.nodeType===1&&$g(t,n),Uu(t)):$g(jt,n.stateNode));break;case 4:r=jt,s=mr,jt=n.stateNode.containerInfo,mr=!0,ei(t,e,n),jt=r,mr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yv(n,e,o),s=s.next}while(s!==r)}ei(t,e,n);break;case 1:if(!tn&&(Ga(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,ei(t,e,n),tn=r):ei(t,e,n);break;default:ei(t,e,n)}}function TT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R2),e.forEach(function(r){var s=j2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,mr=!1;break e;case 3:jt=a.stateNode.containerInfo,mr=!0;break e;case 4:jt=a.stateNode.containerInfo,mr=!0;break e}a=a.return}if(jt===null)throw Error(K(160));uk(i,o,s),jt=null,mr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ht(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,t),e=e.sibling}function dk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),Fr(t),r&4){try{gu(3,t,t.return),gm(3,t)}catch(_){ht(t,t.return,_)}try{gu(5,t,t.return)}catch(_){ht(t,t.return,_)}}break;case 1:hr(e,t),Fr(t),r&512&&n!==null&&Ga(n,n.return);break;case 5:if(hr(e,t),Fr(t),r&512&&n!==null&&Ga(n,n.return),t.flags&32){var s=t.stateNode;try{Lu(s,"")}catch(_){ht(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ob(s,i),Wy(a,o);var c=Wy(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Vb(s,h):d==="dangerouslySetInnerHTML"?Lb(s,h):d==="children"?Lu(s,h):H_(s,d,h,c)}switch(a){case"input":jy(s,i);break;case"textarea":Db(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ja(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ja(s,!!i.multiple,i.defaultValue,!0):Ja(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hu]=i}catch(_){ht(t,t.return,_)}}break;case 6:if(hr(e,t),Fr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){ht(t,t.return,_)}}break;case 3:if(hr(e,t),Fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uu(e.containerInfo)}catch(_){ht(t,t.return,_)}break;case 4:hr(e,t),Fr(t);break;case 13:hr(e,t),Fr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Iw=yt())),r&4&&TT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(c=tn)||d,hr(e,t),tn=c):hr(e,t),Fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(f=ie,g=f.child,f.tag){case 0:case 11:case 14:case 15:gu(4,f,f.return);break;case 1:Ga(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){ht(r,n,_)}}break;case 5:Ga(f,f.return);break;case 22:if(f.memoizedState!==null){CT(h);continue}}g!==null?(g.return=f,ie=g):CT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Fb("display",o))}catch(_){ht(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){ht(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:hr(e,t),Fr(t),r&4&&TT(t);break;case 21:break;default:hr(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ck(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lu(s,""),r.flags&=-33);var i=xT(t);wv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xT(t);_v(t,a,o);break;default:throw Error(K(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function P2(t,e,n){ie=t,hk(t)}function hk(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tn;a=qh;var c=tn;if(qh=o,(tn=l)&&!c)for(ie=s;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?ST(s):l!==null?(l.return=o,ie=l):ST(s);for(;i!==null;)ie=i,hk(i),i=i.sibling;ie=s,qh=a,tn=c}IT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):IT(t)}}function IT(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||gm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Uu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}tn||e.flags&512&&vv(e)}catch(f){ht(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function CT(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function ST(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gm(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ht(e,s,l)}}var i=e.return;try{vv(e)}catch(l){ht(e,i,l)}break;case 5:var o=e.return;try{vv(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var N2=Math.ceil,sp=qs.ReactCurrentDispatcher,xw=qs.ReactCurrentOwner,nr=qs.ReactCurrentBatchConfig,Ue=0,Mt=null,xt=null,Wt=0,Fn=0,Ka=to(0),kt=0,Zu=null,Xo=0,ym=0,Tw=0,yu=null,Sn=null,Iw=0,Ml=1/0,xs=null,ip=!1,Ev=null,ki=null,Gh=!1,wi=null,op=0,vu=0,xv=null,Ef=-1,xf=0;function _n(){return Ue&6?yt():Ef!==-1?Ef:Ef=yt()}function Ri(t){return t.mode&1?Ue&2&&Wt!==0?Wt&-Wt:m2.transition!==null?(xf===0&&(xf=Yb()),xf):(t=qe,t!==0||(t=window.event,t=t===void 0?16:r1(t.type)),t):1}function kr(t,e,n,r){if(50<vu)throw vu=0,xv=null,Error(K(185));Ud(t,n,r),(!(Ue&2)||t!==Mt)&&(t===Mt&&(!(Ue&2)&&(ym|=n),kt===4&&ci(t,Wt)),An(t,r),n===1&&Ue===0&&!(e.mode&1)&&(Ml=yt()+500,fm&&no()))}function An(t,e){var n=t.callbackNode;mL(t,e);var r=Bf(t,t===Mt?Wt:0);if(r===0)n!==null&&Mx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mx(n),e===1)t.tag===0?p2(bT.bind(null,t)):x1(bT.bind(null,t)),u2(function(){!(Ue&6)&&no()}),n=null;else{switch(Zb(r)){case 1:n=Y_;break;case 4:n=Kb;break;case 16:n=zf;break;case 536870912:n=Qb;break;default:n=zf}n=wk(n,fk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fk(t,e){if(Ef=-1,xf=0,Ue&6)throw Error(K(327));var n=t.callbackNode;if(sl()&&t.callbackNode!==n)return null;var r=Bf(t,t===Mt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ap(t,r);else{e=r;var s=Ue;Ue|=2;var i=mk();(Mt!==t||Wt!==e)&&(xs=null,Ml=yt()+500,Wo(t,e));do try{M2();break}catch(a){pk(t,a)}while(!0);cw(),sp.current=i,Ue=s,xt!==null?e=0:(Mt=null,Wt=0,e=kt)}if(e!==0){if(e===2&&(s=Qy(t),s!==0&&(r=s,e=Tv(t,s))),e===1)throw n=Zu,Wo(t,0),ci(t,r),An(t,yt()),n;if(e===6)ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!O2(s)&&(e=ap(t,r),e===2&&(i=Qy(t),i!==0&&(r=i,e=Tv(t,i))),e===1))throw n=Zu,Wo(t,0),ci(t,r),An(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Eo(t,Sn,xs);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=Iw+500-yt(),10<e)){if(Bf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rv(Eo.bind(null,t,Sn,xs),e);break}Eo(t,Sn,xs);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-br(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N2(r/1960))-r,10<r){t.timeoutHandle=rv(Eo.bind(null,t,Sn,xs),r);break}Eo(t,Sn,xs);break;case 5:Eo(t,Sn,xs);break;default:throw Error(K(329))}}}return An(t,yt()),t.callbackNode===n?fk.bind(null,t):null}function Tv(t,e){var n=yu;return t.current.memoizedState.isDehydrated&&(Wo(t,e).flags|=256),t=ap(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&Iv(e)),t}function Iv(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function O2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~Tw,e&=~ym,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-br(e),r=1<<n;t[n]=-1,e&=~r}}function bT(t){if(Ue&6)throw Error(K(327));sl();var e=Bf(t,0);if(!(e&1))return An(t,yt()),null;var n=ap(t,e);if(t.tag!==0&&n===2){var r=Qy(t);r!==0&&(e=r,n=Tv(t,r))}if(n===1)throw n=Zu,Wo(t,0),ci(t,e),An(t,yt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,Sn,xs),An(t,yt()),null}function Cw(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(Ml=yt()+500,fm&&no())}}function Jo(t){wi!==null&&wi.tag===0&&!(Ue&6)&&sl();var e=Ue;Ue|=1;var n=nr.transition,r=qe;try{if(nr.transition=null,qe=1,t)return t()}finally{qe=r,nr.transition=n,Ue=e,!(Ue&6)&&no()}}function Sw(){Fn=Ka.current,tt(Ka)}function Wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,c2(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(ow(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kf();break;case 3:Ol(),tt(kn),tt(on),mw();break;case 5:pw(r);break;case 4:Ol();break;case 13:tt(it);break;case 19:tt(it);break;case 10:uw(r.type._context);break;case 22:case 23:Sw()}n=n.return}if(Mt=t,xt=t=Ai(t.current,null),Wt=Fn=e,kt=0,Zu=null,Tw=ym=Xo=0,Sn=yu=null,Ao!==null){for(e=0;e<Ao.length;e++)if(n=Ao[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ao=null}return t}function pk(t,e){do{var n=xt;try{if(cw(),vf.current=rp,np){for(var r=ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}np=!1}if(Zo=0,Dt=It=ot=null,mu=!1,Ku=0,xw.current=null,n===null||n.return===null){kt=1,Zu=e,xt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=pT(o);if(g!==null){g.flags&=-257,mT(g,o,a,i,e),g.mode&1&&fT(i,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){fT(i,c,e),bw();break e}l=Error(K(426))}}else if(nt&&a.mode&1){var x=pT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mT(x,o,a,i,e),aw(Dl(l,a));break e}}i=l=Dl(l,a),kt!==4&&(kt=2),yu===null?yu=[i]:yu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Z1(i,l,e);aT(i,E);break e;case 1:a=l;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ki===null||!ki.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=X1(i,a,e);aT(i,N);break e}}i=i.return}while(i!==null)}yk(n)}catch(M){e=M,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function mk(){var t=sp.current;return sp.current=rp,t===null?rp:t}function bw(){(kt===0||kt===3||kt===2)&&(kt=4),Mt===null||!(Xo&268435455)&&!(ym&268435455)||ci(Mt,Wt)}function ap(t,e){var n=Ue;Ue|=2;var r=mk();(Mt!==t||Wt!==e)&&(xs=null,Wo(t,e));do try{D2();break}catch(s){pk(t,s)}while(!0);if(cw(),Ue=n,sp.current=r,xt!==null)throw Error(K(261));return Mt=null,Wt=0,kt}function D2(){for(;xt!==null;)gk(xt)}function M2(){for(;xt!==null&&!oL();)gk(xt)}function gk(t){var e=_k(t.alternate,t,Fn);t.memoizedProps=t.pendingProps,e===null?yk(t):xt=e,xw.current=null}function yk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k2(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,xt=null;return}}else if(n=b2(n,e,Fn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);kt===0&&(kt=5)}function Eo(t,e,n){var r=qe,s=nr.transition;try{nr.transition=null,qe=1,L2(t,e,n,r)}finally{nr.transition=s,qe=r}return null}function L2(t,e,n,r){do sl();while(wi!==null);if(Ue&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gL(t,i),t===Mt&&(xt=Mt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gh||(Gh=!0,wk(zf,function(){return sl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nr.transition,nr.transition=null;var o=qe;qe=1;var a=Ue;Ue|=4,xw.current=null,A2(t,n),dk(n,t),n2(tv),Wf=!!ev,tv=ev=null,t.current=n,P2(n),aL(),Ue=a,qe=o,nr.transition=i}else t.current=n;if(Gh&&(Gh=!1,wi=t,op=s),i=t.pendingLanes,i===0&&(ki=null),uL(n.stateNode),An(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ip)throw ip=!1,t=Ev,Ev=null,t;return op&1&&t.tag!==0&&sl(),i=t.pendingLanes,i&1?t===xv?vu++:(vu=0,xv=t):vu=0,no(),null}function sl(){if(wi!==null){var t=Zb(op),e=nr.transition,n=qe;try{if(nr.transition=null,qe=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,op=0,Ue&6)throw Error(K(331));var s=Ue;for(Ue|=4,ie=t.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:gu(8,d,i)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var f=d.sibling,g=d.return;if(lk(d),d===c){ie=null;break}if(f!==null){f.return=g,ie=f;break}ie=g}}}var w=i.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ie=E;break e}ie=i.return}}var v=t.current;for(ie=v;ie!==null;){o=ie;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ie=I;else e:for(o=v;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gm(9,a)}}catch(M){ht(a,a.return,M)}if(a===o){ie=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,ie=N;break e}ie=a.return}}if(Ue=s,no(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(lm,t)}catch{}r=!0}return r}finally{qe=n,nr.transition=e}}return!1}function kT(t,e,n){e=Dl(n,e),e=Z1(t,e,1),t=bi(t,e,1),e=_n(),t!==null&&(Ud(t,1,e),An(t,e))}function ht(t,e,n){if(t.tag===3)kT(t,t,n);else for(;e!==null;){if(e.tag===3){kT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ki===null||!ki.has(r))){t=Dl(n,t),t=X1(e,t,1),e=bi(e,t,1),t=_n(),e!==null&&(Ud(e,1,t),An(e,t));break}}e=e.return}}function F2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Wt&n)===n&&(kt===4||kt===3&&(Wt&130023424)===Wt&&500>yt()-Iw?Wo(t,0):Tw|=n),An(t,e)}function vk(t,e){e===0&&(t.mode&1?(e=Fh,Fh<<=1,!(Fh&130023424)&&(Fh=4194304)):e=1);var n=_n();t=Ls(t,e),t!==null&&(Ud(t,e,n),An(t,n))}function V2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vk(t,n)}function j2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),vk(t,n)}var _k;_k=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bn=!1,S2(t,e,n);bn=!!(t.flags&131072)}else bn=!1,nt&&e.flags&1048576&&T1(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wf(t,e),t=e.pendingProps;var s=Al(e,on.current);rl(e,n),s=yw(null,e,r,t,s,n);var i=vw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rn(r)?(i=!0,Qf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hw(e),s.updater=mm,e.stateNode=s,s._reactInternals=e,uv(e,r,t,n),e=fv(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&iw(e),pn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=$2(r),t=fr(r,t),s){case 0:e=hv(null,e,r,t,n);break e;case 1:e=vT(null,e,r,t,n);break e;case 11:e=gT(null,e,r,t,n);break e;case 14:e=yT(null,e,r,fr(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),hv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),vT(t,e,r,s,n);case 3:e:{if(nk(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,R1(t,e),ep(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Dl(Error(K(423)),e),e=_T(t,e,r,n,s);break e}else if(r!==s){s=Dl(Error(K(424)),e),e=_T(t,e,r,n,s);break e}else for($n=Si(e.stateNode.containerInfo.firstChild),zn=e,nt=!0,gr=null,n=b1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pl(),r===s){e=Fs(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return A1(e),t===null&&av(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nv(r,s)?o=null:i!==null&&nv(r,i)&&(e.flags|=32),tk(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&av(e),null;case 13:return rk(t,e,n);case 4:return fw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nl(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),gT(t,e,r,s,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ye(Xf,r._currentValue),r._currentValue=o,i!==null)if(Nr(i.value,o)){if(i.children===s.children&&!kn.current){e=Fs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=As(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,rl(e,n),s=rr(s),r=r(s),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,s=fr(r,e.pendingProps),s=fr(r.type,s),yT(t,e,r,s,n);case 15:return J1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),wf(t,e),e.tag=1,Rn(r)?(t=!0,Qf(e)):t=!1,rl(e,n),Y1(e,r,s),uv(e,r,s,n),fv(null,e,r,!0,t,n);case 19:return sk(t,e,n);case 22:return ek(t,e,n)}throw Error(K(156,e.tag))};function wk(t,e){return Gb(t,e)}function U2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new U2(t,e,n,r)}function kw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $2(t){if(typeof t=="function")return kw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===G_)return 11;if(t===K_)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Va:return Ho(n.children,s,i,e);case q_:o=8,s|=8;break;case Dy:return t=tr(12,n,e,s|2),t.elementType=Dy,t.lanes=i,t;case My:return t=tr(13,n,e,s),t.elementType=My,t.lanes=i,t;case Ly:return t=tr(19,n,e,s),t.elementType=Ly,t.lanes=i,t;case Ab:return vm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kb:o=10;break e;case Rb:o=9;break e;case G_:o=11;break e;case K_:o=14;break e;case oi:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=tr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ho(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function vm(t,e,n,r){return t=tr(22,t,r,e),t.elementType=Ab,t.lanes=n,t.stateNode={isHidden:!1},t}function Qg(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function Yg(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ag(0),this.expirationTimes=Ag(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ag(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rw(t,e,n,r,s,i,o,a,l){return t=new z2(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hw(i),t}function B2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ek(t){if(!t)return Fi;t=t._reactInternals;e:{if(ma(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Rn(n))return E1(t,n,e)}return e}function xk(t,e,n,r,s,i,o,a,l){return t=Rw(n,r,!0,t,s,i,o,a,l),t.context=Ek(null),n=t.current,r=_n(),s=Ri(n),i=As(r,s),i.callback=e??null,bi(n,i,s),t.current.lanes=s,Ud(t,s,r),An(t,r),t}function _m(t,e,n,r){var s=e.current,i=_n(),o=Ri(s);return n=Ek(n),e.context===null?e.context=n:e.pendingContext=n,e=As(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bi(s,e,o),t!==null&&(kr(t,s,o,i),yf(t,s,o)),o}function lp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function RT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Aw(t,e){RT(t,e),(t=t.alternate)&&RT(t,e)}function W2(){return null}var Tk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pw(t){this._internalRoot=t}wm.prototype.render=Pw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));_m(t,e,null,null)};wm.prototype.unmount=Pw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jo(function(){_m(null,t,null,null)}),e[Ms]=null}};function wm(t){this._internalRoot=t}wm.prototype.unstable_scheduleHydration=function(t){if(t){var e=e1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<li.length&&e!==0&&e<li[n].priority;n++);li.splice(n,0,t),n===0&&n1(t)}};function Nw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function AT(){}function H2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=lp(o);i.call(c)}}var o=xk(e,r,t,0,null,!1,!1,"",AT);return t._reactRootContainer=o,t[Ms]=o.current,Bu(t.nodeType===8?t.parentNode:t),Jo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=lp(l);a.call(c)}}var l=Rw(t,0,!1,null,null,!1,!1,"",AT);return t._reactRootContainer=l,t[Ms]=l.current,Bu(t.nodeType===8?t.parentNode:t),Jo(function(){_m(e,l,n,r)}),l}function xm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=lp(o);a.call(l)}}_m(e,o,t,s)}else o=H2(n,e,t,s,r);return lp(o)}Xb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xc(e.pendingLanes);n!==0&&(Z_(e,n|1),An(e,yt()),!(Ue&6)&&(Ml=yt()+500,no()))}break;case 13:Jo(function(){var r=Ls(t,1);if(r!==null){var s=_n();kr(r,t,1,s)}}),Aw(t,1)}};X_=function(t){if(t.tag===13){var e=Ls(t,134217728);if(e!==null){var n=_n();kr(e,t,134217728,n)}Aw(t,134217728)}};Jb=function(t){if(t.tag===13){var e=Ri(t),n=Ls(t,e);if(n!==null){var r=_n();kr(n,t,e,r)}Aw(t,e)}};e1=function(){return qe};t1=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};qy=function(t,e,n){switch(e){case"input":if(jy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hm(r);if(!s)throw Error(K(90));Nb(r),jy(r,s)}}}break;case"textarea":Db(t,n);break;case"select":e=n.value,e!=null&&Ja(t,!!n.multiple,e,!1)}};$b=Cw;zb=Jo;var q2={usingClientEntryPoint:!1,Events:[zd,za,hm,jb,Ub,Cw]},jc={findFiberByHostInstance:Ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G2={bundleType:jc.bundleType,version:jc.version,rendererPackageName:jc.rendererPackageName,rendererConfig:jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hb(t),t===null?null:t.stateNode},findFiberByHostInstance:jc.findFiberByHostInstance||W2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{lm=Kh.inject(G2),Xr=Kh}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q2;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nw(e))throw Error(K(200));return B2(t,e,null,n)};Qn.createRoot=function(t,e){if(!Nw(t))throw Error(K(299));var n=!1,r="",s=Tk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rw(t,1,!1,null,null,n,!1,r,s),t[Ms]=e.current,Bu(t.nodeType===8?t.parentNode:t),new Pw(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Hb(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return Jo(t)};Qn.hydrate=function(t,e,n){if(!Em(e))throw Error(K(200));return xm(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!Nw(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Tk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xk(e,null,t,1,n??null,s,!1,i,o),t[Ms]=e.current,Bu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wm(e)};Qn.render=function(t,e,n){if(!Em(e))throw Error(K(200));return xm(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Em(t))throw Error(K(40));return t._reactRootContainer?(Jo(function(){xm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ms]=null})}),!0):!1};Qn.unstable_batchedUpdates=Cw;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Em(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return xm(t,e,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function Ik(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ik)}catch(t){console.error(t)}}Ik(),Ib.exports=Qn;var Wd=Ib.exports;const K2=hb(Wd);var Ck,PT=Wd;Ck=PT.createRoot,PT.hydrateRoot;function Q2(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var Sk={exports:{}},bk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=A;function Y2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z2=typeof Object.is=="function"?Object.is:Y2,X2=Ll.useState,J2=Ll.useEffect,eF=Ll.useLayoutEffect,tF=Ll.useDebugValue;function nF(t,e){var n=e(),r=X2({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return eF(function(){s.value=n,s.getSnapshot=e,Zg(s)&&i({inst:s})},[t,n,e]),J2(function(){return Zg(s)&&i({inst:s}),t(function(){Zg(s)&&i({inst:s})})},[t]),tF(n),n}function Zg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Z2(t,n)}catch{return!0}}function rF(t,e){return e()}var sF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rF:nF;bk.useSyncExternalStore=Ll.useSyncExternalStore!==void 0?Ll.useSyncExternalStore:sF;Sk.exports=bk;var iF=Sk.exports;const oF=FM.useInsertionEffect,aF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lF=aF?A.useLayoutEffect:A.useEffect,cF=oF||lF,kk=t=>{const e=A.useRef([t,(...n)=>e[0](...n)]).current;return cF(()=>{e[0]=t}),e[1]},uF="popstate",Ow="pushState",Dw="replaceState",dF="hashchange",NT=[uF,Ow,Dw,dF],hF=t=>{for(const e of NT)addEventListener(e,t);return()=>{for(const e of NT)removeEventListener(e,t)}},Rk=(t,e)=>iF.useSyncExternalStore(hF,t,e),fF=()=>location.search,pF=({ssrSearch:t=""}={})=>Rk(fF,()=>t),OT=()=>location.pathname,mF=({ssrPath:t}={})=>Rk(OT,t?()=>t:OT),gF=(t,{replace:e=!1,state:n=null}={})=>history[e?Dw:Ow](n,"",t),yF=(t={})=>[mF(t),gF],DT=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[DT]>"u"){for(const t of[Ow,Dw]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,DT,{value:!0})}const vF=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Ak=(t="")=>t==="/"?"":t,_F=(t,e)=>t[0]==="~"?t.slice(1):Ak(e)+t,wF=(t="",e)=>vF(MT(Ak(t)),MT(e)),MT=t=>{try{return decodeURI(t)}catch{return t}},Pk={hook:yF,searchHook:pF,parser:Q2,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Nk=A.createContext(Pk),rc=()=>A.useContext(Nk),Ok={},Dk=A.createContext(Ok),EF=()=>A.useContext(Dk),Tm=t=>{const[e,n]=t.hook(t);return[wF(t.base,e),kk((r,s)=>n(_F(r,t.base),s))]},ro=()=>Tm(rc()),Mw=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((h,f)=>[h,l[f]])):o.groups;let d={...l};return c&&Object.assign(d,c),d})(),...r?[a]:[]]:[!1,null]},xF=t=>Mw(rc().parser,t,ro()[0]),TF=({children:t,...e})=>{var d,h;const n=rc(),r=e.hook?Pk:n;let s=r;const[i,o]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((h=e.hook)==null?void 0:h.hrefs);let a=A.useRef({}),l=a.current,c=l;for(let f in r){const g=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===c&&g!==c[f]&&(a.current=c={...c}),c[f]=g,g!==r[f]&&(s=c)}return A.createElement(Nk.Provider,{value:s,children:t})},LT=({children:t,component:e},n)=>e?A.createElement(e,{params:n}):typeof t=="function"?t(n):t,IF=t=>{let e=A.useRef(Ok),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},ti=({path:t,nest:e,match:n,...r})=>{const s=rc(),[i]=Tm(s),[o,a,l]=n??Mw(s.parser,t,i,e),c=IF({...EF(),...a});if(!o)return null;const d=l?A.createElement(TF,{base:l},LT(r,c)):LT(r,c);return A.createElement(Dk.Provider,{value:c,children:d})},Qa=A.forwardRef((t,e)=>{const n=rc(),[r,s]=Tm(n),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:d,replace:h,state:f,...g}=t,w=kk(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(a==null||a(x),x.defaultPrevented||(x.preventDefault(),s(o,t)))}),_=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&A.isValidElement(c)?A.cloneElement(c,{onClick:w,href:_}):A.createElement("a",{...g,onClick:w,href:_,className:d!=null&&d.call?d(r===o):d,children:c,ref:e})}),Mk=t=>Array.isArray(t)?t.flatMap(e=>Mk(e&&e.type===A.Fragment?e.props.children:e)):[t],CF=({children:t,location:e})=>{const n=rc(),[r]=Tm(n);for(const s of Mk(t)){let i=0;if(A.isValidElement(s)&&(i=Mw(n.parser,s.props.path,e||r,s.props.nest))[0])return A.cloneElement(s,{match:i})}return null};var Hd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ea=typeof window>"u"||"Deno"in globalThis;function Xn(){}function SF(t,e){return typeof t=="function"?t(e):t}function Cv(t){return typeof t=="number"&&t>=0&&t!==1/0}function Lk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function il(t,e){return typeof t=="function"?t(e):t}function yr(t,e){return typeof t=="function"?t(e):t}function FT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Lw(o,e.options))return!1}else if(!Ju(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function VT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Xu(e.options.mutationKey)!==Xu(i))return!1}else if(!Ju(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Lw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Xu)(t)}function Xu(t){return JSON.stringify(t,(e,n)=>bv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ju(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ju(t[n],e[n])):!1}function Fk(t,e){if(t===e)return t;const n=jT(t)&&jT(e);if(n||bv(t)&&bv(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=Fk(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Sv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function jT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function bv(t){if(!UT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!UT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function UT(t){return Object.prototype.toString.call(t)==="[object Object]"}function bF(t){return new Promise(e=>{setTimeout(e,t)})}function kv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Fk(t,e):e}function kF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function RF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fw=Symbol();function Vk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Fo,hi,gl,rb,AF=(rb=class extends Hd{constructor(){super();ve(this,Fo);ve(this,hi);ve(this,gl);oe(this,gl,e=>{if(!ea&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,hi)||this.setEventListener(L(this,gl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,hi))==null||e.call(this),oe(this,hi,void 0))}setEventListener(e){var n;oe(this,gl,e),(n=L(this,hi))==null||n.call(this),oe(this,hi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,Fo)!==e&&(oe(this,Fo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,Fo)=="boolean"?L(this,Fo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fo=new WeakMap,hi=new WeakMap,gl=new WeakMap,rb),Vw=new AF,yl,fi,vl,sb,PF=(sb=class extends Hd{constructor(){super();ve(this,yl,!0);ve(this,fi);ve(this,vl);oe(this,vl,e=>{if(!ea&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,fi)||this.setEventListener(L(this,vl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,fi))==null||e.call(this),oe(this,fi,void 0))}setEventListener(e){var n;oe(this,vl,e),(n=L(this,fi))==null||n.call(this),oe(this,fi,e(this.setOnline.bind(this)))}setOnline(e){L(this,yl)!==e&&(oe(this,yl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,yl)}},yl=new WeakMap,fi=new WeakMap,vl=new WeakMap,sb),cp=new PF;function Rv(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function NF(t){return Math.min(1e3*2**t,3e4)}function jk(t){return(t??"online")==="online"?cp.isOnline():!0}var Uk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Xg(t){return t instanceof Uk}function $k(t){let e=!1,n=0,r=!1,s;const i=Rv(),o=_=>{var x;r||(f(new Uk(_)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Vw.isFocused()&&(t.networkMode==="always"||cp.isOnline())&&t.canRun(),d=()=>jk(t.networkMode)&&t.canRun(),h=_=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,_),s==null||s(),i.resolve(_))},f=_=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,_),s==null||s(),i.reject(_))},g=()=>new Promise(_=>{var x;s=E=>{(r||c())&&_(E)},(x=t.onPause)==null||x.call(t)}).then(()=>{var _;s=void 0,r||(_=t.onContinue)==null||_.call(t)}),w=()=>{if(r)return;let _;const x=n===0?t.initialPromise:void 0;try{_=x??t.fn()}catch(E){_=Promise.reject(E)}Promise.resolve(_).then(h).catch(E=>{var F;if(r)return;const v=t.retry??(ea?0:3),I=t.retryDelay??NF,N=typeof I=="function"?I(n,E):I,M=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,E);if(e||!M){f(E);return}n++,(F=t.onFail)==null||F.call(t,n,E),bF(N).then(()=>c()?void 0:g()).then(()=>{e?f(E):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():g().then(w),i)}}function OF(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var $t=OF(),Vo,ib,zk=(ib=class{constructor(){ve(this,Vo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cv(this.gcTime)&&oe(this,Vo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ea?1/0:5*60*1e3))}clearGcTimeout(){L(this,Vo)&&(clearTimeout(L(this,Vo)),oe(this,Vo,void 0))}},Vo=new WeakMap,ib),_l,wl,Zn,Jt,Md,jo,pr,ws,ob,DF=(ob=class extends zk{constructor(n){super();ve(this,pr);ve(this,_l);ve(this,wl);ve(this,Zn);ve(this,Jt);ve(this,Md);ve(this,jo);oe(this,jo,!1),oe(this,Md,n.defaultOptions),this.setOptions(n.options),this.observers=[],oe(this,Zn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,oe(this,_l,MF(this.options)),this.state=n.state??L(this,_l),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=L(this,Jt))==null?void 0:n.promise}setOptions(n){this.options={...L(this,Md),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Zn).remove(this)}setData(n,r){const s=kv(this.state.data,n,this.options);return Oe(this,pr,ws).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Oe(this,pr,ws).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=L(this,Jt))==null?void 0:s.promise;return(i=L(this,Jt))==null||i.cancel(n),r?r.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,_l))}isActive(){return this.observers.some(n=>yr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Lk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Jt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Jt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),L(this,Zn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(L(this,Jt)&&(L(this,jo)?L(this,Jt).cancel({revert:!0}):L(this,Jt).cancelRetry()),this.scheduleGc()),L(this,Zn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Oe(this,pr,ws).call(this,{type:"invalidate"})}fetch(n,r){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,Jt))return L(this,Jt).continueRetry(),L(this,Jt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const f=this.observers.find(g=>g.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(oe(this,jo,!0),s.signal)})},o=()=>{const f=Vk(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),oe(this,jo,!1),this.options.persister?this.options.persister(f,g,this):f(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),oe(this,wl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Oe(this,pr,ws).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var g,w,_,x;Xg(f)&&f.silent||Oe(this,pr,ws).call(this,{type:"error",error:f}),Xg(f)||((w=(g=L(this,Zn).config).onError)==null||w.call(g,f,this),(x=(_=L(this,Zn).config).onSettled)==null||x.call(_,this.state.data,f,this)),this.scheduleGc()};return oe(this,Jt,$k({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var g,w,_,x;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(E){l(E);return}(w=(g=L(this,Zn).config).onSuccess)==null||w.call(g,f,this),(x=(_=L(this,Zn).config).onSettled)==null||x.call(_,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,g)=>{Oe(this,pr,ws).call(this,{type:"failed",failureCount:f,error:g})},onPause:()=>{Oe(this,pr,ws).call(this,{type:"pause"})},onContinue:()=>{Oe(this,pr,ws).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),L(this,Jt).start()}},_l=new WeakMap,wl=new WeakMap,Zn=new WeakMap,Jt=new WeakMap,Md=new WeakMap,jo=new WeakMap,pr=new WeakSet,ws=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Bk(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Xg(i)&&i.revert&&L(this,wl)?{...L(this,wl),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),$t.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,Zn).notify({query:this,type:"updated",action:n})})},ob);function Bk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function MF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var $r,ab,LF=(ab=class extends Hd{constructor(e={}){super();ve(this,$r);this.config=e,oe(this,$r,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Lw(s,n);let o=this.get(i);return o||(o=new DF({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,$r).has(e.queryHash)||(L(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,$r).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,$r).get(e)}getAll(){return[...L(this,$r).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>FT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>FT(e,r)):n}notify(e){$t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,ab),zr,dn,Uo,Br,ii,lb,FF=(lb=class extends zk{constructor(n){super();ve(this,Br);ve(this,zr);ve(this,dn);ve(this,Uo);this.mutationId=n.mutationId,oe(this,dn,n.mutationCache),oe(this,zr,[]),this.state=n.state||VF(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){L(this,zr).includes(n)||(L(this,zr).push(n),this.clearGcTimeout(),L(this,dn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){oe(this,zr,L(this,zr).filter(r=>r!==n)),this.scheduleGc(),L(this,dn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){L(this,zr).length||(this.state.status==="pending"?this.scheduleGc():L(this,dn).remove(this))}continue(){var n;return((n=L(this,Uo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,l,c,d,h,f,g,w,_,x,E,v,I,N,M,F,C,T;oe(this,Uo,$k({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(S,R)=>{Oe(this,Br,ii).call(this,{type:"failed",failureCount:S,error:R})},onPause:()=>{Oe(this,Br,ii).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Br,ii).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,dn).canRun(this)}));const r=this.state.status==="pending",s=!L(this,Uo).canStart();try{if(!r){Oe(this,Br,ii).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=L(this,dn).config).onMutate)==null?void 0:o.call(i,n,this));const R=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));R!==this.state.context&&Oe(this,Br,ii).call(this,{type:"pending",context:R,variables:n,isPaused:s})}const S=await L(this,Uo).start();return await((d=(c=L(this,dn).config).onSuccess)==null?void 0:d.call(c,S,n,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,S,n,this.state.context)),await((w=(g=L(this,dn).config).onSettled)==null?void 0:w.call(g,S,null,this.state.variables,this.state.context,this)),await((x=(_=this.options).onSettled)==null?void 0:x.call(_,S,null,n,this.state.context)),Oe(this,Br,ii).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(E=L(this,dn).config).onError)==null?void 0:v.call(E,S,n,this.state.context,this)),await((N=(I=this.options).onError)==null?void 0:N.call(I,S,n,this.state.context)),await((F=(M=L(this,dn).config).onSettled)==null?void 0:F.call(M,void 0,S,this.state.variables,this.state.context,this)),await((T=(C=this.options).onSettled)==null?void 0:T.call(C,void 0,S,n,this.state.context)),S}finally{Oe(this,Br,ii).call(this,{type:"error",error:S})}}finally{L(this,dn).runNext(this)}}},zr=new WeakMap,dn=new WeakMap,Uo=new WeakMap,Br=new WeakSet,ii=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$t.batch(()=>{L(this,zr).forEach(s=>{s.onMutationUpdate(n)}),L(this,dn).notify({mutation:this,type:"updated",action:n})})},lb);function VF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,Ld,cb,jF=(cb=class extends Hd{constructor(e={}){super();ve(this,Ln);ve(this,Ld);this.config=e,oe(this,Ln,new Map),oe(this,Ld,Date.now())}build(e,n,r){const s=new FF({mutationCache:this,mutationId:++Ph(this,Ld)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Qh(e),r=L(this,Ln).get(n)??[];r.push(e),L(this,Ln).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Qh(e);if(L(this,Ln).has(n)){const s=(r=L(this,Ln).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?L(this,Ln).delete(n):L(this,Ln).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=L(this,Ln).get(Qh(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=L(this,Ln).get(Qh(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){$t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...L(this,Ln).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>VT(n,r))}findAll(e={}){return this.getAll().filter(n=>VT(e,n))}notify(e){$t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return $t.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},Ln=new WeakMap,Ld=new WeakMap,cb);function Qh(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function $T(t){return{onFetch:(e,n)=>{var d,h,f,g,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let _=!1;const x=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},E=Vk(e.options,e.fetchOptions),v=async(I,N,M)=>{if(_)return Promise.reject();if(N==null&&I.pages.length)return Promise.resolve(I);const F={queryKey:e.queryKey,pageParam:N,direction:M?"backward":"forward",meta:e.options.meta};x(F);const C=await E(F),{maxPages:T}=e.options,S=M?RF:kF;return{pages:S(I.pages,C,T),pageParams:S(I.pageParams,N,T)}};if(s&&i.length){const I=s==="backward",N=I?UF:zT,M={pages:i,pageParams:o},F=N(r,M);a=await v(M,F,I)}else{const I=t??i.length;do{const N=l===0?o[0]??r.initialPageParam:zT(r,a);if(l>0&&N==null)break;a=await v(a,N),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var _,x;return(x=(_=e.options).persister)==null?void 0:x.call(_,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function zT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function UF(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var dt,pi,mi,El,xl,gi,Tl,Il,ub,$F=(ub=class{constructor(t={}){ve(this,dt);ve(this,pi);ve(this,mi);ve(this,El);ve(this,xl);ve(this,gi);ve(this,Tl);ve(this,Il);oe(this,dt,t.queryCache||new LF),oe(this,pi,t.mutationCache||new jF),oe(this,mi,t.defaultOptions||{}),oe(this,El,new Map),oe(this,xl,new Map),oe(this,gi,0)}mount(){Ph(this,gi)._++,L(this,gi)===1&&(oe(this,Tl,Vw.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,dt).onFocus())})),oe(this,Il,cp.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,dt).onOnline())})))}unmount(){var t,e;Ph(this,gi)._--,L(this,gi)===0&&((t=L(this,Tl))==null||t.call(this),oe(this,Tl,void 0),(e=L(this,Il))==null||e.call(this),oe(this,Il,void 0))}isFetching(t){return L(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,dt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=L(this,dt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(il(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return L(this,dt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,dt).get(r.queryHash),i=s==null?void 0:s.state.data,o=SF(e,i);if(o!==void 0)return L(this,dt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return $t.batch(()=>L(this,dt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,dt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,dt);$t.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,dt),r={type:"active",...t};return $t.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=$t.batch(()=>L(this,dt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xn).catch(Xn)}invalidateQueries(t={},e={}){return $t.batch(()=>{if(L(this,dt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=$t.batch(()=>L(this,dt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,dt).build(this,e);return n.isStaleByTime(il(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=$T(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=$T(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return cp.isOnline()?L(this,pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,dt)}getMutationCache(){return L(this,pi)}getDefaultOptions(){return L(this,mi)}setDefaultOptions(t){oe(this,mi,t)}setQueryDefaults(t,e){L(this,El).set(Xu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,El).values()];let n={};return e.forEach(r=>{Ju(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){L(this,xl).set(Xu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,xl).values()];let n={};return e.forEach(r=>{Ju(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,mi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Lw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Fw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,mi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,dt).clear(),L(this,pi).clear()}},dt=new WeakMap,pi=new WeakMap,mi=new WeakMap,El=new WeakMap,xl=new WeakMap,gi=new WeakMap,Tl=new WeakMap,Il=new WeakMap,ub),In,De,Fd,hn,$o,Cl,yi,Wr,Vd,Sl,bl,zo,Bo,vi,kl,He,eu,Av,Pv,Nv,Ov,Dv,Mv,Lv,Wk,db,zF=(db=class extends Hd{constructor(e,n){super();ve(this,He);ve(this,In);ve(this,De);ve(this,Fd);ve(this,hn);ve(this,$o);ve(this,Cl);ve(this,yi);ve(this,Wr);ve(this,Vd);ve(this,Sl);ve(this,bl);ve(this,zo);ve(this,Bo);ve(this,vi);ve(this,kl,new Set);this.options=n,oe(this,In,e),oe(this,Wr,null),oe(this,yi,Rv()),this.options.experimental_prefetchInRender||L(this,yi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,De).addObserver(this),BT(L(this,De),this.options)?Oe(this,He,eu).call(this):this.updateResult(),Oe(this,He,Ov).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fv(L(this,De),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fv(L(this,De),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,He,Dv).call(this),Oe(this,He,Mv).call(this),L(this,De).removeObserver(this)}setOptions(e,n){const r=this.options,s=L(this,De);if(this.options=L(this,In).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yr(this.options.enabled,L(this,De))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Oe(this,He,Lv).call(this),L(this,De).setOptions(this.options),r._defaulted&&!Sv(this.options,r)&&L(this,In).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,De),observer:this});const i=this.hasListeners();i&&WT(L(this,De),s,this.options,r)&&Oe(this,He,eu).call(this),this.updateResult(n),i&&(L(this,De)!==s||yr(this.options.enabled,L(this,De))!==yr(r.enabled,L(this,De))||il(this.options.staleTime,L(this,De))!==il(r.staleTime,L(this,De)))&&Oe(this,He,Av).call(this);const o=Oe(this,He,Pv).call(this);i&&(L(this,De)!==s||yr(this.options.enabled,L(this,De))!==yr(r.enabled,L(this,De))||o!==L(this,vi))&&Oe(this,He,Nv).call(this,o)}getOptimisticResult(e){const n=L(this,In).getQueryCache().build(L(this,In),e),r=this.createResult(n,e);return WF(this,r)&&(oe(this,hn,r),oe(this,Cl,this.options),oe(this,$o,L(this,De).state)),r}getCurrentResult(){return L(this,hn)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){L(this,kl).add(e)}getCurrentQuery(){return L(this,De)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=L(this,In).defaultQueryOptions(e),r=L(this,In).getQueryCache().build(L(this,In),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Oe(this,He,eu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,hn)))}createResult(e,n){var T;const r=L(this,De),s=this.options,i=L(this,hn),o=L(this,$o),a=L(this,Cl),c=e!==r?e.state:L(this,Fd),{state:d}=e;let h={...d},f=!1,g;if(n._optimisticResults){const S=this.hasListeners(),R=!S&&BT(e,n),O=S&&WT(e,r,n,s);(R||O)&&(h={...h,...Bk(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:_,status:x}=h;if(n.select&&h.data!==void 0)if(i&&h.data===(o==null?void 0:o.data)&&n.select===L(this,Vd))g=L(this,Sl);else try{oe(this,Vd,n.select),g=n.select(h.data),g=kv(i==null?void 0:i.data,g,n),oe(this,Sl,g),oe(this,Wr,null)}catch(S){oe(this,Wr,S)}else g=h.data;if(n.placeholderData!==void 0&&g===void 0&&x==="pending"){let S;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))S=i.data;else if(S=typeof n.placeholderData=="function"?n.placeholderData((T=L(this,bl))==null?void 0:T.state.data,L(this,bl)):n.placeholderData,n.select&&S!==void 0)try{S=n.select(S),oe(this,Wr,null)}catch(R){oe(this,Wr,R)}S!==void 0&&(x="success",g=kv(i==null?void 0:i.data,S,n),f=!0)}L(this,Wr)&&(w=L(this,Wr),g=L(this,Sl),_=Date.now(),x="error");const E=h.fetchStatus==="fetching",v=x==="pending",I=x==="error",N=v&&E,M=g!==void 0,C={status:x,fetchStatus:h.fetchStatus,isPending:v,isSuccess:x==="success",isError:I,isInitialLoading:N,isLoading:N,data:g,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:_,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:E,isRefetching:E&&!v,isLoadingError:I&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:I&&M,isStale:jw(e,n),refetch:this.refetch,promise:L(this,yi)};if(this.options.experimental_prefetchInRender){const S=P=>{C.status==="error"?P.reject(C.error):C.data!==void 0&&P.resolve(C.data)},R=()=>{const P=oe(this,yi,C.promise=Rv());S(P)},O=L(this,yi);switch(O.status){case"pending":e.queryHash===r.queryHash&&S(O);break;case"fulfilled":(C.status==="error"||C.data!==O.value)&&R();break;case"rejected":(C.status!=="error"||C.error!==O.reason)&&R();break}}return C}updateResult(e){const n=L(this,hn),r=this.createResult(L(this,De),this.options);if(oe(this,$o,L(this,De).state),oe(this,Cl,this.options),L(this,$o).data!==void 0&&oe(this,bl,L(this,De)),Sv(r,n))return;oe(this,hn,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!L(this,kl).size)return!0;const l=new Set(a??L(this,kl));return this.options.throwOnError&&l.add("error"),Object.keys(L(this,hn)).some(c=>{const d=c;return L(this,hn)[d]!==n[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Oe(this,He,Wk).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,He,Ov).call(this)}},In=new WeakMap,De=new WeakMap,Fd=new WeakMap,hn=new WeakMap,$o=new WeakMap,Cl=new WeakMap,yi=new WeakMap,Wr=new WeakMap,Vd=new WeakMap,Sl=new WeakMap,bl=new WeakMap,zo=new WeakMap,Bo=new WeakMap,vi=new WeakMap,kl=new WeakMap,He=new WeakSet,eu=function(e){Oe(this,He,Lv).call(this);let n=L(this,De).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Xn)),n},Av=function(){Oe(this,He,Dv).call(this);const e=il(this.options.staleTime,L(this,De));if(ea||L(this,hn).isStale||!Cv(e))return;const r=Lk(L(this,hn).dataUpdatedAt,e)+1;oe(this,zo,setTimeout(()=>{L(this,hn).isStale||this.updateResult()},r))},Pv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,De)):this.options.refetchInterval)??!1},Nv=function(e){Oe(this,He,Mv).call(this),oe(this,vi,e),!(ea||yr(this.options.enabled,L(this,De))===!1||!Cv(L(this,vi))||L(this,vi)===0)&&oe(this,Bo,setInterval(()=>{(this.options.refetchIntervalInBackground||Vw.isFocused())&&Oe(this,He,eu).call(this)},L(this,vi)))},Ov=function(){Oe(this,He,Av).call(this),Oe(this,He,Nv).call(this,Oe(this,He,Pv).call(this))},Dv=function(){L(this,zo)&&(clearTimeout(L(this,zo)),oe(this,zo,void 0))},Mv=function(){L(this,Bo)&&(clearInterval(L(this,Bo)),oe(this,Bo,void 0))},Lv=function(){const e=L(this,In).getQueryCache().build(L(this,In),this.options);if(e===L(this,De))return;const n=L(this,De);oe(this,De,e),oe(this,Fd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Wk=function(e){$t.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(L(this,hn))}),L(this,In).getQueryCache().notify({query:L(this,De),type:"observerResultsUpdated"})})},db);function BF(t,e){return yr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function BT(t,e){return BF(t,e)||t.state.data!==void 0&&Fv(t,e,e.refetchOnMount)}function Fv(t,e,n){if(yr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&jw(t,e)}return!1}function WT(t,e,n,r){return(t!==e||yr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&jw(t,n)}function jw(t,e){return yr(e.enabled,t)!==!1&&t.isStaleByTime(il(e.staleTime,t))}function WF(t,e){return!Sv(t.getCurrentResult(),e)}var Hk=A.createContext(void 0),HF=t=>{const e=A.useContext(Hk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qF=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Hk.Provider,{value:t,children:e})),qk=A.createContext(!1),GF=()=>A.useContext(qk);qk.Provider;function KF(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QF=A.createContext(KF()),YF=()=>A.useContext(QF);function ZF(t,e){return typeof t=="function"?t(...e):!!t}function HT(){}var XF=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},JF=t=>{A.useEffect(()=>{t.clearReset()},[t])},eV=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&ZF(n,[t.error,r]),tV=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},nV=(t,e)=>t.isLoading&&t.isFetching&&!e,rV=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,qT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function sV(t,e,n){var d,h,f,g,w;const r=HF(),s=GF(),i=YF(),o=r.defaultQueryOptions(t);(h=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=s?"isRestoring":"optimistic",tV(o),XF(o,i),JF(i);const a=!r.getQueryCache().get(o.queryHash),[l]=A.useState(()=>new e(r,o)),c=l.getOptimisticResult(o);if(A.useSyncExternalStore(A.useCallback(_=>{const x=s?HT:l.subscribe($t.batchCalls(_));return l.updateResult(),x},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),A.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),rV(o,c))throw qT(o,l,i);if(eV({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;if((g=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,c),o.experimental_prefetchInRender&&!ea&&nV(c,s)){const _=a?qT(o,l,i):(w=r.getQueryCache().get(o.queryHash))==null?void 0:w.promise;_==null||_.catch(HT).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function Fl(t,e){return sV(t,zF)}async function iV(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const oV=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await iV(n),await n.json())},aV=new $F({defaultOptions:{queries:{queryFn:oV({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),lV=1,cV=1e6;let Jg=0;function uV(){return Jg=(Jg+1)%Number.MAX_SAFE_INTEGER,Jg.toString()}const ey=new Map,GT=t=>{if(ey.has(t))return;const e=setTimeout(()=>{ey.delete(t),_u({type:"REMOVE_TOAST",toastId:t})},cV);ey.set(t,e)},dV=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,lV)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?GT(n):t.toasts.forEach(r=>{GT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},If=[];let Cf={toasts:[]};function _u(t){Cf=dV(Cf,t),If.forEach(e=>{e(Cf)})}function hV({...t}){const e=uV(),n=s=>_u({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>_u({type:"DISMISS_TOAST",toastId:e});return _u({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Im(){const[t,e]=A.useState(Cf);return A.useEffect(()=>(If.push(e),()=>{const n=If.indexOf(e);n>-1&&If.splice(n,1)}),[t]),{...t,toast:hV,dismiss:n=>_u({type:"DISMISS_TOAST",toastId:n})}}function Et(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function KT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Gk(...t){return e=>{let n=!1;const r=t.map(s=>{const i=KT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():KT(t[s],null)}}}}function ir(...t){return A.useCallback(Gk(...t),t)}function sc(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:g,...w}=h,_=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,x=A.useMemo(()=>w,Object.values(w));return m.jsx(_.Provider,{value:x,children:g})};c.displayName=i+"Provider";function d(h,f){var _;const g=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,w=A.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,fV(s,...e)]}function fV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function up(t){const e=pV(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(gV);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Kk=up("Slot");function pV(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=vV(s),a=yV(i,s.props);return s.type!==A.Fragment&&(a.ref=r?Gk(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Qk=Symbol("radix.slottable");function mV(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Qk,e}function gV(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qk}function yV(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function vV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function _V(t){const e=t+"CollectionProvider",[n,r]=sc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:x,children:E}=_,v=Ee.useRef(null),I=Ee.useRef(new Map).current;return m.jsx(s,{scope:x,itemMap:I,collectionRef:v,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=up(a),c=Ee.forwardRef((_,x)=>{const{scope:E,children:v}=_,I=i(a,E),N=ir(x,I.collectionRef);return m.jsx(l,{ref:N,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=up(d),g=Ee.forwardRef((_,x)=>{const{scope:E,children:v,...I}=_,N=Ee.useRef(null),M=ir(x,N),F=i(d,E);return Ee.useEffect(()=>(F.itemMap.set(N,{ref:N,...I}),()=>void F.itemMap.delete(N))),m.jsx(f,{[h]:"",ref:M,children:v})});g.displayName=d;function w(_){const x=i(t+"CollectionConsumer",_);return Ee.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const I=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((F,C)=>I.indexOf(F.ref.current)-I.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,r]}var wV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],At=wV.reduce((t,e)=>{const n=up(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Yk(t,e){t&&Wd.flushSync(()=>t.dispatchEvent(e))}function ss(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function EV(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var xV="DismissableLayer",Vv="dismissableLayer.update",TV="dismissableLayer.pointerDownOutside",IV="dismissableLayer.focusOutside",QT,Zk=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uw=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Zk),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),w=ir(e,C=>h(C)),_=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=_.indexOf(x),v=d?_.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,N=v>=E,M=SV(C=>{const T=C.target,S=[...c.branches].some(R=>R.contains(T));!N||S||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),F=bV(C=>{const T=C.target;[...c.branches].some(R=>R.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return EV(C=>{v===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),YT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=QT)}},[d,f,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),YT())},[d,c]),A.useEffect(()=>{const C=()=>g({});return document.addEventListener(Vv,C),()=>document.removeEventListener(Vv,C)},[]),m.jsx(At.div,{...l,ref:w,style:{pointerEvents:I?N?"auto":"none":void 0,...t.style},onFocusCapture:Et(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Et(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Et(t.onPointerDownCapture,M.onPointerDownCapture)})});Uw.displayName=xV;var CV="DismissableLayerBranch",Xk=A.forwardRef((t,e)=>{const n=A.useContext(Zk),r=A.useRef(null),s=ir(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(At.div,{...t,ref:s})});Xk.displayName=CV;function SV(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Jk(TV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function bV(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&Jk(IV,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YT(){const t=new CustomEvent(Vv);document.dispatchEvent(t)}function Jk(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Yk(s,i):s.dispatchEvent(i)}var kV=Uw,RV=Xk,ta=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},AV="Portal",eR=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);ta(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?K2.createPortal(m.jsx(At.div,{...r,ref:e}),o):null});eR.displayName=AV;function PV(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var $w=t=>{const{present:e,children:n}=t,r=NV(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=ir(r.ref,OV(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};$w.displayName="Presence";function NV(t){const[e,n]=A.useState(),r=A.useRef({}),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=PV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Yh(r.current);i.current=a==="mounted"?c:"none"},[a]),ta(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,g=Yh(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),ta(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const _=Yh(r.current).includes(g.animationName);if(g.target===e&&_&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=g=>{g.target===e&&(i.current=Yh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Yh(t){return(t==null?void 0:t.animationName)||"none"}function OV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tR({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=DV({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ss(n),l=A.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function DV({defaultProp:t,onChange:e}){const n=A.useState(t),[r]=n,s=A.useRef(r),i=ss(e);return A.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var MV="VisuallyHidden",Cm=A.forwardRef((t,e)=>m.jsx(At.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Cm.displayName=MV;var LV=Cm,zw="ToastProvider",[Bw,FV,VV]=_V("Toast"),[nR,UQ]=sc("Toast",[VV]),[jV,Sm]=nR(zw),rR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${zw}\`. Expected non-empty \`string\`.`),m.jsx(Bw.Provider,{scope:e,children:m.jsx(jV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(g=>g+1),[]),onToastRemove:A.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};rR.displayName=zw;var sR="ToastViewport",UV=["F8"],jv="toast.viewportPause",Uv="toast.viewportResume",iR=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=UV,label:s="Notifications ({hotkey})",...i}=t,o=Sm(sR,n),a=FV(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=ir(e,h,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;A.useEffect(()=>{const x=E=>{var I;r.length!==0&&r.every(N=>E[N]||E.code===N)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),A.useEffect(()=>{const x=l.current,E=h.current;if(w&&x&&E){const v=()=>{if(!o.isClosePausedRef.current){const F=new CustomEvent(jv);E.dispatchEvent(F),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const F=new CustomEvent(Uv);E.dispatchEvent(F),o.isClosePausedRef.current=!1}},N=F=>{!x.contains(F.relatedTarget)&&I()},M=()=>{x.contains(document.activeElement)||I()};return x.addEventListener("focusin",v),x.addEventListener("focusout",N),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",M),window.addEventListener("blur",v),window.addEventListener("focus",I),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",N),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",M),window.removeEventListener("blur",v),window.removeEventListener("focus",I)}}},[w,o.isClosePausedRef]);const _=A.useCallback(({tabbingDirection:x})=>{const v=a().map(I=>{const N=I.ref.current,M=[N,...JV(N)];return x==="forwards"?M:M.reverse()});return(x==="forwards"?v.reverse():v).flat()},[a]);return A.useEffect(()=>{const x=h.current;if(x){const E=v=>{var M,F,C;const I=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!I){const T=document.activeElement,S=v.shiftKey;if(v.target===x&&S){(M=c.current)==null||M.focus();return}const P=_({tabbingDirection:S?"backwards":"forwards"}),k=P.findIndex(H=>H===T);ty(P.slice(k+1))?v.preventDefault():S?(F=c.current)==null||F.focus():(C=d.current)==null||C.focus()}};return x.addEventListener("keydown",E),()=>x.removeEventListener("keydown",E)}},[a,_]),m.jsxs(RV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&m.jsx($v,{ref:c,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"forwards"});ty(x)}}),m.jsx(Bw.Slot,{scope:n,children:m.jsx(At.ol,{tabIndex:-1,...i,ref:f})}),w&&m.jsx($v,{ref:d,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"backwards"});ty(x)}})]})});iR.displayName=sR;var oR="ToastFocusProxy",$v=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Sm(oR,n);return m.jsx(Cm,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});$v.displayName=oR;var bm="Toast",$V="toast.swipeStart",zV="toast.swipeMove",BV="toast.swipeCancel",WV="toast.swipeEnd",aR=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=tR({prop:r,defaultProp:s,onChange:i});return m.jsx($w,{present:n||a,children:m.jsx(GV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ss(t.onPause),onResume:ss(t.onResume),onSwipeStart:Et(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Et(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Et(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Et(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});aR.displayName=bm;var[HV,qV]=nR(bm,{onClose(){}}),GV=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...w}=t,_=Sm(bm,n),[x,E]=A.useState(null),v=ir(e,H=>E(H)),I=A.useRef(null),N=A.useRef(null),M=s||_.duration,F=A.useRef(0),C=A.useRef(M),T=A.useRef(0),{onToastAdd:S,onToastRemove:R}=_,O=ss(()=>{var ue;(x==null?void 0:x.contains(document.activeElement))&&((ue=_.viewport)==null||ue.focus()),o()}),P=A.useCallback(H=>{!H||H===1/0||(window.clearTimeout(T.current),F.current=new Date().getTime(),T.current=window.setTimeout(O,H))},[O]);A.useEffect(()=>{const H=_.viewport;if(H){const ue=()=>{P(C.current),c==null||c()},ce=()=>{const ge=new Date().getTime()-F.current;C.current=C.current-ge,window.clearTimeout(T.current),l==null||l()};return H.addEventListener(jv,ce),H.addEventListener(Uv,ue),()=>{H.removeEventListener(jv,ce),H.removeEventListener(Uv,ue)}}},[_.viewport,M,l,c,P]),A.useEffect(()=>{i&&!_.isClosePausedRef.current&&P(M)},[i,M,_.isClosePausedRef,P]),A.useEffect(()=>(S(),()=>R()),[S,R]);const k=A.useMemo(()=>x?pR(x):null,[x]);return _.viewport?m.jsxs(m.Fragment,{children:[k&&m.jsx(KV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),m.jsx(HV,{scope:n,onClose:O,children:Wd.createPortal(m.jsx(Bw.ItemSlot,{scope:n,children:m.jsx(kV,{asChild:!0,onEscapeKeyDown:Et(a,()=>{_.isFocusedToastEscapeKeyDownRef.current||O(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(At.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":_.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Et(t.onKeyDown,H=>{H.key==="Escape"&&(a==null||a(H.nativeEvent),H.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Et(t.onPointerDown,H=>{H.button===0&&(I.current={x:H.clientX,y:H.clientY})}),onPointerMove:Et(t.onPointerMove,H=>{if(!I.current)return;const ue=H.clientX-I.current.x,ce=H.clientY-I.current.y,ge=!!N.current,z=["left","right"].includes(_.swipeDirection),Z=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ae=z?Z(0,ue):0,_e=z?0:Z(0,ce),Pe=H.pointerType==="touch"?10:2,Be={x:ae,y:_e},Gt={originalEvent:H,delta:Be};ge?(N.current=Be,Zh(zV,h,Gt,{discrete:!1})):ZT(Be,_.swipeDirection,Pe)?(N.current=Be,Zh($V,d,Gt,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ue)>Pe||Math.abs(ce)>Pe)&&(I.current=null)}),onPointerUp:Et(t.onPointerUp,H=>{const ue=N.current,ce=H.target;if(ce.hasPointerCapture(H.pointerId)&&ce.releasePointerCapture(H.pointerId),N.current=null,I.current=null,ue){const ge=H.currentTarget,z={originalEvent:H,delta:ue};ZT(ue,_.swipeDirection,_.swipeThreshold)?Zh(WV,g,z,{discrete:!0}):Zh(BV,f,z,{discrete:!0}),ge.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),KV=t=>{const{__scopeToast:e,children:n,...r}=t,s=Sm(bm,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return ZV(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(eR,{asChild:!0,children:m.jsx(Cm,{...r,children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})})})},QV="ToastTitle",lR=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(At.div,{...r,ref:e})});lR.displayName=QV;var YV="ToastDescription",cR=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(At.div,{...r,ref:e})});cR.displayName=YV;var uR="ToastAction",dR=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(fR,{altText:n,asChild:!0,children:m.jsx(Ww,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${uR}\`. Expected non-empty \`string\`.`),null)});dR.displayName=uR;var hR="ToastClose",Ww=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=qV(hR,n);return m.jsx(fR,{asChild:!0,children:m.jsx(At.button,{type:"button",...r,ref:e,onClick:Et(t.onClick,s.onClose)})})});Ww.displayName=hR;var fR=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return m.jsx(At.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function pR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),XV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...pR(r))}}),e}function Zh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Yk(s,i):s.dispatchEvent(i)}var ZT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function ZV(t=()=>{}){const e=ss(t);ta(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function XV(t){return t.nodeType===t.ELEMENT_NODE}function JV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ty(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var ej=rR,mR=iR,gR=aR,yR=lR,vR=cR,_R=dR,wR=Ww;function ER(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ER(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ER(t))&&(r&&(r+=" "),r+=e);return r}const XT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,JT=xR,Hw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return JT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=XT(d)||XT(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...g}=d;return Object.entries(g).every(w=>{let[_,x]=w;return Array.isArray(x)?x.includes({...i,...a}[_]):{...i,...a}[_]===x})?[...c,h,f]:c},[]);return JT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TR=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...nj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TR("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(rj,{ref:i,iconNode:e,className:TR(`lucide-${tj(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=IR("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=IR("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qw="-",oj=t=>{const e=lj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(qw);return a[0]===""&&a.length!==1&&a.shift(),CR(a,e)||aj(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},CR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?CR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(qw);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},eI=/^\[(.+)\]$/,aj=t=>{if(eI.test(t)){const e=eI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},lj=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return uj(Object.entries(t.classGroups),n).forEach(([i,o])=>{zv(o,r,i,e)}),r},zv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:tI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(cj(s)){zv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{zv(o,tI(e,i),n,r)})})},tI=(t,e)=>{let n=t;return e.split(qw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cj=t=>t.isThemeGetter,uj=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,dj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},SR="!",hj=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let x=0;x<a.length;x++){let E=a[x];if(c===0){if(E===s&&(r||a.slice(x,x+i)===e)){l.push(a.slice(d,x)),d=x+i;continue}if(E==="/"){h=x;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),g=f.startsWith(SR),w=g?f.substring(1):f,_=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:_}};return n?a=>n({className:a,parseClassName:o}):o},fj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},pj=t=>({cache:dj(t.cacheSize),parseClassName:hj(t),...oj(t)}),mj=/\s+/,gj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(mj);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:g}=n(c);let w=!!g,_=r(w?f.substring(0,g):f);if(!_){if(!w){a=c+(a.length>0?" "+a:a);continue}if(_=r(f),!_){a=c+(a.length>0?" "+a:a);continue}w=!1}const x=fj(d).join(":"),E=h?x+SR:x,v=E+_;if(i.includes(v))continue;i.push(v);const I=s(_,w);for(let N=0;N<I.length;++N){const M=I[N];i.push(E+M)}a=c+(a.length>0?" "+a:a)}return a};function yj(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=bR(e))&&(r&&(r+=" "),r+=n);return r}const bR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=bR(t[r]))&&(n&&(n+=" "),n+=e);return n};function vj(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=pj(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=gj(l,n);return s(l,d),d}return function(){return i(yj.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},kR=/^\[(?:([a-z-]+):)?(.+)\]$/i,_j=/^\d+\/\d+$/,wj=new Set(["px","full","screen"]),Ej=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Tj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ij=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vs=t=>ol(t)||wj.has(t)||_j.test(t),ni=t=>ic(t,"length",Oj),ol=t=>!!t&&!Number.isNaN(Number(t)),ny=t=>ic(t,"number",ol),Uc=t=>!!t&&Number.isInteger(Number(t)),Sj=t=>t.endsWith("%")&&ol(t.slice(0,-1)),Ie=t=>kR.test(t),ri=t=>Ej.test(t),bj=new Set(["length","size","percentage"]),kj=t=>ic(t,bj,RR),Rj=t=>ic(t,"position",RR),Aj=new Set(["image","url"]),Pj=t=>ic(t,Aj,Mj),Nj=t=>ic(t,"",Dj),$c=()=>!0,ic=(t,e,n)=>{const r=kR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Oj=t=>xj.test(t)&&!Tj.test(t),RR=()=>!1,Dj=t=>Ij.test(t),Mj=t=>Cj.test(t),Lj=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),f=Xe("gap"),g=Xe("gradientColorStops"),w=Xe("gradientColorStopPositions"),_=Xe("inset"),x=Xe("margin"),E=Xe("opacity"),v=Xe("padding"),I=Xe("saturate"),N=Xe("scale"),M=Xe("sepia"),F=Xe("skew"),C=Xe("space"),T=Xe("translate"),S=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ie,e],P=()=>[Ie,e],k=()=>["",vs,ni],H=()=>["auto",ol,Ie],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ce=()=>["solid","dashed","dotted","double","none"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ie],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[ol,Ie];return{cacheSize:500,separator:":",theme:{colors:[$c],spacing:[vs,ni],blur:["none","",ri,Ie],brightness:_e(),borderColor:[t],borderRadius:["none","","full",ri,Ie],borderSpacing:P(),borderWidth:k(),contrast:_e(),grayscale:Z(),hueRotate:_e(),invert:Z(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[Sj,ni],inset:O(),margin:O(),opacity:_e(),padding:P(),saturate:_e(),scale:_e(),sepia:Z(),skew:_e(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ie]}],container:["container"],columns:[{columns:[ri]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Ie]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uc,Ie]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ie]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Uc,Ie]}],"grid-cols":[{"grid-cols":[$c]}],"col-start-end":[{col:["auto",{span:["full",Uc,Ie]},Ie]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[$c]}],"row-start-end":[{row:["auto",{span:[Uc,Ie]},Ie]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ie]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ie,e]}],"min-w":[{"min-w":[Ie,e,"min","max","fit"]}],"max-w":[{"max-w":[Ie,e,"none","full","min","max","fit","prose",{screen:[ri]},ri]}],h:[{h:[Ie,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ie,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ie,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ie,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ri,ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ny]}],"font-family":[{font:[$c]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ie]}],"line-clamp":[{"line-clamp":["none",ol,ny]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vs,Ie]}],"list-image":[{"list-image":["none",Ie]}],"list-style-type":[{list:["none","disc","decimal",Ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vs,ni]}],"underline-offset":[{"underline-offset":["auto",vs,Ie]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),Rj]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Pj]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ce(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ce()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ce()]}],"outline-offset":[{"outline-offset":[vs,Ie]}],"outline-w":[{outline:[vs,ni]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[vs,ni]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ri,Nj]}],"shadow-color":[{shadow:[$c]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ge()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ri,Ie]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ie]}],duration:[{duration:_e()}],ease:[{ease:["linear","in","out","in-out",Ie]}],delay:[{delay:_e()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Uc,Ie]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[vs,ni,ny]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fj=vj(Lj);function ct(...t){return Fj(xR(t))}const Vj=ej,AR=A.forwardRef(({className:t,...e},n)=>m.jsx(mR,{ref:n,className:ct("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));AR.displayName=mR.displayName;const jj=Hw("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),PR=A.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(gR,{ref:r,className:ct(jj({variant:e}),t),...n}));PR.displayName=gR.displayName;const Uj=A.forwardRef(({className:t,...e},n)=>m.jsx(_R,{ref:n,className:ct("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Uj.displayName=_R.displayName;const NR=A.forwardRef(({className:t,...e},n)=>m.jsx(wR,{ref:n,className:ct("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(ij,{className:"h-4 w-4"})}));NR.displayName=wR.displayName;const OR=A.forwardRef(({className:t,...e},n)=>m.jsx(yR,{ref:n,className:ct("text-sm font-semibold",t),...e}));OR.displayName=yR.displayName;const DR=A.forwardRef(({className:t,...e},n)=>m.jsx(vR,{ref:n,className:ct("text-sm opacity-90",t),...e}));DR.displayName=vR.displayName;function $j(){const{toasts:t}=Im();return m.jsxs(Vj,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return m.jsxs(PR,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(OR,{children:n}),r&&m.jsx(DR,{children:r})]}),s,m.jsx(NR,{})]},e)}),m.jsx(AR,{})]})}const zj=["top","right","bottom","left"],Vi=Math.min,Un=Math.max,dp=Math.round,Xh=Math.floor,es=t=>({x:t,y:t}),Bj={left:"right",right:"left",bottom:"top",top:"bottom"},Wj={start:"end",end:"start"};function Bv(t,e,n){return Un(t,Vi(e,n))}function Vs(t,e){return typeof t=="function"?t(e):t}function js(t){return t.split("-")[0]}function oc(t){return t.split("-")[1]}function Gw(t){return t==="x"?"y":"x"}function Kw(t){return t==="y"?"height":"width"}function ji(t){return["top","bottom"].includes(js(t))?"y":"x"}function Qw(t){return Gw(ji(t))}function Hj(t,e,n){n===void 0&&(n=!1);const r=oc(t),s=Qw(t),i=Kw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=hp(o)),[o,hp(o)]}function qj(t){const e=hp(t);return[Wv(t),e,Wv(e)]}function Wv(t){return t.replace(/start|end/g,e=>Wj[e])}function Gj(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Kj(t,e,n,r){const s=oc(t);let i=Gj(js(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Wv)))),i}function hp(t){return t.replace(/left|right|bottom|top/g,e=>Bj[e])}function Qj(t){return{top:0,right:0,bottom:0,left:0,...t}}function MR(t){return typeof t!="number"?Qj(t):{top:t,right:t,bottom:t,left:t}}function fp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function nI(t,e,n){let{reference:r,floating:s}=t;const i=ji(e),o=Qw(e),a=Kw(o),l=js(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(oc(e)){case"start":g[o]-=f*(n&&c?-1:1);break;case"end":g[o]+=f*(n&&c?-1:1);break}return g}const Yj=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=nI(c,r,l),f=r,g={},w=0;for(let _=0;_<a.length;_++){const{name:x,fn:E}=a[_],{x:v,y:I,data:N,reset:M}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=I??h,g={...g,[x]:{...g[x],...N}},M&&w<=50&&(w++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:d,y:h}=nI(c,f,l)),_=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:g}};async function ed(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:g=0}=Vs(e,t),w=MR(g),x=a[f?h==="floating"?"reference":"floating":h],E=fp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),N=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},M=fp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:I,strategy:l}):v);return{top:(E.top-M.top+w.top)/N.y,bottom:(M.bottom-E.bottom+w.bottom)/N.y,left:(E.left-M.left+w.left)/N.x,right:(M.right-E.right+w.right)/N.x}}const Zj=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Vs(t,e)||{};if(c==null)return{};const h=MR(d),f={x:n,y:r},g=Qw(s),w=Kw(g),_=await o.getDimensions(c),x=g==="y",E=x?"top":"left",v=x?"bottom":"right",I=x?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[g]-f[g]-i.floating[w],M=f[g]-i.reference[g],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=F?F[I]:0;(!C||!await(o.isElement==null?void 0:o.isElement(F)))&&(C=a.floating[I]||i.floating[w]);const T=N/2-M/2,S=C/2-_[w]/2-1,R=Vi(h[E],S),O=Vi(h[v],S),P=R,k=C-_[w]-O,H=C/2-_[w]/2+T,ue=Bv(P,H,k),ce=!l.arrow&&oc(s)!=null&&H!==ue&&i.reference[w]/2-(H<P?R:O)-_[w]/2<0,ge=ce?H<P?H-P:H-k:0;return{[g]:f[g]+ge,data:{[g]:ue,centerOffset:H-ue-ge,...ce&&{alignmentOffset:ge}},reset:ce}}}),Xj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:_=!0,...x}=Vs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=js(s),v=ji(a),I=js(a)===a,N=await(l.isRTL==null?void 0:l.isRTL(c.floating)),M=f||(I||!_?[hp(a)]:qj(a)),F=w!=="none";!f&&F&&M.push(...Kj(a,_,w,N));const C=[a,...M],T=await ed(e,x),S=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&S.push(T[E]),h){const H=Hj(s,o,N);S.push(T[H[0]],T[H[1]])}if(R=[...R,{placement:s,overflows:S}],!S.every(H=>H<=0)){var O,P;const H=(((O=i.flip)==null?void 0:O.index)||0)+1,ue=C[H];if(ue)return{data:{index:H,overflows:R},reset:{placement:ue}};let ce=(P=R.filter(ge=>ge.overflows[0]<=0).sort((ge,z)=>ge.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!ce)switch(g){case"bestFit":{var k;const ge=(k=R.filter(z=>{if(F){const Z=ji(z.placement);return Z===v||Z==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Z=>Z>0).reduce((Z,ae)=>Z+ae,0)]).sort((z,Z)=>z[1]-Z[1])[0])==null?void 0:k[0];ge&&(ce=ge);break}case"initialPlacement":ce=a;break}if(s!==ce)return{reset:{placement:ce}}}return{}}}};function rI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sI(t){return zj.some(e=>t[e]>=0)}const Jj=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Vs(t,e);switch(r){case"referenceHidden":{const i=await ed(e,{...s,elementContext:"reference"}),o=rI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:sI(o)}}}case"escaped":{const i=await ed(e,{...s,altBoundary:!0}),o=rI(i,n.floating);return{data:{escapedOffsets:o,escaped:sI(o)}}}default:return{}}}}};async function e4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=js(n),a=oc(n),l=ji(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=Vs(e,t);let{mainAxis:f,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),l?{x:g*d,y:f*c}:{x:f*c,y:g*d}}const t4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await e4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},n4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:E,y:v}=x;return{x:E,y:v}}},...l}=Vs(t,e),c={x:n,y:r},d=await ed(e,l),h=ji(js(s)),f=Gw(h);let g=c[f],w=c[h];if(i){const x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",v=g+d[x],I=g-d[E];g=Bv(v,g,I)}if(o){const x=h==="y"?"top":"left",E=h==="y"?"bottom":"right",v=w+d[x],I=w-d[E];w=Bv(v,w,I)}const _=a.fn({...e,[f]:g,[h]:w});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[f]:i,[h]:o}}}}}},r4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Vs(t,e),d={x:n,y:r},h=ji(s),f=Gw(h);let g=d[f],w=d[h];const _=Vs(a,e),x=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const I=f==="y"?"height":"width",N=i.reference[f]-i.floating[I]+x.mainAxis,M=i.reference[f]+i.reference[I]-x.mainAxis;g<N?g=N:g>M&&(g=M)}if(c){var E,v;const I=f==="y"?"width":"height",N=["top","left"].includes(js(s)),M=i.reference[h]-i.floating[I]+(N&&((E=o.offset)==null?void 0:E[h])||0)+(N?0:x.crossAxis),F=i.reference[h]+i.reference[I]+(N?0:((v=o.offset)==null?void 0:v[h])||0)-(N?x.crossAxis:0);w<M?w=M:w>F&&(w=F)}return{[f]:g,[h]:w}}}},s4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Vs(t,e),d=await ed(e,c),h=js(s),f=oc(s),g=ji(s)==="y",{width:w,height:_}=i.floating;let x,E;h==="top"||h==="bottom"?(x=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,x=f==="end"?"top":"bottom");const v=_-d.top-d.bottom,I=w-d.left-d.right,N=Vi(_-d[x],v),M=Vi(w-d[E],I),F=!e.middlewareData.shift;let C=N,T=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=v),F&&!f){const R=Un(d.left,0),O=Un(d.right,0),P=Un(d.top,0),k=Un(d.bottom,0);g?T=w-2*(R!==0||O!==0?R+O:Un(d.left,d.right)):C=_-2*(P!==0||k!==0?P+k:Un(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:C});const S=await o.getDimensions(a.floating);return w!==S.width||_!==S.height?{reset:{rects:!0}}:{}}}};function km(){return typeof window<"u"}function ac(t){return LR(t)?(t.nodeName||"").toLowerCase():"#document"}function Bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(LR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LR(t){return km()?t instanceof Node||t instanceof Bn(t).Node:!1}function Or(t){return km()?t instanceof Element||t instanceof Bn(t).Element:!1}function is(t){return km()?t instanceof HTMLElement||t instanceof Bn(t).HTMLElement:!1}function iI(t){return!km()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Bn(t).ShadowRoot}function qd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Dr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function i4(t){return["table","td","th"].includes(ac(t))}function Rm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Yw(t){const e=Zw(),n=Or(t)?Dr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function o4(t){let e=Ui(t);for(;is(e)&&!Vl(e);){if(Yw(e))return e;if(Rm(e))return null;e=Ui(e)}return null}function Zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vl(t){return["html","body","#document"].includes(ac(t))}function Dr(t){return Bn(t).getComputedStyle(t)}function Am(t){return Or(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ui(t){if(ac(t)==="html")return t;const e=t.assignedSlot||t.parentNode||iI(t)&&t.host||ds(t);return iI(e)?e.host:e}function FR(t){const e=Ui(t);return Vl(e)?t.ownerDocument?t.ownerDocument.body:t.body:is(e)&&qd(e)?e:FR(e)}function td(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=FR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Bn(s);if(i){const a=Hv(o);return e.concat(o,o.visualViewport||[],qd(s)?s:[],a&&n?td(a):[])}return e.concat(s,td(s,[],n))}function Hv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VR(t){const e=Dr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=is(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=dp(n)!==i||dp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Xw(t){return Or(t)?t:t.contextElement}function al(t){const e=Xw(t);if(!is(e))return es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VR(e);let o=(i?dp(n.width):n.width)/r,a=(i?dp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const a4=es(0);function jR(t){const e=Bn(t);return!Zw()||!e.visualViewport?a4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function l4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Bn(t)?!1:e}function na(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Xw(t);let o=es(1);e&&(r?Or(r)&&(o=al(r)):o=al(t));const a=l4(i,n,r)?jR(i):es(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Bn(i),g=r&&Or(r)?Bn(r):r;let w=f,_=Hv(w);for(;_&&r&&g!==w;){const x=al(_),E=_.getBoundingClientRect(),v=Dr(_),I=E.left+(_.clientLeft+parseFloat(v.paddingLeft))*x.x,N=E.top+(_.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=I,c+=N,w=Bn(_),_=Hv(w)}}return fp({width:d,height:h,x:l,y:c})}function Jw(t,e){const n=Am(t).scrollLeft;return e?e.left+n:na(ds(t)).left+n}function UR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Jw(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function c4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ds(r),a=e?Rm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=es(1);const d=es(0),h=is(r);if((h||!h&&!i)&&((ac(r)!=="body"||qd(o))&&(l=Am(r)),is(r))){const g=na(r);c=al(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const f=o&&!h&&!i?UR(o,l,!0):es(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function u4(t){return Array.from(t.getClientRects())}function d4(t){const e=ds(t),n=Am(t),r=t.ownerDocument.body,s=Un(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Un(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Jw(t);const a=-n.scrollTop;return Dr(r).direction==="rtl"&&(o+=Un(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function h4(t,e){const n=Bn(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Zw();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function f4(t,e){const n=na(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=is(t)?al(t):es(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function oI(t,e,n){let r;if(e==="viewport")r=h4(t,n);else if(e==="document")r=d4(ds(t));else if(Or(e))r=f4(e,n);else{const s=jR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return fp(r)}function $R(t,e){const n=Ui(t);return n===e||!Or(n)||Vl(n)?!1:Dr(n).position==="fixed"||$R(n,e)}function p4(t,e){const n=e.get(t);if(n)return n;let r=td(t,[],!1).filter(a=>Or(a)&&ac(a)!=="body"),s=null;const i=Dr(t).position==="fixed";let o=i?Ui(t):t;for(;Or(o)&&!Vl(o);){const a=Dr(o),l=Yw(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||qd(o)&&!l&&$R(t,o))?r=r.filter(d=>d!==o):s=a,o=Ui(o)}return e.set(t,r),r}function m4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Rm(e)?[]:p4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=oI(e,d,s);return c.top=Un(h.top,c.top),c.right=Vi(h.right,c.right),c.bottom=Vi(h.bottom,c.bottom),c.left=Un(h.left,c.left),c},oI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function g4(t){const{width:e,height:n}=VR(t);return{width:e,height:n}}function y4(t,e,n){const r=is(e),s=ds(e),i=n==="fixed",o=na(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=es(0);if(r||!r&&!i)if((ac(e)!=="body"||qd(s))&&(a=Am(e)),r){const f=na(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=Jw(s));const c=s&&!r&&!i?UR(s,a):es(0),d=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:d,y:h,width:o.width,height:o.height}}function ry(t){return Dr(t).position==="static"}function aI(t,e){if(!is(t)||Dr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function zR(t,e){const n=Bn(t);if(Rm(t))return n;if(!is(t)){let s=Ui(t);for(;s&&!Vl(s);){if(Or(s)&&!ry(s))return s;s=Ui(s)}return n}let r=aI(t,e);for(;r&&i4(r)&&ry(r);)r=aI(r,e);return r&&Vl(r)&&ry(r)&&!Yw(r)?n:r||o4(t)||n}const v4=async function(t){const e=this.getOffsetParent||zR,n=this.getDimensions,r=await n(t.floating);return{reference:y4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _4(t){return Dr(t).direction==="rtl"}const w4={convertOffsetParentRelativeRectToViewportRelativeRect:c4,getDocumentElement:ds,getClippingRect:m4,getOffsetParent:zR,getElementRects:v4,getClientRects:u4,getDimensions:g4,getScale:al,isElement:Or,isRTL:_4};function BR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function E4(t,e){let n=null,r;const s=ds(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:g}=c;if(a||e(),!f||!g)return;const w=Xh(h),_=Xh(s.clientWidth-(d+f)),x=Xh(s.clientHeight-(h+g)),E=Xh(d),I={rootMargin:-w+"px "+-_+"px "+-x+"px "+-E+"px",threshold:Un(0,Vi(1,l))||1};let N=!0;function M(F){const C=F[0].intersectionRatio;if(C!==l){if(!N)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!BR(c,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(M,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,I)}n.observe(t)}return o(!0),i}function x4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Xw(t),d=s||i?[...c?td(c):[],...td(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?E4(c,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(E=>{let[v]=E;v&&v.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var I;(I=g)==null||I.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let w,_=l?na(t):null;l&&x();function x(){const E=na(t);_&&!BR(_,E)&&n(),_=E,w=requestAnimationFrame(x)}return n(),()=>{var E;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(w)}}const T4=t4,I4=n4,C4=Xj,S4=s4,b4=Jj,lI=Zj,k4=r4,R4=(t,e,n)=>{const r=new Map,s={platform:w4,...n},i={...s.platform,_c:r};return Yj(t,e,{...s,platform:i})};var Sf=typeof document<"u"?A.useLayoutEffect:A.useEffect;function pp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!pp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!pp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function WR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function cI(t,e){const n=WR(t);return Math.round(e*n)/n}function sy(t){const e=A.useRef(t);return Sf(()=>{e.current=t}),e}function A4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=A.useState(r);pp(f,r)||g(r);const[w,_]=A.useState(null),[x,E]=A.useState(null),v=A.useCallback(z=>{z!==F.current&&(F.current=z,_(z))},[]),I=A.useCallback(z=>{z!==C.current&&(C.current=z,E(z))},[]),N=i||w,M=o||x,F=A.useRef(null),C=A.useRef(null),T=A.useRef(d),S=l!=null,R=sy(l),O=sy(s),P=sy(c),k=A.useCallback(()=>{if(!F.current||!C.current)return;const z={placement:e,strategy:n,middleware:f};O.current&&(z.platform=O.current),R4(F.current,C.current,z).then(Z=>{const ae={...Z,isPositioned:P.current!==!1};H.current&&!pp(T.current,ae)&&(T.current=ae,Wd.flushSync(()=>{h(ae)}))})},[f,e,n,O,P]);Sf(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(z=>({...z,isPositioned:!1})))},[c]);const H=A.useRef(!1);Sf(()=>(H.current=!0,()=>{H.current=!1}),[]),Sf(()=>{if(N&&(F.current=N),M&&(C.current=M),N&&M){if(R.current)return R.current(N,M,k);k()}},[N,M,k,R,S]);const ue=A.useMemo(()=>({reference:F,floating:C,setReference:v,setFloating:I}),[v,I]),ce=A.useMemo(()=>({reference:N,floating:M}),[N,M]),ge=A.useMemo(()=>{const z={position:n,left:0,top:0};if(!ce.floating)return z;const Z=cI(ce.floating,d.x),ae=cI(ce.floating,d.y);return a?{...z,transform:"translate("+Z+"px, "+ae+"px)",...WR(ce.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:ae}},[n,a,ce.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:k,refs:ue,elements:ce,floatingStyles:ge}),[d,k,ue,ce,ge])}const P4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?lI({element:r.current,padding:s}).fn(n):{}:r?lI({element:r,padding:s}).fn(n):{}}}},N4=(t,e)=>({...T4(t),options:[t,e]}),O4=(t,e)=>({...I4(t),options:[t,e]}),D4=(t,e)=>({...k4(t),options:[t,e]}),M4=(t,e)=>({...C4(t),options:[t,e]}),L4=(t,e)=>({...S4(t),options:[t,e]}),F4=(t,e)=>({...b4(t),options:[t,e]}),V4=(t,e)=>({...P4(t),options:[t,e]});var j4="Arrow",HR=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return m.jsx(At.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});HR.displayName=j4;var U4=HR;function qR(t){const[e,n]=A.useState(void 0);return ta(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var GR="Popper",[KR,QR]=sc(GR),[$Q,YR]=KR(GR),ZR="PopperAnchor",XR=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=YR(ZR,n),o=A.useRef(null),a=ir(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(At.div,{...s,ref:a})});XR.displayName=ZR;var e0="PopperContent",[$4,z4]=KR(e0),JR=A.forwardRef((t,e)=>{var cn,_a,Ys,Lr,cr,fs;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:w,..._}=t,x=YR(e0,n),[E,v]=A.useState(null),I=ir(e,ur=>v(ur)),[N,M]=A.useState(null),F=qR(N),C=(F==null?void 0:F.width)??0,T=(F==null?void 0:F.height)??0,S=r+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(c)?c:[c],P=O.length>0,k={padding:R,boundary:O.filter(W4),altBoundary:P},{refs:H,floatingStyles:ue,placement:ce,isPositioned:ge,middlewareData:z}=A4({strategy:"fixed",placement:S,whileElementsMounted:(...ur)=>x4(...ur,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[N4({mainAxis:s+T,alignmentAxis:o}),l&&O4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?D4():void 0,...k}),l&&M4({...k}),L4({...k,apply:({elements:ur,rects:ps,availableWidth:ho,availableHeight:fo})=>{const{width:wa,height:yc}=ps.reference,ms=ur.floating.style;ms.setProperty("--radix-popper-available-width",`${ho}px`),ms.setProperty("--radix-popper-available-height",`${fo}px`),ms.setProperty("--radix-popper-anchor-width",`${wa}px`),ms.setProperty("--radix-popper-anchor-height",`${yc}px`)}}),N&&V4({element:N,padding:a}),H4({arrowWidth:C,arrowHeight:T}),f&&F4({strategy:"referenceHidden",...k})]}),[Z,ae]=nA(ce),_e=ss(w);ta(()=>{ge&&(_e==null||_e())},[ge,_e]);const Pe=(cn=z.arrow)==null?void 0:cn.x,Be=(_a=z.arrow)==null?void 0:_a.y,Gt=((Ys=z.arrow)==null?void 0:Ys.centerOffset)!==0,[Tn,Dn]=A.useState();return ta(()=>{E&&Dn(window.getComputedStyle(E).zIndex)},[E]),m.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ge?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Tn,"--radix-popper-transform-origin":[(Lr=z.transformOrigin)==null?void 0:Lr.x,(cr=z.transformOrigin)==null?void 0:cr.y].join(" "),...((fs=z.hide)==null?void 0:fs.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx($4,{scope:n,placedSide:Z,onArrowChange:M,arrowX:Pe,arrowY:Be,shouldHideArrow:Gt,children:m.jsx(At.div,{"data-side":Z,"data-align":ae,..._,ref:I,style:{..._.style,animation:ge?void 0:"none"}})})})});JR.displayName=e0;var eA="PopperArrow",B4={top:"bottom",right:"left",bottom:"top",left:"right"},tA=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=z4(eA,r),o=B4[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(U4,{...s,ref:n,style:{...s.style,display:"block"}})})});tA.displayName=eA;function W4(t){return t!==null}var H4=t=>({name:"transformOrigin",options:t,fn(e){var x,E,v;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=nA(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let w="",_="";return c==="bottom"?(w=o?h:`${f}px`,_=`${-l}px`):c==="top"?(w=o?h:`${f}px`,_=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,_=o?h:`${g}px`):c==="left"&&(w=`${r.floating.width+l}px`,_=o?h:`${g}px`),{data:{x:w,y:_}}}});function nA(t){const[e,n="center"]=t.split("-");return[e,n]}var q4=XR,G4=JR,K4=tA,[Pm,zQ]=sc("Tooltip",[QR]),t0=QR(),rA="TooltipProvider",Q4=700,uI="tooltip.open",[Y4,sA]=Pm(rA),iA=t=>{const{__scopeTooltip:e,delayDuration:n=Q4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(Y4,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};iA.displayName=rA;var oA="Tooltip",[BQ,Nm]=Pm(oA),qv="TooltipTrigger",Z4=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Nm(qv,n),i=sA(qv,n),o=t0(n),a=A.useRef(null),l=ir(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(q4,{asChild:!0,...o,children:m.jsx(At.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Et(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Et(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Et(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Et(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Et(t.onBlur,s.onClose),onClick:Et(t.onClick,s.onClose)})})});Z4.displayName=qv;var X4="TooltipPortal",[WQ,J4]=Pm(X4,{forceMount:void 0}),jl="TooltipContent",aA=A.forwardRef((t,e)=>{const n=J4(jl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Nm(jl,t.__scopeTooltip);return m.jsx($w,{present:r||o.open,children:o.disableHoverableContent?m.jsx(lA,{side:s,...i,ref:e}):m.jsx(eU,{side:s,...i,ref:e})})}),eU=A.forwardRef((t,e)=>{const n=Nm(jl,t.__scopeTooltip),r=sA(jl,t.__scopeTooltip),s=A.useRef(null),i=ir(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=A.useCallback(()=>{a(null),h(!1)},[h]),g=A.useCallback((w,_)=>{const x=w.currentTarget,E={x:w.clientX,y:w.clientY},v=iU(E,x.getBoundingClientRect()),I=oU(E,v),N=aU(_.getBoundingClientRect()),M=cU([...I,...N]);a(M),h(!0)},[h]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(l&&d){const w=x=>g(x,d),_=x=>g(x,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",_)}}},[l,d,g,f]),A.useEffect(()=>{if(o){const w=_=>{const x=_.target,E={x:_.clientX,y:_.clientY},v=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),I=!lU(E,o);v?f():I&&(f(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,c,f]),m.jsx(lA,{...t,ref:i})}),[tU,nU]=Pm(oA,{isInside:!1}),rU=mV("TooltipContent"),lA=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Nm(jl,n),c=t0(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(uI,d),()=>document.removeEventListener(uI,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=f=>{const g=f.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),m.jsx(Uw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:m.jsxs(G4,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(rU,{children:r}),m.jsx(tU,{scope:n,isInside:!0,children:m.jsx(LV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});aA.displayName=jl;var cA="TooltipArrow",sU=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=t0(n);return nU(cA,n).isInside?null:m.jsx(K4,{...s,...r,ref:e})});sU.displayName=cA;function iU(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function oU(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function aU(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function lU(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,d=e[o].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function cU(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),uU(e)}function uU(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var dU=iA,uA=aA;const hU=dU,fU=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(uA,{ref:r,sideOffset:e,className:ct("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));fU.displayName=uA.displayName;const n0=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));n0.displayName="Card";const pU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("flex flex-col space-y-1.5 p-6",t),...e}));pU.displayName="CardHeader";const mU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("text-2xl font-semibold leading-none tracking-tight",t),...e}));mU.displayName="CardTitle";const gU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("text-sm text-muted-foreground",t),...e}));gU.displayName="CardDescription";const r0=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("p-6 pt-0",t),...e}));r0.displayName="CardContent";const yU=A.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ct("flex items-center p-6 pt-0",t),...e}));yU.displayName="CardFooter";function vU(){return m.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:m.jsx(n0,{className:"w-full max-w-md mx-4",children:m.jsxs(r0,{className:"pt-6",children:[m.jsxs("div",{className:"flex mb-4 gap-2",children:[m.jsx(sj,{className:"h-8 w-8 text-red-500"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),m.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var Gd=t=>t.type==="checkbox",No=t=>t instanceof Date,mn=t=>t==null;const dA=t=>typeof t=="object";var vt=t=>!mn(t)&&!Array.isArray(t)&&dA(t)&&!No(t),hA=t=>vt(t)&&t.target?Gd(t.target)?t.target.checked:t.target.value:t,_U=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,fA=(t,e)=>t.has(_U(e)),wU=t=>{const e=t.constructor&&t.constructor.prototype;return vt(e)&&e.hasOwnProperty("isPrototypeOf")},s0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(s0&&(t instanceof Blob||r))&&(n||vt(t)))if(e=n?[]:{},!n&&!wU(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Vt(t[s]));else return t;return e}var Om=t=>Array.isArray(t)?t.filter(Boolean):[],mt=t=>t===void 0,X=(t,e,n)=>{if(!e||!vt(t))return n;const r=Om(e.split(/[,[\].]+?/)).reduce((s,i)=>mn(s)?s:s[i],t);return mt(r)||r===t?mt(t[e])?n:t[e]:r},jn=t=>typeof t=="boolean",i0=t=>/^\w*$/.test(t),pA=t=>Om(t.replace(/["|']|\]/g,"").split(/\.|\[/)),We=(t,e,n)=>{let r=-1;const s=i0(e)?[e]:pA(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=vt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const mp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_s={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mA=Ee.createContext(null),Dm=()=>Ee.useContext(mA),EU=t=>{const{children:e,...n}=t;return Ee.createElement(mA.Provider,{value:n},e)};var gA=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==vr.all&&(e._proxyFormState[o]=!r||vr.all),n&&(n[o]=!0),t[o]}});return s};function xU(t){const e=Dm(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=Ee.useState(n._formState),l=Ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=Ee.useRef(s);return c.current=s,Ee.useEffect(()=>n._subscribe({name:c.current,formState:l.current,exact:i,callback:d=>{!r&&a({...n._formState,...d})}}),[n,r,i]),Ee.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Ee.useMemo(()=>gA(o,n,l.current,!1),[o,n])}var Yr=t=>typeof t=="string",yA=(t,e,n,r,s)=>Yr(t)?(r&&e.watch.add(t),X(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),X(n,i))):(r&&(e.watchAll=!0),n);function TU(t){const e=Dm(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=Ee.useRef(r),l=Ee.useRef(s);a.current=r,Ee.useEffect(()=>n._subscribe({name:a.current,formState:{values:!0},exact:o,callback:h=>!i&&d(yA(a.current,n._names,h.values||n._formValues,!1,l.current))}),[n,i,o]);const[c,d]=Ee.useState(n._getWatch(r,s));return Ee.useEffect(()=>n._removeUnmounted()),c}function IU(t){const e=Dm(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=fA(s._names.array,n),a=TU({control:s,name:n,defaultValue:X(s._formValues,n,X(s._defaultValues,n,t.defaultValue)),exact:!0}),l=xU({control:s,name:n,exact:!0}),c=Ee.useRef(t),d=Ee.useRef(s.register(n,{...t.rules,value:a,...jn(t.disabled)?{disabled:t.disabled}:{}})),h=Ee.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!X(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!X(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!X(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!X(l.validatingFields,n)},error:{enumerable:!0,get:()=>X(l.errors,n)}}),[l,n]),f=Ee.useCallback(x=>d.current.onChange({target:{value:hA(x),name:n},type:mp.CHANGE}),[n]),g=Ee.useCallback(()=>d.current.onBlur({target:{value:X(s._formValues,n),name:n},type:mp.BLUR}),[n,s._formValues]),w=Ee.useCallback(x=>{const E=X(s._fields,n);E&&x&&(E._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:v=>x.setCustomValidity(v),reportValidity:()=>x.reportValidity()})},[s._fields,n]),_=Ee.useMemo(()=>({name:n,value:a,...jn(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:f,onBlur:g,ref:w}),[n,r,l.disabled,f,g,w,a]);return Ee.useEffect(()=>{const x=s._options.shouldUnregister||i;s.register(n,{...c.current.rules,...jn(c.current.disabled)?{disabled:c.current.disabled}:{}});const E=(v,I)=>{const N=X(s._fields,v);N&&N._f&&(N._f.mount=I)};if(E(n,!0),x){const v=Vt(X(s._options.defaultValues,n));We(s._defaultValues,n,v),mt(X(s._formValues,n))&&We(s._formValues,n,v)}return!o&&s.register(n),()=>{(o?x&&!s._state.action:x)?s.unregister(n):E(n,!1)}},[n,s,o,i]),Ee.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Ee.useMemo(()=>({field:_,formState:l,fieldState:h}),[_,l,h])}const CU=t=>t.render(IU(t));var vA=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},wu=t=>Array.isArray(t)?t:[t],dI=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Gv=t=>mn(t)||!dA(t);function ui(t,e){if(Gv(t)||Gv(e))return t===e;if(No(t)&&No(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(No(i)&&No(o)||vt(i)&&vt(o)||Array.isArray(i)&&Array.isArray(o)?!ui(i,o):i!==o)return!1}}return!0}var fn=t=>vt(t)&&!Object.keys(t).length,o0=t=>t.type==="file",_r=t=>typeof t=="function",gp=t=>{if(!s0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},_A=t=>t.type==="select-multiple",a0=t=>t.type==="radio",SU=t=>a0(t)||Gd(t),iy=t=>gp(t)&&t.isConnected;function bU(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=mt(t)?r++:t[e[r++]];return t}function kU(t){for(const e in t)if(t.hasOwnProperty(e)&&!mt(t[e]))return!1;return!0}function Tt(t,e){const n=Array.isArray(e)?e:i0(e)?[e]:pA(e),r=n.length===1?t:bU(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(vt(r)&&fn(r)||Array.isArray(r)&&kU(r))&&Tt(t,n.slice(0,-1)),t}var wA=t=>{for(const e in t)if(_r(t[e]))return!0;return!1};function yp(t,e={}){const n=Array.isArray(t);if(vt(t)||n)for(const r in t)Array.isArray(t[r])||vt(t[r])&&!wA(t[r])?(e[r]=Array.isArray(t[r])?[]:{},yp(t[r],e[r])):mn(t[r])||(e[r]=!0);return e}function EA(t,e,n){const r=Array.isArray(t);if(vt(t)||r)for(const s in t)Array.isArray(t[s])||vt(t[s])&&!wA(t[s])?mt(e)||Gv(n[s])?n[s]=Array.isArray(t[s])?yp(t[s],[]):{...yp(t[s])}:EA(t[s],mn(e)?{}:e[s],n[s]):n[s]=!ui(t[s],e[s]);return n}var zc=(t,e)=>EA(t,e,yp(e));const hI={value:!1,isValid:!1},fI={value:!0,isValid:!0};var xA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!mt(t[0].attributes.value)?mt(t[0].value)||t[0].value===""?fI:{value:t[0].value,isValid:!0}:fI:hI}return hI},TA=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>mt(t)?t:e?t===""?NaN:t&&+t:n&&Yr(t)?new Date(t):r?r(t):t;const pI={isValid:!1,value:null};var IA=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,pI):pI;function mI(t){const e=t.ref;return o0(e)?e.files:a0(e)?IA(t.refs).value:_A(e)?[...e.selectedOptions].map(({value:n})=>n):Gd(e)?xA(t.refs).value:TA(mt(e.value)?t.ref.value:e.value,t)}var RU=(t,e,n,r)=>{const s={};for(const i of t){const o=X(e,i);o&&We(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},vp=t=>t instanceof RegExp,Bc=t=>mt(t)?t:vp(t)?t.source:vt(t)?vp(t.value)?t.value.source:t.value:t,gI=t=>({isOnSubmit:!t||t===vr.onSubmit,isOnBlur:t===vr.onBlur,isOnChange:t===vr.onChange,isOnAll:t===vr.all,isOnTouch:t===vr.onTouched});const yI="AsyncFunction";var AU=t=>!!t&&!!t.validate&&!!(_r(t.validate)&&t.validate.constructor.name===yI||vt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===yI)),PU=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),vI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Eu=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=X(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Eu(a,e))break}else if(vt(a)&&Eu(a,e))break}}};function _I(t,e,n){const r=X(t,n);if(r||i0(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=X(e,i),a=X(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var NU=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return fn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||vr.all))},OU=(t,e,n)=>!t||!e||t===e||wu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),DU=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,MU=(t,e)=>!Om(X(t,e)).length&&Tt(t,e),LU=(t,e,n)=>{const r=wu(X(t,n));return We(r,"root",e[n]),We(t,n,r),t},bf=t=>Yr(t);function wI(t,e,n="validate"){if(bf(t)||Array.isArray(t)&&t.every(bf)||jn(t)&&!t)return{type:n,message:bf(t)?t:"",ref:e}}var Ra=t=>vt(t)&&!vp(t)?t:{value:t,message:""},EI=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:g,validate:w,name:_,valueAsNumber:x,mount:E}=t._f,v=X(n,_);if(!E||e.has(_))return{};const I=a?a[0]:o,N=P=>{s&&I.reportValidity&&(I.setCustomValidity(jn(P)?"":P||""),I.reportValidity())},M={},F=a0(o),C=Gd(o),T=F||C,S=(x||o0(o))&&mt(o.value)&&mt(v)||gp(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,R=vA.bind(null,_,r,M),O=(P,k,H,ue=_s.maxLength,ce=_s.minLength)=>{const ge=P?k:H;M[_]={type:P?ue:ce,message:ge,ref:o,...R(P?ue:ce,ge)}};if(i?!Array.isArray(v)||!v.length:l&&(!T&&(S||mn(v))||jn(v)&&!v||C&&!xA(a).isValid||F&&!IA(a).isValid)){const{value:P,message:k}=bf(l)?{value:!!l,message:l}:Ra(l);if(P&&(M[_]={type:_s.required,message:k,ref:I,...R(_s.required,k)},!r))return N(k),M}if(!S&&(!mn(h)||!mn(f))){let P,k;const H=Ra(f),ue=Ra(h);if(!mn(v)&&!isNaN(v)){const ce=o.valueAsNumber||v&&+v;mn(H.value)||(P=ce>H.value),mn(ue.value)||(k=ce<ue.value)}else{const ce=o.valueAsDate||new Date(v),ge=ae=>new Date(new Date().toDateString()+" "+ae),z=o.type=="time",Z=o.type=="week";Yr(H.value)&&v&&(P=z?ge(v)>ge(H.value):Z?v>H.value:ce>new Date(H.value)),Yr(ue.value)&&v&&(k=z?ge(v)<ge(ue.value):Z?v<ue.value:ce<new Date(ue.value))}if((P||k)&&(O(!!P,H.message,ue.message,_s.max,_s.min),!r))return N(M[_].message),M}if((c||d)&&!S&&(Yr(v)||i&&Array.isArray(v))){const P=Ra(c),k=Ra(d),H=!mn(P.value)&&v.length>+P.value,ue=!mn(k.value)&&v.length<+k.value;if((H||ue)&&(O(H,P.message,k.message),!r))return N(M[_].message),M}if(g&&!S&&Yr(v)){const{value:P,message:k}=Ra(g);if(vp(P)&&!v.match(P)&&(M[_]={type:_s.pattern,message:k,ref:o,...R(_s.pattern,k)},!r))return N(k),M}if(w){if(_r(w)){const P=await w(v,n),k=wI(P,I);if(k&&(M[_]={...k,...R(_s.validate,k.message)},!r))return N(k.message),M}else if(vt(w)){let P={};for(const k in w){if(!fn(P)&&!r)break;const H=wI(await w[k](v,n),I,k);H&&(P={...H,...R(k,H.message)},N(H.message),r&&(M[_]=P))}if(!fn(P)&&(M[_]={ref:I,...P},!r))return M}}return N(!0),M};const FU={mode:vr.onSubmit,reValidateMode:vr.onChange,shouldFocusError:!0};function VU(t={}){let e={...FU,...t},n={submitCount:0,isDirty:!1,isLoading:_r(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=vt(e.defaultValues)||vt(e.values)?Vt(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:Vt(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:dI(),state:dI()},g=gI(e.mode),w=gI(e.reValidateMode),_=e.criteriaMode===vr.all,x=D=>j=>{clearTimeout(c),c=setTimeout(D,j)},E=async D=>{if(!e.disabled&&(d.isValid||h.isValid||D)){const j=e.resolver?fn((await S()).errors):await O(r,!0);j!==n.isValid&&f.state.next({isValid:j})}},v=(D,j)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((D||Array.from(a.mount)).forEach($=>{$&&(j?We(n.validatingFields,$,j):Tt(n.validatingFields,$))}),f.state.next({validatingFields:n.validatingFields,isValidating:!fn(n.validatingFields)}))},I=(D,j=[],$,te,G=!0,W=!0)=>{if(te&&$&&!e.disabled){if(o.action=!0,W&&Array.isArray(X(r,D))){const re=$(X(r,D),te.argA,te.argB);G&&We(r,D,re)}if(W&&Array.isArray(X(n.errors,D))){const re=$(X(n.errors,D),te.argA,te.argB);G&&We(n.errors,D,re),MU(n.errors,D)}if((d.touchedFields||h.touchedFields)&&W&&Array.isArray(X(n.touchedFields,D))){const re=$(X(n.touchedFields,D),te.argA,te.argB);G&&We(n.touchedFields,D,re)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=zc(s,i)),f.state.next({name:D,isDirty:k(D,j),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else We(i,D,j)},N=(D,j)=>{We(n.errors,D,j),f.state.next({errors:n.errors})},M=D=>{n.errors=D,f.state.next({errors:n.errors,isValid:!1})},F=(D,j,$,te)=>{const G=X(r,D);if(G){const W=X(i,D,mt($)?X(s,D):$);mt(W)||te&&te.defaultChecked||j?We(i,D,j?W:mI(G._f)):ce(D,W),o.mount&&E()}},C=(D,j,$,te,G)=>{let W=!1,re=!1;const Ne={name:D};if(!e.disabled){if(!$||te){(d.isDirty||h.isDirty)&&(re=n.isDirty,n.isDirty=Ne.isDirty=k(),W=re!==Ne.isDirty);const rt=ui(X(s,D),j);re=!!X(n.dirtyFields,D),rt?Tt(n.dirtyFields,D):We(n.dirtyFields,D,!0),Ne.dirtyFields=n.dirtyFields,W=W||(d.dirtyFields||h.dirtyFields)&&re!==!rt}if($){const rt=X(n.touchedFields,D);rt||(We(n.touchedFields,D,$),Ne.touchedFields=n.touchedFields,W=W||(d.touchedFields||h.touchedFields)&&rt!==$)}W&&G&&f.state.next(Ne)}return W?Ne:{}},T=(D,j,$,te)=>{const G=X(n.errors,D),W=(d.isValid||h.isValid)&&jn(j)&&n.isValid!==j;if(e.delayError&&$?(l=x(()=>N(D,$)),l(e.delayError)):(clearTimeout(c),l=null,$?We(n.errors,D,$):Tt(n.errors,D)),($?!ui(G,$):G)||!fn(te)||W){const re={...te,...W&&jn(j)?{isValid:j}:{},errors:n.errors,name:D};n={...n,...re},f.state.next(re)}},S=async D=>{v(D,!0);const j=await e.resolver(i,e.context,RU(D||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(D),j},R=async D=>{const{errors:j}=await S(D);if(D)for(const $ of D){const te=X(j,$);te?We(n.errors,$,te):Tt(n.errors,$)}else n.errors=j;return j},O=async(D,j,$={valid:!0})=>{for(const te in D){const G=D[te];if(G){const{_f:W,...re}=G;if(W){const Ne=a.array.has(W.name),rt=G._f&&AU(G._f);rt&&d.validatingFields&&v([te],!0);const Pt=await EI(G,a.disabled,i,_,e.shouldUseNativeValidation&&!j,Ne);if(rt&&d.validatingFields&&v([te]),Pt[W.name]&&($.valid=!1,j))break;!j&&(X(Pt,W.name)?Ne?LU(n.errors,Pt,W.name):We(n.errors,W.name,Pt[W.name]):Tt(n.errors,W.name))}!fn(re)&&await O(re,j,$)}}return $.valid},P=()=>{for(const D of a.unMount){const j=X(r,D);j&&(j._f.refs?j._f.refs.every($=>!iy($)):!iy(j._f.ref))&&Ys(D)}a.unMount=new Set},k=(D,j)=>!e.disabled&&(D&&j&&We(i,D,j),!ui(Pe(),s)),H=(D,j,$)=>yA(D,a,{...o.mount?i:mt(j)?s:Yr(D)?{[D]:j}:j},$,j),ue=D=>Om(X(o.mount?i:s,D,e.shouldUnregister?X(s,D,[]):[])),ce=(D,j,$={})=>{const te=X(r,D);let G=j;if(te){const W=te._f;W&&(!W.disabled&&We(i,D,TA(j,W)),G=gp(W.ref)&&mn(j)?"":j,_A(W.ref)?[...W.ref.options].forEach(re=>re.selected=G.includes(re.value)):W.refs?Gd(W.ref)?W.refs.length>1?W.refs.forEach(re=>(!re.defaultChecked||!re.disabled)&&(re.checked=Array.isArray(G)?!!G.find(Ne=>Ne===re.value):G===re.value)):W.refs[0]&&(W.refs[0].checked=!!G):W.refs.forEach(re=>re.checked=re.value===G):o0(W.ref)?W.ref.value="":(W.ref.value=G,W.ref.type||f.state.next({name:D,values:Vt(i)})))}($.shouldDirty||$.shouldTouch)&&C(D,G,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&_e(D)},ge=(D,j,$)=>{for(const te in j){const G=j[te],W=`${D}.${te}`,re=X(r,W);(a.array.has(D)||vt(G)||re&&!re._f)&&!No(G)?ge(W,G,$):ce(W,G,$)}},z=(D,j,$={})=>{const te=X(r,D),G=a.array.has(D),W=Vt(j);We(i,D,W),G?(f.array.next({name:D,values:Vt(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&$.shouldDirty&&f.state.next({name:D,dirtyFields:zc(s,i),isDirty:k(D,W)})):te&&!te._f&&!mn(W)?ge(D,W,$):ce(D,W,$),vI(D,a)&&f.state.next({...n}),f.state.next({name:o.mount?D:void 0,values:Vt(i)})},Z=async D=>{o.mount=!0;const j=D.target;let $=j.name,te=!0;const G=X(r,$),W=re=>{te=Number.isNaN(re)||No(re)&&isNaN(re.getTime())||ui(re,X(i,$,re))};if(G){let re,Ne;const rt=j.type?mI(G._f):hA(D),Pt=D.type===mp.BLUR||D.type===mp.FOCUS_OUT,po=!PU(G._f)&&!e.resolver&&!X(n.errors,$)&&!G._f.deps||DU(Pt,X(n.touchedFields,$),n.isSubmitted,w,g),Ea=vI($,a,Pt);We(i,$,rt),Pt?(G._f.onBlur&&G._f.onBlur(D),l&&l(0)):G._f.onChange&&G._f.onChange(D);const xa=C($,rt,Pt),_c=!fn(xa)||Ea;if(!Pt&&f.state.next({name:$,type:D.type,values:Vt(i)}),po)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?Pt&&E():Pt||E()),_c&&f.state.next({name:$,...Ea?{}:xa});if(!Pt&&Ea&&f.state.next({...n}),e.resolver){const{errors:mh}=await S([$]);if(W(rt),te){const cg=_I(n.errors,r,$),Ta=_I(mh,r,cg.name||$);re=Ta.error,$=Ta.name,Ne=fn(mh)}}else v([$],!0),re=(await EI(G,a.disabled,i,_,e.shouldUseNativeValidation))[$],v([$]),W(rt),te&&(re?Ne=!1:(d.isValid||h.isValid)&&(Ne=await O(r,!0)));te&&(G._f.deps&&_e(G._f.deps),T($,Ne,re,xa))}},ae=(D,j)=>{if(X(n.errors,j)&&D.focus)return D.focus(),1},_e=async(D,j={})=>{let $,te;const G=wu(D);if(e.resolver){const W=await R(mt(D)?D:G);$=fn(W),te=D?!G.some(re=>X(W,re)):$}else D?(te=(await Promise.all(G.map(async W=>{const re=X(r,W);return await O(re&&re._f?{[W]:re}:re)}))).every(Boolean),!(!te&&!n.isValid)&&E()):te=$=await O(r);return f.state.next({...!Yr(D)||(d.isValid||h.isValid)&&$!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:$}:{},errors:n.errors}),j.shouldFocus&&!te&&Eu(r,ae,D?G:a.mount),te},Pe=D=>{const j={...o.mount?i:s};return mt(D)?j:Yr(D)?X(j,D):D.map($=>X(j,$))},Be=(D,j)=>({invalid:!!X((j||n).errors,D),isDirty:!!X((j||n).dirtyFields,D),error:X((j||n).errors,D),isValidating:!!X(n.validatingFields,D),isTouched:!!X((j||n).touchedFields,D)}),Gt=D=>{D&&wu(D).forEach(j=>Tt(n.errors,j)),f.state.next({errors:D?n.errors:{}})},Tn=(D,j,$)=>{const te=(X(r,D,{_f:{}})._f||{}).ref,G=X(n.errors,D)||{},{ref:W,message:re,type:Ne,...rt}=G;We(n.errors,D,{...rt,...j,ref:te}),f.state.next({name:D,errors:n.errors,isValid:!1}),$&&$.shouldFocus&&te&&te.focus&&te.focus()},Dn=(D,j)=>_r(D)?f.state.subscribe({next:$=>D(H(void 0,j),$)}):H(D,j,!0),cn=D=>f.state.subscribe({next:j=>{OU(D.name,j.name,D.exact)&&NU(j,D.formState||d,ms,D.reRenderRoot)&&D.callback({values:{...i},...n,...j})}}).unsubscribe,_a=D=>(o.mount=!0,h={...h,...D.formState},cn({...D,formState:h})),Ys=(D,j={})=>{for(const $ of D?wu(D):a.mount)a.mount.delete($),a.array.delete($),j.keepValue||(Tt(r,$),Tt(i,$)),!j.keepError&&Tt(n.errors,$),!j.keepDirty&&Tt(n.dirtyFields,$),!j.keepTouched&&Tt(n.touchedFields,$),!j.keepIsValidating&&Tt(n.validatingFields,$),!e.shouldUnregister&&!j.keepDefaultValue&&Tt(s,$);f.state.next({values:Vt(i)}),f.state.next({...n,...j.keepDirty?{isDirty:k()}:{}}),!j.keepIsValid&&E()},Lr=({disabled:D,name:j})=>{(jn(D)&&o.mount||D||a.disabled.has(j))&&(D?a.disabled.add(j):a.disabled.delete(j))},cr=(D,j={})=>{let $=X(r,D);const te=jn(j.disabled)||jn(e.disabled);return We(r,D,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:D}},name:D,mount:!0,...j}}),a.mount.add(D),$?Lr({disabled:jn(j.disabled)?j.disabled:e.disabled,name:D}):F(D,!0,j.value),{...te?{disabled:j.disabled||e.disabled}:{},...e.progressive?{required:!!j.required,min:Bc(j.min),max:Bc(j.max),minLength:Bc(j.minLength),maxLength:Bc(j.maxLength),pattern:Bc(j.pattern)}:{},name:D,onChange:Z,onBlur:Z,ref:G=>{if(G){cr(D,j),$=X(r,D);const W=mt(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,re=SU(W),Ne=$._f.refs||[];if(re?Ne.find(rt=>rt===W):W===$._f.ref)return;We(r,D,{_f:{...$._f,...re?{refs:[...Ne.filter(iy),W,...Array.isArray(X(s,D))?[{}]:[]],ref:{type:W.type,name:D}}:{ref:W}}}),F(D,!1,void 0,W)}else $=X(r,D,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(fA(a.array,D)&&o.action)&&a.unMount.add(D)}}},fs=()=>e.shouldFocusError&&Eu(r,ae,a.mount),ur=D=>{jn(D)&&(f.state.next({disabled:D}),Eu(r,(j,$)=>{const te=X(r,$);te&&(j.disabled=te._f.disabled||D,Array.isArray(te._f.refs)&&te._f.refs.forEach(G=>{G.disabled=te._f.disabled||D}))},0,!1))},ps=(D,j)=>async $=>{let te;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let G=Vt(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:re}=await S();n.errors=W,G=re}else await O(r);if(a.disabled.size)for(const W of a.disabled)We(G,W,void 0);if(Tt(n.errors,"root"),fn(n.errors)){f.state.next({errors:{}});try{await D(G,$)}catch(W){te=W}}else j&&await j({...n.errors},$),fs(),setTimeout(fs);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fn(n.errors)&&!te,submitCount:n.submitCount+1,errors:n.errors}),te)throw te},ho=(D,j={})=>{X(r,D)&&(mt(j.defaultValue)?z(D,Vt(X(s,D))):(z(D,j.defaultValue),We(s,D,Vt(j.defaultValue))),j.keepTouched||Tt(n.touchedFields,D),j.keepDirty||(Tt(n.dirtyFields,D),n.isDirty=j.defaultValue?k(D,Vt(X(s,D))):k()),j.keepError||(Tt(n.errors,D),d.isValid&&E()),f.state.next({...n}))},fo=(D,j={})=>{const $=D?Vt(D):s,te=Vt($),G=fn(D),W=G?s:te;if(j.keepDefaultValues||(s=$),!j.keepValues){if(j.keepDirtyValues){const re=new Set([...a.mount,...Object.keys(zc(s,i))]);for(const Ne of Array.from(re))X(n.dirtyFields,Ne)?We(W,Ne,X(i,Ne)):z(Ne,X(W,Ne))}else{if(s0&&mt(D))for(const re of a.mount){const Ne=X(r,re);if(Ne&&Ne._f){const rt=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(gp(rt)){const Pt=rt.closest("form");if(Pt){Pt.reset();break}}}}for(const re of a.mount)z(re,X(W,re))}i=Vt(W),f.array.next({values:{...W}}),f.state.next({values:{...W}})}a={mount:j.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!j.keepIsValid||!!j.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:j.keepSubmitCount?n.submitCount:0,isDirty:G?!1:j.keepDirty?n.isDirty:!!(j.keepDefaultValues&&!ui(D,s)),isSubmitted:j.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:G?{}:j.keepDirtyValues?j.keepDefaultValues&&i?zc(s,i):n.dirtyFields:j.keepDefaultValues&&D?zc(s,D):j.keepDirty?n.dirtyFields:{},touchedFields:j.keepTouched?n.touchedFields:{},errors:j.keepErrors?n.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},wa=(D,j)=>fo(_r(D)?D(i):D,j),yc=(D,j={})=>{const $=X(r,D),te=$&&$._f;if(te){const G=te.refs?te.refs[0]:te.ref;G.focus&&(G.focus(),j.shouldSelect&&_r(G.select)&&G.select())}},ms=D=>{n={...n,...D}},vc={control:{register:cr,unregister:Ys,getFieldState:Be,handleSubmit:ps,setError:Tn,_subscribe:cn,_runSchema:S,_getWatch:H,_getDirty:k,_setValid:E,_setFieldArray:I,_setDisabledField:Lr,_setErrors:M,_getFieldArray:ue,_reset:fo,_resetDefaultValues:()=>_r(e.defaultValues)&&e.defaultValues().then(D=>{wa(D,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:ur,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(D){o=D},get _defaultValues(){return s},get _names(){return a},set _names(D){a=D},get _formState(){return n},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:_a,trigger:_e,register:cr,handleSubmit:ps,watch:Dn,setValue:z,getValues:Pe,reset:wa,resetField:ho,clearErrors:Gt,unregister:Ys,setError:Tn,setFocus:yc,getFieldState:Be};return{...vc,formControl:vc}}function xI(t={}){const e=Ee.useRef(void 0),n=Ee.useRef(void 0),[r,s]=Ee.useState({isDirty:!1,isValidating:!1,isLoading:_r(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:_r(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:VU(t),formState:r},t.formControl&&t.defaultValues&&!_r(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,Ee.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),Ee.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ee.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Ee.useEffect(()=>{t.values&&!ui(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),Ee.useEffect(()=>{t.errors&&!fn(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),Ee.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Ee.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=gA(r,i),e.current}const TI=(t,e,n)=>{if(t&&"reportValidity"in t){const r=X(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},CA=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?TI(r.ref,n,t):r.refs&&r.refs.forEach(s=>TI(s,n,t))}},jU=(t,e)=>{e.shouldUseNativeValidation&&CA(t,e);const n={};for(const r in t){const s=X(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(UU(e.names||Object.keys(t),r)){const o=Object.assign({},X(n,r));We(o,"root",i),We(n,r,o)}else We(n,r,i)}return n},UU=(t,e)=>t.some(n=>n.startsWith(e+"."));var $U=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=vA(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},II=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&CA({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:jU($U(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Fe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Fe||(Fe={}));var Kv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Kv||(Kv={}));const ne=Fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Is=t=>{switch(typeof t){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return isNaN(t)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(t)?ne.array:t===null?ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ne.promise:typeof Map<"u"&&t instanceof Map?ne.map:typeof Set<"u"&&t instanceof Set?ne.set:typeof Date<"u"&&t instanceof Date?ne.date:ne.object;default:return ne.unknown}},q=Fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),zU=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Wn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Wn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Wn.create=t=>new Wn(t);const Ul=(t,e)=>{let n;switch(t.code){case q.invalid_type:t.received===ne.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Fe.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:n=`Unrecognized key(s) in object: ${Fe.joinValues(t.keys,", ")}`;break;case q.invalid_union:n="Invalid input";break;case q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Fe.joinValues(t.options)}`;break;case q.invalid_enum_value:n=`Invalid enum value. Expected ${Fe.joinValues(t.options)}, received '${t.received}'`;break;case q.invalid_arguments:n="Invalid function arguments";break;case q.invalid_return_type:n="Invalid function return type";break;case q.invalid_date:n="Invalid date";break;case q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Fe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case q.custom:n="Invalid input";break;case q.invalid_intersection_types:n="Intersection results could not be merged";break;case q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case q.not_finite:n="Number must be finite";break;default:n=e.defaultError,Fe.assertNever(t)}return{message:n}};let SA=Ul;function BU(t){SA=t}function _p(){return SA}const wp=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},WU=[];function ee(t,e){const n=_p(),r=wp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ul?void 0:Ul].filter(s=>!!s)});t.common.issues.push(r)}class an{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ye;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return an.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const ye=Object.freeze({status:"aborted"}),Ya=t=>({status:"dirty",value:t}),wn=t=>({status:"valid",value:t}),Qv=t=>t.status==="aborted",Yv=t=>t.status==="dirty",ra=t=>t.status==="valid",nd=t=>typeof Promise<"u"&&t instanceof Promise;function Ep(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function bA(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));var tu,nu;class os{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const CI=(t,e)=>{if(ra(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wn(t.common.issues);return this._error=n,this._error}}};function Te(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=d??n)!==null&&c!==void 0?c:a.defaultError}},description:s}}class Ce{get description(){return this._def.description}_getType(e){return Is(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Is(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new an,ctx:{common:e.parent.common,data:e.data,parsedType:Is(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(nd(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Is(e)},i=this._parseSync({data:e,path:s.path,parent:s});return CI(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Is(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return ra(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>ra(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Is(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(nd(s)?s:Promise.resolve(s));return CI(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:q.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Mr({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ts.create(this,this._def)}nullable(){return Wi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rr.create(this)}promise(){return zl.create(this,this._def)}or(e){return od.create([this,e],this._def)}and(e){return ad.create(this,e,this._def)}transform(e){return new Mr({...Te(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hd({...Te(this._def),innerType:this,defaultValue:n,typeName:me.ZodDefault})}brand(){return new l0({typeName:me.ZodBranded,type:this,...Te(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new fd({...Te(this._def),innerType:this,catchValue:n,typeName:me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Kd.create(this,e)}readonly(){return pd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const HU=/^c[^\s-]{8,}$/i,qU=/^[0-9a-z]+$/,GU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,KU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QU=/^[a-z0-9_-]{21}$/i,YU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ZU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,XU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,JU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oy;const e3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,n3=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,r3=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s3=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,i3=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",o3=new RegExp(`^${kA}$`);function RA(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function a3(t){return new RegExp(`^${RA(t)}$`)}function AA(t){let e=`${kA}T${RA(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function l3(t,e){return!!((e==="v4"||!e)&&e3.test(t)||(e==="v6"||!e)&&n3.test(t))}function c3(t,e){if(!YU.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function u3(t,e){return!!((e==="v4"||!e)&&t3.test(t)||(e==="v6"||!e)&&r3.test(t))}class xr extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){const i=this._getOrReturnCtx(e);return ee(i,{code:q.invalid_type,expected:ne.string,received:i.parsedType}),ye}const r=new an;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ee(s,{code:q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ee(s,{code:q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")XU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"email",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")oy||(oy=new RegExp(JU,"u")),oy.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"emoji",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"uuid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")QU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"nanoid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")HU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")qU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid2",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")GU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ulid",code:q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ee(s,{validation:"url",code:q.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"regex",code:q.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?AA(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?o3.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?a3(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?ZU.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"duration",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?l3(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ip",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?c3(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"jwt",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?u3(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cidr",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?s3.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64",code:q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?i3.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64url",code:q.invalid_string,message:i.message}),r.dirty()):Fe.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:q.invalid_string,...le.errToObj(r)})}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...le.errToObj(n)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new xr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}xr.create=t=>{var e;return new xr({checks:[],typeName:me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function d3(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class $i extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){const i=this._getOrReturnCtx(e);return ee(i,{code:q.invalid_type,expected:ne.number,received:i.parsedType}),ye}let r;const s=new an;for(const i of this._def.checks)i.kind==="int"?Fe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:q.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?d3(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:q.not_finite,message:i.message}),s.dirty()):Fe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new $i({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new $i({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Fe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}$i.create=t=>new $i({checks:[],typeName:me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class zi extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let r;const s=new an;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Fe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:ne.bigint,received:n.parsedType}),ye}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new zi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new zi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zi.create=t=>{var e;return new zi({checks:[],typeName:me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};class rd extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.boolean,received:r.parsedType}),ye}return wn(e.data)}}rd.create=t=>new rd({typeName:me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class sa extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){const i=this._getOrReturnCtx(e);return ee(i,{code:q.invalid_type,expected:ne.date,received:i.parsedType}),ye}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ee(i,{code:q.invalid_date}),ye}const r=new an;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Fe.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new sa({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}sa.create=t=>new sa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:me.ZodDate,...Te(t)});class xp extends Ce{_parse(e){if(this._getType(e)!==ne.symbol){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.symbol,received:r.parsedType}),ye}return wn(e.data)}}xp.create=t=>new xp({typeName:me.ZodSymbol,...Te(t)});class sd extends Ce{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.undefined,received:r.parsedType}),ye}return wn(e.data)}}sd.create=t=>new sd({typeName:me.ZodUndefined,...Te(t)});class id extends Ce{_parse(e){if(this._getType(e)!==ne.null){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.null,received:r.parsedType}),ye}return wn(e.data)}}id.create=t=>new id({typeName:me.ZodNull,...Te(t)});class $l extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return wn(e.data)}}$l.create=t=>new $l({typeName:me.ZodAny,...Te(t)});class qo extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wn(e.data)}}qo.create=t=>new qo({typeName:me.ZodUnknown,...Te(t)});class Us extends Ce{_parse(e){const n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:ne.never,received:n.parsedType}),ye}}Us.create=t=>new Us({typeName:me.ZodNever,...Te(t)});class Tp extends Ce{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.void,received:r.parsedType}),ye}return wn(e.data)}}Tp.create=t=>new Tp({typeName:me.ZodVoid,...Te(t)});class Rr extends Ce{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ne.array)return ee(n,{code:q.invalid_type,expected:ne.array,received:n.parsedType}),ye;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ee(n,{code:o?q.too_big:q.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ee(n,{code:q.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ee(n,{code:q.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new os(n,o,n.path,a)))).then(o=>an.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new os(n,o,n.path,a)));return an.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Rr({...this._def,minLength:{value:e,message:le.toString(n)}})}max(e,n){return new Rr({...this._def,maxLength:{value:e,message:le.toString(n)}})}length(e,n){return new Rr({...this._def,exactLength:{value:e,message:le.toString(n)}})}nonempty(e){return this.min(1,e)}}Rr.create=(t,e)=>new Rr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Te(e)});function Na(t){if(t instanceof st){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ts.create(Na(r))}return new st({...t._def,shape:()=>e})}else return t instanceof Rr?new Rr({...t._def,type:Na(t.element)}):t instanceof ts?ts.create(Na(t.unwrap())):t instanceof Wi?Wi.create(Na(t.unwrap())):t instanceof as?as.create(t.items.map(e=>Na(e))):t}class st extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Fe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ne.object){const c=this._getOrReturnCtx(e);return ee(c,{code:q.invalid_type,expected:ne.object,received:c.parsedType}),ye}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Us&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new os(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Us){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(ee(s,{code:q.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new os(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,f=await d.value;c.push({key:h,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>an.mergeObjectSync(r,c)):an.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new st({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=le.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new st({...this._def,unknownKeys:"strip"})}passthrough(){return new st({...this._def,unknownKeys:"passthrough"})}extend(e){return new st({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new st({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new st({...this._def,catchall:e})}pick(e){const n={};return Fe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new st({...this._def,shape:()=>n})}omit(e){const n={};return Fe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new st({...this._def,shape:()=>n})}deepPartial(){return Na(this)}partial(e){const n={};return Fe.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new st({...this._def,shape:()=>n})}required(e){const n={};return Fe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ts;)i=i._def.innerType;n[r]=i}}),new st({...this._def,shape:()=>n})}keyof(){return PA(Fe.objectKeys(this.shape))}}st.create=(t,e)=>new st({shape:()=>t,unknownKeys:"strip",catchall:Us.create(),typeName:me.ZodObject,...Te(e)});st.strictCreate=(t,e)=>new st({shape:()=>t,unknownKeys:"strict",catchall:Us.create(),typeName:me.ZodObject,...Te(e)});st.lazycreate=(t,e)=>new st({shape:t,unknownKeys:"strip",catchall:Us.create(),typeName:me.ZodObject,...Te(e)});class od extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Wn(a.ctx.common.issues));return ee(n,{code:q.invalid_union,unionErrors:o}),ye}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Wn(l));return ee(n,{code:q.invalid_union,unionErrors:a}),ye}}get options(){return this._def.options}}od.create=(t,e)=>new od({options:t,typeName:me.ZodUnion,...Te(e)});const Es=t=>t instanceof cd?Es(t.schema):t instanceof Mr?Es(t.innerType()):t instanceof ud?[t.value]:t instanceof Bi?t.options:t instanceof dd?Fe.objectValues(t.enum):t instanceof hd?Es(t._def.innerType):t instanceof sd?[void 0]:t instanceof id?[null]:t instanceof ts?[void 0,...Es(t.unwrap())]:t instanceof Wi?[null,...Es(t.unwrap())]:t instanceof l0||t instanceof pd?Es(t.unwrap()):t instanceof fd?Es(t._def.innerType):[];class Mm extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.object)return ee(n,{code:q.invalid_type,expected:ne.object,received:n.parsedType}),ye;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ee(n,{code:q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Es(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Mm({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Te(r)})}}function Zv(t,e){const n=Is(t),r=Is(e);if(t===e)return{valid:!0,data:t};if(n===ne.object&&r===ne.object){const s=Fe.objectKeys(e),i=Fe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=Zv(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ne.array&&r===ne.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=Zv(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===ne.date&&r===ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ad extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Qv(i)||Qv(o))return ye;const a=Zv(i.value,o.value);return a.valid?((Yv(i)||Yv(o))&&n.dirty(),{status:n.value,value:a.data}):(ee(r,{code:q.invalid_intersection_types}),ye)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ad.create=(t,e,n)=>new ad({left:t,right:e,typeName:me.ZodIntersection,...Te(n)});class as extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.array)return ee(r,{code:q.invalid_type,expected:ne.array,received:r.parsedType}),ye;if(r.data.length<this._def.items.length)return ee(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&r.data.length>this._def.items.length&&(ee(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new os(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>an.mergeArray(n,o)):an.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new as({...this._def,rest:e})}}as.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new as({items:t,typeName:me.ZodTuple,rest:null,...Te(e)})};class ld extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.object)return ee(r,{code:q.invalid_type,expected:ne.object,received:r.parsedType}),ye;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new os(r,a,r.path,a)),value:o._parse(new os(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?an.mergeObjectAsync(n,s):an.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ce?new ld({keyType:e,valueType:n,typeName:me.ZodRecord,...Te(r)}):new ld({keyType:xr.create(),valueType:e,typeName:me.ZodRecord,...Te(n)})}}class Ip extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.map)return ee(r,{code:q.invalid_type,expected:ne.map,received:r.parsedType}),ye;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new os(r,a,r.path,[c,"key"])),value:i._parse(new os(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return ye;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return ye;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}}}}Ip.create=(t,e,n)=>new Ip({valueType:e,keyType:t,typeName:me.ZodMap,...Te(n)});class ia extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.set)return ee(r,{code:q.invalid_type,expected:ne.set,received:r.parsedType}),ye;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ee(r,{code:q.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ee(r,{code:q.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return ye;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new os(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new ia({...this._def,minSize:{value:e,message:le.toString(n)}})}max(e,n){return new ia({...this._def,maxSize:{value:e,message:le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ia.create=(t,e)=>new ia({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Te(e)});class ll extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.function)return ee(n,{code:q.invalid_type,expected:ne.function,received:n.parsedType}),ye;function r(a,l){return wp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_p(),Ul].filter(c=>!!c),issueData:{code:q.invalid_arguments,argumentsError:l}})}function s(a,l){return wp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_p(),Ul].filter(c=>!!c),issueData:{code:q.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof zl){const a=this;return wn(async function(...l){const c=new Wn([]),d=await a._def.args.parseAsync(l,i).catch(g=>{throw c.addIssue(r(l,g)),c}),h=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(s(h,g)),c})})}else{const a=this;return wn(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new Wn([r(l,c.error)]);const d=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(d,i);if(!h.success)throw new Wn([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ll({...this._def,args:as.create(e).rest(qo.create())})}returns(e){return new ll({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ll({args:e||as.create([]).rest(qo.create()),returns:n||qo.create(),typeName:me.ZodFunction,...Te(r)})}}class cd extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}cd.create=(t,e)=>new cd({getter:t,typeName:me.ZodLazy,...Te(e)});class ud extends Ce{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ee(n,{received:n.data,code:q.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}ud.create=(t,e)=>new ud({value:t,typeName:me.ZodLiteral,...Te(e)});function PA(t,e){return new Bi({values:t,typeName:me.ZodEnum,...Te(e)})}class Bi extends Ce{constructor(){super(...arguments),tu.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ee(n,{expected:Fe.joinValues(r),received:n.parsedType,code:q.invalid_type}),ye}if(Ep(this,tu)||bA(this,tu,new Set(this._def.values)),!Ep(this,tu).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ee(n,{received:n.data,code:q.invalid_enum_value,options:r}),ye}return wn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Bi.create(e,{...this._def,...n})}exclude(e,n=this._def){return Bi.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}tu=new WeakMap;Bi.create=PA;class dd extends Ce{constructor(){super(...arguments),nu.set(this,void 0)}_parse(e){const n=Fe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ne.string&&r.parsedType!==ne.number){const s=Fe.objectValues(n);return ee(r,{expected:Fe.joinValues(s),received:r.parsedType,code:q.invalid_type}),ye}if(Ep(this,nu)||bA(this,nu,new Set(Fe.getValidEnumValues(this._def.values))),!Ep(this,nu).has(e.data)){const s=Fe.objectValues(n);return ee(r,{received:r.data,code:q.invalid_enum_value,options:s}),ye}return wn(e.data)}get enum(){return this._def.values}}nu=new WeakMap;dd.create=(t,e)=>new dd({values:t,typeName:me.ZodNativeEnum,...Te(e)});class zl extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.promise&&n.common.async===!1)return ee(n,{code:q.invalid_type,expected:ne.promise,received:n.parsedType}),ye;const r=n.parsedType===ne.promise?n.data:Promise.resolve(n.data);return wn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zl.create=(t,e)=>new zl({type:t,typeName:me.ZodPromise,...Te(e)});class Mr extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ee(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return ye;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?ye:l.status==="dirty"||n.value==="dirty"?Ya(l.value):l});{if(n.value==="aborted")return ye;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?ye:a.status==="dirty"||n.value==="dirty"?Ya(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ra(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ra(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Fe.assertNever(s)}}Mr.create=(t,e,n)=>new Mr({schema:t,typeName:me.ZodEffects,effect:e,...Te(n)});Mr.createWithPreprocess=(t,e,n)=>new Mr({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Te(n)});class ts extends Ce{_parse(e){return this._getType(e)===ne.undefined?wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ts.create=(t,e)=>new ts({innerType:t,typeName:me.ZodOptional,...Te(e)});class Wi extends Ce{_parse(e){return this._getType(e)===ne.null?wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wi.create=(t,e)=>new Wi({innerType:t,typeName:me.ZodNullable,...Te(e)});class hd extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hd.create=(t,e)=>new hd({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class fd extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return nd(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wn(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Wn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}fd.create=(t,e)=>new fd({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class Cp extends Ce{_parse(e){if(this._getType(e)!==ne.nan){const r=this._getOrReturnCtx(e);return ee(r,{code:q.invalid_type,expected:ne.nan,received:r.parsedType}),ye}return{status:"valid",value:e.data}}}Cp.create=t=>new Cp({typeName:me.ZodNaN,...Te(t)});const h3=Symbol("zod_brand");class l0 extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Kd extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ye:i.status==="dirty"?(n.dirty(),Ya(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ye:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Kd({in:e,out:n,typeName:me.ZodPipeline})}}class pd extends Ce{_parse(e){const n=this._def.innerType._parse(e),r=s=>(ra(s)&&(s.value=Object.freeze(s.value)),s);return nd(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}pd.create=(t,e)=>new pd({innerType:t,typeName:me.ZodReadonly,...Te(e)});function SI(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function NA(t,e={},n){return t?$l.create().superRefine((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,d;if(!l){const h=SI(e,r),f=(d=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...h,fatal:f})}});if(!a){const l=SI(e,r),c=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...l,fatal:c})}}):$l.create()}const f3={object:st.lazycreate};var me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));const p3=(t,e={message:`Input not instance of ${t.name}`})=>NA(n=>n instanceof t,e),OA=xr.create,DA=$i.create,m3=Cp.create,g3=zi.create,MA=rd.create,y3=sa.create,v3=xp.create,_3=sd.create,w3=id.create,E3=$l.create,x3=qo.create,T3=Us.create,I3=Tp.create,C3=Rr.create,S3=st.create,b3=st.strictCreate,k3=od.create,R3=Mm.create,A3=ad.create,P3=as.create,N3=ld.create,O3=Ip.create,D3=ia.create,M3=ll.create,L3=cd.create,F3=ud.create,V3=Bi.create,j3=dd.create,U3=zl.create,bI=Mr.create,$3=ts.create,z3=Wi.create,B3=Mr.createWithPreprocess,W3=Kd.create,H3=()=>OA().optional(),q3=()=>DA().optional(),G3=()=>MA().optional(),K3={string:t=>xr.create({...t,coerce:!0}),number:t=>$i.create({...t,coerce:!0}),boolean:t=>rd.create({...t,coerce:!0}),bigint:t=>zi.create({...t,coerce:!0}),date:t=>sa.create({...t,coerce:!0})},Q3=ye;var xu=Object.freeze({__proto__:null,defaultErrorMap:Ul,setErrorMap:BU,getErrorMap:_p,makeIssue:wp,EMPTY_PATH:WU,addIssueToContext:ee,ParseStatus:an,INVALID:ye,DIRTY:Ya,OK:wn,isAborted:Qv,isDirty:Yv,isValid:ra,isAsync:nd,get util(){return Fe},get objectUtil(){return Kv},ZodParsedType:ne,getParsedType:Is,ZodType:Ce,datetimeRegex:AA,ZodString:xr,ZodNumber:$i,ZodBigInt:zi,ZodBoolean:rd,ZodDate:sa,ZodSymbol:xp,ZodUndefined:sd,ZodNull:id,ZodAny:$l,ZodUnknown:qo,ZodNever:Us,ZodVoid:Tp,ZodArray:Rr,ZodObject:st,ZodUnion:od,ZodDiscriminatedUnion:Mm,ZodIntersection:ad,ZodTuple:as,ZodRecord:ld,ZodMap:Ip,ZodSet:ia,ZodFunction:ll,ZodLazy:cd,ZodLiteral:ud,ZodEnum:Bi,ZodNativeEnum:dd,ZodPromise:zl,ZodEffects:Mr,ZodTransformer:Mr,ZodOptional:ts,ZodNullable:Wi,ZodDefault:hd,ZodCatch:fd,ZodNaN:Cp,BRAND:h3,ZodBranded:l0,ZodPipeline:Kd,ZodReadonly:pd,custom:NA,Schema:Ce,ZodSchema:Ce,late:f3,get ZodFirstPartyTypeKind(){return me},coerce:K3,any:E3,array:C3,bigint:g3,boolean:MA,date:y3,discriminatedUnion:R3,effect:bI,enum:V3,function:M3,instanceof:p3,intersection:A3,lazy:L3,literal:F3,map:O3,nan:m3,nativeEnum:j3,never:T3,null:w3,nullable:z3,number:DA,object:S3,oboolean:G3,onumber:q3,optional:$3,ostring:H3,pipeline:W3,preprocess:B3,promise:U3,record:N3,set:D3,strictObject:b3,string:OA,symbol:v3,transformer:bI,tuple:P3,undefined:_3,union:k3,unknown:x3,void:I3,NEVER:Q3,ZodIssueCode:q,quotelessJson:zU,ZodError:Wn});const xo=A.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:ct("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));xo.displayName="Input";const Y3=Hw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wr=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Kk:"button";return m.jsx(o,{className:ct(Y3({variant:e,size:n,className:t})),ref:i,...s})});wr.displayName="Button";var Z3="Label",LA=A.forwardRef((t,e)=>m.jsx(At.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LA.displayName=Z3;var FA=LA;const X3=Hw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),VA=A.forwardRef(({className:t,...e},n)=>m.jsx(FA,{ref:n,className:ct(X3(),t),...e}));VA.displayName=FA.displayName;const kI=EU,jA=A.createContext({}),Aa=({...t})=>m.jsx(jA.Provider,{value:{name:t.name},children:m.jsx(CU,{...t})}),Lm=()=>{const t=A.useContext(jA),e=A.useContext(UA),{getFieldState:n,formState:r}=Dm(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},UA=A.createContext({}),To=A.forwardRef(({className:t,...e},n)=>{const r=A.useId();return m.jsx(UA.Provider,{value:{id:r},children:m.jsx("div",{ref:n,className:ct("space-y-2",t),...e})})});To.displayName="FormItem";const Io=A.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=Lm();return m.jsx(VA,{ref:n,className:ct(r&&"text-destructive",t),htmlFor:s,...e})});Io.displayName="FormLabel";const Co=A.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=Lm();return m.jsx(Kk,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});Co.displayName="FormControl";const J3=A.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Lm();return m.jsx("p",{ref:n,id:r,className:ct("text-sm text-muted-foreground",t),...e})});J3.displayName="FormDescription";const So=A.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=Lm(),o=s?String((s==null?void 0:s.message)??""):e;return o?m.jsx("p",{ref:r,id:i,className:ct("text-sm font-medium text-destructive",t),...n,children:o}):null});So.displayName="FormMessage";const e6=()=>{};var RI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=function(t,e){if(!t)throw lc(e)},lc=function(t){return new Error("Firebase Database ("+$A.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},t6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new n6;const f=i<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(t){const e=zA(t);return c0.encodeByteArray(e,!0)},Sp=function(t){return BA(t).replace(/\./g,"")},bp=function(t){try{return c0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){return WA(void 0,t)}function WA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!s6(n)||(t[n]=WA(t[n],e[n]));return t}function s6(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=()=>i6().__FIREBASE_DEFAULTS__,a6=()=>{if(typeof process>"u"||typeof RI>"u")return;const t=RI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bp(t[1]);return e&&JSON.parse(e)},Fm=()=>{try{return e6()||o6()||a6()||l6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HA=t=>{var e,n;return(n=(e=Fm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},u0=t=>{const e=HA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qA=()=>{var t;return(t=Fm())===null||t===void 0?void 0:t.config},GA=t=>{var e;return(e=Fm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return t.endsWith(".cloudworkstations.dev")}async function Vm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sp(JSON.stringify(n)),Sp(JSON.stringify(o)),""].join(".")}const Tu={};function c6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?t.emulator.push(e):t.prod.push(e);return t}function u6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let AI=!1;function io(t,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||Tu[t]===e||Tu[t]||AI)return;Tu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=c6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{AI=!0,o()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=u6(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),x=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),d(x,_);const N=c();l(v,E),I.append(v,w,x,N),document.body.appendChild(I)}i?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function d6(){var t;const e=(t=Fm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f6(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YA(){return $A.NODE_ADMIN===!0}function p6(){return!d6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZA(){try{return typeof indexedDB=="object"}catch{return!1}}function XA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function m6(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=g6,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?y6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lr(s,a,r)}}function y6(t,e){return t.replace(v6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const v6=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){return JSON.parse(t)}function Ct(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=md(bp(i[0])||""),n=md(bp(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},_6=function(t){const e=JA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},w6=function(t){const e=JA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Xv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kp(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function $s(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(PI(i)&&PI(o)){if(!$s(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function PI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ru(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function su(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),d=1518500249):(c=i^o^a,d=1859775393):h<60?(c=i&o|a&(i|o),d=2400959708):(c=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+c+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function x6(t,e){const n=new T6(t,e);return n.subscribe.bind(n)}class T6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");I6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ay),s.error===void 0&&(s.error=ay),s.complete===void 0&&(s.complete=ay);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ay(){}function eP(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Q(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=1e3,b6=2,k6=4*60*60*1e3,R6=.5;function NI(t,e=S6,n=b6){const r=e*Math.pow(n,t),s=Math.round(R6*r*(Math.random()-.5)*2);return Math.min(k6,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Kn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N6(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P6(t){return t===bo?void 0:t}function N6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const D6={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},M6=ke.INFO,L6={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},F6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=L6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qd{constructor(e){this.name=e,this._logLevel=M6,this._logHandler=F6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const V6=(t,e)=>e.some(n=>t instanceof n);let OI,DI;function j6(){return OI||(OI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U6(){return DI||(DI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tP=new WeakMap,Jv=new WeakMap,nP=new WeakMap,ly=new WeakMap,p0=new WeakMap;function $6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tP.set(n,t)}).catch(()=>{}),p0.set(e,t),e}function z6(t){if(Jv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jv.set(t,e)}let e_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function B6(t){e_=t(e_)}function W6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cy(this),e,...n);return nP.set(r,e.sort?e.sort():[e]),Pi(r)}:U6().includes(t)?function(...e){return t.apply(cy(this),e),Pi(tP.get(this))}:function(...e){return Pi(t.apply(cy(this),e))}}function H6(t){return typeof t=="function"?W6(t):(t instanceof IDBTransaction&&z6(t),V6(t,j6())?new Proxy(t,e_):t)}function Pi(t){if(t instanceof IDBRequest)return $6(t);if(ly.has(t))return ly.get(t);const e=H6(t);return e!==t&&(ly.set(t,e),p0.set(e,t)),e}const cy=t=>p0.get(t);function rP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Pi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Pi(o.result),l.oldVersion,l.newVersion,Pi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const q6=["get","getKey","getAll","getAllKeys","count"],G6=["put","add","delete","clear"],uy=new Map;function MI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uy.get(e))return uy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=G6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||q6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return uy.set(e,i),i}B6(t=>({...t,get:(e,n,r)=>MI(e,n)||t.get(e,n,r),has:(e,n)=>!!MI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Q6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t_="@firebase/app",LI="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Qd("@firebase/app"),Y6="@firebase/app-compat",Z6="@firebase/analytics-compat",X6="@firebase/analytics",J6="@firebase/app-check-compat",e9="@firebase/app-check",t9="@firebase/auth",n9="@firebase/auth-compat",r9="@firebase/database",s9="@firebase/data-connect",i9="@firebase/database-compat",o9="@firebase/functions",a9="@firebase/functions-compat",l9="@firebase/installations",c9="@firebase/installations-compat",u9="@firebase/messaging",d9="@firebase/messaging-compat",h9="@firebase/performance",f9="@firebase/performance-compat",p9="@firebase/remote-config",m9="@firebase/remote-config-compat",g9="@firebase/storage",y9="@firebase/storage-compat",v9="@firebase/firestore",_9="@firebase/vertexai",w9="@firebase/firestore-compat",E9="firebase",x9="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="[DEFAULT]",T9={[t_]:"fire-core",[Y6]:"fire-core-compat",[X6]:"fire-analytics",[Z6]:"fire-analytics-compat",[e9]:"fire-app-check",[J6]:"fire-app-check-compat",[t9]:"fire-auth",[n9]:"fire-auth-compat",[r9]:"fire-rtdb",[s9]:"fire-data-connect",[i9]:"fire-rtdb-compat",[o9]:"fire-fn",[a9]:"fire-fn-compat",[l9]:"fire-iid",[c9]:"fire-iid-compat",[u9]:"fire-fcm",[d9]:"fire-fcm-compat",[h9]:"fire-perf",[f9]:"fire-perf-compat",[p9]:"fire-rc",[m9]:"fire-rc-compat",[g9]:"fire-gcs",[y9]:"fire-gcs-compat",[v9]:"fire-fst",[w9]:"fire-fst-compat",[_9]:"fire-vertex","fire-js":"fire-js",[E9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Map,I9=new Map,r_=new Map;function FI(t,e){try{t.container.addComponent(e)}catch(n){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function or(t){const e=t.name;if(r_.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;r_.set(e,t);for(const n of Rp.values())FI(n,t);for(const n of I9.values())FI(n,t);return!0}function Ks(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new ga("app","Firebase",C9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=x9;function sP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:n_,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ni.create("bad-app-name",{appName:String(s)});if(n||(n=qA()),!n)throw Ni.create("no-options");const i=Rp.get(s);if(i){if($s(n,i.options)&&$s(r,i.config))return i;throw Ni.create("duplicate-app",{appName:s})}const o=new O6(s);for(const l of r_.values())o.addComponent(l);const a=new S9(n,r,o);return Rp.set(s,a),a}function Yd(t=n_){const e=Rp.get(t);if(!e&&t===n_&&qA())return sP();if(!e)throw Ni.create("no-app",{appName:t});return e}function sn(t,e,n){var r;let s=(r=T9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(a.join(" "));return}or(new Kn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="firebase-heartbeat-database",k9=1,gd="firebase-heartbeat-store";let dy=null;function iP(){return dy||(dy=rP(b9,k9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),dy}async function R9(t){try{const n=(await iP()).transaction(gd),r=await n.objectStore(gd).get(oP(t));return await n.done,r}catch(e){if(e instanceof lr)zs.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zs.warn(n.message)}}}async function VI(t,e){try{const r=(await iP()).transaction(gd,"readwrite");await r.objectStore(gd).put(e,oP(t)),await r.done}catch(n){if(n instanceof lr)zs.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zs.warn(r.message)}}}function oP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=1024,P9=30;class N9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new D9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>P9){const o=M9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jI(),{heartbeatsToSend:r,unsentEntries:s}=O9(this._heartbeatsCache.heartbeats),i=Sp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zs.warn(n),""}}}function jI(){return new Date().toISOString().substring(0,10)}function O9(t,e=A9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),UI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),UI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class D9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZA()?XA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function UI(t){return Sp(JSON.stringify({version:2,heartbeats:t})).length}function M9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t){or(new Kn("platform-logger",e=>new K6(e),"PRIVATE")),or(new Kn("heartbeat",e=>new N9(e),"PRIVATE")),sn(t_,LI,t),sn(t_,LI,"esm2017"),sn("fire-js","")}L9("");function m0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F9=aP,lP=new ga("auth","Firebase",aP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new Qd("@firebase/auth");function V9(t,...e){Ap.logLevel<=ke.WARN&&Ap.warn(`Auth (${oo}): ${t}`,...e)}function kf(t,...e){Ap.logLevel<=ke.ERROR&&Ap.error(`Auth (${oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,...e){throw y0(t,...e)}function Ar(t,...e){return y0(t,...e)}function g0(t,e,n){const r=Object.assign(Object.assign({},F9()),{[e]:n});return new ga("auth","Firebase",r).create(e,{appName:t.name})}function Ps(t){return g0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ar(t,"argument-error"),g0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lP.create(t,...e)}function fe(t,e,...n){if(!t)throw y0(e,...n)}function bs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kf(e),new Error(e)}function Bs(t,e){t||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function U9(){return $I()==="http:"||$I()==="https:"}function $I(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U9()||KA()||"connection"in navigator)?navigator.onLine:!0}function z9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bs(n>e,"Short delay should be less than long delay!"),this.isMobile=f0()||QA()}get(){return $9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t,e){Bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H9=new Zd(3e4,6e4);function ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function lo(t,e,n,r,s={}){return uP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=cc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return h6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&so(t.emulatorConfig.host)&&(c.credentials="include"),cP.fetch()(await dP(t,t.config.apiHost,n,a),c)})}async function uP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},B9),e);try{const s=new G9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw g0(t,d,c);ar(t,d)}}catch(s){if(s instanceof lr)throw s;ar(t,"network-request-failed",{message:String(s)})}}async function Xd(t,e,n,r,s={}){const i=await lo(t,e,n,r,s);return"mfaPendingCredential"in i&&ar(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function dP(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?v0(t.config,s):`${t.config.apiScheme}://${s}`;return W9.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function q9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),H9.get())})}}function Jh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ar(t,e,r);return s.customData._tokenResponse=n,s}function zI(t){return t!==void 0&&t.enterprise!==void 0}class K9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return q9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q9(t,e){return lo(t,"GET","/v2/recaptchaConfig",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y9(t,e){return lo(t,"POST","/v1/accounts:delete",e)}async function Pp(t,e){return lo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z9(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=_0(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Iu(hy(s.auth_time)),issuedAtTime:Iu(hy(s.iat)),expirationTime:Iu(hy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hy(t){return Number(t)*1e3}function _0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{const s=bp(n);return s?JSON.parse(s):(kf("Failed to decode base64 JWT payload"),null)}catch(s){return kf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function BI(t){const e=_0(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&X9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function X9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t){var e;const n=t.auth,r=await t.getIdToken(),s=await yd(t,Pp(n,{idToken:r}));fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?hP(i.providerUserInfo):[],a=t5(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new i_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function e5(t){const e=Lt(t);await Np(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hP(t){return t.map(e=>{var{providerId:n}=e,r=m0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){const n=await uP(t,{},async()=>{const r=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await dP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function r5(t,e){return lo(t,"POST","/v2/accounts:revokeToken",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=BI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await n5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new cl;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=m0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await yd(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Z9(this,e)}reload(){return e5(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Np(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await yd(this,Y9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:N,isAnonymous:M,providerData:F,stsTokenManager:C}=n;fe(I&&C,e,"internal-error");const T=cl.fromJSON(this.name,C);fe(typeof I=="string",e,"internal-error"),si(h,e.name),si(f,e.name),fe(typeof N=="boolean",e,"internal-error"),fe(typeof M=="boolean",e,"internal-error"),si(g,e.name),si(w,e.name),si(_,e.name),si(x,e.name),si(E,e.name),si(v,e.name);const S=new Tr({uid:I,auth:e,email:f,emailVerified:N,displayName:h,isAnonymous:M,photoURL:w,phoneNumber:g,tenantId:_,stsTokenManager:T,createdAt:E,lastLoginAt:v});return F&&Array.isArray(F)&&(S.providerData=F.map(R=>Object.assign({},R))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new cl;s.updateFromServerResponse(n);const i=new Tr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Np(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?hP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new cl;a.updateFromIdToken(r);const l=new Tr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new i_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Map;function ks(t){Bs(t instanceof Function,"Expected a class definition");let e=WI.get(t);return e?(Bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fP.type="NONE";const HI=fP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e,n){return`firebase:${t}:${e}:${n}`}class ul{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Rf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pp(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ul(ks(HI),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ks(HI);const o=Rf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Pp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Tr._fromGetAccountInfoResponse(e,f,d)}else h=Tr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ul(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ul(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_P(e))return"Blackberry";if(wP(e))return"Webos";if(mP(e))return"Safari";if((e.includes("chrome/")||gP(e))&&!e.includes("edge/"))return"Chrome";if(vP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pP(t=ln()){return/firefox\//i.test(t)}function mP(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gP(t=ln()){return/crios\//i.test(t)}function yP(t=ln()){return/iemobile/i.test(t)}function vP(t=ln()){return/android/i.test(t)}function _P(t=ln()){return/blackberry/i.test(t)}function wP(t=ln()){return/webos/i.test(t)}function w0(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function s5(t=ln()){var e;return w0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i5(){return f6()&&document.documentMode===10}function EP(t=ln()){return w0(t)||vP(t)||wP(t)||_P(t)||/windows phone/i.test(t)||yP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t,e=[]){let n;switch(t){case"Browser":n=qI(ln());break;case"Worker":n=`${qI(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e={}){return lo(t,"GET","/v2/passwordPolicy",ao(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=6;class c5{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:l5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GI(this),this.idTokenSubscription=new GI(this),this.beforeStateQueue=new o5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ks(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pp(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Np(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(Ps(this));const n=e?Lt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a5(this),n=new c5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ga("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await r5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ks(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[ks(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&V9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function co(t){return Lt(t)}class GI{constructor(e){this.auth=e,this.observer=null,this.addObserver=x6(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d5(t){Um=t}function TP(t){return Um.loadJS(t)}function h5(){return Um.recaptchaEnterpriseScript}function f5(){return Um.gapiScript}function p5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class m5{constructor(){this.enterprise=new g5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class g5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const y5="recaptcha-enterprise",IP="NO_RECAPTCHA";class v5{constructor(e){this.type=y5,this.auth=co(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Q9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new K9(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;zI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(IP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m5().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&zI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=h5();l.length!==0&&(l+=a),TP(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function KI(t,e,n,r=!1,s=!1){const i=new v5(t);let o;if(s)o=IP;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function o_(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await KI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await KI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){const n=Ks(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($s(i,e??{}))return s;ar(s,"already-initialized")}return n.initialize({options:e})}function w5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ks);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function E5(t,e,n){const r=co(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=CP(e),{host:o,port:a}=x5(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe($s(c,r.config.emulator)&&$s(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,so(o)?(io("Auth",!0),Vm(`${i}//${o}${l}`)):T5()}function CP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function x5(t){const e=CP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:QI(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:QI(o)}}}function QI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function T5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,n){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function I5(t,e){return lo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){return Xd(t,"POST","/v1/accounts:signInWithPassword",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(t,e){return Xd(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}async function b5(t,e){return Xd(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends E0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o_(e,n,"signInWithPassword",C5);case"emailLink":return S5(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o_(e,r,"signUpPassword",I5);case"emailLink":return b5(e,{idToken:n,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t,e){return Xd(t,"POST","/v1/accounts:signInWithIdp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="http://localhost";class oa extends E0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=m0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new oa(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return dl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,dl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,dl(e,n)}buildRequest(){const e={requestUri:k5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A5(t){const e=ru(su(t)).link,n=e?ru(su(e)).deep_link_id:null,r=ru(su(t)).deep_link_id;return(r?ru(su(r)).link:null)||r||n||e||t}class x0{constructor(e){var n,r,s,i,o,a;const l=ru(su(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=R5((s=l.mode)!==null&&s!==void 0?s:null);fe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=A5(e);try{return new x0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,n){return vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=x0.parseLink(n);return fe(r,"argument-error"),vd._fromEmailAndCode(e,r.code,r.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends T0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Jd{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Jd{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Jd{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){return Xd(t,"POST","/v1/accounts:signUp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tr._fromIdTokenResponse(e,r,s),o=YI(r);return new aa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=YI(r);return new aa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function YI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends lr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Op.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Op(e,n,r,s)}}function SP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Op._fromErrorAndOperation(t,i,e,r):i})}async function N5(t,e,n=!1){const r=await yd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return aa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(t,e,n=!1){const{auth:r}=t;if(gn(r.app))return Promise.reject(Ps(r));const s="reauthenticate";try{const i=await yd(t,SP(r,s,e,t),n);fe(i.idToken,r,"internal-error");const o=_0(i.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),aa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ar(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(t,e,n=!1){if(gn(t.app))return Promise.reject(Ps(t));const r="signIn",s=await SP(t,r,e),i=await aa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function D5(t,e){return bP(co(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(t){const e=co(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function M5(t,e,n){if(gn(t.app))return Promise.reject(Ps(t));const r=co(t),o=await o_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kP(t),l}),a=await aa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function L5(t,e,n){return gn(t.app)?Promise.reject(Ps(t)):D5(Lt(t),uc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kP(t),r})}function F5(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function V5(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function j5(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function U5(t){return Lt(t).signOut()}const Dp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dp,"1"),this.storage.removeItem(Dp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=1e3,z5=10;class AP extends RP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);i5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AP.type="LOCAL";const B5=AP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP extends RP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PP.type="SESSION";const NP=PP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $m(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await W5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=I0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function q5(t){ns().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function G5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Q5(){return OP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="firebaseLocalStorageDb",Y5=1,Mp="firebaseLocalStorage",MP="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zm(t,e){return t.transaction([Mp],e?"readwrite":"readonly").objectStore(Mp)}function Z5(){const t=indexedDB.deleteDatabase(DP);return new eh(t).toPromise()}function a_(){const t=indexedDB.open(DP,Y5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mp,{keyPath:MP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mp)?e(r):(r.close(),await Z5(),e(await a_()))})})}async function ZI(t,e,n){const r=zm(t,!0).put({[MP]:e,value:n});return new eh(r).toPromise()}async function X5(t,e){const n=zm(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function XI(t,e){const n=zm(t,!0).delete(e);return new eh(n).toPromise()}const J5=800,e$=3;class LP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await a_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>e$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$m._getInstance(Q5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await G5(),!this.activeServiceWorker)return;this.sender=new H5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await a_();return await ZI(e,Dp,"1"),await XI(e,Dp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>X5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=zm(s,!1).getAll();return new eh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LP.type="LOCAL";const t$=LP;new Zd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t,e){return e?ks(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends E0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n$(t){return bP(t.auth,new C0(t),t.bypassAuthState)}function r$(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),O5(n,new C0(t),t.bypassAuthState)}async function s$(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),N5(n,new C0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n$;case"linkViaPopup":case"linkViaRedirect":return s$;case"reauthViaPopup":case"reauthViaRedirect":return r$;default:ar(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new Zd(2e3,1e4);async function fy(t,e,n){if(gn(t.app))return Promise.reject(Ar(t,"operation-not-supported-in-this-environment"));const r=co(t);j9(t,e,T0);const s=FP(r,n);return new Oo(r,"signInViaPopup",e,s).executeNotNull()}class Oo extends VP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=I0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i$.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$="pendingRedirect",Af=new Map;class a$ extends VP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const r=await l$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l$(t,e){const n=d$(e),r=u$(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function c$(t,e){Af.set(t._key(),e)}function u$(t){return ks(t._redirectPersistence)}function d$(t){return Rf(o$,t.config.apiKey,t.name)}async function h$(t,e,n=!1){if(gn(t.app))return Promise.reject(Ps(t));const r=co(t),s=FP(r,e),o=await new a$(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=10*60*1e3;class p${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jP(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ar(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f$&&this.cachedEventUids.clear(),this.cachedEventUids.has(JI(e))}saveEventToCache(e){this.cachedEventUids.add(JI(e)),this.lastProcessedEventTime=Date.now()}}function JI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(t,e={}){return lo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v$=/^https?/;async function _$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g$(t);for(const n of e)try{if(w$(n))return}catch{}ar(t,"unauthorized-domain")}function w$(t){const e=s_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!v$.test(n))return!1;if(y$.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new Zd(3e4,6e4);function eC(){const t=ns().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x$(t){return new Promise((e,n)=>{var r,s,i;function o(){eC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eC(),n(Ar(t,"network-request-failed"))},timeout:E$.get()})}if(!((s=(r=ns().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ns().gapi)===null||i===void 0)&&i.load)o();else{const a=p5("iframefcb");return ns()[a]=()=>{gapi.load?o():n(Ar(t,"network-request-failed"))},TP(`${f5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Pf=null,e})}let Pf=null;function T$(t){return Pf=Pf||x$(t),Pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=new Zd(5e3,15e3),C$="__/auth/iframe",S$="emulator/auth/iframe",b$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R$(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v0(e,S$):`https://${t.config.authDomain}/${C$}`,r={apiKey:e.apiKey,appName:t.name,v:oo},s=k$.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${cc(r).slice(1)}`}async function A$(t){const e=await T$(t),n=ns().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:R$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b$,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ar(t,"network-request-failed"),a=ns().setTimeout(()=>{i(o)},I$.get());function l(){ns().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N$=500,O$=600,D$="_blank",M$="http://localhost";class tC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L$(t,e,n,r=N$,s=O$){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},P$),{width:r.toString(),height:s.toString(),top:i,left:o}),c=ln().toLowerCase();n&&(a=gP(c)?D$:n),pP(c)&&(e=e||M$,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,w])=>`${f}${g}=${w},`,"");if(s5(c)&&a!=="_self")return F$(e||"",a),new tC(null);const h=window.open(e||"",a,d);fe(h,t,"popup-blocked");try{h.focus()}catch{}return new tC(h)}function F$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="__/auth/handler",j$="emulator/auth/handler",U$=encodeURIComponent("fac");async function nC(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oo,eventId:s};if(e instanceof T0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Xv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Jd){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${U$}=${encodeURIComponent(l)}`:"";return`${$$(t)}?${cc(a).slice(1)}${c}`}function $$({config:t}){return t.emulator?v0(t,j$):`https://${t.authDomain}/${V$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="webStorageSupport";class z${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NP,this._completeRedirectFn=h$,this._overrideRedirectResult=c$}async _openPopup(e,n,r,s){var i;Bs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await nC(e,n,r,s_(),s);return L$(e,o,I0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await nC(e,n,r,s_(),s);return q5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Bs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await A$(e),r=new p$(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(py,{type:py},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[py];o!==void 0&&n(!!o),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EP()||mP()||w0()}}const B$=z$;var rC="@firebase/auth",sC="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q$(t){or(new Kn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xP(t)},c=new u5(r,s,i,l);return w5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),or(new Kn("auth-internal",e=>{const n=co(e.getProvider("auth").getImmediate());return(r=>new W$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(rC,sC,H$(t)),sn(rC,sC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=5*60,K$=GA("authIdTokenMaxAge")||G$;let iC=null;const Q$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>K$)return;const s=n==null?void 0:n.token;iC!==s&&(iC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Y$(t=Yd()){const e=Ks(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_5(t,{popupRedirectResolver:B$,persistence:[t$,B5,NP]}),r=GA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Q$(i.toString());V5(n,o,()=>o(n.currentUser)),F5(n,a=>o(a))}}const s=HA("auth");return s?E5(n,`http://${s}`):io("Auth",!1),n}function Z$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}d5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ar("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Z$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q$("Browser");var X$="firebase",J$="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(X$,J$,"app");var oC={};const aC="@firebase/database",lC="1.0.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UP="";function ez(t){UP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ct(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:md(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tz(e)}}catch{}return new nz},Do=$P("localStorage"),rz=$P("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Qd("@firebase/database"),sz=function(){let t=1;return function(){return t++}}(),zP=function(t){const e=C6(t),n=new E6;n.update(e);const r=n.digest();return c0.encodeByteArray(r)},th=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=th.apply(null,r):typeof r=="object"?e+=Ct(r):e+=r,e+=" "}return e};let Cu=null,cC=!0;const iz=function(t,e){Q(!e,"Can't turn on custom loggers persistently."),hl.logLevel=ke.VERBOSE,Cu=hl.log.bind(hl)},nn=function(...t){if(cC===!0&&(cC=!1,Cu===null&&rz.get("logging_enabled")===!0&&iz()),Cu){const e=th.apply(null,t);Cu(e)}},nh=function(t){return function(...e){nn(t,...e)}},l_=function(...t){const e="FIREBASE INTERNAL ERROR: "+th(...t);hl.error(e)},Ws=function(...t){const e=`FIREBASE FATAL ERROR: ${th(...t)}`;throw hl.error(e),new Error(e)},Hn=function(...t){const e="FIREBASE WARNING: "+th(...t);hl.warn(e)},oz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},BP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},az=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wl="[MIN_NAME]",la="[MAX_NAME]",dc=function(t,e){if(t===e)return 0;if(t===Wl||e===la)return-1;if(e===Wl||t===la)return 1;{const n=uC(t),r=uC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},lz=function(t,e){return t===e?0:t<e?-1:1},Wc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ct(e))},S0=function(t){if(typeof t!="object"||t===null)return Ct(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ct(e[r]),n+=":",n+=S0(t[e[r]]);return n+="}",n},WP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function On(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const HP=function(t){Q(!BP(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},cz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},uz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const hz=new RegExp("^-?(0*)\\d{1,10}$"),fz=-2147483648,pz=2147483647,uC=function(t){if(hz.test(t)){const e=Number(t);if(e>=fz&&e<=pz)return e}return null},rh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Hn("Exception was thrown by user callback.",n),e},Math.floor(0))}},mz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Su=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,gn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hn(e)}}class Nf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Nf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="5",qP="v",GP="s",KP="r",QP="f",YP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ZP="ls",XP="p",c_="ac",JP="websocket",eN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Do.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Do.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function vz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function nN(t,e,n){Q(typeof e=="string","typeof type must == string"),Q(typeof n=="object","typeof params must == object");let r;if(e===JP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===eN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);vz(t)&&(n.ns=t.namespace);const s=[];return On(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.counters_={}}incrementCounter(e,n=1){Gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return r6(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my={},gy={};function k0(t){const e=t.toString();return my[e]||(my[e]=new _z),my[e]}function wz(t,e){const n=t.toString();return gy[n]||(gy[n]=e()),gy[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&rh(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="start",xz="close",Tz="pLPCommand",Iz="pRTLPCB",rN="id",sN="pw",iN="ser",Cz="cb",Sz="seg",bz="ts",kz="d",Rz="dframe",oN=1870,aN=30,Az=oN-aN,Pz=25e3,Nz=3e4;class Za{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nh(e),this.stats_=k0(n),this.urlFn=l=>(this.appCheckToken&&(l[c_]=this.appCheckToken),nN(n,eN,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ez(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Nz)),az(()=>{if(this.isClosed_)return;this.scriptTagHolder=new R0((...i)=>{const[o,a,l,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===dC)this.id=a,this.password=l;else if(o===xz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[dC]="t",r[iN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Cz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qP]=b0,this.transportSessionId&&(r[GP]=this.transportSessionId),this.lastSessionId&&(r[ZP]=this.lastSessionId),this.applicationId&&(r[XP]=this.applicationId),this.appCheckToken&&(r[c_]=this.appCheckToken),typeof location<"u"&&location.hostname&&YP.test(location.hostname)&&(r[KP]=QP);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Za.forceAllow_=!0}static forceDisallow(){Za.forceDisallow_=!0}static isAvailable(){return Za.forceAllow_?!0:!Za.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cz()&&!uz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=BA(n),s=WP(r,Az);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Rz]="t",r[rN]=e,r[sN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ct(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class R0{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sz(),window[Tz+this.uniqueCallbackIdentifier]=e,window[Iz+this.uniqueCallbackIdentifier]=n,this.myIFrame=R0.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nn("frame writing exception"),a.stack&&nn(a.stack),nn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[rN]=this.myID,e[sN]=this.myPW,e[iN]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aN+r.length<=oN;){const o=this.pendingSegs.shift();r=r+"&"+Sz+s+"="+o.seg+"&"+bz+s+"="+o.ts+"&"+kz+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Pz)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=16384,Dz=45e3;let Lp=null;typeof MozWebSocket<"u"?Lp=MozWebSocket:typeof WebSocket<"u"&&(Lp=WebSocket);class Er{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nh(this.connId),this.stats_=k0(n),this.connURL=Er.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[qP]=b0,typeof location<"u"&&location.hostname&&YP.test(location.hostname)&&(o[KP]=QP),n&&(o[GP]=n),r&&(o[ZP]=r),s&&(o[c_]=s),i&&(o[XP]=i),nN(e,JP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Do.set("previous_websocket_failure",!0);try{let r;YA(),this.mySock=new Lp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Lp!==null&&!Er.forceDisallow_}static previouslyFailed(){return Do.isInMemoryStorage||Do.get("previous_websocket_failure")===!0}markConnectionHealthy(){Do.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=md(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=WP(n,Oz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Dz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Er.responsesRequiredToBeHealthy=2;Er.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{static get ALL_TRANSPORTS(){return[Za,Er]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Er&&Er.isAvailable();let r=n&&!Er.previouslyFailed();if(e.webSocketOnly&&(n||Hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Er];else{const s=this.transports_=[];for(const i of _d.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);_d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_d.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=6e4,Lz=5e3,Fz=10*1024,Vz=100*1024,yy="t",hC="d",jz="s",fC="r",Uz="e",pC="o",mC="a",gC="n",yC="p",$z="h";class zz{constructor(e,n,r,s,i,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nh("c:"+this.id+":"),this.transportManager_=new _d(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Su(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Vz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Fz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(yy in e){const n=e[yy];n===mC?this.upgradeIfSecondaryHealthy_():n===fC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===pC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Wc("t",e),r=Wc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Wc("t",e),r=Wc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Wc(yy,e);if(hC in e){const r=e[hC];if(n===$z){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===gC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jz?this.onConnectionShutdown_(r):n===fC?this.onReset_(r):n===Uz?l_("Server Error: "+r):n===pC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):l_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),b0!==r&&Hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Su(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Mz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Su(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Lz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Do.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends cN{static getInstance(){return new Fp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!f0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=32,_C=768;class Ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ze(){return new Ke("")}function Me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Hi(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ke(t.pieces_,e)}function uN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Bz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function dN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ke(e,0)}function St(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ke(n,0)}function Re(t){return t.pieceNum_>=t.pieces_.length}function vn(t,e){const n=Me(t),r=Me(e);if(n===null)return e;if(n===r)return vn(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function fN(t,e){if(Hi(t)!==Hi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ir(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Hi(t)>Hi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Wz{constructor(e,n){this.errorPrefix_=n,this.parts_=dN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=jm(this.parts_[r]);pN(this)}}function Hz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jm(e),pN(t)}function qz(t){const e=t.parts_.pop();t.byteLength_-=jm(e),t.parts_.length>0&&(t.byteLength_-=1)}function pN(t){if(t.byteLength_>_C)throw new Error(t.errorPrefix_+"has a key path longer than "+_C+" bytes ("+t.byteLength_+").");if(t.parts_.length>vC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vC+") or object contains a cycle "+ko(t))}function ko(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends cN{static getInstance(){return new A0}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=1e3,Gz=60*5*1e3,wC=30*1e3,Kz=1.3,Qz=3e4,Yz="server_kill",EC=3;class Ns extends lN{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ns.nextPersistentConnectionId_++,this.log_=nh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hc,this.maxReconnectDelay_=Gz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!YA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");A0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Fp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ct(i)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new d0,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Ns.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Gs(e,"w")){const r=Bl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||w6(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=_6(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ct(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):l_("Unrecognized action received from server: "+Ct(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Qz&&(this.reconnectDelay_=Hc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Kz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ns.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){Q(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new zz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Hn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Hn(h),l())}}}interrupt(e){nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xv(this.interruptReasons_)&&(this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>S0(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ke(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=EC&&(this.reconnectDelay_=wC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=EC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+UP.replace(/\./g,"-")]=1,f0()?e["framework.cordova"]=1:QA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Fp.getInstance().currentlyOnline();return Xv(this.interruptReasons_)&&e}}Ns.nextPersistentConnectionId_=0;Ns.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new be(Wl,e),s=new be(Wl,n);return this.compare(r,s)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef;class mN extends Bm{static get __EMPTY_NODE(){return ef}static set __EMPTY_NODE(e){ef=e}compare(e,n){return dc(e.name,n.name)}isDefinedOn(e){throw lc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(la,ef)}makePost(e,n){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,ef)}toString(){return".key"}}const fl=new mN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=class{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Vn=class iu{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??iu.RED,this.left=s??Zr.EMPTY_NODE,this.right=i??Zr.EMPTY_NODE}copy(e,n,r,s,i){return new iu(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Zr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,iu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,iu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Vn.RED=!0;Vn.BLACK=!1;class Zz{copy(e,n,r,s,i){return this}insert(e,n,r){return new Vn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Zr=class Of{constructor(e,n=Of.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Of(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Of(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tf(this.root_,null,this.comparator_,!0,e)}};Zr.EMPTY_NODE=new Zz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t,e){return dc(t.name,e.name)}function P0(t,e){return dc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u_;function Jz(t){u_=t}const gN=function(t){return typeof t=="number"?"number:"+HP(t):"string:"+t},yN=function(t){if(t.isLeafNode()){const e=t.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gs(e,".sv"),"Priority must be a string or number.")}else Q(t===u_||t.isEmpty(),"priority of unexpected type.");Q(t===u_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xC;class Nt{static set __childrenNodeConstructor(e){xC=e}static get __childrenNodeConstructor(){return xC}constructor(e,n=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Re(e)?this:Me(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Me(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Q(r!==".priority"||Hi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=HP(this.value_):e+=this.value_,this.lazyHash_=zP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(Q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Nt.VALUE_TYPE_ORDER.indexOf(n),i=Nt.VALUE_TYPE_ORDER.indexOf(r);return Q(s>=0,"Unknown leaf type: "+n),Q(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vN,_N;function eB(t){vN=t}function tB(t){_N=t}class nB extends Bm{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?dc(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(la,new Nt("[PRIORITY-POST]",_N))}makePost(e,n){const r=vN(e);return new be(n,new Nt("[PRIORITY-POST]",r))}toString(){return".priority"}}const pt=new nB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=Math.log(2);class sB{constructor(e){const n=i=>parseInt(Math.log(i)/rB,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vp=function(t,e,n,r){t.sort(e);const s=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new Vn(f,h.node,Vn.BLACK,null,null);{const g=parseInt(d/2,10)+l,w=s(l,g),_=s(g+1,c);return h=t[g],f=n?n(h):h,new Vn(f,h.node,Vn.BLACK,w,_)}},i=function(l){let c=null,d=null,h=t.length;const f=function(w,_){const x=h-w,E=h;h-=w;const v=s(x+1,E),I=t[x],N=n?n(I):I;g(new Vn(N,I.node,_,null,v))},g=function(w){c?(c.left=w,c=w):(d=w,c=w)};for(let w=0;w<l.count;++w){const _=l.nextBitIsOne(),x=Math.pow(2,l.count-(w+1));_?f(x,Vn.BLACK):(f(x,Vn.BLACK),f(x,Vn.RED))}return d},o=new sB(t.length),a=i(o);return new Zr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy;const Pa={};class Rs{static get Default(){return Q(Pa&&pt,"ChildrenNode.ts has not been loaded"),vy=vy||new Rs({".priority":Pa},{".priority":pt}),vy}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Bl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Zr?n:null}hasIndex(e){return Gs(this.indexSet_,e.toString())}addIndex(e,n){Q(e!==fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(be.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Vp(r,e.getCompare()):a=Pa;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Rs(d,c)}addToIndexes(e,n){const r=kp(this.indexes_,(s,i)=>{const o=Bl(this.indexSet_,i);if(Q(o,"Missing index implementation for "+i),s===Pa)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(be.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Vp(a,o.getCompare())}else return Pa;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new be(e.name,a))),l.insert(e,e.node)}});return new Rs(r,this.indexSet_)}removeFromIndexes(e,n){const r=kp(this.indexes_,s=>{if(s===Pa)return s;{const i=n.get(e.name);return i?s.remove(new be(e.name,i)):s}});return new Rs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc;class pe{static get EMPTY_NODE(){return qc||(qc=new pe(new Zr(P0),null,Rs.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yN(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qc}updatePriority(e){return this.children_.isEmpty()?this:new pe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?qc:n}}getChild(e){const n=Me(e);return n===null?this:this.getImmediateChild(n).getChild(Qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new be(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?qc:this.priorityNode_;return new pe(s,o,i)}}updateChild(e,n){const r=Me(e);if(r===null)return n;{Q(Me(e)!==".priority"||Hi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Qe(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(pt,(o,a)=>{n[o]=a.val(e),r++,i&&pe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+gN(this.getPriority().val())+":"),this.forEachChild(pt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":zP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new be(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sh?-1:0}withIndex(e){if(e===fl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new pe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(pt),s=n.getIterator(pt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fl?null:this.indexMap_.get(e.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class iB extends pe{constructor(){super(new Zr(P0),pe.EMPTY_NODE,Rs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}}const sh=new iB;Object.defineProperties(be,{MIN:{value:new be(Wl,pe.EMPTY_NODE)},MAX:{value:new be(la,sh)}});mN.__EMPTY_NODE=pe.EMPTY_NODE;Nt.__childrenNodeConstructor=pe;Jz(sh);tB(sh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=!0;function zt(t,e=null){if(t===null)return pe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Nt(n,zt(e))}if(!(t instanceof Array)&&oB){const n=[];let r=!1;if(On(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=zt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new be(o,l)))}}),n.length===0)return pe.EMPTY_NODE;const i=Vp(n,Xz,o=>o.name,P0);if(r){const o=Vp(n,pt.getCompare());return new pe(i,zt(e),new Rs({".priority":o},{".priority":pt}))}else return new pe(i,zt(e),Rs.Default)}else{let n=pe.EMPTY_NODE;return On(t,(r,s)=>{if(Gs(t,r)&&r.substring(0,1)!=="."){const i=zt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(zt(e))}}eB(zt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB extends Bm{constructor(e){super(),this.indexPath_=e,Q(!Re(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?dc(e.name,n.name):i}makePost(e,n){const r=zt(e),s=pe.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,s)}maxPost(){const e=pe.EMPTY_NODE.updateChild(this.indexPath_,sh);return new be(la,e)}toString(){return dN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB extends Bm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?dc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){const r=zt(e);return new be(n,r)}toString(){return".value"}}const cB=new lB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){return{type:"value",snapshotNode:t}}function Hl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function wd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ed(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function uB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(wd(n,a)):Q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Hl(n,r)):o.trackChildChange(Ed(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(pt,(s,i)=>{n.hasChild(s)||r.trackChildChange(wd(s,i))}),n.isLeafNode()||n.forEachChild(pt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Ed(s,i,o))}else r.trackChildChange(Hl(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?pe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.indexedFilter_=new N0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xd.getStartPost_(e),this.endPost_=xd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new be(n,r))||(r=pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=pe.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(pe.EMPTY_NODE);const i=this;return n.forEachChild(pt,(o,a)=>{i.matches(new be(o,a))||(s=s.updateImmediateChild(o,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new xd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new be(n,r))||(r=pe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=pe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(pe.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,g)=>h(g,f)}else o=this.index_.getCompare();const a=e;Q(a.numChildren()===this.limit_,"");const l=new be(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,l);if(d&&!r.isEmpty()&&g>=0)return i!=null&&i.trackChildChange(Ed(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(wd(n,h));const _=a.updateImmediateChild(n,pe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Hl(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:d&&o(c,l)>=0?(i!=null&&(i.trackChildChange(wd(c.name,c.node)),i.trackChildChange(Hl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,pe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wl}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:la}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){const e=new O0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hB(t){return t.loadsAllData()?new N0(t.getIndex()):t.hasLimit()?new dB(t):new xd(t)}function TC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pt?n="$priority":t.index_===cB?n="$value":t.index_===fl?n="$key":(Q(t.index_ instanceof aB,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ct(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ct(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ct(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ct(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ct(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function IC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends lN{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=nh("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=jp.getListenId_(e,r),a={};this.listens_[o]=a;const l=TC(e._queryParams);this.restRequest_(i+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),Bl(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=jp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=TC(e._queryParams),r=e._path.toString(),s=new d0;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=md(a.responseText)}catch{Hn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Hn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){return{value:null,children:new Map}}function EN(t,e,n){if(Re(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Me(e);t.children.has(r)||t.children.set(r,Up());const s=t.children.get(r);e=Qe(e),EN(s,e,n)}}function d_(t,e,n){t.value!==null?n(e,t.value):pB(t,(r,s)=>{const i=new Ke(e.toString()+"/"+r);d_(s,i,n)})}function pB(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&On(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*1e3,gB=30*1e3,yB=5*60*1e3;class vB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mB(e);const r=CC+(gB-CC)*Math.random();Su(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;On(e,(s,i)=>{i>0&&Gs(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Su(this.reportStats_.bind(this),Math.floor(Math.random()*2*yB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cr||(Cr={}));function xN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function D0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function M0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Cr.ACK_USER_WRITE,this.source=xN()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ke(e));return new $p(ze(),n,this.revert)}}else return Q(Me(this.path)===e,"operationForChild called for unrelated child."),new $p(Qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.source=e,this.path=n,this.type=Cr.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new Td(this.source,ze()):new Td(this.source,Qe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Cr.OVERWRITE}operationForChild(e){return Re(this.path)?new ca(this.source,ze(),this.snap.getImmediateChild(e)):new ca(this.source,Qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Cr.MERGE}operationForChild(e){if(Re(this.path)){const n=this.children.subtree(new Ke(e));return n.isEmpty()?null:n.value?new ca(this.source,ze(),n.value):new Id(this.source,ze(),n)}else return Q(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Id(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const n=Me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wB(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(uB(o.childName,o.snapshotNode))}),Gc(t,s,"child_removed",e,r,n),Gc(t,s,"child_added",e,r,n),Gc(t,s,"child_moved",i,r,n),Gc(t,s,"child_changed",e,r,n),Gc(t,s,"value",e,r,n),s}function Gc(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>xB(t,a,l)),o.forEach(a=>{const l=EB(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function EB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function xB(t,e,n){if(e.childName==null||n.childName==null)throw lc("Should only compare child_ events.");const r=new be(e.childName,e.snapshotNode),s=new be(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){return{eventCache:t,serverCache:e}}function bu(t,e,n,r){return Wm(new qi(e,n,r),t.serverCache)}function TN(t,e,n,r){return Wm(t.eventCache,new qi(e,n,r))}function zp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ua(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y;const TB=()=>(_y||(_y=new Zr(lz)),_y);class et{static fromObject(e){let n=new et(null);return On(e,(r,s)=>{n=n.set(new Ke(r),s)}),n}constructor(e,n=TB()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ze(),value:this.value};if(Re(e))return null;{const r=Me(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Qe(e),n);return i!=null?{path:St(new Ke(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const n=Me(e),r=this.children.get(n);return r!==null?r.subtree(Qe(e)):new et(null)}}set(e,n){if(Re(e))return new et(n,this.children);{const r=Me(e),i=(this.children.get(r)||new et(null)).set(Qe(e),n),o=this.children.insert(r,i);return new et(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new et(null):new et(null,this.children);{const n=Me(e),r=this.children.get(n);if(r){const s=r.remove(Qe(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new et(null):new et(this.value,i)}else return this}}get(e){if(Re(e))return this.value;{const n=Me(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(Re(e))return n;{const r=Me(e),i=(this.children.get(r)||new et(null)).setTree(Qe(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new et(this.value,o)}}fold(e){return this.fold_(ze(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(St(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ze(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Re(e))return null;{const i=Me(e),o=this.children.get(i);return o?o.findOnPath_(Qe(e),St(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ze(),n)}foreachOnPath_(e,n,r){if(Re(e))return this;{this.value&&r(n,this.value);const s=Me(e),i=this.children.get(s);return i?i.foreachOnPath_(Qe(e),St(n,s),r):new et(null)}}foreach(e){this.foreach_(ze(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(St(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.writeTree_=e}static empty(){return new Pr(new et(null))}}function ku(t,e,n){if(Re(e))return new Pr(new et(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=vn(s,e);return i=i.updateChild(o,n),new Pr(t.writeTree_.set(s,i))}else{const s=new et(n),i=t.writeTree_.setTree(e,s);return new Pr(i)}}}function SC(t,e,n){let r=t;return On(n,(s,i)=>{r=ku(r,St(e,s),i)}),r}function bC(t,e){if(Re(e))return Pr.empty();{const n=t.writeTree_.setTree(e,new et(null));return new Pr(n)}}function h_(t,e){return ya(t,e)!=null}function ya(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vn(n.path,e)):null}function kC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pt,(r,s)=>{e.push(new be(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new be(r,s.value))}),e}function Oi(t,e){if(Re(e))return t;{const n=ya(t,e);return n!=null?new Pr(new et(n)):new Pr(t.writeTree_.subtree(e))}}function f_(t){return t.writeTree_.isEmpty()}function ql(t,e){return IN(ze(),t.writeTree_,e)}function IN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Q(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=IN(St(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(St(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){return kN(e,t)}function IB(t,e,n,r,s){Q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ku(t.visibleWrites,e,n)),t.lastWriteId=r}function CB(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function SB(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Q(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&bB(a,r.path)?s=!1:Ir(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return kB(t),!0;if(r.snap)t.visibleWrites=bC(t.visibleWrites,r.path);else{const a=r.children;On(a,l=>{t.visibleWrites=bC(t.visibleWrites,St(r.path,l))})}return!0}else return!1}function bB(t,e){if(t.snap)return Ir(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ir(St(t.path,n),e))return!0;return!1}function kB(t){t.visibleWrites=CN(t.allWrites,RB,ze()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function RB(t){return t.visible}function CN(t,e,n){let r=Pr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Ir(n,o)?(a=vn(n,o),r=ku(r,a,i.snap)):Ir(o,n)&&(a=vn(o,n),r=ku(r,ze(),i.snap.getChild(a)));else if(i.children){if(Ir(n,o))a=vn(n,o),r=SC(r,a,i.children);else if(Ir(o,n))if(a=vn(o,n),Re(a))r=SC(r,ze(),i.children);else{const l=Bl(i.children,Me(a));if(l){const c=l.getChild(Qe(a));r=ku(r,ze(),c)}}}else throw lc("WriteRecord should have .snap or .children")}}return r}function SN(t,e,n,r,s){if(!r&&!s){const i=ya(t.visibleWrites,e);if(i!=null)return i;{const o=Oi(t.visibleWrites,e);if(f_(o))return n;if(n==null&&!h_(o,ze()))return null;{const a=n||pe.EMPTY_NODE;return ql(o,a)}}}else{const i=Oi(t.visibleWrites,e);if(!s&&f_(i))return n;if(!s&&n==null&&!h_(i,ze()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Ir(c.path,e)||Ir(e,c.path))},a=CN(t.allWrites,o,e),l=n||pe.EMPTY_NODE;return ql(a,l)}}}function AB(t,e,n){let r=pe.EMPTY_NODE;const s=ya(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(pt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Oi(t.visibleWrites,e);return n.forEachChild(pt,(o,a)=>{const l=ql(Oi(i,new Ke(o)),a);r=r.updateImmediateChild(o,l)}),kC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Oi(t.visibleWrites,e);return kC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function PB(t,e,n,r,s){Q(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=St(e,n);if(h_(t.visibleWrites,i))return null;{const o=Oi(t.visibleWrites,i);return f_(o)?s.getChild(n):ql(o,s.getChild(n))}}function NB(t,e,n,r){const s=St(e,n),i=ya(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Oi(t.visibleWrites,s);return ql(o,r.getNode().getImmediateChild(n))}else return null}function OB(t,e){return ya(t.visibleWrites,e)}function DB(t,e,n,r,s,i,o){let a;const l=Oi(t.visibleWrites,e),c=ya(l,ze());if(c!=null)a=c;else if(n!=null)a=ql(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<s;)h(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function MB(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function Bp(t,e,n,r){return SN(t.writeTree,t.treePath,e,n,r)}function L0(t,e){return AB(t.writeTree,t.treePath,e)}function RC(t,e,n,r){return PB(t.writeTree,t.treePath,e,n,r)}function Wp(t,e){return OB(t.writeTree,St(t.treePath,e))}function LB(t,e,n,r,s,i){return DB(t.writeTree,t.treePath,e,n,r,s,i)}function F0(t,e,n){return NB(t.writeTree,t.treePath,e,n)}function bN(t,e){return kN(St(t.treePath,e),t.writeTree)}function kN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ed(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,wd(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Hl(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ed(r,e.snapshotNode,s.oldSnap));else throw lc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const RN=new VB;class V0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new qi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return F0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ua(this.viewCache_),i=LB(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(t){return{filter:t}}function UB(t,e){Q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $B(t,e,n,r,s){const i=new FB;let o,a;if(n.type===Cr.OVERWRITE){const c=n;c.source.fromUser?o=p_(t,e,c.path,c.snap,r,s,i):(Q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=Hp(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===Cr.MERGE){const c=n;c.source.fromUser?o=BB(t,e,c.path,c.children,r,s,i):(Q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=m_(t,e,c.path,c.children,r,s,a,i))}else if(n.type===Cr.ACK_USER_WRITE){const c=n;c.revert?o=qB(t,e,c.path,r,s,i):o=WB(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Cr.LISTEN_COMPLETE)o=HB(t,e,n.path,r,i);else throw lc("Unknown operation type: "+n.type);const l=i.getChanges();return zB(e,o,l),{viewCache:o,changes:l}}function zB(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=zp(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(wN(zp(e)))}}function AN(t,e,n,r,s,i){const o=e.eventCache;if(Wp(r,n)!=null)return e;{let a,l;if(Re(n))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ua(e),d=c instanceof pe?c:pe.EMPTY_NODE,h=L0(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=Bp(r,ua(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Me(n);if(c===".priority"){Q(Hi(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=RC(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Qe(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=RC(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=F0(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,s,i):a=o.getNode()}}return bu(e,a,o.isFullyInitialized()||Re(n),t.filter.filtersNodes())}}function Hp(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Re(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),g,null)}else{const g=Me(n);if(!l.isCompleteForPath(n)&&Hi(n)>1)return e;const w=Qe(n),x=l.getNode().getImmediateChild(g).updateChild(w,r);g===".priority"?c=d.updatePriority(l.getNode(),x):c=d.updateChild(l.getNode(),g,x,w,RN,null)}const h=TN(e,c,l.isFullyInitialized()||Re(n),d.filtersNodes()),f=new V0(s,h,i);return AN(t,h,n,s,f,a)}function p_(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const d=new V0(s,e,i);if(Re(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=bu(e,c,!0,t.filter.filtersNodes());else{const h=Me(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=bu(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Qe(n),g=a.getNode().getImmediateChild(h);let w;if(Re(f))w=r;else{const _=d.getCompleteChild(h);_!=null?uN(f)===".priority"&&_.getChild(hN(f)).isEmpty()?w=_:w=_.updateChild(f,r):w=pe.EMPTY_NODE}if(g.equals(w))l=e;else{const _=t.filter.updateChild(a.getNode(),h,w,f,d,o);l=bu(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function AC(t,e){return t.eventCache.isCompleteForChild(e)}function BB(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const d=St(n,l);AC(e,Me(d))&&(a=p_(t,a,d,c,s,i,o))}),r.foreach((l,c)=>{const d=St(n,l);AC(e,Me(d))||(a=p_(t,a,d,c,s,i,o))}),a}function PC(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function m_(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Re(n)?c=r:c=new et(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),w=PC(t,g,f);l=Hp(t,l,new Ke(h),w,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const g=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!g){const w=e.serverCache.getNode().getImmediateChild(h),_=PC(t,w,f);l=Hp(t,l,new Ke(h),_,s,i,o,a)}}),l}function WB(t,e,n,r,s,i,o){if(Wp(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Re(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Hp(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Re(n)){let c=new et(null);return l.getNode().forEachChild(fl,(d,h)=>{c=c.set(new Ke(d),h)}),m_(t,e,n,c,s,i,a,o)}else return e}else{let c=new et(null);return r.foreach((d,h)=>{const f=St(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),m_(t,e,n,c,s,i,a,o)}}function HB(t,e,n,r,s){const i=e.serverCache,o=TN(e,i.getNode(),i.isFullyInitialized()||Re(n),i.isFiltered());return AN(t,o,n,r,RN,s)}function qB(t,e,n,r,s,i){let o;if(Wp(r,n)!=null)return e;{const a=new V0(r,e,s),l=e.eventCache.getNode();let c;if(Re(n)||Me(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Bp(r,ua(e));else{const h=e.serverCache.getNode();Q(h instanceof pe,"serverChildren would be complete if leaf node"),d=L0(r,h)}d=d,c=t.filter.updateFullNode(l,d,i)}else{const d=Me(n);let h=F0(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,Qe(n),a,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,pe.EMPTY_NODE,Qe(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bp(r,ua(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||Wp(r,ze())!=null,bu(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new N0(r.getIndex()),i=hB(r);this.processor_=jB(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(pe.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(pe.EMPTY_NODE,a.getNode(),null),d=new qi(l,o.isFullyInitialized(),s.filtersNodes()),h=new qi(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wm(h,d),this.eventGenerator_=new _B(this.query_)}get query(){return this.query_}}function KB(t){return t.viewCache_.serverCache.getNode()}function QB(t){return zp(t.viewCache_)}function YB(t,e){const n=ua(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Re(e)&&!n.getImmediateChild(Me(e)).isEmpty())?n.getChild(e):null}function NC(t){return t.eventRegistrations_.length===0}function ZB(t,e){t.eventRegistrations_.push(e)}function OC(t,e,n){const r=[];if(n){Q(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function DC(t,e,n,r){e.type===Cr.MERGE&&e.source.queryId!==null&&(Q(ua(t.viewCache_),"We should always have a full cache before handling merges"),Q(zp(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=$B(t.processor_,s,e,n,r);return UB(t.processor_,i.viewCache),Q(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,PN(t,i.changes,i.viewCache.eventCache.getNode(),null)}function XB(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pt,(i,o)=>{r.push(Hl(i,o))}),n.isFullyInitialized()&&r.push(wN(n.getNode())),PN(t,r,n.getNode(),e)}function PN(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return wB(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp;class NN{constructor(){this.views=new Map}}function JB(t){Q(!qp,"__referenceConstructor has already been defined"),qp=t}function eW(){return Q(qp,"Reference.ts has not been loaded"),qp}function tW(t){return t.views.size===0}function j0(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Q(i!=null,"SyncTree gave us an op for an invalid query."),DC(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(DC(o,e,n,r));return i}}function ON(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Bp(n,s?r:null),l=!1;a?l=!0:r instanceof pe?(a=L0(n,r),l=!1):(a=pe.EMPTY_NODE,l=!1);const c=Wm(new qi(a,l,!1),new qi(r,s,!1));return new GB(e,c)}return o}function nW(t,e,n,r,s,i){const o=ON(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),ZB(o,n),XB(o,n)}function rW(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Gi(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(OC(c,n,r)),NC(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(OC(l,n,r)),NC(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Gi(t)&&i.push(new(eW())(e._repo,e._path)),{removed:i,events:o}}function DN(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Di(t,e){let n=null;for(const r of t.views.values())n=n||YB(r,e);return n}function MN(t,e){if(e._queryParams.loadsAllData())return qm(t);{const r=e._queryIdentifier;return t.views.get(r)}}function LN(t,e){return MN(t,e)!=null}function Gi(t){return qm(t)!=null}function qm(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp;function sW(t){Q(!Gp,"__referenceConstructor has already been defined"),Gp=t}function iW(){return Q(Gp,"Reference.ts has not been loaded"),Gp}let oW=1;class MC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new et(null),this.pendingWriteTree_=MB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aW(t,e,n,r,s){return IB(t.pendingWriteTree_,e,n,r,s),s?oh(t,new ca(xN(),e,n)):[]}function Xa(t,e,n=!1){const r=CB(t.pendingWriteTree_,e);if(SB(t.pendingWriteTree_,e)){let i=new et(null);return r.snap!=null?i=i.set(ze(),!0):On(r.children,o=>{i=i.set(new Ke(o),!0)}),oh(t,new $p(r.path,i,n))}else return[]}function ih(t,e,n){return oh(t,new ca(D0(),e,n))}function lW(t,e,n){const r=et.fromObject(n);return oh(t,new Id(D0(),e,r))}function cW(t,e){return oh(t,new Td(D0(),e))}function uW(t,e,n){const r=U0(t,n);if(r){const s=$0(r),i=s.path,o=s.queryId,a=vn(i,e),l=new Td(M0(o),a);return z0(t,i,l)}else return[]}function FN(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||LN(o,e))){const l=rW(o,e,n,r);tW(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,g)=>Gi(g));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const g=pW(f);for(let w=0;w<g.length;++w){const _=g[w],x=_.query,E=zN(t,_);t.listenProvider_.startListening(Ru(x),Cd(t,x),E.hashFn,E.onComplete)}}}!h&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(Ru(e),null):c.forEach(f=>{const g=t.queryToTagMap.get(Gm(f));t.listenProvider_.stopListening(Ru(f),g)}))}mW(t,c)}return a}function VN(t,e,n,r){const s=U0(t,r);if(s!=null){const i=$0(s),o=i.path,a=i.queryId,l=vn(o,e),c=new ca(M0(a),l,n);return z0(t,o,c)}else return[]}function dW(t,e,n,r){const s=U0(t,r);if(s){const i=$0(s),o=i.path,a=i.queryId,l=vn(o,e),c=et.fromObject(n),d=new Id(M0(a),l,c);return z0(t,o,d)}else return[]}function hW(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,g)=>{const w=vn(f,s);i=i||Di(g,w),o=o||Gi(g)});let a=t.syncPointTree_.get(s);a?(o=o||Gi(a),i=i||Di(a,ze())):(a=new NN,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=pe.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((g,w)=>{const _=Di(w,ze());_&&(i=i.updateImmediateChild(g,_))}));const c=LN(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Gm(e);Q(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=gW();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=Hm(t.pendingWriteTree_,s);let h=nW(a,e,n,d,i,l);if(!c&&!o&&!r){const f=MN(a,e);h=h.concat(yW(t,e,f))}return h}function jN(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=vn(o,e),c=Di(a,l);if(c)return c});return SN(s,e,i,n,!0)}function fW(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const h=vn(c,n);r=r||Di(d,h)});let s=t.syncPointTree_.get(n);s?r=r||Di(s,ze()):(s=new NN,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new qi(r,!0,!1):null,a=Hm(t.pendingWriteTree_,e._path),l=ON(s,e,a,i?o.getNode():pe.EMPTY_NODE,i);return QB(l)}function oh(t,e){return UN(e,t.syncPointTree_,null,Hm(t.pendingWriteTree_,ze()))}function UN(t,e,n,r){if(Re(t.path))return $N(t,e,n,r);{const s=e.get(ze());n==null&&s!=null&&(n=Di(s,ze()));let i=[];const o=Me(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=bN(r,o);i=i.concat(UN(a,l,c,d))}return s&&(i=i.concat(j0(s,t,r,n))),i}}function $N(t,e,n,r){const s=e.get(ze());n==null&&s!=null&&(n=Di(s,ze()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=bN(r,o),d=t.operationForChild(o);d&&(i=i.concat($N(d,a,l,c)))}),s&&(i=i.concat(j0(s,t,r,n))),i}function zN(t,e){const n=e.query,r=Cd(t,n);return{hashFn:()=>(KB(e)||pe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?uW(t,n._path,r):cW(t,n._path);{const i=dz(s,n);return FN(t,n,null,i)}}}}function Cd(t,e){const n=Gm(e);return t.queryToTagMap.get(n)}function Gm(t){return t._path.toString()+"$"+t._queryIdentifier}function U0(t,e){return t.tagToQueryMap.get(e)}function $0(t){const e=t.indexOf("$");return Q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ke(t.substr(0,e))}}function z0(t,e,n){const r=t.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");const s=Hm(t.pendingWriteTree_,e);return j0(r,n,s,null)}function pW(t){return t.fold((e,n,r)=>{if(n&&Gi(n))return[qm(n)];{let s=[];return n&&(s=DN(n)),On(r,(i,o)=>{s=s.concat(o)}),s}})}function Ru(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(iW())(t._repo,t._path):t}function mW(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Gm(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function gW(){return oW++}function yW(t,e,n){const r=e._path,s=Cd(t,e),i=zN(t,n),o=t.listenProvider_.startListening(Ru(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Q(!Gi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,h)=>{if(!Re(c)&&d&&Gi(d))return[qm(d).query];{let f=[];return d&&(f=f.concat(DN(d).map(g=>g.query))),On(h,(g,w)=>{f=f.concat(w)}),f}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(Ru(d),Cd(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new B0(n)}node(){return this.node_}}class W0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=St(this.path_,e);return new W0(this.syncTree_,n)}node(){return jN(this.syncTree_,this.path_)}}const vW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},LC=function(t,e,n){if(!t||typeof t!="object")return t;if(Q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _W(t[".sv"],e,n);if(typeof t[".sv"]=="object")return wW(t[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_W=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Q(!1,"Unexpected server value: "+t)}},wW=function(t,e,n){t.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);const s=e.node();if(Q(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},EW=function(t,e,n,r){return H0(e,new W0(n,t),r)},xW=function(t,e,n){return H0(t,new B0(e),n)};function H0(t,e,n){const r=t.getPriority().val(),s=LC(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=LC(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Nt(a,zt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Nt(s))),o.forEachChild(pt,(a,l)=>{const c=H0(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function G0(t,e){let n=e instanceof Ke?e:new Ke(e),r=t,s=Me(n);for(;s!==null;){const i=Bl(r.node.children,s)||{children:{},childCount:0};r=new q0(s,r,i),n=Qe(n),s=Me(n)}return r}function hc(t){return t.node.value}function BN(t,e){t.node.value=e,g_(t)}function WN(t){return t.node.childCount>0}function TW(t){return hc(t)===void 0&&!WN(t)}function Km(t,e){On(t.node.children,(n,r)=>{e(new q0(n,t,r))})}function HN(t,e,n,r){n&&!r&&e(t),Km(t,s=>{HN(s,e,!0,r)}),n&&r&&e(t)}function IW(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ah(t){return new Ke(t.parent===null?t.name:ah(t.parent)+"/"+t.name)}function g_(t){t.parent!==null&&CW(t.parent,t.name,t)}function CW(t,e,n){const r=TW(n),s=Gs(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,g_(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,g_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=/[\[\].#$\/\u0000-\u001F\u007F]/,bW=/[\[\].#$\u0000-\u001F\u007F]/,wy=10*1024*1024,qN=function(t){return typeof t=="string"&&t.length!==0&&!SW.test(t)},GN=function(t){return typeof t=="string"&&t.length!==0&&!bW.test(t)},kW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GN(t)},KN=function(t,e,n){const r=n instanceof Ke?new Wz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ko(r));if(typeof e=="function")throw new Error(t+"contains a function "+ko(r)+" with contents = "+e.toString());if(BP(e))throw new Error(t+"contains "+e.toString()+" "+ko(r));if(typeof e=="string"&&e.length>wy/3&&jm(e)>wy)throw new Error(t+"contains a string greater than "+wy+" utf8 bytes "+ko(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(On(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!qN(o)))throw new Error(t+" contains an invalid key ("+o+") "+ko(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Hz(r,o),KN(t,a,r),qz(r)}),s&&i)throw new Error(t+' contains ".value" child '+ko(r)+" in addition to actual children.")}},QN=function(t,e,n,r){if(!GN(n))throw new Error(eP(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},RW=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QN(t,e,n)},AW=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kW(n))throw new Error(eP(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function NW(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!fN(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function uo(t,e,n){NW(t,n),OW(t,r=>Ir(r,e)||Ir(e,r))}function OW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(DW(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function DW(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Cu&&nn("event: "+n.toString()),rh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW="repo_interrupt",LW=25;class FW{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Up(),this.transactionQueueTree_=new q0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VW(t,e,n){if(t.stats_=k0(t.repoInfo_),t.forceRestClient_||mz())t.server_=new jp(t.repoInfo_,(r,s,i,o)=>{FC(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>VC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ct(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ns(t.repoInfo_,e,(r,s,i,o)=>{FC(t,r,s,i,o)},r=>{VC(t,r)},r=>{UW(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=wz(t.repoInfo_,()=>new vB(t.stats_,t.server_)),t.infoData_=new fB,t.infoSyncTree_=new MC({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=ih(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),K0(t,"connected",!1),t.serverSyncTree_=new MC({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);uo(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function jW(t){const n=t.infoData_.getNode(new Ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function YN(t){return vW({timestamp:jW(t)})}function FC(t,e,n,r,s){t.dataUpdateCount++;const i=new Ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=kp(n,c=>zt(c));o=dW(t.serverSyncTree_,i,l,s)}else{const l=zt(n);o=VN(t.serverSyncTree_,i,l,s)}else if(r){const l=kp(n,c=>zt(c));o=lW(t.serverSyncTree_,i,l)}else{const l=zt(n);o=ih(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Z0(t,i)),uo(t.eventQueue_,a,o)}function VC(t,e){K0(t,"connected",e),e===!1&&BW(t)}function UW(t,e){On(e,(n,r)=>{K0(t,n,r)})}function K0(t,e,n){const r=new Ke("/.info/"+e),s=zt(n);t.infoData_.updateSnapshot(r,s);const i=ih(t.infoSyncTree_,r,s);uo(t.eventQueue_,r,i)}function $W(t){return t.nextWriteId_++}function zW(t,e,n){const r=fW(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=zt(s).withIndex(e._queryParams.getIndex());hW(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ih(t.serverSyncTree_,e._path,i);else{const a=Cd(t.serverSyncTree_,e);o=VN(t.serverSyncTree_,e._path,i,a)}return uo(t.eventQueue_,e._path,o),FN(t.serverSyncTree_,e,n,null,!0),i},s=>(Q0(t,"get for query "+Ct(e)+" failed: "+s),Promise.reject(new Error(s))))}function BW(t){Q0(t,"onDisconnectEvents");const e=YN(t),n=Up();d_(t.onDisconnect_,ze(),(s,i)=>{const o=EW(s,i,t.serverSyncTree_,e);EN(n,s,o)});let r=[];d_(n,ze(),(s,i)=>{r=r.concat(ih(t.serverSyncTree_,s,i));const o=GW(t,s);Z0(t,o)}),t.onDisconnect_=Up(),uo(t.eventQueue_,ze(),r)}function WW(t){t.persistentConnection_&&t.persistentConnection_.interrupt(MW)}function Q0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nn(n,...e)}function ZN(t,e,n){return jN(t.serverSyncTree_,e,n)||pe.EMPTY_NODE}function Y0(t,e=t.transactionQueueTree_){if(e||Qm(t,e),hc(e)){const n=JN(t,e);Q(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&HW(t,ah(e),n)}else WN(e)&&Km(e,n=>{Y0(t,n)})}function HW(t,e,n){const r=n.map(c=>c.currentWriteId),s=ZN(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];Q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=vn(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Q0(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Xa(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Qm(t,G0(t.transactionQueueTree_,e)),Y0(t,t.transactionQueueTree_),uo(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)rh(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Hn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Z0(t,e)}},o)}function Z0(t,e){const n=XN(t,e),r=ah(n),s=JN(t,n);return qW(t,s,r),r}function qW(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=vn(n,l.path);let d=!1,h;if(Q(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(Xa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LW)d=!0,h="maxretry",s=s.concat(Xa(t.serverSyncTree_,l.currentWriteId,!0));else{const f=ZN(t,l.path,o);l.currentInputSnapshot=f;const g=e[a].update(f.val());if(g!==void 0){KN("transaction failed: Data returned ",g,l.path);let w=zt(g);typeof g=="object"&&g!=null&&Gs(g,".priority")||(w=w.updatePriority(f.getPriority()));const x=l.currentWriteId,E=YN(t),v=xW(w,f,E);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=v,l.currentWriteId=$W(t),o.splice(o.indexOf(x),1),s=s.concat(aW(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),s=s.concat(Xa(t.serverSyncTree_,x,!0))}else d=!0,h="nodata",s=s.concat(Xa(t.serverSyncTree_,l.currentWriteId,!0))}uo(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Qm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)rh(r[a]);Y0(t,t.transactionQueueTree_)}function XN(t,e){let n,r=t.transactionQueueTree_;for(n=Me(e);n!==null&&hc(r)===void 0;)r=G0(r,n),e=Qe(e),n=Me(e);return r}function JN(t,e){const n=[];return eO(t,e,n),n.sort((r,s)=>r.order-s.order),n}function eO(t,e,n){const r=hc(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Km(e,s=>{eO(t,s,n)})}function Qm(t,e){const n=hc(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,BN(e,n.length>0?n:void 0)}Km(e,r=>{Qm(t,r)})}function GW(t,e){const n=ah(XN(t,e)),r=G0(t.transactionQueueTree_,e);return IW(r,s=>{Ey(t,s)}),Ey(t,r),HN(r,s=>{Ey(t,s)}),n}function Ey(t,e){const n=hc(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Q(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Xa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?BN(e,void 0):n.length=i+1,uo(t.eventQueue_,ah(e),s);for(let o=0;o<r.length;o++)rh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function QW(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hn(`Invalid query segment '${n}' in query '${t}'`)}return e}const jC=function(t,e){const n=YW(t),r=n.namespace;n.domain==="firebase.com"&&Ws(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ws("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||oz();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new tN(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ke(n.pathString)}},YW=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=KW(t.substring(d,h)));const f=QW(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ct(this.snapshot.exportVal())}}class XW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Re(this._path)?null:uN(this._path)}get ref(){return new Qs(this._repo,this._path)}get _queryIdentifier(){const e=IC(this._queryParams),n=S0(e);return n==="{}"?"default":n}get _queryObject(){return IC(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof X0))return!1;const n=this._repo===e._repo,r=fN(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Bz(this._path)}}class Qs extends X0{constructor(e,n){super(e,n,new O0,!1)}get parent(){const e=hN(this._path);return e===null?null:new Qs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Sd{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ke(e),r=y_(this.ref,e);return new Sd(this._node.getChild(n),r,pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Sd(s,y_(this.ref,r),pt)))}hasChild(e){const n=new Ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bd(t,e){return t=Lt(t),t._checkNotDeleted("ref"),e!==void 0?y_(t._root,e):t._root}function y_(t,e){return t=Lt(t),Me(t._path)===null?RW("child","path",e):QN("child","path",e),new Qs(t._repo,St(t._path,e))}function kd(t){t=Lt(t);const e=new JW(()=>{}),n=new J0(e);return zW(t._repo,t,n).then(r=>new Sd(r,new Qs(t._repo,t._path),t._queryParams.getIndex()))}class J0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ZW("value",this,new Sd(e.snapshotNode,new Qs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new XW(this,e,n):null}matches(e){return e instanceof J0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}JB(Qs);sW(Qs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH="FIREBASE_DATABASE_EMULATOR_HOST",v_={};let tH=!1;function nH(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=so(i);t.repoInfo_=new tN(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function rH(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Ws("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jC(i,s),a=o.repoInfo,l;typeof process<"u"&&oC&&(l=oC[eH]),l?(i=`http://${l}?ns=${a.namespace}`,o=jC(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new yz(t.name,t.options,e);AW("Invalid Firebase Database URL",o),Re(o.path)||Ws("Database URL must point to the root of a Firebase Database (not including a child path).");const d=iH(a,t,c,new gz(t,n));return new oH(d,t)}function sH(t,e){const n=v_[e];(!n||n[t.key]!==t)&&Ws(`Database ${e}(${t.repoInfo_}) has already been deleted.`),WW(t),delete n[t.key]}function iH(t,e,n,r){let s=v_[e.name];s||(s={},v_[e.name]=s);let i=s[t.toURLString()];return i&&Ws("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new FW(t,tH,n,r),s[t.toURLString()]=i,i}class oH{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,io("Database",this._repo.repoInfo_.emulatorOptions!==null)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qs(this._repo,ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ws("Cannot call "+e+" on a deleted database.")}}function aH(t=Yd(),e){const n=Ks(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=u0("database");r&&lH(n,...r)}return n}function lH(t,e,n,r={}){t=Lt(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&$s(r,i.repoInfo_.emulatorOptions))return;Ws("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ws('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Nf(Nf.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:h0(r.mockUserToken,t.app.options.projectId);o=new Nf(a)}so(e)&&(Vm(e),io("Database",!0)),nH(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t){ez(oo),or(new Kn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return rH(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),sn(aC,lC,t),sn(aC,lC,"esm2017")}Ns.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ns.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cH();var UC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,tO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function S(){}S.prototype=T.prototype,C.D=T.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(R,O,P){for(var k=Array(arguments.length-2),H=2;H<arguments.length;H++)k[H-2]=arguments[H];return T.prototype[O].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,S){S||(S=0);var R=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)R[O]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(O=0;16>O;++O)R[O]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=C.g[0],S=C.g[1],O=C.g[2];var P=C.g[3],k=T+(P^S&(O^P))+R[0]+3614090360&4294967295;T=S+(k<<7&4294967295|k>>>25),k=P+(O^T&(S^O))+R[1]+3905402710&4294967295,P=T+(k<<12&4294967295|k>>>20),k=O+(S^P&(T^S))+R[2]+606105819&4294967295,O=P+(k<<17&4294967295|k>>>15),k=S+(T^O&(P^T))+R[3]+3250441966&4294967295,S=O+(k<<22&4294967295|k>>>10),k=T+(P^S&(O^P))+R[4]+4118548399&4294967295,T=S+(k<<7&4294967295|k>>>25),k=P+(O^T&(S^O))+R[5]+1200080426&4294967295,P=T+(k<<12&4294967295|k>>>20),k=O+(S^P&(T^S))+R[6]+2821735955&4294967295,O=P+(k<<17&4294967295|k>>>15),k=S+(T^O&(P^T))+R[7]+4249261313&4294967295,S=O+(k<<22&4294967295|k>>>10),k=T+(P^S&(O^P))+R[8]+1770035416&4294967295,T=S+(k<<7&4294967295|k>>>25),k=P+(O^T&(S^O))+R[9]+2336552879&4294967295,P=T+(k<<12&4294967295|k>>>20),k=O+(S^P&(T^S))+R[10]+4294925233&4294967295,O=P+(k<<17&4294967295|k>>>15),k=S+(T^O&(P^T))+R[11]+2304563134&4294967295,S=O+(k<<22&4294967295|k>>>10),k=T+(P^S&(O^P))+R[12]+1804603682&4294967295,T=S+(k<<7&4294967295|k>>>25),k=P+(O^T&(S^O))+R[13]+4254626195&4294967295,P=T+(k<<12&4294967295|k>>>20),k=O+(S^P&(T^S))+R[14]+2792965006&4294967295,O=P+(k<<17&4294967295|k>>>15),k=S+(T^O&(P^T))+R[15]+1236535329&4294967295,S=O+(k<<22&4294967295|k>>>10),k=T+(O^P&(S^O))+R[1]+4129170786&4294967295,T=S+(k<<5&4294967295|k>>>27),k=P+(S^O&(T^S))+R[6]+3225465664&4294967295,P=T+(k<<9&4294967295|k>>>23),k=O+(T^S&(P^T))+R[11]+643717713&4294967295,O=P+(k<<14&4294967295|k>>>18),k=S+(P^T&(O^P))+R[0]+3921069994&4294967295,S=O+(k<<20&4294967295|k>>>12),k=T+(O^P&(S^O))+R[5]+3593408605&4294967295,T=S+(k<<5&4294967295|k>>>27),k=P+(S^O&(T^S))+R[10]+38016083&4294967295,P=T+(k<<9&4294967295|k>>>23),k=O+(T^S&(P^T))+R[15]+3634488961&4294967295,O=P+(k<<14&4294967295|k>>>18),k=S+(P^T&(O^P))+R[4]+3889429448&4294967295,S=O+(k<<20&4294967295|k>>>12),k=T+(O^P&(S^O))+R[9]+568446438&4294967295,T=S+(k<<5&4294967295|k>>>27),k=P+(S^O&(T^S))+R[14]+3275163606&4294967295,P=T+(k<<9&4294967295|k>>>23),k=O+(T^S&(P^T))+R[3]+4107603335&4294967295,O=P+(k<<14&4294967295|k>>>18),k=S+(P^T&(O^P))+R[8]+1163531501&4294967295,S=O+(k<<20&4294967295|k>>>12),k=T+(O^P&(S^O))+R[13]+2850285829&4294967295,T=S+(k<<5&4294967295|k>>>27),k=P+(S^O&(T^S))+R[2]+4243563512&4294967295,P=T+(k<<9&4294967295|k>>>23),k=O+(T^S&(P^T))+R[7]+1735328473&4294967295,O=P+(k<<14&4294967295|k>>>18),k=S+(P^T&(O^P))+R[12]+2368359562&4294967295,S=O+(k<<20&4294967295|k>>>12),k=T+(S^O^P)+R[5]+4294588738&4294967295,T=S+(k<<4&4294967295|k>>>28),k=P+(T^S^O)+R[8]+2272392833&4294967295,P=T+(k<<11&4294967295|k>>>21),k=O+(P^T^S)+R[11]+1839030562&4294967295,O=P+(k<<16&4294967295|k>>>16),k=S+(O^P^T)+R[14]+4259657740&4294967295,S=O+(k<<23&4294967295|k>>>9),k=T+(S^O^P)+R[1]+2763975236&4294967295,T=S+(k<<4&4294967295|k>>>28),k=P+(T^S^O)+R[4]+1272893353&4294967295,P=T+(k<<11&4294967295|k>>>21),k=O+(P^T^S)+R[7]+4139469664&4294967295,O=P+(k<<16&4294967295|k>>>16),k=S+(O^P^T)+R[10]+3200236656&4294967295,S=O+(k<<23&4294967295|k>>>9),k=T+(S^O^P)+R[13]+681279174&4294967295,T=S+(k<<4&4294967295|k>>>28),k=P+(T^S^O)+R[0]+3936430074&4294967295,P=T+(k<<11&4294967295|k>>>21),k=O+(P^T^S)+R[3]+3572445317&4294967295,O=P+(k<<16&4294967295|k>>>16),k=S+(O^P^T)+R[6]+76029189&4294967295,S=O+(k<<23&4294967295|k>>>9),k=T+(S^O^P)+R[9]+3654602809&4294967295,T=S+(k<<4&4294967295|k>>>28),k=P+(T^S^O)+R[12]+3873151461&4294967295,P=T+(k<<11&4294967295|k>>>21),k=O+(P^T^S)+R[15]+530742520&4294967295,O=P+(k<<16&4294967295|k>>>16),k=S+(O^P^T)+R[2]+3299628645&4294967295,S=O+(k<<23&4294967295|k>>>9),k=T+(O^(S|~P))+R[0]+4096336452&4294967295,T=S+(k<<6&4294967295|k>>>26),k=P+(S^(T|~O))+R[7]+1126891415&4294967295,P=T+(k<<10&4294967295|k>>>22),k=O+(T^(P|~S))+R[14]+2878612391&4294967295,O=P+(k<<15&4294967295|k>>>17),k=S+(P^(O|~T))+R[5]+4237533241&4294967295,S=O+(k<<21&4294967295|k>>>11),k=T+(O^(S|~P))+R[12]+1700485571&4294967295,T=S+(k<<6&4294967295|k>>>26),k=P+(S^(T|~O))+R[3]+2399980690&4294967295,P=T+(k<<10&4294967295|k>>>22),k=O+(T^(P|~S))+R[10]+4293915773&4294967295,O=P+(k<<15&4294967295|k>>>17),k=S+(P^(O|~T))+R[1]+2240044497&4294967295,S=O+(k<<21&4294967295|k>>>11),k=T+(O^(S|~P))+R[8]+1873313359&4294967295,T=S+(k<<6&4294967295|k>>>26),k=P+(S^(T|~O))+R[15]+4264355552&4294967295,P=T+(k<<10&4294967295|k>>>22),k=O+(T^(P|~S))+R[6]+2734768916&4294967295,O=P+(k<<15&4294967295|k>>>17),k=S+(P^(O|~T))+R[13]+1309151649&4294967295,S=O+(k<<21&4294967295|k>>>11),k=T+(O^(S|~P))+R[4]+4149444226&4294967295,T=S+(k<<6&4294967295|k>>>26),k=P+(S^(T|~O))+R[11]+3174756917&4294967295,P=T+(k<<10&4294967295|k>>>22),k=O+(T^(P|~S))+R[2]+718787259&4294967295,O=P+(k<<15&4294967295|k>>>17),k=S+(P^(O|~T))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+P&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var S=T-this.blockSize,R=this.B,O=this.h,P=0;P<T;){if(O==0)for(;P<=S;)s(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<T;)if(R[O++]=C.charCodeAt(P++),O==this.blockSize){s(this,R),O=0;break}}else for(;P<T;)if(R[O++]=C[P++],O==this.blockSize){s(this,R),O=0;break}}this.h=O,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var S=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=S&255,S/=256;for(this.u(C),C=Array(16),T=S=0;4>T;++T)for(var R=0;32>R;R+=8)C[S++]=this.g[T]>>>R&255;return C};function i(C,T){var S=a;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=T(C)}function o(C,T){this.h=T;for(var S=[],R=!0,O=C.length-1;0<=O;O--){var P=C[O]|0;R&&P==T||(S[O]=P,R=!1)}this.g=S}var a={};function l(C){return-128<=C&&128>C?i(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return x(c(-C));for(var T=[],S=1,R=0;C>=S;R++)T[R]=C/S|0,S*=4294967296;return new o(T,0)}function d(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return x(d(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(T,8)),R=h,O=0;O<C.length;O+=8){var P=Math.min(8,C.length-O),k=parseInt(C.substring(O,O+P),T);8>P?(P=c(Math.pow(T,P)),R=R.j(P).add(c(k))):(R=R.j(S),R=R.add(c(k)))}return R}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-x(this).m();for(var C=0,T=1,S=0;S<this.g.length;S++){var R=this.i(S);C+=(0<=R?R:4294967296+R)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(_(this))return"-"+x(this).toString(C);for(var T=c(Math.pow(C,6)),S=this,R="";;){var O=N(S,T).g;S=E(S,O.j(T));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=O,w(S))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function _(C){return C.h==-1}t.l=function(C){return C=E(this,C),_(C)?-1:w(C)?0:1};function x(C){for(var T=C.g.length,S=[],R=0;R<T;R++)S[R]=~C.g[R];return new o(S,~C.h).add(f)}t.abs=function(){return _(this)?x(this):this},t.add=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],R=0,O=0;O<=T;O++){var P=R+(this.i(O)&65535)+(C.i(O)&65535),k=(P>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);R=k>>>16,P&=65535,k&=65535,S[O]=k<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(C,T){return C.add(x(T))}t.j=function(C){if(w(this)||w(C))return h;if(_(this))return _(C)?x(this).j(x(C)):x(x(this).j(C));if(_(C))return x(this.j(x(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var T=this.g.length+C.g.length,S=[],R=0;R<2*T;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<C.g.length;O++){var P=this.i(R)>>>16,k=this.i(R)&65535,H=C.i(O)>>>16,ue=C.i(O)&65535;S[2*R+2*O]+=k*ue,v(S,2*R+2*O),S[2*R+2*O+1]+=P*ue,v(S,2*R+2*O+1),S[2*R+2*O+1]+=k*H,v(S,2*R+2*O+1),S[2*R+2*O+2]+=P*H,v(S,2*R+2*O+2)}for(R=0;R<T;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=T;R<2*T;R++)S[R]=0;return new o(S,0)};function v(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function I(C,T){this.g=C,this.h=T}function N(C,T){if(w(T))throw Error("division by zero");if(w(C))return new I(h,h);if(_(C))return T=N(x(C),T),new I(x(T.g),x(T.h));if(_(T))return T=N(C,x(T)),new I(x(T.g),T.h);if(30<C.g.length){if(_(C)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var S=f,R=T;0>=R.l(C);)S=M(S),R=M(R);var O=F(S,1),P=F(R,1);for(R=F(R,2),S=F(S,2);!w(R);){var k=P.add(R);0>=k.l(C)&&(O=O.add(S),P=k),R=F(R,1),S=F(S,1)}return T=E(C,O.j(T)),new I(O,T)}for(O=h;0<=C.l(T);){for(S=Math.max(1,Math.floor(C.m()/T.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=c(S),k=P.j(T);_(k)||0<k.l(C);)S-=R,P=c(S),k=P.j(T);w(P)&&(P=f),O=O.add(P),C=E(C,k)}return new I(O,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)&C.i(R);return new o(S,this.h&C.h)},t.or=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)|C.i(R);return new o(S,this.h|C.h)},t.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)^C.i(R);return new o(S,this.h^C.h)};function M(C){for(var T=C.g.length+1,S=[],R=0;R<T;R++)S[R]=C.i(R)<<1|C.i(R-1)>>>31;return new o(S,C.h)}function F(C,T){var S=T>>5;T%=32;for(var R=C.g.length-S,O=[],P=0;P<R;P++)O[P]=0<T?C.i(P+S)>>>T|C.i(P+S+1)<<32-T:C.i(P+S);return new o(O,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Mi=o}).apply(typeof UC<"u"?UC:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nO,ou,rO,Df,__,sO,iO,oO;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var y=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var V=u[b];if(!(V in y))break e;y=y[V]}u=u[u.length-1],b=y[u],p=p(b),p!=b&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var y=0,b=!1,V={next:function(){if(!b&&y<u.length){var U=y++;return{value:p(U,u[U]),done:!1}}return b=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,y){return u.call.apply(u.bind,arguments)}function h(u,p,y){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,b),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function f(u,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function w(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(b,V,U){for(var Y=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Y[Ge-2]=arguments[Ge];return p.prototype[V].apply(b,Y)}}function _(u){const p=u.length;if(0<p){const y=Array(p);for(let b=0;b<p;b++)y[b]=u[b];return y}return[]}function x(u,p){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(l(b)){const V=u.length||0,U=b.length||0;u.length=V+U;for(let Y=0;Y<U;Y++)u[V+Y]=b[Y]}else u.push(b)}}class E{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(u,p,y){for(const b in u)p.call(y,u[b],b,u)}function C(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function T(u){const p={};for(const y in u)p[y]=u[y];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,p){let y,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(y in b)u[y]=b[y];for(let U=0;U<S.length;U++)y=S[U],Object.prototype.hasOwnProperty.call(b,y)&&(u[y]=b[y])}}function O(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function P(u){a.setTimeout(()=>{throw u},0)}function k(){var u=Z;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class H{constructor(){this.h=this.g=null}add(p,y){const b=ue.get();b.set(p,y),this.h?this.h.next=b:this.g=b,this.h=b}}var ue=new E(()=>new ce,u=>u.reset());class ce{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,z=!1,Z=new H,ae=()=>{const u=a.Promise.resolve(void 0);ge=()=>{u.then(_e)}};var _e=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(y){P(y)}var p=ue;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}z=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Gt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return u}();function Tn(u,p){if(Be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{N(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Dn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Tn.aa.h.call(this)}}w(Tn,Be);var Dn={2:"touch",3:"pen",4:"mouse"};Tn.prototype.h=function(){Tn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),_a=0;function Ys(u,p,y,b,V){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!b,this.ha=V,this.key=++_a,this.da=this.fa=!1}function Lr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cr(u){this.src=u,this.g={},this.h=0}cr.prototype.add=function(u,p,y,b,V){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var Y=ur(u,p,b,V);return-1<Y?(p=u[Y],y||(p.fa=!1)):(p=new Ys(p,this.src,U,!!b,V),p.fa=y,u.push(p)),p};function fs(u,p){var y=p.type;if(y in u.g){var b=u.g[y],V=Array.prototype.indexOf.call(b,p,void 0),U;(U=0<=V)&&Array.prototype.splice.call(b,V,1),U&&(Lr(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function ur(u,p,y,b){for(var V=0;V<u.length;++V){var U=u[V];if(!U.da&&U.listener==p&&U.capture==!!y&&U.ha==b)return V}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),ho={};function fo(u,p,y,b,V){if(Array.isArray(p)){for(var U=0;U<p.length;U++)fo(u,p[U],y,b,V);return null}return y=te(y),u&&u[cn]?u.K(p,y,c(b)?!!b.capture:!!b,V):wa(u,p,y,!1,b,V)}function wa(u,p,y,b,V,U){if(!p)throw Error("Invalid event type");var Y=c(V)?!!V.capture:!!V,Ge=j(u);if(Ge||(u[ps]=Ge=new cr(u)),y=Ge.add(p,y,b,Y,U),y.proxy)return y;if(b=yc(),y.proxy=b,b.src=u,b.listener=y,u.addEventListener)Gt||(V=Y),V===void 0&&(V=!1),u.addEventListener(p.toString(),b,V);else if(u.attachEvent)u.attachEvent(vc(p.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function yc(){function u(y){return p.call(u.src,u.listener,y)}const p=D;return u}function ms(u,p,y,b,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)ms(u,p[U],y,b,V);else b=c(b)?!!b.capture:!!b,y=te(y),u&&u[cn]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],y=ur(U,y,b,V),-1<y&&(Lr(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=j(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ur(p,y,b,V)),(y=-1<u?p[u]:null)&&ph(y))}function ph(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[cn])fs(p.i,u);else{var y=u.type,b=u.proxy;p.removeEventListener?p.removeEventListener(y,b,u.capture):p.detachEvent?p.detachEvent(vc(y),b):p.addListener&&p.removeListener&&p.removeListener(b),(y=j(p))?(fs(y,u),y.h==0&&(y.src=null,p[ps]=null)):Lr(u)}}}function vc(u){return u in ho?ho[u]:ho[u]="on"+u}function D(u,p){if(u.da)u=!0;else{p=new Tn(p,this);var y=u.listener,b=u.ha||u.src;u.fa&&ph(u),u=y.call(b,p)}return u}function j(u){return u=u[ps],u instanceof cr?u:null}var $="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(u){return typeof u=="function"?u:(u[$]||(u[$]=function(p){return u.handleEvent(p)}),u[$])}function G(){Pe.call(this),this.i=new cr(this),this.M=this,this.F=null}w(G,Pe),G.prototype[cn]=!0,G.prototype.removeEventListener=function(u,p,y,b){ms(this,u,p,y,b)};function W(u,p){var y,b=u.F;if(b)for(y=[];b;b=b.F)y.push(b);if(u=u.M,b=p.type||p,typeof p=="string")p=new Be(p,u);else if(p instanceof Be)p.target=p.target||u;else{var V=p;p=new Be(b,u),R(p,V)}if(V=!0,y)for(var U=y.length-1;0<=U;U--){var Y=p.g=y[U];V=re(Y,b,!0,p)&&V}if(Y=p.g=u,V=re(Y,b,!0,p)&&V,V=re(Y,b,!1,p)&&V,y)for(U=0;U<y.length;U++)Y=p.g=y[U],V=re(Y,b,!1,p)&&V}G.prototype.N=function(){if(G.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],b=0;b<y.length;b++)Lr(y[b]);delete u.g[p],u.h--}}this.F=null},G.prototype.K=function(u,p,y,b){return this.i.add(String(u),p,!1,y,b)},G.prototype.L=function(u,p,y,b){return this.i.add(String(u),p,!0,y,b)};function re(u,p,y,b){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,U=0;U<p.length;++U){var Y=p[U];if(Y&&!Y.da&&Y.capture==y){var Ge=Y.listener,Ft=Y.ha||Y.src;Y.fa&&fs(u.i,Y),V=Ge.call(Ft,b)!==!1&&V}}return V&&!b.defaultPrevented}function Ne(u,p,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function rt(u){u.g=Ne(()=>{u.g=null,u.i&&(u.i=!1,rt(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Pt extends Pe{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(u){Pe.call(this),this.h=u,this.g={}}w(po,Pe);var Ea=[];function xa(u){F(u.g,function(p,y){this.g.hasOwnProperty(y)&&ph(p)},u),u.g={}}po.prototype.N=function(){po.aa.N.call(this),xa(this)},po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _c=a.JSON.stringify,mh=a.JSON.parse,cg=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ta(){}Ta.prototype.h=null;function PE(u){return u.h||(u.h=u.i())}function NE(){}var wc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ug(){Be.call(this,"d")}w(ug,Be);function dg(){Be.call(this,"c")}w(dg,Be);var mo={},OE=null;function gh(){return OE=OE||new G}mo.La="serverreachability";function DE(u){Be.call(this,mo.La,u)}w(DE,Be);function Ec(u){const p=gh();W(p,new DE(p))}mo.STAT_EVENT="statevent";function ME(u,p){Be.call(this,mo.STAT_EVENT,u),this.stat=p}w(ME,Be);function un(u){const p=gh();W(p,new ME(p,u))}mo.Ma="timingevent";function LE(u,p){Be.call(this,mo.Ma,u),this.size=p}w(LE,Be);function xc(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Tc(){this.g=!0}Tc.prototype.xa=function(){this.g=!1};function XD(u,p,y,b,V,U){u.info(function(){if(u.g)if(U)for(var Y="",Ge=U.split("&"),Ft=0;Ft<Ge.length;Ft++){var $e=Ge[Ft].split("=");if(1<$e.length){var Kt=$e[0];$e=$e[1];var Qt=Kt.split("_");Y=2<=Qt.length&&Qt[1]=="type"?Y+(Kt+"="+$e+"&"):Y+(Kt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+p+`
`+y+`
`+Y})}function JD(u,p,y,b,V,U,Y){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+p+`
`+y+`
`+U+" "+Y})}function Ia(u,p,y,b){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+tM(u,y)+(b?" "+b:"")})}function eM(u,p){u.info(function(){return"TIMEOUT: "+p})}Tc.prototype.info=function(){};function tM(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var b=y[u];if(!(2>b.length)){var V=b[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return _c(y)}catch{return p}}var yh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hg;function vh(){}w(vh,Ta),vh.prototype.g=function(){return new XMLHttpRequest},vh.prototype.i=function(){return{}},hg=new vh;function Zs(u,p,y,b){this.j=u,this.i=p,this.l=y,this.R=b||1,this.U=new po(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new VE}function VE(){this.i=null,this.g="",this.h=!1}var jE={},fg={};function pg(u,p,y){u.L=1,u.v=xh(gs(p)),u.m=y,u.P=!0,UE(u,null)}function UE(u,p){u.F=Date.now(),_h(u),u.A=gs(u.v);var y=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),ex(y.i,"t",b),u.C=0,y=u.j.J,u.h=new VE,u.g=vx(u.j,y?p:null,!u.m),0<u.O&&(u.M=new Pt(f(u.Y,u,u.g),u.O)),p=u.U,y=u.g,b=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ea[0]=V.toString()),V=Ea);for(var U=0;U<V.length;U++){var Y=fo(y,V[U],b||p.handleEvent,!1,p.h||p);if(!Y)break;p.g[Y.key]=Y}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Ec(),XD(u.i,u.u,u.A,u.l,u.R,u.m)}Zs.prototype.ca=function(u){u=u.target;const p=this.M;p&&ys(u)==3?p.j():this.Y(u)},Zs.prototype.Y=function(u){try{if(u==this.g)e:{const Qt=ys(this.g);var p=this.g.Ba();const ba=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||ax(this.g)))){this.J||Qt!=4||p==7||(p==8||0>=ba?Ec(3):Ec(2)),mg(this);var y=this.g.Z();this.X=y;t:if($E(this)){var b=ax(this.g);u="";var V=b.length,U=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){go(this),Ic(this);var Y="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(b[p],{stream:!(U&&p==V-1)});b.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=y==200,JD(this.i,this.u,this.A,this.l,this.R,Qt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Ft=this.g;if((Ge=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ge)){var $e=Ge;break t}}$e=null}if(y=$e)Ia(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gg(this,y);else{this.o=!1,this.s=3,un(12),go(this),Ic(this);break e}}if(this.P){y=!0;let dr;for(;!this.J&&this.C<Y.length;)if(dr=nM(this,Y),dr==fg){Qt==4&&(this.s=4,un(14),y=!1),Ia(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==jE){this.s=4,un(15),Ia(this.i,this.l,Y,"[Invalid Chunk]"),y=!1;break}else Ia(this.i,this.l,dr,null),gg(this,dr);if($E(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||Y.length!=0||this.h.h||(this.s=1,un(16),y=!1),this.o=this.o&&y,!y)Ia(this.i,this.l,Y,"[Invalid Chunked Response]"),go(this),Ic(this);else if(0<Y.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),xg(Kt),Kt.M=!0,un(11))}}else Ia(this.i,this.l,Y,null),gg(this,Y);Qt==4&&go(this),this.o&&!this.J&&(Qt==4?px(this.j,this):(this.o=!1,_h(this)))}else _M(this.g),y==400&&0<Y.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),go(this),Ic(this)}}}catch{}finally{}};function $E(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nM(u,p){var y=u.C,b=p.indexOf(`
`,y);return b==-1?fg:(y=Number(p.substring(y,b)),isNaN(y)?jE:(b+=1,b+y>p.length?fg:(p=p.slice(b,b+y),u.C=b+y,p)))}Zs.prototype.cancel=function(){this.J=!0,go(this)};function _h(u){u.S=Date.now()+u.I,zE(u,u.I)}function zE(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xc(f(u.ba,u),p)}function mg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Zs.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eM(this.i,this.A),this.L!=2&&(Ec(),un(17)),go(this),this.s=2,Ic(this)):zE(this,this.S-u)};function Ic(u){u.j.G==0||u.J||px(u.j,u)}function go(u){mg(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,xa(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function gg(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||yg(y.h,u))){if(!u.K&&yg(y.h,u)&&y.G==3){try{var b=y.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)kh(y),Sh(y);else break e;Eg(y),un(18)}}else y.za=V[1],0<y.za-y.T&&37500>V[2]&&y.F&&y.v==0&&!y.C&&(y.C=xc(f(y.Za,y),6e3));if(1>=HE(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else vo(y,11)}else if((u.K||y.g==u)&&kh(y),!v(p))for(V=y.Da.g.parse(p),p=0;p<V.length;p++){let $e=V[p];if(y.T=$e[0],$e=$e[1],y.G==2)if($e[0]=="c"){y.K=$e[1],y.ia=$e[2];const Kt=$e[3];Kt!=null&&(y.la=Kt,y.j.info("VER="+y.la));const Qt=$e[4];Qt!=null&&(y.Aa=Qt,y.j.info("SVER="+y.Aa));const ba=$e[5];ba!=null&&typeof ba=="number"&&0<ba&&(b=1.5*ba,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const dr=u.g;if(dr){const Ah=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ah){var U=b.h;U.g||Ah.indexOf("spdy")==-1&&Ah.indexOf("quic")==-1&&Ah.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(vg(U,U.h),U.h=null))}if(b.D){const Tg=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Tg&&(b.ya=Tg,Ze(b.I,b.D,Tg))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var Y=u;if(b.qa=yx(b,b.J?b.ia:null,b.W),Y.K){qE(b.h,Y);var Ge=Y,Ft=b.L;Ft&&(Ge.I=Ft),Ge.B&&(mg(Ge),_h(Ge)),b.g=Y}else hx(b);0<y.i.length&&bh(y)}else $e[0]!="stop"&&$e[0]!="close"||vo(y,7);else y.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?vo(y,7):wg(y):$e[0]!="noop"&&y.l&&y.l.ta($e),y.v=0)}}Ec(4)}catch{}}var rM=class{constructor(u,p){this.g=u,this.map=p}};function BE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function HE(u){return u.h?1:u.g?u.g.size:0}function yg(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function vg(u,p){u.g?u.g.add(p):u.h=p}function qE(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}BE.prototype.cancel=function(){if(this.i=GE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function GE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return _(u.i)}function sM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],y=u.length,b=0;b<y;b++)p.push(u[b]);return p}p=[],y=0;for(b in u)p[y++]=u[b];return p}function iM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const b in u)p[y++]=b;return p}}}function KE(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=iM(u),b=sM(u),V=b.length,U=0;U<V;U++)p.call(void 0,b[U],y&&y[U],u)}var QE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oM(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var b=u[y].indexOf("="),V=null;if(0<=b){var U=u[y].substring(0,b);V=u[y].substring(b+1)}else U=u[y];p(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function yo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yo){this.h=u.h,wh(this,u.j),this.o=u.o,this.g=u.g,Eh(this,u.s),this.l=u.l;var p=u.i,y=new bc;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),YE(this,y),this.m=u.m}else u&&(p=String(u).match(QE))?(this.h=!1,wh(this,p[1]||"",!0),this.o=Cc(p[2]||""),this.g=Cc(p[3]||"",!0),Eh(this,p[4]),this.l=Cc(p[5]||"",!0),YE(this,p[6]||"",!0),this.m=Cc(p[7]||"")):(this.h=!1,this.i=new bc(null,this.h))}yo.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Sc(p,ZE,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Sc(p,ZE,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Sc(y,y.charAt(0)=="/"?cM:lM,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Sc(y,dM)),u.join("")};function gs(u){return new yo(u)}function wh(u,p,y){u.j=y?Cc(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Eh(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function YE(u,p,y){p instanceof bc?(u.i=p,hM(u.i,u.h)):(y||(p=Sc(p,uM)),u.i=new bc(p,u.h))}function Ze(u,p,y){u.i.set(p,y)}function xh(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cc(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sc(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,aM),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ZE=/[#\/\?@]/g,lM=/[#\?:]/g,cM=/[#\?]/g,uM=/[#\?@]/g,dM=/#/g;function bc(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Xs(u){u.g||(u.g=new Map,u.h=0,u.i&&oM(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=bc.prototype,t.add=function(u,p){Xs(this),this.i=null,u=Ca(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function XE(u,p){Xs(u),p=Ca(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function JE(u,p){return Xs(u),p=Ca(u,p),u.g.has(p)}t.forEach=function(u,p){Xs(this),this.g.forEach(function(y,b){y.forEach(function(V){u.call(p,V,b,this)},this)},this)},t.na=function(){Xs(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let b=0;b<p.length;b++){const V=u[b];for(let U=0;U<V.length;U++)y.push(p[b])}return y},t.V=function(u){Xs(this);let p=[];if(typeof u=="string")JE(this,u)&&(p=p.concat(this.g.get(Ca(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},t.set=function(u,p){return Xs(this),this.i=null,u=Ca(this,u),JE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ex(u,p,y){XE(u,p),0<y.length&&(u.i=null,u.g.set(Ca(u,p),_(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var b=p[y];const U=encodeURIComponent(String(b)),Y=this.V(b);for(b=0;b<Y.length;b++){var V=U;Y[b]!==""&&(V+="="+encodeURIComponent(String(Y[b]))),u.push(V)}}return this.i=u.join("&")};function Ca(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function hM(u,p){p&&!u.j&&(Xs(u),u.i=null,u.g.forEach(function(y,b){var V=b.toLowerCase();b!=V&&(XE(this,b),ex(this,V,y))},u)),u.j=p}function fM(u,p){const y=new Tc;if(a.Image){const b=new Image;b.onload=g(Js,y,"TestLoadImage: loaded",!0,p,b),b.onerror=g(Js,y,"TestLoadImage: error",!1,p,b),b.onabort=g(Js,y,"TestLoadImage: abort",!1,p,b),b.ontimeout=g(Js,y,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else p(!1)}function pM(u,p){const y=new Tc,b=new AbortController,V=setTimeout(()=>{b.abort(),Js(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:b.signal}).then(U=>{clearTimeout(V),U.ok?Js(y,"TestPingServer: ok",!0,p):Js(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Js(y,"TestPingServer: error",!1,p)})}function Js(u,p,y,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(y)}catch{}}function mM(){this.g=new cg}function gM(u,p,y){const b=y||"";try{KE(u,function(V,U){let Y=V;c(V)&&(Y=_c(V)),p.push(b+U+"="+encodeURIComponent(Y))})}catch(V){throw p.push(b+"type="+encodeURIComponent("_badmap")),V}}function Th(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Th,Ta),Th.prototype.g=function(){return new Ih(this.l,this.j)},Th.prototype.i=function(u){return function(){return u}}({});function Ih(u,p){G.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ih,G),t=Ih.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Rc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?kc(this):Rc(this),this.readyState==3&&tx(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,kc(this))},t.Qa=function(u){this.g&&(this.response=u,kc(this))},t.ga=function(){this.g&&kc(this)};function kc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Rc(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ih.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nx(u){let p="";return F(u,function(y,b){p+=b,p+=":",p+=y,p+=`\r
`}),p}function _g(u,p,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=nx(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ze(u,p,y))}function ut(u){G.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ut,G);var yM=/^https?$/i,vM=["POST","PUT"];t=ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hg.g(),this.v=this.o?PE(this.o):PE(hg),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){rx(this,U);return}if(u=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)y.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const U of b.keys())y.set(U,b.get(U));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vM,p,void 0))||b||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of y)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ox(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){rx(this,U)}};function rx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,sx(u),Ch(u)}function sx(u){u.A||(u.A=!0,W(u,"complete"),W(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,W(this,"complete"),W(this,"abort"),Ch(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ch(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ix(this):this.bb())},t.bb=function(){ix(this)};function ix(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ys(u)!=4||u.Z()!=2)){if(u.u&&ys(u)==4)Ne(u.Ea,0,u);else if(W(u,"readystatechange"),ys(u)==4){u.h=!1;try{const Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var b;if(b=Y===0){var V=String(u.D).match(QE)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),b=!yM.test(V?V.toLowerCase():"")}y=b}if(y)W(u,"complete"),W(u,"success");else{u.m=6;try{var U=2<ys(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",sx(u)}}finally{Ch(u)}}}}function Ch(u,p){if(u.g){ox(u);const y=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||W(u,"ready");try{y.onreadystatechange=b}catch{}}}function ox(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ys(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),mh(p)}};function ax(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _M(u){const p={};u=(u.g&&2<=ys(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(v(u[b]))continue;var y=O(u[b]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=p[V]||[];p[V]=U,U.push(y)}C(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ac(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function lx(u){this.Aa=0,this.i=[],this.j=new Tc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ac("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ac("baseRetryDelayMs",5e3,u),this.cb=Ac("retryDelaySeedMs",1e4,u),this.Wa=Ac("forwardChannelMaxRetries",2,u),this.wa=Ac("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new BE(u&&u.concurrentRequestLimit),this.Da=new mM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lx.prototype,t.la=8,t.G=1,t.connect=function(u,p,y,b){un(0),this.W=u,this.H=p||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=yx(this,null,this.W),bh(this)};function wg(u){if(cx(u),u.G==3){var p=u.U++,y=gs(u.I);if(Ze(y,"SID",u.K),Ze(y,"RID",p),Ze(y,"TYPE","terminate"),Pc(u,y),p=new Zs(u,u.j,p),p.L=2,p.v=xh(gs(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=vx(p.j,null),p.g.ea(p.v)),p.F=Date.now(),_h(p)}gx(u)}function Sh(u){u.g&&(xg(u),u.g.cancel(),u.g=null)}function cx(u){Sh(u),u.u&&(a.clearTimeout(u.u),u.u=null),kh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bh(u){if(!WE(u.h)&&!u.s){u.s=!0;var p=u.Ga;ge||ae(),z||(ge(),z=!0),Z.add(p,u),u.B=0}}function wM(u,p){return HE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xc(f(u.Ga,u,p),mx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Zs(this,this.j,u);let U=this.o;if(this.S&&(U?(U=T(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=dx(this,V,p),y=gs(this.I),Ze(y,"RID",u),Ze(y,"CVER",22),this.D&&Ze(y,"X-HTTP-Session-Id",this.D),Pc(this,y),U&&(this.O?p="headers="+encodeURIComponent(String(nx(U)))+"&"+p:this.m&&_g(y,this.m,U)),vg(this.h,V),this.Ua&&Ze(y,"TYPE","init"),this.P?(Ze(y,"$req",p),Ze(y,"SID","null"),V.T=!0,pg(V,y,null)):pg(V,y,p),this.G=2}}else this.G==3&&(u?ux(this,u):this.i.length==0||WE(this.h)||ux(this))};function ux(u,p){var y;p?y=p.l:y=u.U++;const b=gs(u.I);Ze(b,"SID",u.K),Ze(b,"RID",y),Ze(b,"AID",u.T),Pc(u,b),u.m&&u.o&&_g(b,u.m,u.o),y=new Zs(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=dx(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vg(u.h,y),pg(y,b,p)}function Pc(u,p){u.H&&F(u.H,function(y,b){Ze(p,b,y)}),u.l&&KE({},function(y,b){Ze(p,b,y)})}function dx(u,p,y){y=Math.min(u.i.length,y);var b=u.l?f(u.l.Na,u.l,u):null;e:{var V=u.i;let U=-1;for(;;){const Y=["count="+y];U==-1?0<y?(U=V[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Ge=!0;for(let Ft=0;Ft<y;Ft++){let $e=V[Ft].g;const Kt=V[Ft].map;if($e-=U,0>$e)U=Math.max(0,V[Ft].g-100),Ge=!1;else try{gM(Kt,Y,"req"+$e+"_")}catch{b&&b(Kt)}}if(Ge){b=Y.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,b}function hx(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ge||ae(),z||(ge(),z=!0),Z.add(p,u),u.v=0}}function Eg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xc(f(u.Fa,u),mx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,fx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xc(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Sh(this),fx(this))};function xg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function fx(u){u.g=new Zs(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=gs(u.qa);Ze(p,"RID","rpc"),Ze(p,"SID",u.K),Ze(p,"AID",u.T),Ze(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(p,"TO",u.ja),Ze(p,"TYPE","xmlhttp"),Pc(u,p),u.m&&u.o&&_g(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=xh(gs(p)),y.m=null,y.P=!0,UE(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Sh(this),Eg(this),un(19))};function kh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function px(u,p){var y=null;if(u.g==p){kh(u),xg(u),u.g=null;var b=2}else if(yg(u.h,p))y=p.D,qE(u.h,p),b=1;else return;if(u.G!=0){if(p.o)if(b==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;b=gh(),W(b,new LE(b,y)),bh(u)}else hx(u);else if(V=p.s,V==3||V==0&&0<p.X||!(b==1&&wM(u,p)||b==2&&Eg(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),V){case 1:vo(u,5);break;case 4:vo(u,10);break;case 3:vo(u,6);break;default:vo(u,2)}}}function mx(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function vo(u,p){if(u.j.info("Error code "+p),p==2){var y=f(u.fb,u),b=u.Xa;const V=!b;b=new yo(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wh(b,"https"),xh(b),V?fM(b.toString(),y):pM(b.toString(),y)}else un(2);u.G=0,u.l&&u.l.sa(p),gx(u),cx(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function gx(u){if(u.G=0,u.ka=[],u.l){const p=GE(u.h);(p.length!=0||u.i.length!=0)&&(x(u.ka,p),x(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function yx(u,p,y){var b=y instanceof yo?gs(y):new yo(y);if(b.g!="")p&&(b.g=p+"."+b.g),Eh(b,b.s);else{var V=a.location;b=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var U=new yo(null);b&&wh(U,b),p&&(U.g=p),V&&Eh(U,V),y&&(U.l=y),b=U}return y=u.D,p=u.ya,y&&p&&Ze(b,y,p),Ze(b,"VER",u.la),Pc(u,b),b}function vx(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ut(new Th({eb:y})):new ut(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _x(){}t=_x.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rh(){}Rh.prototype.g=function(u,p){return new Mn(u,p)};function Mn(u,p){G.call(this),this.g=new lx(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!v(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Sa(this)}w(Mn,G),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){wg(this.g)},Mn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=_c(u),u=y);p.i.push(new rM(p.Ya++,u)),p.G==3&&bh(p)},Mn.prototype.N=function(){this.g.l=null,delete this.j,wg(this.g),delete this.g,Mn.aa.N.call(this)};function wx(u){ug.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(wx,ug);function Ex(){dg.call(this),this.status=1}w(Ex,dg);function Sa(u){this.g=u}w(Sa,_x),Sa.prototype.ua=function(){W(this.g,"a")},Sa.prototype.ta=function(u){W(this.g,new wx(u))},Sa.prototype.sa=function(u){W(this.g,new Ex)},Sa.prototype.ra=function(){W(this.g,"b")},Rh.prototype.createWebChannel=Rh.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,oO=function(){return new Rh},iO=function(){return gh()},sO=mo,__={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yh.NO_ERROR=0,yh.TIMEOUT=8,yh.HTTP_ERROR=6,Df=yh,FE.COMPLETE="complete",rO=FE,NE.EventType=wc,wc.OPEN="a",wc.CLOSE="b",wc.ERROR="c",wc.MESSAGE="d",G.prototype.listen=G.prototype.K,ou=NE,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,nO=ut}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});const $C="@firebase/firestore",zC="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Qd("@firebase/firestore");function Oa(){return da.logLevel}function se(t,...e){if(da.logLevel<=ke.DEBUG){const n=e.map(eE);da.debug(`Firestore (${fc}): ${t}`,...n)}}function Hs(t,...e){if(da.logLevel<=ke.ERROR){const n=e.map(eE);da.error(`Firestore (${fc}): ${t}`,...n)}}function Gl(t,...e){if(da.logLevel<=ke.WARN){const n=e.map(eE);da.warn(`Firestore (${fc}): ${t}`,...n)}}function eE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aO(t,r,n)}function aO(t,e,n){let r=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hs(r),new Error(r)}function at(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aO(e,s,r)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class dH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hH{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Go,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Go)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new lO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class fH{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pH{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new BC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new BC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gH(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function w_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Se(r,s);{const i=cO(),o=yH(i.encode(WC(t,n)),i.encode(WC(e,n)));return o!==0?o:Se(r,s)}}n+=r>65535?2:1}return Se(t.length,e.length)}function WC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function yH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Se(t[n],e[n]);return Se(t.length,e.length)}function Kl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=-62135596800,qC=1e6;class Pn{static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*qC);return new Pn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HC)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qC}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-HC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Pn(0,0))}static max(){return new we(new Pn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__name__";class Ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ur.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Se(e.length,n.length)}static compareSegments(e,n){const r=Ur.isNumericId(e),s=Ur.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):w_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mi.fromString(e.substring(4,e.length-2))}}class ft extends Ur{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const vH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Ur{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return vH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GC}static keyField(){return new yn([GC])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ft.fromString(e))}static fromName(e){return new he(ft.fromString(e).popFirst(5))}static empty(){return new he(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=-1;function _H(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Pn(n+1,0):new Pn(n,r));return new Ki(s,he.empty(),e)}function wH(t){return new Ki(t.readTime,t.key,Rd)}class Ki{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ki(we.min(),he.empty(),Rd)}static max(){return new Ki(we.max(),he.empty(),Rd)}}function EH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==xH)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IH(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Zm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=-1;function Xm(t){return t==null}function E_(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="";function SH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KC(e)),e=bH(t.get(n),e);return KC(e)}function bH(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case dO:n+="";break;default:n+=i}}return n}function KC(t){return t+dO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lh(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Ut.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ut.RED,this.left=s??Ut.EMPTY,this.right=i??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YC(this.data.getIterator())}getIteratorFrom(e){return new YC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class YC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Ei([])}unionWith(e){let n=new Rt(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hO("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const RH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=RH.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="server_timestamp",pO="__type__",mO="__previous_value__",gO="__local_write_time__";function tE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[pO])===null||n===void 0?void 0:n.stringValue)===fO}function Jm(t){const e=t.mapValue.fields[mO];return tE(e)?Jm(e):e}function Ad(t){const e=Qi(t.mapValue.fields[gO].timestampValue);return new Pn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Kp="(default)";class Pd{constructor(e,n){this.projectId=e,this.database=n||Kp}static empty(){return new Pd("","")}get isDefaultDatabase(){return this.database===Kp}isEqual(e){return e instanceof Pd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH="__type__",yO="__max__",sf={mapValue:{fields:{__type__:{stringValue:yO}}}},NH="__vector__",x_="value";function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tE(t)?4:DH(t)?9007199254740991:OH(t)?10:11:xe(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ad(t).isEqual(Ad(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Qi(s.timestampValue),a=Qi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Yi(s.bytesValue).isEqual(Yi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=gt(s.doubleValue),a=gt(i.doubleValue);return o===a?E_(o)===E_(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Kl(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(QC(o)!==QC(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ls(o[l],a[l])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function Nd(t,e){return(t.values||[]).find(n=>ls(n,e))!==void 0}function Ql(t,e){if(t===e)return 0;const n=Zi(t),r=Zi(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=gt(i.integerValue||i.doubleValue),l=gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ZC(t.timestampValue,e.timestampValue);case 4:return ZC(Ad(t),Ad(e));case 5:return w_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Yi(i),l=Yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(gt(i.latitude),gt(o.latitude));return a!==0?a:Se(gt(i.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XC(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},f=o.fields||{},g=(a=h[x_])===null||a===void 0?void 0:a.arrayValue,w=(l=f[x_])===null||l===void 0?void 0:l.arrayValue,_=Se(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:XC(g,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===sf.mapValue&&o===sf.mapValue)return 0;if(i===sf.mapValue)return 1;if(o===sf.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=w_(l[h],d[h]);if(f!==0)return f;const g=Ql(a[l[h]],c[d[h]]);if(g!==0)return g}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{Pe:n})}}function ZC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Qi(t),r=Qi(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function XC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ql(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function Yl(t){return T_(t)}function T_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=T_(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${T_(n.fields[o])}`;return s+"}"}(t.mapValue):xe(61005,{value:t})}function Mf(t){switch(Zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jm(t);return e?16+Mf(e):16;case 5:return 2*t.stringValue.length;case 6:return Yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Mf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return lh(r.fields,(i,o)=>{s+=i.length+Mf(o)}),s}(t.mapValue);default:throw xe(13486,{value:t})}}function I_(t){return!!t&&"integerValue"in t}function nE(t){return!!t&&"arrayValue"in t}function JC(t){return!!t&&"nullValue"in t}function eS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xy(t){return!!t&&"mapValue"in t}function OH(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PH])===null||n===void 0?void 0:n.stringValue)===NH}function Au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lh(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=yn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Au(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lh(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qr(Au(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,we.min(),we.min(),we.min(),Qr.empty(),0)}static newFoundDocument(e,n,r,s){return new rn(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new rn(e,2,n,we.min(),we.min(),Qr.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,we.min(),we.min(),Qr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.position=e,this.inclusive=n}}function tS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Ql(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n="asc"){this.field=e,this.dir=n}}function MH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{}class bt extends vO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FH(e,n,r):n==="array-contains"?new UH(e,r):n==="in"?new $H(e,r):n==="not-in"?new zH(e,r):n==="array-contains-any"?new BH(e,r):new bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VH(e,r):new jH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends vO{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new cs(e,n)}matches(e){return _O(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _O(t){return t.op==="and"}function wO(t){return LH(t)&&_O(t)}function LH(t){for(const e of t.filters)if(e instanceof cs)return!1;return!0}function C_(t){if(t instanceof bt)return t.field.canonicalString()+t.op.toString()+Yl(t.value);if(wO(t))return t.filters.map(e=>C_(e)).join(",");{const e=t.filters.map(n=>C_(n)).join(",");return`${t.op}(${e})`}}function EO(t,e){return t instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.field.isEqual(s.field)&&ls(r.value,s.value)}(t,e):t instanceof cs?function(r,s){return s instanceof cs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&EO(o,s.filters[a]),!0):!1}(t,e):void xe(19439)}function xO(t){return t instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${Yl(n.value)}`}(t):t instanceof cs?function(n){return n.op.toString()+" {"+n.getFilters().map(xO).join(" ,")+"}"}(t):"Filter"}class FH extends bt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class VH extends bt{constructor(e,n){super(e,"in",n),this.keys=TO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jH extends bt{constructor(e,n){super(e,"not-in",n),this.keys=TO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TO(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class UH extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nE(n)&&Nd(n.arrayValue,this.value)}}class $H extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nd(this.value.arrayValue,n)}}class zH extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nd(this.value.arrayValue,n)}}class BH extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function rS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new WH(t,e,n,r,s,i,o)}function rE(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yl(r)).join(",")),e.Ie=n}return e.Ie}function sE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nS(t.startAt,e.startAt)&&nS(t.endAt,e.endAt)}function S_(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function HH(t,e,n,r,s,i,o,a){return new eg(t,e,n,r,s,i,o,a)}function iE(t){return new eg(t)}function sS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qH(t){return t.collectionGroup!==null}function Pu(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(yn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Yp(i,r))}),n.has(yn.keyField().canonicalString())||e.Ee.push(new Yp(yn.keyField(),r))}return e.Ee}function rs(t){const e=Ve(t);return e.de||(e.de=GH(e,Pu(t))),e.de}function GH(t,e){if(t.limitType==="F")return rS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yp(s.field,i)});const n=t.endAt?new Qp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qp(t.startAt.position,t.startAt.inclusive):null;return rS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function b_(t,e,n){return new eg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tg(t,e){return sE(rs(t),rs(e))&&t.limitType===e.limitType}function IO(t){return`${rE(rs(t))}|lt:${t.limitType}`}function Da(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xO(s)).join(", ")}]`),Xm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Yl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Yl(s)).join(",")),`Target(${r})`}(rs(t))}; limitType=${t.limitType})`}function ng(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=tS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Pu(r),s)||r.endAt&&!function(o,a,l){const c=tS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Pu(r),s))}(t,e)}function KH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CO(t){return(e,n)=>{let r=!1;for(const s of Pu(t)){const i=QH(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QH(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ql(l,c):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lh(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=new _t(he.comparator);function Xi(){return YH}const SO=new _t(he.comparator);function au(...t){let e=SO;for(const n of t)e=e.insert(n.key,n);return e}function ZH(t){let e=SO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mo(){return Nu()}function bO(){return Nu()}function Nu(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const XH=new Rt(he.comparator);function je(...t){let e=XH;for(const n of t)e=e.add(n);return e}const JH=new Rt(Se);function e8(){return JH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:E_(e)?"-0":e}}function n8(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this._=void 0}}function r8(t,e,n){return t instanceof k_?function(s,i){const o={fields:{[pO]:{stringValue:fO},[gO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tE(i)&&(i=Jm(i)),i&&(o.fields[mO]=i),{mapValue:o}}(n,e):t instanceof Zp?kO(t,e):t instanceof Xp?RO(t,e):function(s,i){const o=i8(s,i),a=iS(o)+iS(s.Re);return I_(o)&&I_(s.Re)?n8(a):t8(s.serializer,a)}(t,e)}function s8(t,e,n){return t instanceof Zp?kO(t,e):t instanceof Xp?RO(t,e):n}function i8(t,e){return t instanceof R_?function(r){return I_(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class k_ extends rg{}class Zp extends rg{constructor(e){super(),this.elements=e}}function kO(t,e){const n=AO(e);for(const r of t.elements)n.some(s=>ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xp extends rg{constructor(e){super(),this.elements=e}}function RO(t,e){let n=AO(e);for(const r of t.elements)n=n.filter(s=>!ls(s,r));return{arrayValue:{values:n}}}class R_ extends rg{constructor(e,n){super(),this.serializer=e,this.Re=n}}function iS(t){return gt(t.integerValue||t.doubleValue)}function AO(t){return nE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function o8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zp&&s instanceof Zp||r instanceof Xp&&s instanceof Xp?Kl(r.elements,s.elements,ls):r instanceof R_&&s instanceof R_?ls(r.Re,s.Re):r instanceof k_&&s instanceof k_}(t.transform,e.transform)}class Ko{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ko}static exists(e){return new Ko(void 0,e)}static updateTime(e){return new Ko(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oE{}function PO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l8(t.key,Ko.none()):new aE(t.key,t.data,Ko.none());{const n=t.data,r=Qr.empty();let s=new Rt(yn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new sg(t.key,r,new Ei(s.toArray()),Ko.none())}}function a8(t,e,n){t instanceof aE?function(s,i,o){const a=s.value.clone(),l=aS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof sg?function(s,i,o){if(!Lf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=aS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(NO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ou(t,e,n,r){return t instanceof aE?function(i,o,a,l){if(!Lf(i.precondition,o))return a;const c=i.value.clone(),d=lS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof sg?function(i,o,a,l){if(!Lf(i.precondition,o))return a;const c=lS(i.fieldTransforms,l,o),d=o.data;return d.setAll(NO(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Lf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Kl(r,s,(i,o)=>o8(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aE extends oE{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sg extends oE{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function NO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aS(t,e,n){const r=new Map;at(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,s8(o,a,n[s]))}return r}function lS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,r8(i,o,e))}return r}class l8 extends oE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&a8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=PO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,(n,r)=>oS(n,r))&&Kl(this.baseMutations,e.baseMutations,(n,r)=>oS(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Le;function OO(t){if(t===void 0)return Hs("GRPC error has no .code"),J.UNKNOWN;switch(t){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return xe(39323,{code:t})}}(Le=wt||(wt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=new Mi([4294967295,4294967295],0);function cS(t){const e=cO().encode(t),n=new tO;return n.update(e),new Uint8Array(n.digest())}function uS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mi([n,r],0),new Mi([s,i],0)]}class lE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(r<0)throw new lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Mi.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Mi.fromNumber(r)));return s.compare(h8)===1&&(s=new Mi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=cS(e),[r,s]=uS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=cS(e),[r,s]=uS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ig(we.min(),s,new _t(Se),Xi(),je())}}class ch{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ch(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class DO{constructor(e,n){this.targetId=e,this.Ce=n}}class MO{constructor(e,n,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dS{constructor(){this.Fe=0,this.Me=hS(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=je(),n=je(),r=je();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:xe(38017,{changeType:i})}}),new ch(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=hS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,at(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class f8{constructor(e){this.ze=e,this.je=new Map,this.He=Xi(),this.Je=of(),this.Ye=of(),this.Ze=new _t(Se)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(S_(i))if(r===0){const o=new he(i.path);this.tt(n,o,rn.newNoDocument(o,we.min()))}else at(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Yi(r).toUint8Array()}catch(l){if(l instanceof hO)return Gl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lE(o,s,i)}catch(l){return Gl(l instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&S_(a.target)){const l=new he(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,rn.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=je();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new ig(e,n,this.Ze,this.He,r);return this.He=Xi(),this.Je=of(),this.Ye=of(),this.Ze=new _t(Se),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new dS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(Se),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(Se),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new dS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function of(){return new _t(he.comparator)}function hS(){return new _t(he.comparator)}const p8={asc:"ASCENDING",desc:"DESCENDING"},m8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g8={and:"AND",or:"OR"};class y8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function A_(t,e){return t.useProto3Json||Xm(e)?e:{value:e}}function v8(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pl(t){return at(!!t,49232),we.fromTimestamp(function(n){const r=Qi(n);return new Pn(r.seconds,r.nanos)}(t))}function w8(t,e){return P_(t,e).canonicalString()}function P_(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LO(t){const e=ft.fromString(t);return at($O(e),10190,{key:e.toString()}),e}function Ty(t,e){const n=LO(e);if(n.get(1)!==t.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(VO(n))}function FO(t,e){return w8(t.databaseId,e)}function E8(t){const e=LO(t);return e.length===4?ft.emptyPath():VO(e)}function fS(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VO(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function x8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:xe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(at(d===void 0||typeof d=="string",58123),qt.fromBase64String(d||"")):(at(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?J.UNKNOWN:OO(c.code);return new de(d,c.message||"")}(o);n=new MO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ty(t,r.document.name),i=pl(r.document.updateTime),o=r.document.createTime?pl(r.document.createTime):we.min(),a=new Qr({mapValue:{fields:r.document.fields}}),l=rn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ff(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ty(t,r.document),i=r.readTime?pl(r.readTime):we.min(),o=rn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ff([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ty(t,r.document),i=r.removedTargetIds||[];n=new Ff([],i,s,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new d8(s,i),a=r.targetId;n=new DO(a,o)}}return n}function T8(t,e){return{documents:[FO(t,e.path)]}}function I8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=FO(t,s);const i=function(c){if(c.length!==0)return UO(cs.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ma(f.field),direction:b8(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=A_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:s}}function C8(t){let e=E8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){at(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=jO(h);return f instanceof cs&&wO(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Yp(La(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Xm(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Qp(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new Qp(g,f)}(n.endAt)),HH(e,s,o,i,a,"F",l,c)}function S8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=La(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=La(n.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=La(n.unaryFilter.field);return bt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=La(n.unaryFilter.field);return bt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return bt.create(La(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cs.create(n.compositeFilter.filters.map(r=>jO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function b8(t){return p8[t]}function k8(t){return m8[t]}function R8(t){return g8[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function La(t){return yn.fromServerFormat(t.fieldPath)}function UO(t){return t instanceof bt?function(n){if(n.op==="=="){if(eS(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(JC(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eS(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(JC(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:k8(n.op),value:n.value}}}(t):t instanceof cs?function(n){const r=n.getFilters().map(s=>UO(s));return r.length===1?r[0]:{compositeFilter:{op:R8(n.op),filters:r}}}(t):xe(54877,{filter:t})}function $O(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,r,s,i=we.min(),o=we.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.wt=e}}function P8(t){const e=C8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?b_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this.yn=new O8}addToCollectionParentIndex(e,n){return this.yn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ki.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class O8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zO=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(zO,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Zl(0)}static ir(){return new Zl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",D8=1048576;function gS([t,e],[n,r]){const s=Se(t,n);return s===0?Se(e,r):s}class M8{constructor(e){this.cr=e,this.buffer=new Rt(gS),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){se(mS,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pc(n)?se(mS,"Ignoring IndexedDB error during garbage collection: ",n):await Ym(n)}await this.Ir(3e5)})}}class F8{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Zm.le);const r=new M8(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(pS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pS):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Oa()<=ke.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function V8(t,e){return new F8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ou(r.mutation,s,Ei.empty(),Pn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=Mo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=au();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Mo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Xi();const o=Nu(),a=function(){return Nu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof sg)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ou(d.mutation,c,d.mutation.getFieldMask(),Pn.now())):o.set(c.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new U8(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Nu();let s=new _t((o,a)=>o-a),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ei.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||je()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=bO();d.forEach(f=>{if(!i.has(f)){const g=PO(n.get(f),r.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Mo());let a=Rd,l=i;return o.next(c=>B.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,je())).next(d=>({batchId:a,changes:ZH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=au();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=au();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const c=function(h,f){return new eg(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,rn.newInvalidDocument(d)))});let a=au();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Ou(d.mutation,c,Ei.empty(),Pn.now()),ng(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return B.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pl(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:P8(s.bundledQuery),readTime:pl(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.overlays=new _t(he.comparator),this.Or=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Mo();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Mo(),i=n.length+1,o=new he(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new _t((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Mo(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Mo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return B.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new u8(n,r));let i=this.Or.get(n);i===void 0&&(i=je(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.Nr=new Rt(Ot.Br),this.Lr=new Rt(Ot.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Ot(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new he(new ft([])),r=new Ot(n,e),s=new Ot(n,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new he(new ft([])),r=new Ot(n,e),s=new Ot(n,e+1);let i=je();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ot(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return he.comparator(e.key,n.key)||Se(e.Gr,n.Gr)}static kr(e,n){return Se(e.Gr,n.Gr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Rt(Ot.Br)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c8(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.zr=this.zr.add(new Ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?CH:this.Jn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),s=new Ot(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const a=this.jr(o.Gr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Se);return n.forEach(s=>{const i=new Ot(s,0),o=new Ot(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],a=>{r=r.add(a.Gr)})}),B.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Ot(new he(i),0);let a=new Rt(Se);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Gr)),!0)},o),B.resolve(this.Jr(a))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){at(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return B.forEach(n.mutations,s=>{const i=new Ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new Ot(n,0),s=this.zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.Zr=e,this.docs=function(){return new _t(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=Xi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rn.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xi();const o=n.path,a=new he(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EH(wH(d),r)<=0||(s.has(d.key)||ng(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){xe(9500)}Xr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G8(this)}getSize(e){return B.resolve(this.size)}}class G8 extends j8{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e){this.persistence=e,this.ei=new va(n=>rE(n),sE),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.ti=0,this.ni=new cE,this.targetCount=0,this.ri=Zl.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),B.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Zl(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.ar(n),B.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.ii={},this.overlays={},this.si=new Zm(0),this.oi=!1,this.oi=!0,this._i=new W8,this.referenceDelegate=e(this),this.ai=new K8(this),this.indexManager=new N8,this.remoteDocumentCache=function(s){return new q8(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new A8(n),this.ci=new z8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new H8(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new Q8(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return B.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class Q8 extends TH{constructor(e){super(),this.currentSequenceNumber=e}}class uE{constructor(e){this.persistence=e,this.Ti=new cE,this.Ii=null}static Ei(e){return new uE(e)}get di(){if(this.Ii)return this.Ii;throw xe(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,r=>{const s=he.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return B.or([()=>B.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Jp{constructor(e,n){this.persistence=e,this.Ri=new va(r=>SH(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=V8(this,n)}static Ei(e,n){return new Jp(e,n)}li(){}hi(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return B.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mf(e.data.value)),n}gr(e,n,r){return B.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return p6()?8:IH(ln())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Y8;return this.fs(e,n,o).next(a=>{if(i.result=a,this.Is)return this.gs(e,n,o,a.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Oa()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),B.resolve()):(Oa()<=ke.DEBUG&&se("QueryEngine","Query:",Da(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Oa()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):B.resolve())}Rs(e,n){if(sS(n))return B.resolve(null);let r=rs(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=b_(n,null,"F"),r=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(n,a);return this.ys(n,c,o,l.readTime)?this.Rs(e,b_(n,null,"F")):this.ws(e,c,n,l)}))})))}Vs(e,n,r,s){return sS(n)||s.isEqual(we.min())?B.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(n,i);return this.ys(n,o,r,s)?B.resolve(null):(Oa()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Da(n)),this.ws(e,o,n,_H(s,Rd)).next(a=>a))})}ps(e,n){let r=new Rt(CO(e));return n.forEach((s,i)=>{ng(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Oa()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Da(n)),this.As.getDocumentsMatchingQuery(e,n,Ki.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="LocalStore",X8=3e8;class J8{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new _t(Se),this.Ds=new va(i=>rE(i),sE),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $8(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function eq(t,e,n,r){return new J8(t,e,n,r)}async function WO(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=je();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function HO(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function tq(t,e){const n=Ve(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.ai.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.ai.addMatchingKeys(i,d.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(qt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(_,x,E){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=X8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,d)&&a.push(n.ai.updateTargetData(i,g))});let l=Xi(),c=je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(nq(i,o,e.documentUpdates).next(d=>{l=d.xs,c=d.Os})),!r.isEqual(we.min())){const d=n.ai.getLastRemoteSnapshotVersion(i).next(h=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ss=s,i))}function nq(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xi();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(we.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(hE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:s}})}function rq(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.ai.allocateTargetId(r).next(o=>(s=new xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function N_(t,e,n){const r=Ve(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pc(o))throw o;se(hE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function yS(t,e,n){const r=Ve(t);let s=we.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ve(l),f=h.Ds.get(d);return f!==void 0?B.resolve(h.Ss.get(f)):h.ai.getTargetData(c,d)}(r,o,rs(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?s:we.min(),n?i:je())).next(a=>(sq(r,KH(e),a),{documents:a,Ns:i})))}function sq(t,e,n){let r=t.vs.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class vS{constructor(){this.activeTargetIds=e8()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iq{constructor(){this.So=new vS,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new vS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="ConnectivityMonitor";class wS{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){se(_S,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){se(_S,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af=null;function O_(){return af===null?af=function(){return 268435456+Math.round(2147483648*Math.random())}():af++,"0x"+af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="RestConnection",aq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lq{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Kp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const o=O_(),a=this.$o(e,n.toUriEncodedString());se(Iy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(l,s,i);const{host:c}=new URL(a),d=so(c);return this.Ko(e,a,l,r,d).then(h=>(se(Iy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Gl(Iy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Wo(e,n,r,s,i,o){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=aq[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class uq extends lq{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const o=O_();return new Promise((a,l)=>{const c=new nO;c.setWithCredentials(!0),c.listenOnce(rO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Df.NO_ERROR:const h=c.getResponseJson();se(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Df.TIMEOUT:se(Xt,`RPC '${e}' ${o} timed out`),l(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const f=c.getStatus();if(se(Xt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const _=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(v)>=0?v:J.UNKNOWN}(w.status);l(new de(_,w.message))}else l(new de(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new de(J.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{s_:e,streamId:o,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{se(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);se(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}a_(e,n,r){const s=O_(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oO(),a=iO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");se(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,g=!1;const w=new cq({Go:x=>{g?se(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(se(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),se(Xt,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},zo:()=>h.close()}),_=(x,E,v)=>{x.listen(E,I=>{try{v(I)}catch(N){setTimeout(()=>{throw N},0)}})};return _(h,ou.EventType.OPEN,()=>{g||(se(Xt,`RPC '${e}' stream ${s} transport opened.`),w.t_())}),_(h,ou.EventType.CLOSE,()=>{g||(g=!0,se(Xt,`RPC '${e}' stream ${s} transport closed`),w.r_())}),_(h,ou.EventType.ERROR,x=>{g||(g=!0,Gl(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),w.r_(new de(J.UNAVAILABLE,"The operation could not be completed")))}),_(h,ou.EventType.MESSAGE,x=>{var E;if(!g){const v=x.data[0];at(!!v,16349);const I=v,N=(I==null?void 0:I.error)||((E=I[0])===null||E===void 0?void 0:E.error);if(N){se(Xt,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let F=function(S){const R=wt[S];if(R!==void 0)return OO(R)}(M),C=N.message;F===void 0&&(F=J.INTERNAL,C="Unknown error status: "+M+" with message "+N.message),g=!0,w.r_(new de(F,C)),h.close()}else se(Xt,`RPC '${e}' stream ${s} received:`,v),w.i_(v)}}),_(a,sO.STAT_EVENT,x=>{x.stat===__.PROXY?se(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===__.NOPROXY&&se(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.n_()},0),w}}function Cy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){return new y8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="PersistentStream";class dq{constructor(e,n,r,s,i,o,a,l){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new GO(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Hs(n.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return se(ES,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(se(ES,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hq extends dq{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=x8(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?pl(o.readTime):we.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=fS(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=S_(l)?{documents:T8(i,l)}:{query:I8(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_8(i,o.resumeToken);const c=A_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(we.min())>0){a.readTime=v8(i,o.snapshotVersion.toTimestamp());const c=A_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=S8(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=fS(this.serializer),n.removeTarget=e,this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{}class pq extends fq{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,P_(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(J.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,P_(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(J.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class mq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Hs(n),this.ea=!1):se("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="RemoteStore";class gq{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{dh(this)&&(se(Xl,"Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.aa.add(4),await uh(c),c.la.set("Unknown"),c.aa.delete(4),await og(c)}(this))})}),this.la=new mq(r,s)}}async function og(t){if(dh(t))for(const e of t.ua)await e(!0)}async function uh(t){for(const e of t.ua)await e(!1)}function KO(t,e){const n=Ve(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),gE(n)?mE(n):mc(n).b_()&&pE(n,e))}function fE(t,e){const n=Ve(t),r=mc(n);n._a.delete(e),r.b_()&&QO(n,e),n._a.size===0&&(r.b_()?r.v_():dh(n)&&n.la.set("Unknown"))}function pE(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mc(t).U_(e)}function QO(t,e){t.ha.Ke(e),mc(t).K_(e)}function mE(t){t.ha=new f8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),mc(t).start(),t.la.ta()}function gE(t){return dh(t)&&!mc(t).w_()&&t._a.size>0}function dh(t){return Ve(t).aa.size===0}function YO(t){t.ha=void 0}async function yq(t){t.la.set("Online")}async function vq(t){t._a.forEach((e,n)=>{pE(t,e)})}async function _q(t,e){YO(t),gE(t)?(t.la.ia(e),mE(t)):t.la.set("Unknown")}async function wq(t,e,n){if(t.la.set("Online"),e instanceof MO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s._a.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s._a.delete(a),s.ha.removeTarget(a))}(t,e)}catch(r){se(Xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xS(t,r)}else if(e instanceof Ff?t.ha.Xe(e):e instanceof DO?t.ha.ot(e):t.ha.nt(e),!n.isEqual(we.min()))try{const r=await HO(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i._a.get(c);d&&i._a.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i._a.get(l);if(!d)return;i._a.set(l,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),QO(i,l);const h=new xi(d.target,l,c,d.sequenceNumber);pE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se(Xl,"Failed to raise snapshot:",r),await xS(t,r)}}async function xS(t,e,n){if(!pc(e))throw e;t.aa.add(1),await uh(t),t.la.set("Offline"),n||(n=()=>HO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Xl,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await og(t)})}async function TS(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),se(Xl,"RemoteStore received new credentials");const r=dh(n);n.aa.add(3),await uh(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await og(n)}async function Eq(t,e){const n=Ve(t);e?(n.aa.delete(2),await og(n)):e||(n.aa.add(2),await uh(n),n.la.set("Unknown"))}function mc(t){return t.Pa||(t.Pa=function(n,r,s){const i=Ve(n);return i.Y_(),new hq(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:yq.bind(null,t),Jo:vq.bind(null,t),Zo:_q.bind(null,t),Q_:wq.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),gE(t)?mE(t):t.la.set("Unknown")):(await t.Pa.stop(),YO(t))})),t.Pa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new yE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZO(t,e){if(Hs("AsyncQueue",`${e}: ${t}`),pc(t))return new de(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=au(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.Ia=new _t(he.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):xe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Jl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jl(e,n,ml.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Tq{constructor(){this.queries=CS(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=Ve(n),i=s.queries;s.queries=CS(),i.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new de(J.ABORTED,"Firestore shutting down"))}}function CS(){return new va(t=>IO(t),tg)}async function Iq(t,e){const n=Ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new xq,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ZO(o,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&vE(n)}async function Cq(t,e){const n=Ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sq(t,e){const n=Ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Ra)a.pa(s)&&(r=!0);o.Aa=s}}r&&vE(n)}function bq(t,e,n){const r=Ve(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function vE(t){t.fa.forEach(e=>{e.next()})}var D_,SS;(SS=D_||(D_={})).ya="default",SS.Cache="cache";class kq{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==D_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.key=e}}class JO{constructor(e){this.key=e}}class Rq{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=je(),this.mutatedKeys=je(),this.Ua=CO(e),this.Ka=new ml(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new IS,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),g=ng(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;f&&g?f.data.isEqual(g.data)?w!==_&&(r.track({type:3,doc:g}),x=!0):this.ja(f,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.Ua(g,l)>0||c&&this.Ua(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),x=!0):f&&!g&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(g?(o=o.add(g),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:o,za:r,ys:a,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((d,h)=>function(g,w){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:x})}};return _(g)-_(w)}(d.type,h.type)||this.Ua(d.doc,h.doc)),this.Ha(r),s=s!=null&&s;const a=n&&!s?this.Ja():[],l=this.$a.size===0&&this.current&&!s?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new Jl(this.query,e.Ka,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new IS,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=je(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new JO(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new XO(r))}),n}Xa(e){this.qa=e.Ns,this.$a=je();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Jl.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const _E="SyncEngine";class Aq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Pq{constructor(e){this.key=e,this.tu=!1}}class Nq{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new va(a=>IO(a),tg),this.iu=new Map,this.su=new Set,this.ou=new _t(he.comparator),this._u=new Map,this.au=new cE,this.uu={},this.cu=new Map,this.lu=Zl.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function Oq(t,e,n=!0){const r=sD(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await eD(r,e,n,!0),s}async function Dq(t,e){const n=sD(t);await eD(n,e,!0,!1)}async function eD(t,e,n,r){const s=await rq(t.localStore,rs(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Mq(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&KO(t.remoteStore,s),a}async function Mq(t,e,n,r,s){t.Pu=(h,f,g)=>async function(_,x,E,v){let I=x.view.Ga(E);I.ys&&(I=await yS(_.localStore,x.query,!1).then(({documents:C})=>x.view.Ga(C,I)));const N=v&&v.targetChanges.get(x.targetId),M=v&&v.targetMismatches.get(x.targetId)!=null,F=x.view.applyChanges(I,_.isPrimaryClient,N,M);return kS(_,x.targetId,F.Ya),F.snapshot}(t,h,f,g);const i=await yS(t.localStore,e,!0),o=new Rq(e,i.Ns),a=o.Ga(i.documents),l=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);kS(t,n,c.Ya);const d=new Aq(e,n,o);return t.ru.set(e,d),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),c.snapshot}async function Lq(t,e,n){const r=Ve(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!tg(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await N_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fE(r.remoteStore,s.targetId),M_(r,s.targetId)}).catch(Ym)):(M_(r,s.targetId),await N_(r.localStore,s.targetId,!0))}async function Fq(t,e){const n=Ve(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fE(n.remoteStore,r.targetId))}async function tD(t,e){const n=Ve(t);try{const r=await tq(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n._u.get(i);o&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?at(o.tu,14607):s.removedDocuments.size>0&&(at(o.tu,42227),o.tu=!1))}),await rD(n,r,e)}catch(r){await Ym(r)}}function bS(t,e,n){const r=Ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,o)=>{const a=o.view.ga(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Ra)f.ga(a)&&(c=!0)}),c&&vE(l)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vq(t,e,n){const r=Ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let o=new _t(he.comparator);o=o.insert(i,rn.newNoDocument(i,we.min()));const a=je().add(i),l=new ig(we.min(),new Map,new _t(Se),o,a);await tD(r,l),r.ou=r.ou.remove(i),r._u.delete(e),wE(r)}else await N_(r.localStore,e,!1).then(()=>M_(r,e,n)).catch(Ym)}function M_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||nD(t,r)})}function nD(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(fE(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),wE(t))}function kS(t,e,n){for(const r of n)r instanceof XO?(t.au.addReference(r.key,e),jq(t,r)):r instanceof JO?(se(_E,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||nD(t,r.key)):xe(19791,{Iu:r})}function jq(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(se(_E,"New document in limbo: "+n),t.su.add(r),wE(t))}function wE(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new he(ft.fromString(e)),r=t.lu.next();t._u.set(r,new Pq(n)),t.ou=t.ou.insert(n,r),KO(t.remoteStore,new xi(rs(iE(n.path)),r,"TargetPurposeLimboResolution",Zm.le))}}async function rD(t,e,n){const r=Ve(t),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=dE.Ps(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(l,c){const d=Ve(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(c,f=>B.forEach(f.ls,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>B.forEach(f.hs,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!pc(h))throw h;se(hE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=d.Ss.get(f),w=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(w);d.Ss=d.Ss.insert(f,_)}}}(r.localStore,i))}async function Uq(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){se(_E,"User change. New user:",e.toKey());const r=await WO(n.localStore,e);n.currentUser=e,function(i,o){i.cu.forEach(a=>{a.forEach(l=>{l.reject(new de(J.CANCELLED,o))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rD(n,r.Ms)}}function $q(t,e){const n=Ve(t),r=n._u.get(e);if(r&&r.tu)return je().add(r.key);{let s=je();const i=n.iu.get(e);if(!i)return s;for(const o of i){const a=n.ru.get(o);s=s.unionWith(a.view.Wa)}return s}}function sD(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$q.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vq.bind(null,e),e.nu.Q_=Sq.bind(null,e.eventManager),e.nu.Tu=bq.bind(null,e.eventManager),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qO(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return eq(this.persistence,new Z8,e.initialUser,this.serializer)}Ru(e){return new BO(uE.Ei,this.serializer)}Au(e){return new iq}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class zq extends em{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){at(this.persistence.referenceDelegate instanceof Jp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new L8(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new BO(r=>Jp.Ei(r,n),this.serializer)}}class L_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uq.bind(null,this.syncEngine),await Eq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tq}()}createDatastore(e){const n=qO(e.databaseInfo.databaseId),r=function(i){return new uq(i)}(e.databaseInfo);return function(i,o,a,l){return new pq(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new gq(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bS(this.syncEngine,n,0),function(){return wS.C()?new wS:new oq}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new Nq(s,i,o,a,l,c);return d&&(h.hu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ve(s);se(Xl,"RemoteStore shutting down."),i.aa.add(5),await uh(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}L_.provider={build:()=>new L_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="FirestoreClient";class Wq{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=uO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se(Ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ZO(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sy(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await WO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function RS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hq(t);se(Ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>TS(e.remoteStore,s)),t._onlineComponents=e}async function Hq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ji,"Using user provided OfflineComponentProvider");try{await Sy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Gl("Error using user provided cache. Falling back to memory cache: "+n),await Sy(t,new em)}}else se(Ji,"Using default OfflineComponentProvider"),await Sy(t,new zq(void 0));return t._offlineComponents}async function qq(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ji,"Using user provided OnlineComponentProvider"),await RS(t,t._uninitializedComponentsProvider._online)):(se(Ji,"Using default OnlineComponentProvider"),await RS(t,new L_))),t._onlineComponents}async function Gq(t){const e=await qq(t),n=e.eventManager;return n.onListen=Oq.bind(null,e.syncEngine),n.onUnlisten=Lq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fq.bind(null,e.syncEngine),n}function Kq(t,e,n={}){const r=new Go;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Bq({next:f=>{d.yu(),o.enqueueAndForget(()=>Cq(i,h));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new kq(iE(a.path),d,{includeMetadataChanges:!0,Fa:!0});return Iq(i,h)}(await Gq(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yq(t,e,n,r){if(e===!0&&r===!0)throw new de(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PS(t){if(!he.isDocumentKey(t))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zq(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function F_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zq(t);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="firestore.googleapis.com",NS=!0;class OS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oD,this.ssl=NS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:NS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D8)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uH;switch(r.type){case"firstParty":return new pH(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,io("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=AS.get(n);r&&(se("ComponentProvider","Removing Datastore"),AS.delete(n),r.terminate())}(this),Promise.resolve()}}function Xq(t,e,n,r={}){var s;t=F_(t,EE);const i=so(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;o.host!==oD&&o.host!==l&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!$s(c,a)&&(t._setSettings(c),i&&(Vm(`https://${l}`),io("Firestore",!0)),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=en.MOCK_USER;else{d=h0(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new en(f)}t._authCredentials=new dH(new lO(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xE(this.firestore,e,this._query)}}class Os{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Od(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Os(this.firestore,e,this._key)}}class Od extends xE{constructor(e,n,r){super(e,n,iE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Os(this.firestore,null,new he(e))}withConverter(e){return new Od(this.firestore,e,this._path)}}function Jq(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=uO.newId()),Qq("doc","path",e),t instanceof EE){const r=ft.fromString(e,...n);return PS(r),new Os(t,null,new he(r))}{if(!(t instanceof Os||t instanceof Od))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return PS(r),new Os(t.firestore,t instanceof Od?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class MS{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new GO(this,"async_queue_retry"),this.ju=()=>{const r=Cy();r&&se(DS,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=Cy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Cy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Go;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!pc(e))throw e;se(DS,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Hs("INTERNAL UNHANDLED ERROR: ",LS(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=yE.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&xe(47125,{ec:LS(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function LS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class aD extends EE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new MS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MS(e),this._firestoreClient=void 0,await e}}}function e7(t,e){const n=typeof t=="object"?t:Yd(),r=typeof t=="string"?t:Kp,s=Ks(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=u0("firestore");i&&Xq(s,...i)}return s}function t7(t){if(t._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n7(t),t._firestoreClient}function n7(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new AH(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,iD(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Wq(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tm(qt.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tm(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}const i7=new RegExp("[~\\*/\\[\\]]");function o7(t,e,n){if(e.search(i7)>=0)throw FS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new lD(...e.split("."))._internalPath}catch{throw FS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function FS(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new de(J.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Os(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uD("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a7 extends cD{data(){return super.data()}}function uD(t,e){return typeof e=="string"?o7(t,e):e instanceof lD?e._internalPath:e._delegate._internalPath}class l7{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lh(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[x_].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>gt(o.doubleValue));return new s7(i)}convertGeoPoint(e){return new r7(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new Pn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);at($O(r),9688,{name:e});const s=new Pd(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||Hs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dD extends cD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new u7(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class u7 extends dD{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t){t=F_(t,Os);const e=F_(t.firestore,aD);return Kq(t7(e),t._key).then(n=>f7(e,t,n))}class h7 extends l7{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,n)}}function f7(t,e,n){const r=n.docs.get(e._key),s=new h7(t);return new dD(t,s,e._key,r,new c7(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){fc=s})(oo),or(new Kn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new aD(new hH(r.getProvider("auth-internal")),new mH(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pd(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),sn($C,zC,e),sn($C,zC,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="firebasestorage.googleapis.com",p7="storageBucket",m7=2*60*1e3,g7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends lr{constructor(e,n,r=0){super(by(e),`Firebase Storage: ${n} (${by(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return by(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var us;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(us||(us={}));function by(t){return"storage/"+t}function y7(){const t="An unknown error occurred, please check the error payload for server response.";return new hs(us.UNKNOWN,t)}function v7(){return new hs(us.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _7(){return new hs(us.CANCELED,"User canceled the upload/download.")}function w7(t){return new hs(us.INVALID_URL,"Invalid URL '"+t+"'.")}function E7(t){return new hs(us.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function VS(t){return new hs(us.INVALID_ARGUMENT,t)}function fD(){return new hs(us.APP_DELETED,"The Firebase app was deleted.")}function x7(t){return new hs(us.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Sr.makeFromUrl(e,n)}catch{return new Sr(e,"")}if(r.path==="")return r;throw E7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},_=n===hD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",E=new RegExp(`^https?://${_}/${s}/${x}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:g,indices:w,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<I.length;N++){const M=I[N],F=M.regex.exec(e);if(F){const C=F[M.indices.bucket];let T=F[M.indices.path];T||(T=""),r=new Sr(C,T),M.postModify(r);break}}if(r==null)throw w7(e);return r}}class T7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...x){c||(c=!0,e.apply(null,x))}function h(x){s=setTimeout(()=>{s=null,t(g,l())},x)}function f(){i&&clearTimeout(i)}function g(x,...E){if(c){f();return}if(x){f(),d.call(null,x,...E);return}if(l()||o){f(),d.call(null,x,...E);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let w=!1;function _(x){w||(w=!0,f(),!c&&(s!==null?(x||(a=2),clearTimeout(s),h(0)):x||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function C7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){return t!==void 0}function jS(t,e,n,r){if(r<e)throw VS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw VS(`Invalid value for '${t}'. Expected ${n} or less.`)}function b7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var nm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nm||(nm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new lf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===nm.NO_ERROR,l=i.getStatus();if(!a||k7(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===nm.ABORT;r(!1,new lf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new lf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());S7(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=y7();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?fD():_7();o(l)}else{const l=v7();o(l)}};this.canceled_?n(!1,new lf(!1,null,!0)):this.backoffId_=I7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function A7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function P7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function O7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function D7(t,e,n,r,s,i,o=!0,a=!1){const l=b7(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return N7(d,e),A7(d,n),P7(d,i),O7(d,r),new R7(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this._service=e,n instanceof Sr?this._location=n:this._location=Sr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rm(e,n)}get root(){const e=new Sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L7(this._location.path)}get storage(){return this._service}get parent(){const e=M7(this._location.path);if(e===null)return null;const n=new Sr(this._location.bucket,e);return new rm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x7(e)}}function US(t,e){const n=e==null?void 0:e[p7];return n==null?null:Sr.makeFromBucketSpec(n,t)}function F7(t,e,n,r={}){t.host=`${e}:${n}`;const s=so(e);s&&(Vm(`https://${t.host}`),io("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:h0(i,t.app.options.projectId))}class V7{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=hD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=m7,this._maxUploadRetryTime=g7,this._requests=new Set,s!=null?this._bucket=Sr.makeFromBucketSpec(s,this._host):this._bucket=US(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sr.makeFromBucketSpec(this._url,e):this._bucket=US(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rm(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new T7(fD());{const o=D7(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $S="@firebase/storage",zS="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="storage";function j7(t=Yd(),e){t=Lt(t),io("Storage",!1);const r=Ks(t,pD).getImmediate({identifier:e}),s=u0("storage");return s&&U7(r,...s),r}function U7(t,e,n,r={}){F7(t,e,n,r)}function $7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new V7(n,r,s,e,oo)}function z7(){or(new Kn(pD,$7,"PUBLIC").setMultipleInstances(!0)),sn($S,zS,""),sn($S,zS,"esm2017")}z7();const mD="@firebase/installations",TE="0.6.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=1e4,yD=`w:${TE}`,vD="FIS_v2",B7="https://firebaseinstallations.googleapis.com/v1",W7=60*60*1e3,H7="installations",q7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ha=new ga(H7,q7,G7);function _D(t){return t instanceof lr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD({projectId:t}){return`${B7}/projects/${t}/installations`}function ED(t){return{token:t.token,requestStatus:2,expiresIn:Q7(t.expiresIn),creationTime:Date.now()}}async function xD(t,e){const r=(await e.json()).error;return ha.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function TD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function K7(t,{refreshToken:e}){const n=TD(t);return n.append("Authorization",Y7(e)),n}async function ID(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Q7(t){return Number(t.replace("s","000"))}function Y7(t){return`${vD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=wD(t),s=TD(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:vD,appId:t.appId,sdkVersion:yD},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await ID(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:ED(c.authToken)}}else throw await xD("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=/^[cdef][\w-]{21}$/,V_="";function eG(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=tG(t);return J7.test(n)?n:V_}catch{return V_}}function tG(t){return X7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=new Map;function bD(t,e){const n=ag(t);kD(n,e),nG(n,e)}function kD(t,e){const n=SD.get(t);if(n)for(const r of n)r(e)}function nG(t,e){const n=rG();n&&n.postMessage({key:t,fid:e}),sG()}let Lo=null;function rG(){return!Lo&&"BroadcastChannel"in self&&(Lo=new BroadcastChannel("[Firebase] FID Change"),Lo.onmessage=t=>{kD(t.data.key,t.data.fid)}),Lo}function sG(){SD.size===0&&Lo&&(Lo.close(),Lo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG="firebase-installations-database",oG=1,fa="firebase-installations-store";let ky=null;function IE(){return ky||(ky=rP(iG,oG,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fa)}}})),ky}async function sm(t,e){const n=ag(t),s=(await IE()).transaction(fa,"readwrite"),i=s.objectStore(fa),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&bD(t,e.fid),e}async function RD(t){const e=ag(t),r=(await IE()).transaction(fa,"readwrite");await r.objectStore(fa).delete(e),await r.done}async function lg(t,e){const n=ag(t),s=(await IE()).transaction(fa,"readwrite"),i=s.objectStore(fa),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&bD(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(t){let e;const n=await lg(t.appConfig,r=>{const s=aG(r),i=lG(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===V_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function aG(t){const e=t||{fid:eG(),registrationStatus:0};return AD(e)}function lG(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ha.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cG(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uG(t)}:{installationEntry:e}}async function cG(t,e){try{const n=await Z7(t,e);return sm(t.appConfig,n)}catch(n){throw _D(n)&&n.customData.serverCode===409?await RD(t.appConfig):await sm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function uG(t){let e=await BS(t.appConfig);for(;e.registrationStatus===1;)await CD(100),e=await BS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await CE(t);return r||n}return e}function BS(t){return lg(t,e=>{if(!e)throw ha.create("installation-not-found");return AD(e)})}function AD(t){return dG(t)?{fid:t.fid,registrationStatus:0}:t}function dG(t){return t.registrationStatus===1&&t.registrationTime+gD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hG({appConfig:t,heartbeatServiceProvider:e},n){const r=fG(t,n),s=K7(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:yD,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await ID(()=>fetch(r,a));if(l.ok){const c=await l.json();return ED(c)}else throw await xD("Generate Auth Token",l)}function fG(t,{fid:e}){return`${wD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(t,e=!1){let n;const r=await lg(t.appConfig,i=>{if(!PD(i))throw ha.create("not-registered");const o=i.authToken;if(!e&&gG(o))return i;if(o.requestStatus===1)return n=pG(t,e),i;{if(!navigator.onLine)throw ha.create("app-offline");const a=vG(i);return n=mG(t,a),a}});return n?await n:r.authToken}async function pG(t,e){let n=await WS(t.appConfig);for(;n.authToken.requestStatus===1;)await CD(100),n=await WS(t.appConfig);const r=n.authToken;return r.requestStatus===0?SE(t,e):r}function WS(t){return lg(t,e=>{if(!PD(e))throw ha.create("not-registered");const n=e.authToken;return _G(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mG(t,e){try{const n=await hG(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await sm(t.appConfig,r),n}catch(n){if(_D(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await RD(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sm(t.appConfig,r)}throw n}}function PD(t){return t!==void 0&&t.registrationStatus===2}function gG(t){return t.requestStatus===2&&!yG(t)}function yG(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W7}function vG(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function _G(t){return t.requestStatus===1&&t.requestTime+gD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t){const e=t,{installationEntry:n,registrationPromise:r}=await CE(e);return r?r.catch(console.error):SE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EG(t,e=!1){const n=t;return await xG(n),(await SE(n,e)).token}async function xG(t){const{registrationPromise:e}=await CE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(t){if(!t||!t.options)throw Ry("App Configuration");if(!t.name)throw Ry("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ry(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ry(t){return ha.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="installations",IG="installations-internal",CG=t=>{const e=t.getProvider("app").getImmediate(),n=TG(e),r=Ks(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},SG=t=>{const e=t.getProvider("app").getImmediate(),n=Ks(e,ND).getImmediate();return{getId:()=>wG(n),getToken:s=>EG(n,s)}};function bG(){or(new Kn(ND,CG,"PUBLIC")),or(new Kn(IG,SG,"PRIVATE"))}bG();sn(mD,TE);sn(mD,TE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="analytics",kG="firebase_id",RG="origin",AG=60*1e3,PG="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Qd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qn=new ga("analytics","Analytics",NG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){if(!t.startsWith(bE)){const e=qn.create("invalid-gtag-resource",{gtagURL:t});return Nn.warn(e.message),""}return t}function OD(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function DG(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function MG(t,e){const n=DG("firebase-js-sdk-policy",{createScriptURL:OG}),r=document.createElement("script"),s=`${bE}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function LG(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function FG(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await OD(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Nn.error(a)}t("config",s,i)}async function VG(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await OD(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Nn.error(i)}}function jG(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await VG(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await FG(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Nn.error(a)}}return s}function UG(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=jG(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function $G(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=30,BG=1e3;class WG{constructor(e={},n=BG){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const DD=new WG;function HG(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qG(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:HG(r)},i=PG.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw qn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function GG(t,e=DD,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw qn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw qn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new YG;return setTimeout(async()=>{a.abort()},AG),MD({appId:r,apiKey:s,measurementId:i},o,a,e)}async function MD(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=DD){var i;const{appId:o,measurementId:a}=t;try{await KG(r,e)}catch(l){if(a)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await qG(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!QG(c)){if(s.deleteThrottleMetadata(o),a)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?NI(n,s.intervalMillis,zG):NI(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),Nn.debug(`Calling attemptFetch again in ${d} millis`),MD(t,h,r,s)}}function KG(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(qn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QG(t){if(!(t instanceof lr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class YG{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ZG(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(){if(ZA())try{await XA()}catch(t){return Nn.warn(qn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Nn.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JG(t,e,n,r,s,i,o){var a;const l=GG(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Nn.error(g)),e.push(l);const c=XG().then(g=>{if(g)return r.getId()}),[d,h]=await Promise.all([l,c]);$G(i)||MG(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[RG]="firebase",f.update=!0,h!=null&&(f[kG]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.app=e}_delete(){return delete Du[this.app.options.appId],Promise.resolve()}}let Du={},HS=[];const qS={};let Ay="dataLayer",tK="gtag",GS,LD,KS=!1;function nK(){const t=[];if(KA()&&t.push("This is a browser extension environment."),m6()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=qn.create("invalid-analytics-context",{errorInfo:e});Nn.warn(n.message)}}function rK(t,e,n){nK();const r=t.options.appId;if(!r)throw qn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qn.create("no-api-key");if(Du[r]!=null)throw qn.create("already-exists",{id:r});if(!KS){LG(Ay);const{wrappedGtag:i,gtagCore:o}=UG(Du,HS,qS,Ay,tK);LD=i,GS=o,KS=!0}return Du[r]=JG(t,HS,qS,e,GS,Ay,n),new eK(t)}function sK(t=Yd()){t=Lt(t);const e=Ks(t,im);return e.isInitialized()?e.getImmediate():iK(t)}function iK(t,e={}){const n=Ks(t,im);if(n.isInitialized()){const s=n.getImmediate();if($s(e,n.getOptions()))return s;throw qn.create("already-initialized")}return n.initialize({options:e})}function oK(t,e,n,r){t=Lt(t),ZG(LD,Du[t.app.options.appId],e,n,r).catch(s=>Nn.error(s))}const QS="@firebase/analytics",YS="0.10.15";function aK(){or(new Kn(im,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return rK(r,s,n)},"PUBLIC")),or(new Kn("analytics-internal",t,"PRIVATE")),sn(QS,YS),sn(QS,YS,"esm2017");function t(e){try{const n=e.getProvider(im).getImmediate();return{logEvent:(r,s,i)=>oK(n,r,s,i)}}catch(n){throw qn.create("interop-component-reg-failed",{reason:n})}}}aK();const lK={apiKey:"AIzaSyCao2ih2XM8ZkEUpNrl7qs4AZKgq8eitmM",authDomain:"esports-hp.firebaseapp.com",databaseURL:"https://esports-hp-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"esports-hp",storageBucket:"esports-hp.firebasestorage.app",messagingSenderId:"578218788593",appId:"1:578218788593:web:995d61bdbbfe374bf6cb50",measurementId:"G-ELP77R773B"},hh=sP(lK),_o=Y$(hh),Dd=aH(hh),cK=e7(hh);j7(hh);sK(hh);new Gr;new qr;new Kr;const FD=A.createContext(null),gc=()=>{const t=A.useContext(FD);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},uK=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0),{toast:i}=Im();A.useEffect(()=>j5(_o,w=>{n(w),s(!1)}),[]);const f={currentUser:e,loading:r,signIn:async(g,w)=>{try{await L5(_o,g,w)}catch(_){throw i({title:"Error signing in",description:_.message,variant:"destructive"}),_}},signUp:async(g,w)=>{try{await M5(_o,g,w)}catch(_){throw i({title:"Error signing up",description:_.message,variant:"destructive"}),_}},logOut:async()=>{try{await U5(_o)}catch(g){throw i({title:"Error signing out",description:g.message,variant:"destructive"}),g}},signInWithGoogle:async()=>{try{const g=new Gr;await fy(_o,g)}catch(g){throw i({title:"Error signing in with Google",description:g.message,variant:"destructive"}),g}},signInWithFacebook:async()=>{try{const g=new qr;await fy(_o,g)}catch(g){throw i({title:"Error signing in with Facebook",description:g.message,variant:"destructive"}),g}},signInWithTwitter:async()=>{try{const g=new Kr;await fy(_o,g)}catch(g){throw i({title:"Error signing in with Twitter",description:g.message,variant:"destructive"}),g}}};return m.jsx(FD.Provider,{value:f,children:!r&&t})},VD=xu.object({email:xu.string().email({message:"Please enter a valid email address"}),password:xu.string().min(6,{message:"Password must be at least 6 characters"})}),dK=VD.extend({username:xu.string().min(3,{message:"Username must be at least 3 characters"}),confirmPassword:xu.string().min(6,{message:"Password must be at least 6 characters"})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function hK(){const[t,e]=A.useState("login"),[n,r]=ro(),{signIn:s,signUp:i,signInWithGoogle:o,signInWithFacebook:a,signInWithTwitter:l}=gc(),{toast:c}=Im(),d=xI({resolver:II(VD),defaultValues:{email:"",password:""}}),h=xI({resolver:II(dK),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),f=async _=>{try{await s(_.email,_.password),r("/dashboard")}catch(x){console.error("Login error:",x)}},g=async _=>{try{await i(_.email,_.password),c({title:"Account created successfully!",description:"You can now log in with your credentials."}),e("login")}catch(x){console.error("Registration error:",x)}},w=async _=>{try{switch(_){case"google":await o();break;case"facebook":await a();break;case"twitter":await l();break}r("/dashboard")}catch(x){console.error(`${_} login error:`,x)}};return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-dark",children:[m.jsxs("div",{className:"w-full max-w-md text-center mb-8",children:[m.jsx("div",{className:"w-64 h-32 mx-auto mb-4 flex items-center justify-center",children:m.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[m.jsx("rect",{x:"10",y:"10",width:"80",height:"30",rx:"5",fill:"none",stroke:"#FF5500",strokeWidth:"2"}),m.jsx("path",{d:"M20 25 L30 15 L40 25 L50 15 L60 25 L70 15 L80 25",stroke:"#FF5500",strokeWidth:"2",fill:"none"}),m.jsx("circle",{cx:"50",cy:"25",r:"10",fill:"#FF5500",opacity:"0.5"})]})}),m.jsx("h1",{className:"text-4xl font-bold text-primary font-rajdhani",children:"FIRE TOURNAMENT"}),m.jsx("p",{className:"text-text-secondary mt-2",children:"Level up your game. Join tournaments now."})]}),m.jsx("div",{className:"w-full max-w-md",children:m.jsx(n0,{className:"bg-dark-surface border-dark-lighter",children:m.jsxs(r0,{className:"pt-6",children:[m.jsxs("div",{className:"flex space-x-2 mb-6",children:[m.jsx("button",{onClick:()=>e("login"),className:`w-1/2 py-2 text-center font-rajdhani font-bold border-b-2 ${t==="login"?"text-white border-primary":"text-text-secondary border-dark-lighter"}`,children:"LOGIN"}),m.jsx("button",{onClick:()=>e("register"),className:`w-1/2 py-2 text-center font-rajdhani font-bold border-b-2 ${t==="register"?"text-white border-primary":"text-text-secondary border-dark-lighter"}`,children:"REGISTER"})]}),m.jsx("div",{className:t==="login"?"block":"hidden",children:m.jsx(kI,{...d,children:m.jsxs("form",{onSubmit:d.handleSubmit(f),className:"space-y-4",children:[m.jsx(Aa,{control:d.control,name:"email",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Email"}),m.jsx(Co,{children:m.jsx(xo,{type:"email",placeholder:"your@email.com",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{})]})}),m.jsx(Aa,{control:d.control,name:"password",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Password"}),m.jsx(Co,{children:m.jsx(xo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{}),m.jsx("div",{className:"flex justify-end mt-2",children:m.jsx("a",{href:"#",className:"text-secondary text-sm hover:underline",children:"Forgot Password?"})})]})}),m.jsxs(wr,{type:"submit",className:"w-full gaming-btn bg-primary hover:bg-primary/90 text-white font-rajdhani",children:[m.jsx("i",{className:"ri-login-box-line mr-2"})," LOGIN"]})]})})}),m.jsx("div",{className:t==="register"?"block":"hidden",children:m.jsx(kI,{...h,children:m.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-4",children:[m.jsx(Aa,{control:h.control,name:"username",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Username"}),m.jsx(Co,{children:m.jsx(xo,{type:"text",placeholder:"gamertag",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white hover:border-primary",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{})]})}),m.jsx(Aa,{control:h.control,name:"email",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Email"}),m.jsx(Co,{children:m.jsx(xo,{type:"email",placeholder:"your@email.com",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white hover:border-primary",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{})]})}),m.jsx(Aa,{control:h.control,name:"password",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Password"}),m.jsx(Co,{children:m.jsx(xo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{})]})}),m.jsx(Aa,{control:h.control,name:"confirmPassword",render:({field:_})=>m.jsxs(To,{children:[m.jsx(Io,{className:"text-text-secondary",children:"Confirm Password"}),m.jsx(Co,{children:m.jsx(xo,{type:"password",placeholder:"••••••••",className:"bg-dark-lighter border-dark-lighter focus:border-primary text-white",onChange:x=>_.onChange(x.target.value),value:_.value})}),m.jsx(So,{})]})}),m.jsxs(wr,{type:"submit",className:"w-full gaming-btn bg-primary hover:bg-primary/90 text-white font-rajdhani",children:[m.jsx("i",{className:"ri-user-add-line mr-2"})," REGISTER"]})]})})}),m.jsxs("div",{className:"mt-6 text-center",children:[m.jsx("p",{className:"text-text-secondary",children:"Or continue with"}),m.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[m.jsx(wr,{onClick:()=>w("google"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-google-fill text-white text-xl"})}),m.jsx(wr,{onClick:()=>w("facebook"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-facebook-fill text-white text-xl"})}),m.jsx(wr,{onClick:()=>w("twitter"),variant:"outline",size:"icon",className:"w-12 h-12 rounded-full gaming-btn bg-dark-lighter hover:bg-dark-lighter/80 border-dark-lighter",children:m.jsx("i",{className:"ri-twitter-fill text-white text-xl"})})]})]})]})})})]})}function fh(){const[t]=ro();return m.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-surface border-t border-dark-lighter z-10",children:m.jsxs("div",{className:"flex justify-around",children:[m.jsx(Qa,{href:"/dashboard",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/dashboard"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-home-5-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1 font-medium",children:"Home"})]})}),m.jsx(Qa,{href:"/tournaments",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/tournaments"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-trophy-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1",children:"Tournaments"})]})}),m.jsx(Qa,{href:"/notifications",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/notifications"?"text-primary":"text-text-secondary"}`,children:[m.jsxs("div",{className:"relative",children:[m.jsx("i",{className:"ri-notification-3-line text-2xl"}),m.jsx("span",{className:"nav-indicator"})]}),m.jsx("span",{className:"text-xs mt-1",children:"Notifications"})]})}),m.jsx(Qa,{href:"/profile",children:m.jsxs("a",{className:`w-1/4 p-4 flex flex-col items-center ${t==="/profile"?"text-primary":"text-text-secondary"}`,children:[m.jsx("i",{className:"ri-user-3-line text-2xl"}),m.jsx("span",{className:"text-xs mt-1",children:"Profile"})]})})]})})}function Bt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function fK(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const cf=43200,ZS=1440;let pK={};function mK(){return pK}function XS(t){const e=Bt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Vf(t,e){const n=Bt(t),r=Bt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function gK(t){return fK(t,Date.now())}function yK(t,e){const n=Bt(t),r=Bt(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function vK(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function _K(t,e){return+Bt(t)-+Bt(e)}function wK(t){const e=Bt(t);return e.setHours(23,59,59,999),e}function EK(t){const e=Bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function xK(t){const e=Bt(t);return+wK(e)==+EK(e)}function TK(t,e){const n=Bt(t),r=Bt(e),s=Vf(n,r),i=Math.abs(yK(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=Vf(n,r)===-s;xK(Bt(t))&&i===1&&Vf(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function IK(t,e,n){const r=_K(t,e)/1e3;return vK(n==null?void 0:n.roundingMethod)(r)}const CK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},SK=(t,e,n)=>{let r;const s=CK[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Py(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},RK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AK={date:Py({formats:bK,defaultWidth:"full"}),time:Py({formats:kK,defaultWidth:"full"}),dateTime:Py({formats:RK,defaultWidth:"full"})},PK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NK=(t,e,n,r)=>PK[t];function Kc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const OK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},DK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},LK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},VK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jK=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},UK={ordinalNumber:jK,era:Kc({values:OK,defaultWidth:"wide"}),quarter:Kc({values:DK,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kc({values:MK,defaultWidth:"wide"}),day:Kc({values:LK,defaultWidth:"wide"}),dayPeriod:Kc({values:FK,defaultWidth:"wide",formattingValues:VK,defaultFormattingWidth:"wide"})};function Qc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?zK(a,h=>h.test(o)):$K(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function $K(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function zK(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function BK(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const WK=/^(\d+)(th|st|nd|rd)?/i,HK=/\d+/i,qK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GK={any:[/^b/i,/^(a|c)/i]},KK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QK={any:[/1/i,/2/i,/3/i,/4/i]},YK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nQ={ordinalNumber:BK({matchPattern:WK,parsePattern:HK,valueCallback:t=>parseInt(t,10)}),era:Qc({matchPatterns:qK,defaultMatchWidth:"wide",parsePatterns:GK,defaultParseWidth:"any"}),quarter:Qc({matchPatterns:KK,defaultMatchWidth:"wide",parsePatterns:QK,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qc({matchPatterns:YK,defaultMatchWidth:"wide",parsePatterns:ZK,defaultParseWidth:"any"}),day:Qc({matchPatterns:XK,defaultMatchWidth:"wide",parsePatterns:JK,defaultParseWidth:"any"}),dayPeriod:Qc({matchPatterns:eQ,defaultMatchWidth:"any",parsePatterns:tQ,defaultParseWidth:"any"})},rQ={code:"en-US",formatDistance:SK,formatLong:AK,formatRelative:NK,localize:UK,match:nQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sQ(t,e,n){const r=mK(),s=(n==null?void 0:n.locale)??r.locale??rQ,i=2520,o=Vf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=Bt(e),c=Bt(t)):(l=Bt(t),c=Bt(e));const d=IK(c,l),h=(XS(c)-XS(l))/1e3,f=Math.round((d-h)/60);let g;if(f<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):f===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",f,a);if(f<45)return s.formatDistance("xMinutes",f,a);if(f<90)return s.formatDistance("aboutXHours",1,a);if(f<ZS){const w=Math.round(f/60);return s.formatDistance("aboutXHours",w,a)}else{if(f<i)return s.formatDistance("xDays",1,a);if(f<cf){const w=Math.round(f/ZS);return s.formatDistance("xDays",w,a)}else if(f<cf*2)return g=Math.round(f/cf),s.formatDistance("aboutXMonths",g,a)}if(g=TK(c,l),g<12){const w=Math.round(f/cf);return s.formatDistance("xMonths",w,a)}else{const w=g%12,_=Math.trunc(g/12);return w<3?s.formatDistance("aboutXYears",_,a):w<9?s.formatDistance("overXYears",_,a):s.formatDistance("almostXYears",_+1,a)}}function iQ(t,e){return sQ(t,gK(t),e)}function JS({tournament:t,mode:e="compact"}){const n=new Date(t.startDate),r=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(n),s=iQ(n,{addSuffix:!0}),i=()=>t.registrationOpen?t.participantsCount/t.maxParticipants>.7?m.jsx("span",{className:"inline-block bg-warning bg-opacity-20 text-warning text-xs px-2 py-1 rounded",children:"FILLING FAST"}):m.jsx("span",{className:"inline-block bg-success bg-opacity-20 text-success text-xs px-2 py-1 rounded",children:"OPEN"}):m.jsx("span",{className:"inline-block bg-error bg-opacity-20 text-error text-xs px-2 py-1 rounded",children:"CLOSED"});return e==="compact"?m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 mb-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white font-rajdhani",children:t.name}),m.jsxs("p",{className:"text-xs text-text-secondary mt-1 flex items-center",children:[m.jsx("i",{className:"ri-user-line mr-1"})," ",t.participantsCount," Players",m.jsx("span",{className:"mx-2",children:"•"}),m.jsx("i",{className:"ri-award-line mr-1"})," ₹",t.prizePool.toLocaleString()," Prize"]})]}),m.jsxs("div",{className:"text-right",children:[i(),m.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["Starts: ",r]})]})]}),m.jsxs("div",{className:"flex justify-between items-center mt-4",children:[m.jsx("div",{className:"flex -space-x-2",children:m.jsxs("div",{className:"w-6 h-6 rounded-full bg-dark-lighter border border-dark flex items-center justify-center text-xs",children:["+",t.participantsCount]})}),m.jsx(Qa,{href:`/tournament/${t.id}`,children:m.jsx(wr,{className:"gaming-btn bg-secondary text-white text-sm py-1.5 px-4 rounded-lg font-rajdhani",children:"JOIN NOW"})})]})]}):m.jsxs("div",{className:"relative rounded-xl overflow-hidden mb-4 card-glow",children:[m.jsx("div",{className:"relative h-40",children:m.jsxs("svg",{viewBox:"0 0 400 150",className:"w-full h-full absolute inset-0",children:[m.jsx("rect",{width:"400",height:"150",fill:"#1E1E1E"}),m.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:m.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#2D2D2D",strokeWidth:"1"})}),m.jsx("rect",{width:"400",height:"150",fill:"url(#grid)"}),m.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"#FF5500",fillOpacity:"0.1"}),m.jsx("circle",{cx:"350",cy:"100",r:"40",fill:"#9147FF",fillOpacity:"0.1"})]})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4",children:m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani",children:t.name}),m.jsxs("p",{className:"text-sm text-text-secondary flex items-center",children:[m.jsx("i",{className:"ri-calendar-line mr-1"})," ",s]})]}),m.jsx(Qa,{href:`/tournament/${t.id}`,children:m.jsx(wr,{className:"gaming-btn bg-primary text-white text-sm py-2 px-4 rounded-lg font-rajdhani",children:"REGISTER"})})]})})]})}function oQ({match:t}){const e=()=>{switch(t.position){case 1:return{bgColor:"bg-success",icon:"ri-trophy-fill",text:"Victory Royale"};case 2:return{bgColor:"bg-warning",icon:"ri-number-2",text:"Second Place"};case 3:return{bgColor:"bg-warning",icon:"ri-number-3",text:"Third Place"};default:return{bgColor:"bg-error",icon:"ri-close-fill",text:"Eliminated"}}},n=()=>{switch(t.position){case 1:return"text-success";case 2:case 3:return"text-warning";default:return"text-error"}},r=e(),s=n(),i=new Date(t.date),o=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}).format(i);return m.jsx("div",{className:"bg-dark-surface rounded-xl p-4 mb-4 card-glow",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`w-10 h-10 rounded-full ${r.bgColor} flex items-center justify-center mr-3`,children:m.jsx("i",{className:`${r.icon} text-white`})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white",children:r.text}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[t.tournamentName," • ",o]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:`font-bold ${s} text-xl font-rajdhani`,children:["+",t.pointsEarned]}),m.jsx("p",{className:"text-xs text-text-secondary",children:"POINTS"})]})]})})}function aQ(){var l;const{currentUser:t}=gc(),[e,n]=ro();A.useEffect(()=>{t||n("/")},[t,n]);const{data:r,isLoading:s}=Fl({queryKey:["/api/tournaments"],queryFn:async()=>{const c=await kd(bd(Dd,"tournaments"));return c.exists()?Object.values(c.val()):[]}}),{data:i,isLoading:o}=Fl({queryKey:["/api/matches/recent",t==null?void 0:t.uid],queryFn:async()=>{if(!t)return[];const c=await kd(bd(Dd,`users/${t.uid}/matches`));return c.exists()?Object.values(c.val()):[]},enabled:!!t}),a={tournaments:(r==null?void 0:r.length)||0,matches:(i==null?void 0:i.length)||0};return t?m.jsxs("div",{className:"dashboard",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"DASHBOARD"}),m.jsx("span",{className:"bg-primary text-xs px-2 py-1 rounded text-white",children:"PRO"})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("button",{className:"relative",children:[m.jsx("i",{className:"ri-notification-3-line text-2xl text-white"}),m.jsx("span",{className:"absolute -top-1 -right-1 bg-error w-4 h-4 rounded-full text-xs flex items-center justify-center",children:"3"})]}),m.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-lighter flex items-center justify-center text-white",children:((l=t.email)==null?void 0:l.charAt(0).toUpperCase())||"U"})]})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-text-secondary text-sm",children:"Tournaments"}),m.jsx("i",{className:"ri-trophy-line text-primary"})]}),m.jsx("p",{className:"text-3xl font-bold text-white font-rajdhani",children:a.tournaments}),m.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[m.jsx("i",{className:"ri-arrow-up-line mr-1"})," +3 new this week"]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-4 card-glow",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-text-secondary text-sm",children:"Matches"}),m.jsx("i",{className:"ri-sword-line text-primary"})]}),m.jsx("p",{className:"text-3xl font-bold text-white font-rajdhani",children:a.matches}),m.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[m.jsx("i",{className:"ri-arrow-up-line mr-1"})," +5 upcoming"]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white font-rajdhani",children:"UPCOMING TOURNAMENTS"}),m.jsx("a",{href:"#",className:"text-primary text-sm",children:"View All"})]}),s?m.jsx("div",{className:"p-8 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):r&&r.length>0?m.jsxs(m.Fragment,{children:[m.jsx(JS,{tournament:r[0],mode:"full"}),r.slice(1,3).map(c=>m.jsx(JS,{tournament:c},c.id))]}):m.jsx("div",{className:"bg-dark-surface rounded-xl p-6 text-center",children:m.jsx("p",{className:"text-text-secondary",children:"No upcoming tournaments available."})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white font-rajdhani",children:"YOUR RECENT MATCHES"}),m.jsx("a",{href:"#",className:"text-primary text-sm",children:"History"})]}),o?m.jsx("div",{className:"p-8 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i&&i.length>0?i.map(c=>m.jsx(oQ,{match:c},c.id)):m.jsx("div",{className:"bg-dark-surface rounded-xl p-6 text-center",children:m.jsx("p",{className:"text-text-secondary",children:"No recent matches found."})})]})]}),m.jsx(fh,{})]}):null}function lQ(){return m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Notifications"}),m.jsx("div",{className:"bg-dark-surface rounded-xl p-6",children:m.jsx("p",{className:"text-text-secondary",children:"Your notifications will appear here."})})]})}function cQ({team:t}){return m.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-dark-lighter",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-lighter flex items-center justify-center mr-3",children:m.jsx("span",{className:"text-xs text-text-primary",children:t.name.substring(0,2).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t.name}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[t.tournamentsPlayed," tournaments played"]})]})]}),m.jsxs("div",{className:"flex items-center",children:[t.badges.map((e,n)=>m.jsx("div",{className:`${e==="PRO"?"bg-success bg-opacity-20 text-success":e==="CHAMPION"?"bg-warning bg-opacity-20 text-warning":"bg-secondary bg-opacity-20 text-secondary"} text-xs px-2 py-1 rounded mr-2`,children:e},n)),m.jsx("i",{className:"ri-more-2-fill text-text-secondary"})]})]})}function uQ(){const{currentUser:t}=gc(),[e,n]=ro(),[r,s]=xF("/tournament/:id"),[i,o]=A.useState({days:0,hours:0,minutes:0,seconds:0});A.useEffect(()=>{t||n("/")},[t,n]);const{data:a,isLoading:l}=Fl({queryKey:["/api/tournaments",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const f=await kd(bd(Dd,`tournaments/${s.id}`));return f.exists()?f.val():null},enabled:!!(s!=null&&s.id)}),{data:c,isLoading:d}=Fl({queryKey:["/api/tournaments",s==null?void 0:s.id,"teams"],queryFn:async()=>{if(!(s!=null&&s.id))return[];const f=await kd(bd(Dd,`tournaments/${s.id}/teams`));return f.exists()?Object.values(f.val()):[]},enabled:!!(s!=null&&s.id)});if(A.useEffect(()=>{if(!a)return;const f=()=>{const w=new Date(a.registrationEndDate).getTime(),_=new Date().getTime(),x=w-_;if(x<0){o({days:0,hours:0,minutes:0,seconds:0});return}o({days:Math.floor(x/(1e3*60*60*24)),hours:Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(x%(1e3*60*60)/(1e3*60)),seconds:Math.floor(x%(1e3*60)/1e3)})};f();const g=setInterval(f,1e3);return()=>clearInterval(g)},[a]),!r||!s||l)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})});if(!a)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsxs("div",{className:"bg-dark-surface p-6 rounded-xl text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-2 font-rajdhani",children:"Tournament Not Found"}),m.jsx("p",{className:"text-text-secondary mb-4",children:"The tournament you're looking for doesn't exist or has been removed."}),m.jsx(wr,{onClick:()=>n("/dashboard"),className:"gaming-btn bg-primary hover:bg-primary/90",children:"Back to Dashboard"})]})});const h=Math.round(a.participantsCount/a.maxParticipants*100);return m.jsxs("div",{className:"tournament-detail",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>n("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"TOURNAMENT DETAILS"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"relative rounded-xl overflow-hidden mb-6 card-glow",children:[m.jsx("div",{className:"w-full h-52 bg-gradient-to-br from-dark-lighter to-dark",children:m.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full h-full",children:[m.jsx("rect",{width:"400",height:"200",fill:"#1E1E1E"}),m.jsx("path",{d:"M0 100 Q100 50, 200 100 T400 100",stroke:"#FF5500",strokeWidth:"3",fill:"none"}),m.jsx("circle",{cx:"200",cy:"100",r:"30",fill:"#9147FF",fillOpacity:"0.3"}),m.jsx("circle",{cx:"100",cy:"50",r:"20",fill:"#FF5500",fillOpacity:"0.3"}),m.jsx("circle",{cx:"300",cy:"150",r:"25",fill:"#FF5500",fillOpacity:"0.3"})]})}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-white font-rajdhani",children:a.name}),m.jsxs("div",{className:"flex items-center mt-1",children:[a.registrationOpen?m.jsx("span",{className:"bg-primary text-white text-xs px-2 py-0.5 rounded mr-2",children:h>70?"FILLING FAST":"OPEN"}):m.jsx("span",{className:"bg-error text-white text-xs px-2 py-0.5 rounded mr-2",children:"CLOSED"}),m.jsx("p",{className:"text-sm text-text-secondary",children:new Date(a.startDate).toLocaleDateString()})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"TOURNAMENT INFO"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Format"}),m.jsx("p",{className:"font-medium text-white",children:a.format})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Entry Fee"}),m.jsxs("p",{className:"font-medium text-white",children:["₹",a.entryFee]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Team Size"}),m.jsxs("p",{className:"font-medium text-white",children:[a.teamSize," Players"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Prize Pool"}),m.jsxs("p",{className:"font-medium text-white",children:["₹",a.prizePool.toLocaleString()]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-text-secondary text-sm mb-1",children:"Registration Ends"}),m.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.days.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Days"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.hours.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Hours"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.minutes.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Minutes"})]}),m.jsxs("div",{className:"bg-dark-lighter rounded p-2 text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:i.seconds.toString().padStart(2,"0")}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Seconds"})]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-text-secondary text-sm mb-2",children:"Tournament Progress"}),m.jsx("div",{className:"w-full bg-dark-lighter rounded-full h-2.5",children:m.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${h}%`}})}),m.jsxs("div",{className:"flex justify-between mt-1",children:[m.jsxs("p",{className:"text-xs text-text-secondary",children:[a.participantsCount,"/",a.maxParticipants," Teams"]}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[h,"% Full"]})]})]}),m.jsxs(wr,{disabled:!a.registrationOpen,className:"gaming-btn w-full bg-secondary hover:bg-secondary/90 text-white font-bold py-3 px-4 rounded-lg mt-2 font-rajdhani flex items-center justify-center",children:[m.jsx("i",{className:"ri-user-add-line mr-2"})," REGISTER YOUR TEAM"]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"RULES & REGULATIONS"}),m.jsx("div",{className:"space-y-3",children:a.rules.map((f,g)=>m.jsxs("div",{className:"flex",children:[m.jsx("i",{className:"ri-checkbox-circle-line text-primary text-xl mr-2 flex-shrink-0 mt-0.5"}),m.jsx("p",{className:"text-text-primary text-sm",children:f})]},g))}),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center",children:["View Full Rules ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani",children:"REGISTERED TEAMS"}),m.jsxs("span",{className:"text-text-secondary text-sm",children:[a.participantsCount,"/",a.maxParticipants]})]}),d?m.jsx("div",{className:"p-4 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):c&&c.length>0?m.jsxs(m.Fragment,{children:[c.slice(0,3).map(f=>m.jsx(cQ,{team:f},f.id)),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center mx-auto",children:["View All Teams ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No teams have registered yet."})})]})]}),m.jsx(fh,{})]})}function dQ(){return m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Tournaments"}),m.jsx("div",{className:"bg-dark-surface rounded-xl p-6",children:m.jsx("p",{className:"text-text-secondary",children:"Available tournaments will appear here."})})]})}var kE="Progress",RE=100,[hQ,GQ]=sc(kE),[fQ,pQ]=hQ(kE),jD=A.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=mQ,...o}=t;(s||s===0)&&!eb(s)&&console.error(gQ(`${s}`,"Progress"));const a=eb(s)?s:RE;r!==null&&!tb(r,a)&&console.error(yQ(`${r}`,"Progress"));const l=tb(r,a)?r:null,c=om(l)?i(l,a):void 0;return m.jsx(fQ,{scope:n,value:l,max:a,children:m.jsx(At.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":om(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":zD(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});jD.displayName=kE;var UD="ProgressIndicator",$D=A.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=pQ(UD,n);return m.jsx(At.div,{"data-state":zD(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});$D.displayName=UD;function mQ(t,e){return`${Math.round(t/e*100)}%`}function zD(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function om(t){return typeof t=="number"}function eb(t){return om(t)&&!isNaN(t)&&t>0}function tb(t,e){return om(t)&&!isNaN(t)&&t<=e&&t>=0}function gQ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RE}\`.`}function yQ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var BD=jD,vQ=$D;const cu=A.forwardRef(({className:t,value:e,...n},r)=>m.jsx(BD,{ref:r,className:ct("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:m.jsx(vQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));cu.displayName=BD.displayName;function _Q(){var l;const{currentUser:t}=gc(),[e,n]=ro();A.useEffect(()=>{t||n("/")},[t,n]);const{data:r,isLoading:s}=Fl({queryKey:["/api/users",t==null?void 0:t.uid,"profile"],queryFn:async()=>{if(!(t!=null&&t.uid))return null;const c=Jq(cK,"users",t.uid),d=await d7(c);return d.exists()?d.data():null},enabled:!!t}),{data:i,isLoading:o}=Fl({queryKey:["/api/users",t==null?void 0:t.uid,"activities"],queryFn:async()=>{if(!(t!=null&&t.uid))return[];const c=await kd(bd(Dd,`users/${t.uid}/activities`));return c.exists()?Object.values(c.val()):[]},enabled:!!t});if(!t)return null;if(s)return m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})});const a=r||{username:t.displayName||((l=t.email)==null?void 0:l.split("@")[0])||"Player",level:1,rank:"Rookie",verified:!1,tournamentsWon:0,matches:0,tournaments:0,kills:0,stats:{winRate:0,kdRatio:0,headshotPercentage:0,avgSurvivalTime:"00:00"},achievements:[]};return m.jsxs("div",{className:"profile-screen",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>n("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"PROFILE"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs("div",{className:"bg-dark-surface rounded-xl overflow-hidden mb-6",children:[m.jsx("div",{className:"h-24 bg-gradient-to-r from-primary to-secondary relative",children:m.jsx("button",{className:"absolute right-3 top-3 bg-dark-surface bg-opacity-50 p-1 rounded-full",children:m.jsx("i",{className:"ri-pencil-line text-white"})})}),m.jsxs("div",{className:"flex flex-col items-center -mt-12 px-4 pb-6",children:[t.photoURL?m.jsx("img",{src:t.photoURL,alt:"Profile Avatar",className:"w-24 h-24 rounded-full border-4 border-dark-surface object-cover"}):m.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-dark-surface bg-dark-lighter flex items-center justify-center text-white text-4xl",children:a.username.charAt(0).toUpperCase()}),m.jsx("h2",{className:"text-xl font-bold text-white mt-3 font-rajdhani",children:a.username}),m.jsxs("p",{className:"text-text-secondary text-sm",children:["Level ",a.level," • ",a.rank]}),m.jsxs("div",{className:"flex items-center mt-2",children:[a.verified&&m.jsxs("div",{className:"bg-success text-white text-xs px-2 py-1 rounded flex items-center mr-2",children:[m.jsx("i",{className:"ri-verified-badge-line mr-1"})," Verified"]}),m.jsxs("div",{className:"bg-warning bg-opacity-20 text-warning text-xs px-2 py-1 rounded flex items-center",children:[m.jsx("i",{className:"ri-trophy-line mr-1"})," ",a.tournamentsWon," Tournaments Won"]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-6 w-full",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.matches}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Matches"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.tournaments}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Tournaments"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xl font-bold text-white font-rajdhani",children:a.kills>=1e3?`${(a.kills/1e3).toFixed(1)}K`:a.kills}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Kills"})]})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"GAME STATISTICS"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Win Rate"}),m.jsxs("div",{className:"flex items-center",children:[m.jsxs("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:[a.stats.winRate,"%"]}),m.jsx("div",{className:"w-full",children:m.jsx(cu,{value:a.stats.winRate,className:"h-2 bg-dark-lighter",indicatorColor:"bg-success"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"K/D Ratio"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:a.stats.kdRatio}),m.jsx("div",{className:"w-full",children:m.jsx(cu,{value:Math.min(a.stats.kdRatio*20,100),className:"h-2 bg-dark-lighter",indicatorColor:"bg-primary"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Headshot %"}),m.jsxs("div",{className:"flex items-center",children:[m.jsxs("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:[a.stats.headshotPercentage,"%"]}),m.jsx("div",{className:"w-full",children:m.jsx(cu,{value:a.stats.headshotPercentage,className:"h-2 bg-dark-lighter",indicatorColor:"bg-warning"})})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary text-sm",children:"Avg. Survival Time"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("p",{className:"font-bold text-white text-lg mr-2 font-rajdhani",children:a.stats.avgSurvivalTime}),m.jsx("div",{className:"w-full",children:m.jsx(cu,{value:75,className:"h-2 bg-dark-lighter",indicatorColor:"bg-secondary"})})]})]})]})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"ACHIEVEMENTS"}),m.jsx("div",{className:"grid grid-cols-4 gap-4",children:a.achievements&&a.achievements.length>0?a.achievements.map((c,d)=>m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${c.colorClass} flex items-center justify-center`,children:m.jsx("i",{className:`${c.icon} text-white text-xl`})}),m.jsx("p",{className:"text-xs text-text-secondary mt-2 text-center",children:c.name})]},d)):m.jsx("div",{className:"col-span-4 text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No achievements unlocked yet. Keep playing to earn achievements!"})})})]}),m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:"RECENT ACTIVITY"}),o?m.jsx("div",{className:"p-4 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):i&&i.length>0?m.jsxs(m.Fragment,{children:[i.slice(0,3).map((c,d)=>m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-lighter flex items-center justify-center mr-3 flex-shrink-0",children:m.jsx("i",{className:`${c.icon} ${c.iconColor}`})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:c.text}),m.jsx("p",{className:"text-xs text-text-secondary",children:new Date(c.timestamp).toLocaleString()})]})]},d)),m.jsxs("button",{className:"text-secondary text-sm font-medium mt-4 flex items-center mx-auto",children:["View All Activity ",m.jsx("i",{className:"ri-arrow-right-line ml-1"})]})]}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-text-secondary",children:"No recent activity."})})]})]}),m.jsx(fh,{})]})}function wQ(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var AE="Switch",[EQ,KQ]=sc(AE),[xQ,TQ]=EQ(AE),WD=A.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...h}=t,[f,g]=A.useState(null),w=ir(e,I=>g(I)),_=A.useRef(!1),x=f?d||!!f.closest("form"):!0,[E=!1,v]=tR({prop:s,defaultProp:i,onChange:c});return m.jsxs(xQ,{scope:n,checked:E,disabled:a,children:[m.jsx(At.button,{type:"button",role:"switch","aria-checked":E,"aria-required":o,"data-state":GD(E),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:w,onClick:Et(t.onClick,I=>{v(N=>!N),x&&(_.current=I.isPropagationStopped(),_.current||I.stopPropagation())})}),x&&m.jsx(IQ,{control:f,bubbles:!_.current,name:r,value:l,checked:E,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});WD.displayName=AE;var HD="SwitchThumb",qD=A.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=TQ(HD,n);return m.jsx(At.span,{"data-state":GD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});qD.displayName=HD;var IQ=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=A.useRef(null),o=wQ(n),a=qR(e);return A.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function GD(t){return t?"checked":"unchecked"}var KD=WD,CQ=qD;const QD=A.forwardRef(({className:t,...e},n)=>m.jsx(KD,{className:ct("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:m.jsx(CQ,{className:ct("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));QD.displayName=KD.displayName;const uf=({title:t,children:e})=>m.jsxs("div",{className:"bg-dark-surface rounded-xl p-5 mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white font-rajdhani mb-4",children:t}),m.jsx("div",{className:"space-y-4",children:e})]}),Vr=({title:t,description:e,icon:n,onClick:r})=>m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-lighter",onClick:r,children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t}),m.jsx("p",{className:"text-xs text-text-secondary",children:e})]}),n?m.jsx("i",{className:`${n} text-text-secondary text-xl`}):null]}),df=({title:t,description:e,enabled:n,onToggle:r})=>m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-lighter",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:t}),m.jsx("p",{className:"text-xs text-text-secondary",children:e})]}),m.jsx(QD,{checked:n,onCheckedChange:r})]});function SQ(){const{currentUser:t,logOut:e}=gc(),[n,r]=ro(),{toast:s}=Im();A.useEffect(()=>{t||r("/")},[t,r]);const i=async()=>{try{await e(),r("/")}catch(l){console.error("Logout error:",l)}},o=(l,c)=>{s({title:`${l} ${c?"enabled":"disabled"}`,description:"Your preference has been saved."})},a=l=>{s({title:l,description:"This feature is coming soon."})};return t?m.jsxs("div",{className:"settings-screen",children:[m.jsx("header",{className:"bg-dark-surface p-4",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{className:"mr-3 text-white",onClick:()=>r("/dashboard"),children:m.jsx("i",{className:"ri-arrow-left-line text-xl"})}),m.jsx("h1",{className:"text-2xl font-bold text-white font-rajdhani",children:"SETTINGS"})]})})}),m.jsxs("div",{className:"p-4 container mx-auto mb-20",children:[m.jsxs(uf,{title:"ACCOUNT SETTINGS",children:[m.jsx(Vr,{title:"Profile Information",description:"Update your personal details",icon:"ri-arrow-right-s-line",onClick:()=>a("Profile Information")}),m.jsx(Vr,{title:"Password & Security",description:"Manage your login details",icon:"ri-arrow-right-s-line",onClick:()=>a("Password & Security")}),m.jsx(Vr,{title:"Connected Accounts",description:"Link your social accounts",icon:"ri-arrow-right-s-line",onClick:()=>a("Connected Accounts")}),m.jsx(Vr,{title:"Delete Account",description:"Permanently remove your data",icon:"ri-arrow-right-s-line",onClick:()=>a("Delete Account")})]}),m.jsxs(uf,{title:"NOTIFICATION SETTINGS",children:[m.jsx(df,{title:"Tournament Reminders",description:"Get alerts before your tournaments",enabled:!0,onToggle:l=>o("Tournament Reminders",l)}),m.jsx(df,{title:"Match Results",description:"Notifications for match outcomes",enabled:!0,onToggle:l=>o("Match Results",l)}),m.jsx(df,{title:"Friend Requests",description:"Alerts for new friend connections",enabled:!1,onToggle:l=>o("Friend Requests",l)}),m.jsx(df,{title:"Marketing Emails",description:"Updates and promotional offers",enabled:!1,onToggle:l=>o("Marketing Emails",l)})]}),m.jsxs(uf,{title:"APP SETTINGS",children:[m.jsx(Vr,{title:"Language",description:"English (United States)",icon:"ri-arrow-right-s-line",onClick:()=>a("Language")}),m.jsx(Vr,{title:"Theme",description:"Dark mode",icon:"ri-arrow-right-s-line",onClick:()=>a("Theme")}),m.jsx(Vr,{title:"Data Usage",description:"Manage app data settings",icon:"ri-arrow-right-s-line",onClick:()=>a("Data Usage")})]}),m.jsxs(uf,{title:"",children:[m.jsx(Vr,{title:"Help & Support",description:"Get assistance with app issues",icon:"ri-arrow-right-s-line",onClick:()=>a("Help & Support")}),m.jsx(Vr,{title:"Privacy Policy",description:"Read our privacy terms",icon:"ri-arrow-right-s-line",onClick:()=>a("Privacy Policy")}),m.jsx(Vr,{title:"Terms of Service",description:"Read our user agreement",icon:"ri-arrow-right-s-line",onClick:()=>a("Terms of Service")})]}),m.jsxs(wr,{onClick:i,className:"gaming-btn w-full bg-error hover:bg-error/90 text-white font-bold py-3 px-4 rounded-lg mt-2 mb-6 font-rajdhani flex items-center justify-center",children:[m.jsx("i",{className:"ri-logout-box-line mr-2"})," LOGOUT"]}),m.jsx("p",{className:"text-center text-text-secondary text-sm",children:"App Version 1.0.0"})]}),m.jsx(fh,{})]}):null}function bQ(){const[t]=ro(),{currentUser:e}=gc();if(!e&&t!=="/")return window.location.href="/",null;if(e&&t==="/")return window.location.href="/dashboard",null;const n=e&&t!=="/";return m.jsxs("div",{className:"min-h-screen bg-dark text-text-primary",children:[n&&m.jsx(fh,{}),m.jsx("main",{className:n?"pt-16 px-4 md:px-8 lg:px-12":"",children:m.jsxs(CF,{children:[m.jsx(ti,{path:"/",component:hK}),m.jsx(ti,{path:"/dashboard",component:aQ}),m.jsx(ti,{path:"/tournaments",component:dQ}),m.jsx(ti,{path:"/tournament/:id",component:uQ}),m.jsx(ti,{path:"/notifications",component:lQ}),m.jsx(ti,{path:"/profile",component:_Q}),m.jsx(ti,{path:"/settings",component:SQ}),m.jsx(ti,{component:vU})]})})]})}function kQ(){return m.jsx(qF,{client:aV,children:m.jsx(uK,{children:m.jsxs(hU,{children:[m.jsx($j,{}),m.jsx(bQ,{})]})})})}var RQ=(t,e,n,r,s,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function d(g){(Array.isArray(t)?t:[t]).forEach(w=>{let _=w==="class",x=_&&i?s.map(E=>i[E]||E):s;_?(l.classList.remove(...x),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(w,g)}),h(g)}function h(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(e)||n,w=o&&g==="system"?f():g;d(w)}catch{}},nb=["light","dark"],YD="(prefers-color-scheme: dark)",AQ=typeof window>"u",ZD=A.createContext(void 0),PQ=t=>A.useContext(ZD)?A.createElement(A.Fragment,null,t.children):A.createElement(OQ,{...t}),NQ=["light","dark"],OQ=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=NQ,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d,scriptProps:h})=>{let[f,g]=A.useState(()=>MQ(s,o)),[w,_]=A.useState(()=>f==="system"?Ny():f),x=l?Object.values(l):i,E=A.useCallback(M=>{let F=M;if(!F)return;M==="system"&&n&&(F=Ny());let C=l?l[F]:F,T=e?LQ(d):null,S=document.documentElement,R=O=>{O==="class"?(S.classList.remove(...x),C&&S.classList.add(C)):O.startsWith("data-")&&(C?S.setAttribute(O,C):S.removeAttribute(O))};if(Array.isArray(a)?a.forEach(R):R(a),r){let O=nb.includes(o)?o:null,P=nb.includes(F)?F:O;S.style.colorScheme=P}T==null||T()},[d]),v=A.useCallback(M=>{let F=typeof M=="function"?M(f):M;g(F);try{localStorage.setItem(s,F)}catch{}},[f]),I=A.useCallback(M=>{let F=Ny(M);_(F),f==="system"&&n&&!t&&E("system")},[f,t]);A.useEffect(()=>{let M=window.matchMedia(YD);return M.addListener(I),I(M),()=>M.removeListener(I)},[I]),A.useEffect(()=>{let M=F=>{F.key===s&&(F.newValue?g(F.newValue):v(o))};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[v]),A.useEffect(()=>{E(t??f)},[t,f]);let N=A.useMemo(()=>({theme:f,setTheme:v,forcedTheme:t,resolvedTheme:f==="system"?w:f,themes:n?[...i,"system"]:i,systemTheme:n?w:void 0}),[f,v,t,w,n,i]);return A.createElement(ZD.Provider,{value:N},A.createElement(DQ,{forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:o,value:l,themes:i,nonce:d,scriptProps:h}),c)},DQ=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,e,i,t,a,o,r,s]).slice(1,-1);return A.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${RQ.toString()})(${d})`}})}),MQ=(t,e)=>{if(AQ)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},LQ=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Ny=t=>(t||(t=window.matchMedia(YD)),t.matches?"dark":"light");Ck(document.getElementById("root")).render(m.jsx(PQ,{attribute:"class",defaultTheme:"dark",children:m.jsx(kQ,{})}));
